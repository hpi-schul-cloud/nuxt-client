{"version":3,"file":"src_app_features_dialogs_dialog-modules_xml-app-properties-dialog_xml-app-properties-dialog_m-8868bb.js","mappings":"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","sources":["./src/app/features/dialogs/dialog-modules/xml-app-properties-dialog/xml-app-properties-dialog.component.ts","./src/app/features/dialogs/dialog-modules/xml-app-properties-dialog/xml-app-properties-dialog.component.html","./src/app/features/dialogs/dialog-modules/xml-app-properties-dialog/xml-app-properties-dialog.module.ts"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { DialogButton, RestAdminService } from '../../../../core-module/core.module';\nimport { Toast } from '../../../../services/toast';\nimport { CARD_DIALOG_DATA, Closable } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport {\n    XmlAppPropertiesDialogData,\n    XmlAppPropertiesDialogResult,\n} from './xml-app-properties-dialog-data';\n\nconst MULTILINE_PROPERTIES = ['custom_html_headers', 'public_key'];\n\n@Component({\n    selector: 'es-xml-app-properties-dialog',\n    templateUrl: './xml-app-properties-dialog.component.html',\n    styleUrls: ['./xml-app-properties-dialog.component.scss'],\n})\nexport class XmlAppPropertiesDialogComponent implements OnInit {\n    xmlAppAdditionalPropertyName: string;\n    xmlAppAdditionalPropertyValue: string;\n\n    readonly propertyKeys = Object.keys(this.data.properties);\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: XmlAppPropertiesDialogData,\n        private dialogRef: CardDialogRef<XmlAppPropertiesDialogData, XmlAppPropertiesDialogResult>,\n        private admin: RestAdminService,\n        private toast: Toast,\n    ) {}\n\n    ngOnInit(): void {\n        this.dialogRef.patchConfig({\n            buttons: [\n                new DialogButton('CANCEL', { color: 'standard' }, () => {\n                    this.dialogRef.close(null);\n                }),\n                new DialogButton('APPLY', { color: 'primary' }, () => {\n                    this.saveApp();\n                }),\n            ],\n        });\n    }\n\n    isMultilineProperty(key: string) {\n        if (MULTILINE_PROPERTIES.includes(key)) {\n            return true;\n        }\n        return this.data.properties[key].includes('\\n');\n    }\n\n    removeAppProperty(pos: number) {\n        const key = this.propertyKeys[pos];\n        this.propertyKeys.splice(pos, 1);\n        delete this.data.properties[key];\n    }\n\n    onChange() {\n        this.dialogRef.patchConfig({ closable: Closable.Standard });\n    }\n\n    private saveApp() {\n        this.dialogRef.patchState({ isLoading: true });\n        if (this.xmlAppAdditionalPropertyName && this.xmlAppAdditionalPropertyName.trim()) {\n            this.data.properties[this.xmlAppAdditionalPropertyName.trim()] =\n                this.xmlAppAdditionalPropertyValue;\n        }\n        this.admin.updateApplicationXML(this.data.appXml, this.data.properties).subscribe(\n            () => {\n                this.toast.toast('ADMIN.APPLICATIONS.APP_SAVED', {\n                    xml: this.data.appXml,\n                });\n                this.dialogRef.patchState({ isLoading: false });\n                this.dialogRef.close(true);\n            },\n            (error: any) => {\n                this.dialogRef.patchState({ isLoading: false });\n                this.toast.error(error);\n            },\n        );\n    }\n}\n","<div class=\"warning\">{{ 'ADMIN.APPLICATIONS.APP_XML_WARNING' | translate }}</div>\n<div *ngFor=\"let value of propertyKeys; let i = index\" class=\"appEditor\">\n  <mat-form-field class=\"mat-input-group\">\n    <mat-label>{{ value }}</mat-label>\n    <textarea\n      matInput\n      cdkTextareaAutosize\n      cdkAutosizeMinRows=\"2\"\n      cdkAutosizeMaxRows=\"5\"\n      *ngIf=\"isMultilineProperty(value)\"\n      class=\"materialize-textarea\"\n      [(ngModel)]=\"data.properties[value]\"\n      (ngModelChange)=\"onChange()\"\n    ></textarea>\n    <input\n      matInput\n      *ngIf=\"!isMultilineProperty(value)\"\n      type=\"text\"\n      [(ngModel)]=\"data.properties[value]\"\n      (ngModelChange)=\"onChange()\"\n    />\n    <!-- Api does currently not support deleting -->\n    <i class=\"material-icons clickable\" (click)=\"removeAppProperty(i)\" *ngIf=\"false\">delete</i>\n    <mat-hint *ngIf=\"data.appName\">{{\n      'ADMIN.APPLICATIONS.' + data.appName + '.' + value | translate : { fallback: '' }\n    }}</mat-hint>\n  </mat-form-field>\n</div>\n<div class=\"add-property\">\n  <h4 class=\"property mat-heading-4 mat-heading-underline\">\n    {{ 'ADMIN.APPLICATIONS.ADD_PROPERTY' | translate }}\n  </h4>\n  <mat-form-field>\n    <mat-label>{{ 'ADMIN.APPLICATIONS.PROPERTY_NAME_PLACEHOLDER' | translate }}</mat-label>\n    <input\n      matInput\n      type=\"text\"\n      id=\"additionalProperty\"\n      [(ngModel)]=\"xmlAppAdditionalPropertyName\"\n      (ngModelChange)=\"onChange()\"\n    />\n    <mat-hint *ngIf=\"data.appName\">{{\n      'ADMIN.APPLICATIONS.' + data.appName + '.' + xmlAppAdditionalPropertyName\n        | translate : { fallback: '' }\n    }}</mat-hint>\n  </mat-form-field>\n  <mat-form-field>\n    <mat-label>{{ 'ADMIN.APPLICATIONS.PROPERTY_VALUE_PLACEHOLDER' | translate }}</mat-label>\n    <input\n      matInput\n      type=\"text\"\n      [(ngModel)]=\"xmlAppAdditionalPropertyValue\"\n      (ngModelChange)=\"onChange()\"\n    />\n  </mat-form-field>\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { XmlAppPropertiesDialogComponent } from './xml-app-properties-dialog.component';\n\nexport { XmlAppPropertiesDialogComponent };\n\n@NgModule({\n    declarations: [XmlAppPropertiesDialogComponent],\n    imports: [SharedModule],\n})\nexport class XmlAppPropertiesDialogModule {}\n"],"names":["DialogButton","CARD_DIALOG_DATA","Closable","i0","ɵɵelementStart","ɵɵlistener","XmlAppPropertiesDialogComponent_div_3_textarea_4_Template_textarea_ngModelChange_0_listener","$event","ɵɵrestoreView","_r9","value_r2","ɵɵnextContext","$implicit","ctx_r8","ɵɵresetView","data","properties","ctx_r11","onChange","ɵɵelementEnd","ɵɵproperty","ctx_r4","XmlAppPropertiesDialogComponent_div_3_input_5_Template_input_ngModelChange_0_listener","_r14","ctx_r13","ctx_r16","ctx_r5","XmlAppPropertiesDialogComponent_div_3_i_6_Template_i_click_0_listener","_r20","i_r3","index","ctx_r18","removeAppProperty","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind2","ctx_r7","appName","ɵɵpureFunction0","_c0","ɵɵtemplate","XmlAppPropertiesDialogComponent_div_3_textarea_4_Template","XmlAppPropertiesDialogComponent_div_3_input_5_Template","XmlAppPropertiesDialogComponent_div_3_i_6_Template","XmlAppPropertiesDialogComponent_div_3_mat_hint_7_Template","ctx_r0","isMultilineProperty","ctx_r1","xmlAppAdditionalPropertyName","MULTILINE_PROPERTIES","XmlAppPropertiesDialogComponent","constructor","dialogRef","admin","toast","propertyKeys","Object","keys","ngOnInit","patchConfig","buttons","color","close","saveApp","key","includes","pos","splice","closable","Standard","patchState","isLoading","trim","xmlAppAdditionalPropertyValue","updateApplicationXML","appXml","subscribe","xml","error","_","ɵɵdirectiveInject","i1","CardDialogRef","i2","RestAdminService","i3","Toast","_2","selectors","decls","vars","consts","template","XmlAppPropertiesDialogComponent_Template","rf","ctx","XmlAppPropertiesDialogComponent_div_3_Template","XmlAppPropertiesDialogComponent_Template_input_ngModelChange_12_listener","XmlAppPropertiesDialogComponent_mat_hint_13_Template","XmlAppPropertiesDialogComponent_Template_input_ngModelChange_18_listener","ɵɵpipeBind1","ɵɵtextInterpolate1","SharedModule","XmlAppPropertiesDialogModule","_3","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}