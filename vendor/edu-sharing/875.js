"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[875],{10875:(Zn,L,c)=>{c.r(L),c.d(L,{ShareDialogComponent:()=>Tn,ShareDialogModule:()=>vn});var z=c(50555),C=c(15861),g=c(52081),A=c(77504),r=c(81771),u=c(64634),P=c(90721),$=c(53461),U=c(86825),d=c(46680),e=c(65879),S=c(48098),h=c(96814),f=c(56223),H=c(17162),E=c(75986),T=c(12883),m=c(71365);function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-checkbox",1),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).$implicit,_=e.oxw(2);return e.KtG(_.restrictedAccessPermissions[l.key]=o)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngModel",i.restrictedAccessPermissions[t.key]),e.xp6(1),e.hij(" ",e.lcZ(2,2,"WORKSPACE.SHARE.RESTRICTED_ACCESS.PERMISSION."+t.key)," ")}}function ee(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"h5",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"es-info-message",7),e.ALo(5,"translate"),e.YNc(6,X,3,4,"mat-checkbox",8),e.ALo(7,"keyvalue"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"WORKSPACE.SHARE.RESTRICTED_ACCESS.ADDITIONAL_PERMISSIONS")," "),e.xp6(2),e.s9C("message",e.lcZ(5,5,"WORKSPACE.SHARE.RESTRICTED_ACCESS.ADDITIONAL_PERMISSIONS_INFO")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,7,t.restrictedAccessPermissions))}}let w=(()=>{class n{constructor(t){this.nodeService=t,this.RESTRICTED_ACCESS_PERMISSIONS=["ReadAll","DownloadContent","Print"]}ngOnChanges(t){this.restrictedAccess=this.node.properties[d.u.CCM_PROP_RESTRICTED_ACCESS]?.[0]||!1,this.restrictedAccessPermissions={};const i=this.node.properties[d.u.CCM_PROP_RESTRICTED_ACCESS_PERMISSIONS]||[];this.RESTRICTED_ACCESS_PERMISSIONS.forEach(o=>{this.restrictedAccessPermissions[o]=i.includes(o)}),"file-pdf"!==this.node.mediatype&&delete this.restrictedAccessPermissions.Print}ngOnInit(){}save(){var t=this;return(0,C.Z)(function*(){const i={[d.u.CCM_PROP_RESTRICTED_ACCESS]:[t.restrictedAccess+""],[d.u.CCM_PROP_RESTRICTED_ACCESS_PERMISSIONS]:Object.keys(t.restrictedAccessPermissions).filter(o=>!0===t.restrictedAccessPermissions[o])};t.node.properties={...t.node.properties,...i},yield t.nodeService.editNodeMetadata(t.node.ref.id,i).toPromise()})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(S.sX))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog-restricted-access"]],inputs:{node:"node"},features:[e.TTD],decls:10,vars:8,consts:[[1,"group-padding"],[3,"ngModel","ngModelChange"],["slot","label"],["slot","description",1,"description"],["class","additional-permissions",4,"ngIf"],[1,"additional-permissions"],[1,"mat-heading-5"],["mode","info",3,"message"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"mat-checkbox",1),e.NdJ("ngModelChange",function(l){return o.restrictedAccess=l}),e.TgZ(2,"es-multi-line-label"),e.ynx(3,2),e._uU(4),e.ALo(5,"translate"),e.BQk(),e.TgZ(6,"span",3),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.YNc(9,ee,8,9,"div",4),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngModel",o.restrictedAccess),e.xp6(3),e.hij(" ",e.lcZ(5,4,"WORKSPACE.SHARE.RESTRICTED_ACCESS.PRIMARY")," "),e.xp6(3),e.hij(" ",e.lcZ(8,6,"WORKSPACE.SHARE.RESTRICTED_ACCESS.SECONDARY")," "),e.xp6(2),e.Q6J("ngIf",o.restrictedAccess))},dependencies:[h.sg,h.O5,f.JJ,f.On,H.u,E.oG,T.w,h.Nd,m.X$],styles:[".group-padding[_ngcontent-%COMP%]{padding:30px 25px}.group-padding[_ngcontent-%COMP%]   .additional-permissions[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px}.group-padding[_ngcontent-%COMP%]   .additional-permissions[_ngcontent-%COMP%] > es-info-message[_ngcontent-%COMP%]{padding-bottom:10px}"]})}return n})();var te=c(91486),ne=c(1846),k=c(36692),Y=c(1189),ie=c(68504),oe=c(5491),O=c(32296),v=c(22557),K=c(64170),se=c(24516),ae=c(56263),x=c(87466),J=c(82599),M=c(74104),Q=c(4300),b=c(36028),re=c(47354),y=c(72079),B=c(19352);let W=(()=>{class n{constructor(t){this._elementRef=t,this.focused=new y.xQ,this._onFocus=()=>this.focused.next(this)}ngOnInit(){this._elementRef.nativeElement.addEventListener("focus",this._onFocus)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("focus",this._onFocus)}focus(){this.customFocusFunction?this.customFocusFunction():this._elementRef.nativeElement.focus()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","esWorkspaceShareFocusableOption",""]],inputs:{disabled:"disabled",customFocusFunction:"customFocusFunction"}})}return n})();var le=c(23680);const ce=["slideToggle"];function de(n,a){1&n&&e._UZ(0,"i",8)}function _e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",5),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l._setType(s.id))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"div"),e._UZ(4,"i",6),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,de,1,0,"i",7),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw();e.uIk("aria-checked",i._contains(t.id))("aria-label",e.lcZ(1,8,t.label))("aria-description",e.lcZ(2,10,t.description))("cdkFocusInitial",i._contains(t.id)?"":null),e.xp6(4),e.Q6J("esIcon",t.icon),e.xp6(1),e.hij(" ",e.lcZ(6,12,t.label),""),e.xp6(2),e.Q6J("ngIf",i._contains(t.id)),e.xp6(2),e.Oqu(e.lcZ(10,14,t.description))}}function pe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"mat-slide-toggle",10,11),e.NdJ("change",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s._setPublish(o))}),e.ALo(3,"translate"),e.TgZ(4,"div",12)(5,"i",13),e._uU(6,"public"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.s9C("title",e.lcZ(3,5,"WORKSPACE.SHARE.PUBLISHER_TOOLTIP")),e.Q6J("customFocusFunction",t.focus.bind(t))("ngModel",i._publish)("disabled",i._publishDisabled),e.xp6(7),e.Oqu(e.lcZ(9,7,"WORKSPACE.SHARE.PUBLISHER"))}}let q=(()=>{class n{constructor(){this.isDirectory=!1,this.canPublish=!0,this.onCancel=new e.vpe,this.onType=new e.vpe,this._options=[{id:"Consumer",label:"WORKSPACE.SHARE.TYPE_VIEWER",icon:"remove_red_eye",description:"WORKSPACE.SHARE.TYPE_VIEWER_DESCRIPTION"},{id:"Collaborator",label:"WORKSPACE.SHARE.TYPE_COWORKER",icon:"edit",description:"WORKSPACE.SHARE.TYPE_COWORKER_DESCRIPTION"},{id:"Coordinator",label:"WORKSPACE.SHARE.TYPE_COORDINATOR",icon:"work",description:"WORKSPACE.SHARE.TYPE_COORDINATOR_DESCRIPTION"}],this._destroyed$=new y.xQ}set selected(t){this._selected=t,setTimeout(()=>this._checkPublish(),10)}ngAfterViewInit(){this._slideToggle._elementRef.nativeElement.setAttribute("role","menuitemcheckbox"),this._keyManager=new Q.Em(this._menuItems).withWrap(),this._keyManager.tabOut.pipe((0,B.R)(this._destroyed$)).subscribe(()=>this._cancel()),this._keyManager.setActiveItem(this._getActiveIndex()),re.T(...this._menuItems.map(t=>t.focused)).subscribe(t=>this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}_handleKeydown(t){const i=t.keyCode,o=this._keyManager;if(i!==b.hY)return(i===b.LH||i===b.JH)&&o.setFocusOrigin("keyboard"),void o.onKeydown(t);t.preventDefault(),t.stopPropagation(),this._cancel()}_cancel(){this.onCancel.emit()}_setType(t){for(const{id:i}of this._options)this._contains(i)&&this._selected.splice(this._selected.indexOf(i),1);this._selected.push(t),setTimeout(()=>this._checkPublish(),10),this.onType.emit({permissions:this._selected,wasMain:!0})}_contains(t){return-1!=this._selected.indexOf(t)}_checkPublish(){this._publish=this._contains("CCPublish"),this._publishDisabled=this._contains("Coordinator"),this._contains("Coordinator")&&(this._publish=!0)}_setPublish(t){if(t.checked){if(this._contains("CCPublish"))return;this._selected.push("CCPublish")}else{if(!this._contains("CCPublish"))return;this._selected.splice(this._selected.indexOf("CCPublish"),1)}this.onType.emit({permissions:this._selected,wasMain:!1})}_getActiveIndex(){return this._options.findIndex(t=>this._selected.includes(t.id))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog-choose-type"]],viewQuery:function(i,o){if(1&i&&(e.Gf(ce,5),e.Gf(W,5)),2&i){let s;e.iGM(s=e.CRH())&&(o._slideToggle=s.first),e.iGM(s=e.CRH())&&(o._menuItems=s)}},hostBindings:function(i,o){1&i&&e.NdJ("keydown",function(l){return o._handleKeydown(l)})},inputs:{selected:"selected",isDirectory:"isDirectory",canPublish:"canPublish",ariaLabel:["aria-label","ariaLabel"]},outputs:{onCancel:"onCancel",onType:"onType"},decls:5,vars:4,consts:[[1,"dialog",3,"click"],["role","menu","cdkTrapFocus","","id","es-share-dialog-choose-type-menu",1,"more-open",3,"cdkTrapFocusAutoCapture"],["esWorkspaceShareFocusableOption","","role","menuitemradio",3,"click",4,"ngFor","ngForOf"],[1,"cdk-visually-hidden"],["class","publish-toggle",4,"ngIf"],["esWorkspaceShareFocusableOption","","role","menuitemradio",3,"click"],[3,"esIcon"],["icon","check","class","selected",4,"ngIf"],["icon","check",1,"selected"],[1,"publish-toggle"],["esWorkspaceShareFocusableOption","",1,"collection-item",3,"customFocusFunction","ngModel","disabled","title","change"],["slideToggle",""],[1,"toggle"],[1,"material-icons"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o._cancel()}),e.qZA(),e.TgZ(1,"div",1),e.YNc(2,_e,11,16,"mat-option",2),e._UZ(3,"hr",3),e.YNc(4,pe,10,9,"div",4),e.qZA()),2&i&&(e.xp6(1),e.Q6J("cdkTrapFocusAutoCapture",!0),e.uIk("aria-label",o.ariaLabel),e.xp6(1),e.Q6J("ngForOf",o._options),e.xp6(2),e.Q6J("ngIf",!0))},dependencies:[Q.mK,h.sg,h.O5,g.ar,f.JJ,f.On,le.ey,J.Rr,W,m.X$],styles:[".more-open[_ngcontent-%COMP%]{position:relative;z-index:131;background-color:#fff;box-shadow:0 3px 3px #0000001a}.more-open[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--palette-foreground-text)}.more-open[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:-2px;font-size:10pt}.more-open[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;width:100%}.more-open[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:0;top:5px}.more-open[_ngcontent-%COMP%]   .publish-toggle[_ngcontent-%COMP%]{background-color:#eee;padding:20px 10px;display:flex;justify-content:flex-end}.more-open[_ngcontent-%COMP%]   .publish-toggle[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{background-color:transparent}.more-open[_ngcontent-%COMP%]   .publish-toggle[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:flex;align-items:center}.more-open[_ngcontent-%COMP%]   .publish-toggle[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{top:0;left:0;margin-right:5px}.more-open[_ngcontent-%COMP%]   mat-option[_ngcontent-%COMP%]     .mdc-list-item__primary-text{flex-direction:column;align-items:flex-start;white-space:initial;border:none;outline:none}.more-open[_ngcontent-%COMP%]   mat-option[_ngcontent-%COMP%]     .mdc-list-item__primary-text div{display:flex;align-items:center;color:var(--primary);font-weight:700}.more-open[_ngcontent-%COMP%]   mat-option[_ngcontent-%COMP%]     .mdc-list-item__primary-text div i{margin-right:8px}.more-open[_ngcontent-%COMP%]   mat-option[_ngcontent-%COMP%]     .mdc-list-item__primary-text p{color:var(--textLight);padding:0 28px;margin:8px 0;text-align:left;line-height:1.5}"]})}return n})();var F=c(92596),he=c(98588),G=c(44431);function ge(n,a){1&n&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"hr"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",15),e._UZ(7,"hr"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"WORKSPACE.SHARE.DELETED")))}function ue(n,a){1&n&&(e.TgZ(0,"i",17),e.ALo(1,"translate"),e._uU(2,"public"),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"WORKSPACE.SHARE.PUBLISHER"))}const me=function(n){return{permissions:n}};function Ce(n,a){if(1&n&&(e.TgZ(0,"div",18),e.ALo(1,"translate"),e.TgZ(2,"div")(3,"i",19),e._uU(4,"help_outline"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",20),e.qZA()()),2&n){const t=e.oxw();e.s9C("title",e.xi3(1,2,"WORKSPACE.SHARE.TYPE_UNKNOWN_DESCRIPTION",e.VKq(7,me,t._permission.permissions.join(", ")))),e.xp6(6),e.Oqu(e.lcZ(7,5,"WORKSPACE.SHARE.TYPE_UNKNOWN"))}}function fe(n,a){1&n&&(e.ynx(0),e.TgZ(1,"i",25),e._uU(2,"home"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"WORKSPACE.SHARE.GROUP_OWNER")))}function Pe(n,a){1&n&&(e.TgZ(0,"span",20)(1,"i",25),e._uU(2,"keyboard_arrow_down"),e.qZA()())}function Oe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"i",25),e._uU(2,"remove_red_eye"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Pe,3,0,"span",26),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,2,"WORKSPACE.SHARE.TYPE_VIEWER")),e.xp6(2),e.Q6J("ngIf",!t.readOnly&&!t.isEveryone)}}function xe(n,a){1&n&&(e.TgZ(0,"span",20)(1,"i",25),e._uU(2,"keyboard_arrow_down"),e.qZA()())}function Ae(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"i",25),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,xe,3,0,"span",26),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,2,"WORKSPACE.SHARE.TYPE_COWORKER")),e.xp6(2),e.Q6J("ngIf",!t.readOnly&&!t.isEveryone)}}function Se(n,a){1&n&&(e.TgZ(0,"span",20)(1,"i",25),e._uU(2,"keyboard_arrow_down"),e.qZA()())}function Ee(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"i",25),e._uU(2,"work"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Se,3,0,"span",26),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,2,"WORKSPACE.SHARE.TYPE_COORDINATOR")),e.xp6(2),e.Q6J("ngIf",!t.readOnly&&!t.isEveryone)}}function Te(n,a){1&n&&e._UZ(0,"div")}const j=function(n){return{user:n}};function ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-share-dialog-choose-type",27),e.NdJ("onCancel",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.showChooseType=!1)})("onType",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeType(o))}),e.ALo(1,"translate"),e.ALo(2,"permissionName"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("aria-label",e.xi3(1,4,"WORKSPACE.SHARE.TYPE_MENU_LABEL",e.VKq(9,j,e.lcZ(2,7,t._permission))))("selected",t._permission.permissions)("isDirectory",t.isDirectory)("canPublish",t.canPublish)}}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.chooseType())}),e.ALo(2,"translate"),e.ALo(3,"permissionName"),e.YNc(4,fe,6,3,"ng-container",23),e.YNc(5,Oe,7,4,"ng-container",23),e.YNc(6,Ae,7,4,"ng-container",23),e.YNc(7,Ee,7,4,"ng-container",23),e.qZA(),e.YNc(8,Te,1,0,"div",23),e.YNc(9,ve,3,11,"es-share-dialog-choose-type",24),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.readOnly),e.uIk("aria-label",e.xi3(2,10,"WORKSPACE.SHARE.TYPE_MENU_LABEL",e.VKq(15,j,e.lcZ(3,13,t._permission))))("aria-expanded",t.showChooseType||null)("aria-controls",t.showChooseType?"es-share-dialog-choose-type-menu":null),e.xp6(3),e.Q6J("ngIf",t._permission.permissions.indexOf("Owner")>-1),e.xp6(1),e.Q6J("ngIf",t._permission.permissions.indexOf("Consumer")>-1),e.xp6(1),e.Q6J("ngIf",t._permission.permissions.indexOf("Collaborator")>-1),e.xp6(1),e.Q6J("ngIf",t._permission.permissions.indexOf("Coordinator")>-1||t._permission.permissions.indexOf("All")>-1),e.xp6(1),e.Q6J("ngIf",0==t._permission.permissions.length),e.xp6(1),e.Q6J("ngIf",t.showChooseType)}}function be(n,a){1&n&&(e.TgZ(0,"i",31),e._uU(1,"cancel"),e.qZA())}function ye(n,a){1&n&&(e.TgZ(0,"i",31),e._uU(1,"undo"),e.qZA())}function Ie(n,a){1&n&&(e._UZ(0,"i",32),e.ALo(1,"translate")),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"WORKSPACE.SHARE.INHERIT_HINT"))}function Re(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.remove())}),e.YNc(1,be,2,0,"i",29),e.YNc(2,ye,2,0,"i",29),e.YNc(3,Ie,2,3,"i",30),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.readOnly),e.xp6(1),e.Q6J("ngIf",!t.inherit&&!t.isDeleted),e.xp6(1),e.Q6J("ngIf",!t.inherit&&t.isDeleted),e.xp6(1),e.Q6J("ngIf",t.inherit)}}const Ze=function(){return{field:"secondary"}};let Ne=(()=>{class n{constructor(){this.invalidPermission=!1,this.inherit=!1,this.readOnly=!0,this.showDelete=!0,this.isDeleted=!1,this.isDirectory=!1,this.canPublish=!0,this.onRemove=new e.vpe,this.onType=new e.vpe,this.showChooseType=!1}set permission(t){this._permission=t;let i=t.permissions.indexOf(r.u6.PERMISSION_COORDINATOR),o=t.permissions.indexOf(r.u6.PERMISSION_COLLABORATOR);if(-1!=i){let l=t.permissions.indexOf(r.u6.PERMISSION_COLLABORATOR);-1!=l&&t.permissions.splice(l,1)}if(-1!=i||-1!=o){let l=t.permissions.indexOf(r.u6.PERMISSION_CONSUMER);-1!=l&&t.permissions.splice(l,1)}this.isEveryone=t.authority.authorityName==r.u6.AUTHORITY_EVERYONE;let s=this._permission.permissions.slice();-1!=s.indexOf(r.u6.ACCESS_CC_PUBLISH)&&s.splice(s.indexOf(r.u6.ACCESS_CC_PUBLISH),1),this.invalidPermission=1!=s.length||s[0]!=r.u6.PERMISSION_OWNER&&s[0]!=r.u6.PERMISSION_CONSUMER&&s[0]!=r.u6.PERMISSION_COLLABORATOR&&s[0]!=r.u6.PERMISSION_COORDINATOR}remove(){this.showDelete&&this.onRemove.emit()}chooseType(){this.readOnly||this.isEveryone||(this.showChooseType=!0)}changeType(t){this.onType.emit(t),t.wasMain&&(this.showChooseType=!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog-permission"]],inputs:{permission:"permission",inherit:"inherit",readOnly:"readOnly",showDelete:"showDelete",isDeleted:"isDeleted",isDirectory:"isDirectory",canPublish:"canPublish"},outputs:{onRemove:"onRemove",onType:"onType"},decls:18,vars:16,consts:[[1,"group"],["class","deleted-info",4,"ngIf"],[1,"container"],[1,"icon"],["size","xsmall",3,"user"],[1,"permissionName"],[1,"primary"],[1,"secondary"],[1,"permission"],[1,"publish"],["class","material-icons",3,"matTooltip",4,"ngIf"],[3,"title",4,"ngIf"],["class","permission-type",4,"ngIf"],["class","remove","mat-icon-button","",3,"disabled","click",4,"ngIf"],[1,"deleted-info"],[1,"line"],[1,"info"],[1,"material-icons",3,"matTooltip"],[3,"title"],["aria-hidden","true",1,"material-icons","align"],[1,"select"],[1,"permission-type"],["mat-button","","role","combobox","aria-haspopup","true",3,"disabled","click"],[4,"ngIf"],["class","typeAdd",3,"aria-label","selected","isDirectory","canPublish","onCancel","onType",4,"ngIf"],[1,"material-icons","align"],["class","select",4,"ngIf"],[1,"typeAdd",3,"aria-label","selected","isDirectory","canPublish","onCancel","onType"],["mat-icon-button","",1,"remove",3,"disabled","click"],["class","material-icons",4,"ngIf"],["class","inherit","esIcon","edu-inherit",3,"matTooltip",4,"ngIf"],[1,"material-icons"],["esIcon","edu-inherit",1,"inherit",3,"matTooltip"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.YNc(1,ge,8,3,"div",1),e.TgZ(2,"div",2)(3,"div",3),e._UZ(4,"es-user-avatar",4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e._uU(7),e.ALo(8,"permissionName"),e.qZA(),e.TgZ(9,"span",7),e._uU(10),e.ALo(11,"permissionName"),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9),e.YNc(14,ue,3,3,"i",10),e.qZA(),e.YNc(15,Ce,9,9,"div",11),e.YNc(16,Me,10,17,"div",12),e.qZA(),e.YNc(17,Re,4,4,"button",13),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("ngIf",o.isDeleted),e.xp6(3),e.Q6J("user",o._permission),e.xp6(3),e.Oqu(e.lcZ(8,10,o._permission)),e.xp6(3),e.Oqu(e.xi3(11,12,o._permission,e.DdM(15,Ze))),e.xp6(2),e.ekj("readOnly",o.readOnly),e.xp6(2),e.Q6J("ngIf",o._permission.permissions.indexOf("Coordinator")>-1||o._permission.permissions.indexOf("CCPublish")>-1),e.xp6(1),e.Q6J("ngIf",o.invalidPermission),e.xp6(1),e.Q6J("ngIf",!o.invalidPermission),e.xp6(1),e.Q6J("ngIf",o.showDelete))},dependencies:[h.O5,F.gM,g.ar,O.lW,O.RK,he.k,q,m.X$,G.B],styles:[".container[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;padding:3px 0;align-items:center}.container[_ngcontent-%COMP%] > .icon[_ngcontent-%COMP%]{position:relative;padding-left:10px}.container[_ngcontent-%COMP%] > .permissionName[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;min-height:40px;flex-grow:1;padding:3px 10px}.container[_ngcontent-%COMP%] > .permissionName[_ngcontent-%COMP%] > .primary[_ngcontent-%COMP%]{word-break:break-all;max-height:1.5em;line-height:1.5em;overflow:hidden}.container[_ngcontent-%COMP%] > .permissionName[_ngcontent-%COMP%] > .secondary[_ngcontent-%COMP%]{font-size:80%;color:var(--textLight);margin-top:-3px;min-height:3px}.container[_ngcontent-%COMP%]   .permission-type[_ngcontent-%COMP%]{position:relative}.deleted-info[_ngcontent-%COMP%]{width:calc(100% + 20px);height:100%;position:absolute;align-items:center;left:-15px;top:0;z-index:1;display:flex;border-radius:25px;font-weight:700;background-color:#fff9;-webkit-backdrop-filter:blur(1px) saturate(50%);backdrop-filter:blur(1px) saturate(50%)}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{flex-grow:1;padding:0 15px}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:last-child{padding-right:60px}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;background:#000;height:1px}.publish[_ngcontent-%COMP%]{padding:0 5px}.group[_ngcontent-%COMP%]{position:relative}.group[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{width:100%}.readOnly[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--textLight)}.permission[_ngcontent-%COMP%]{justify-content:flex-end}.permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 5px}.icon[_ngcontent-%COMP%]{padding-right:5px}.typeAdd[_ngcontent-%COMP%]{position:absolute;right:20px;width:310px!important;top:-60px}.select[_ngcontent-%COMP%]{width:25px;display:inline-flex;padding:0 2px}.icon[_ngcontent-%COMP%], .remove[_ngcontent-%COMP%], .inherit[_ngcontent-%COMP%]{min-width:24px}.remove[_ngcontent-%COMP%]{position:relative;z-index:2}.remove[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .type[_ngcontent-%COMP%]{color:var(--textLight)}.remove[_ngcontent-%COMP%]   .inherit[_ngcontent-%COMP%]{color:#42ca8d;font-size:21px}@media screen and (max-width: 700px){.permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]})}return n})();var De=c(54699),Le=c(97734),Ue=(c(2895),c(27661)),V=c(96931),He=c(4254),we=c(34997),ke=c(61871),Ye=c(57857),Ke=c(76754),Je=c(22941),Qe=c(65928),Be=c(32110),We=c(94194);let qe=(()=>{class n{transform(t,i=null){return t.properties[d.u.CCM_PROP_AUTHOR_FREETEXT]?.[0]?t.properties[d.u.CCM_PROP_AUTHOR_FREETEXT]?.[0]:t.properties[d.u.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0]?new g._W(t.properties[d.u.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0]).getDisplayName():this.translate.instant("MDS.AUTHOR_UNSET")}constructor(t){this.translate=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(m.sK,16))};static#t=this.\u0275pipe=e.Yjl({name:"nodeAuthorName",type:n,pure:!0})}return n})();const Fe=["shareModeCopyRef"],Ge=["shareModeDirectRef"];function je(n,a){1&n&&(e.ynx(0),e._UZ(1,"br")(2,"br"),e._uU(3),e.ALo(4,"translate"),e.BQk()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"WORKSPACE.SHARE.PUBLISH.LICENSE_INFO_COPY")," "))}const Ve=function(n){return{license:n}};function ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-info-message",9),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"nodeAuthorName"),e.YNc(5,je,5,3,"ng-container",2),e.TgZ(6,"div")(7,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openLicense())}),e._UZ(8,"i",11),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.lnq(" ",e.xi3(2,5,"WORKSPACE.SHARE.PUBLISH.LICENSE_INFO",e.VKq(14,Ve,t.getLicenseText()))," ",e.lcZ(3,8,"WORKSPACE.SHARE.PUBLISH.LICENSE_AUTHOR"),": ",e.lcZ(4,10,t.node)," "),e.xp6(4),e.Q6J("ngIf",t.shareModeCopy),e.xp6(4),e.hij(" ",e.lcZ(10,12,"WORKSPACE.SHARE.PUBLISH.SET_LICENSE")," ")}}function $e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-info-message",12),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div")(4,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openMetadata())}),e._UZ(5,"i",11),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,2,"WORKSPACE.SHARE.PUBLISH.MISSING_METADATA",t.mdsCompletion)," "),e.xp6(5),e.hij(" ",e.lcZ(7,5,"WORKSPACE.SHARE.PUBLISH.OPEN_METADATA")," ")}}function Xe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-info-message",14),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div")(4,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openLicense())}),e._UZ(5,"i",11),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"WORKSPACE.SHARE.PUBLISH.LICENSE_REQUIRED")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"WORKSPACE.SHARE.PUBLISH.SET_LICENSE")," "))}function et(n,a){1&n&&(e.TgZ(0,"es-info-message",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.PUBLISH.AUTHOR_REQUIRED")," "))}function tt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-info-message",12),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div")(4,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openLicense())}),e._UZ(5,"i",11),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"WORKSPACE.SHARE.PUBLISH.NO_LICENSE")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"WORKSPACE.SHARE.PUBLISH.SET_LICENSE")," "))}function nt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ze,11,16,"es-info-message",4),e.YNc(2,$e,8,7,"es-info-message",3),e.YNc(3,Xe,8,6,"es-info-message",8),e.YNc(4,et,3,3,"es-info-message",8),e.YNc(5,tt,8,6,"es-info-message",3),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getLicense()),e.xp6(1),e.Q6J("ngIf",(null==t.mdsCompletion?null:t.mdsCompletion.completed)!==(null==t.mdsCompletion?null:t.mdsCompletion.total)),e.xp6(1),e.Q6J("ngIf",t.isLicenseMissing()),e.xp6(1),e.Q6J("ngIf",t.isAuthorMissing()),e.xp6(1),e.Q6J("ngIf",!t.getLicense()&&!t.isLicenseMissing())}}function it(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-info-message",12),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div")(4,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDisableInherit.emit())}),e._UZ(5,"i",11),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"WORKSPACE.SHARE.PUBLISH.INHERITED")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"WORKSPACE.SHARE.PUBLISH.DISABLE_INHERIT")," "))}function ot(n,a){1&n&&(e.TgZ(0,"es-info-message",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.PUBLISH.COPY_ACTIVE")," "))}function st(n,a){1&n&&(e.TgZ(0,"es-info-message",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.PUBLISH.NO_PUBLISH_COPY_PERMISSION")," "))}function at(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"mat-radio-group",20),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.republish=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.setRepublish())}),e.TgZ(4,"mat-radio-button",25)(5,"es-multi-line-label"),e.ynx(6,18),e._uU(7),e.ALo(8,"translate"),e.BQk(),e.ynx(9,26),e._uU(10),e.ALo(11,"translate"),e.BQk(),e.qZA()(),e.TgZ(12,"mat-radio-button",25)(13,"es-multi-line-label"),e.ynx(14,18),e._uU(15),e.ALo(16,"translate"),e.BQk(),e.ynx(17,26),e._uU(18),e.ALo(19,"translate"),e.BQk(),e.qZA()(),e.TgZ(20,"mat-radio-button",25)(21,"es-multi-line-label"),e.ynx(22,18),e._uU(23),e.ALo(24,"translate"),e.BQk(),e.ynx(25,26),e._uU(26),e.ALo(27,"translate"),e.BQk(),e.qZA()()(),e.YNc(28,st,3,3,"es-info-message",4),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.republish)("disabled",!t.copyAllowed()),e.xp6(1),e.Q6J("disabled",!t.isCopy)("value",!1),e.xp6(3),e.hij(" ",e.lcZ(8,15,"WORKSPACE.SHARE.PUBLISH.NO_REPUBLISH")," "),e.xp6(3),e.hij(" ",e.lcZ(11,17,"WORKSPACE.SHARE.PUBLISH.NO_REPUBLISH_DESCRIPTION")," "),e.xp6(2),e.Q6J("disabled",t.currentVersionPublished())("value","new"),e.xp6(3),e.hij(" ",e.lcZ(16,19,"WORKSPACE.SHARE.PUBLISH.REPUBLISH")," "),e.xp6(3),e.hij(" ",e.lcZ(19,21,"WORKSPACE.SHARE.PUBLISH.REPUBLISH_DESCRIPTION")," "),e.xp6(2),e.Q6J("disabled",t.currentVersionPublished()||!t.isCopy)("value","update"),e.xp6(3),e.hij(" ",e.lcZ(24,23,"WORKSPACE.SHARE.PUBLISH.UPDATE_METADATA")," "),e.xp6(3),e.hij(" ",e.lcZ(27,25,"WORKSPACE.SHARE.PUBLISH.UPDATE_METADATA_DESCRIPTION")," "),e.xp6(2),e.Q6J("ngIf",!t.publishCopyPermission)}}function rt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"mat-checkbox",16,17),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.shareModeDirect=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateShareMode("direct"))}),e.TgZ(3,"es-multi-line-label"),e.ynx(4,18),e._uU(5),e.ALo(6,"translate"),e.BQk(),e.TgZ(7,"span",19),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"mat-checkbox",20,21),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.shareModeCopy=o)})("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return o&&(s.doiActive=!0),e.KtG(s.updateShareMode("copy"))}),e.TgZ(12,"es-multi-line-label"),e.ynx(13,18),e._uU(14),e.ALo(15,"translate"),e.BQk(),e.TgZ(16,"span",19),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.YNc(19,at,29,27,"div",7),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.shareModeDirect)("disabled",t.isLicenseMissing()||t.isAuthorMissing()),e.xp6(4),e.hij(" ",e.lcZ(6,9,"WORKSPACE.SHARE.PUBLISH.MODE_DIRECT")," "),e.xp6(3),e.hij(" ",e.lcZ(9,11,"WORKSPACE.SHARE.PUBLISH.MODE_DIRECT_INFO")," "),e.xp6(2),e.Q6J("ngModel",t.shareModeCopy)("disabled",!t.copyAllowed()||t.isCopy||t.isLicenseMissing()||t.isAuthorMissing()),e.xp6(4),e.hij(" ",e.lcZ(15,13,"WORKSPACE.SHARE.PUBLISH.MODE_COPY")," "),e.xp6(3),e.hij(" ",e.lcZ(18,15,"WORKSPACE.SHARE.PUBLISH.MODE_COPY_INFO")," "),e.xp6(2),e.Q6J("ngIf",t.shareModeCopy)}}function lt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"mat-radio-group",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handleMode=o)}),e.TgZ(2,"mat-radio-button",35)(3,"es-multi-line-label"),e.ynx(4,18),e._uU(5),e.ALo(6,"translate"),e.BQk(),e.ynx(7,26),e._uU(8),e.ALo(9,"translate"),e.BQk(),e.qZA()(),e.TgZ(10,"mat-radio-button",36)(11,"es-multi-line-label"),e.ynx(12,18),e._uU(13),e.ALo(14,"translate"),e.BQk(),e.ynx(15,26),e._uU(16),e.ALo(17,"translate"),e.BQk(),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.handleMode),e.xp6(4),e.hij(" ",e.lcZ(6,6,"WORKSPACE.SHARE.PUBLISH.DOI_DISTINCT")," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,"WORKSPACE.SHARE.PUBLISH.DOI_DISTINCT_INFO")," "),e.xp6(2),e.Q6J("disabled",!t.hasExactOneHandle()),e.xp6(3),e.hij(" ",e.lcZ(14,10,"WORKSPACE.SHARE.PUBLISH.DOI_UPDATE")," "),e.xp6(3),e.hij(" ",e.lcZ(17,12,"WORKSPACE.SHARE.PUBLISH.DOI_UPDATE_INFO")," ")}}function ct(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"mat-checkbox",28),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.doiActive=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updatePublishedVersions())}),e.TgZ(2,"div",29),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"i",30),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.YNc(9,lt,18,14,"div",32),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.doiDisabled)("ngModel",t.doiActive),e.xp6(2),e.hij(" ",e.lcZ(4,5,"WORKSPACE.SHARE.DOI")," "),e.xp6(4),e.Oqu(e.lcZ(8,7,"WORKSPACE.SHARE.DOI_INFO")),e.xp6(2),e.Q6J("ngIf",t.doiActive)}}function dt(n,a){1&n&&(e.TgZ(0,"div",40),e._UZ(1,"es-spinner-small"),e.qZA())}function _t(n,a){1&n&&(e._UZ(0,"i",51),e.ALo(1,"translate")),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"WORKSPACE.SHARE.DOI"))}function pt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",42)(2,"div")(3,"div",43)(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._uU(7),e.ALo(8,"versionComment"),e.qZA(),e.TgZ(9,"div",44)(10,"label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._uU(13),e.qZA()(),e.TgZ(14,"div")(15,"div",45)(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._uU(19),e.ALo(20,"formatDate"),e.qZA()()(),e.TgZ(21,"div",46),e.YNc(22,_t,2,3,"i",47),e.qZA(),e.TgZ(23,"div",48)(24,"button",49),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openVersion(s))}),e.ALo(25,"translate"),e._UZ(26,"i",50),e.qZA()()()}if(2&n){const t=a.$implicit;e.ekj("version-virtual","new"===t.status)("version-update","update"===t.status),e.xp6(5),e.Oqu(e.lcZ(6,13,"WORKSPACE.SHARE.PUBLISH.VERSION_COMMENT")),e.xp6(2),e.hij(" ",e.lcZ(8,15,t)," "),e.xp6(4),e.Oqu(e.lcZ(12,17,"WORKSPACE.SHARE.PUBLISH.VERSION_NUMBER")),e.xp6(2),e.hij(" ",t.properties["cclom:version"][0]," "),e.xp6(4),e.Oqu(e.lcZ(18,19,"WORKSPACE.SHARE.PUBLISH.VERSION_DATE")),e.xp6(2),e.hij(" ",e.lcZ(20,21,t.properties["ccm:published_date_LONG"][0])," "),e.xp6(3),e.Q6J("ngIf",t.properties["ccm:published_handle_id"]),e.xp6(2),e.s9C("matTooltip",e.lcZ(25,23,"WORKSPACE.SHARE.PUBLISH.OPEN_VERSION")),e.Q6J("disabled",!!t.status)}}function ht(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23)(2,"h6",37),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,dt,2,0,"div",38),e.YNc(6,pt,27,25,"div",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"WORKSPACE.SHARE.PUBLISH.VERSIONS_PUBLISHED")," "),e.xp6(2),e.Q6J("ngIf",!t.allPublishedVersions),e.xp6(1),e.Q6J("ngForOf",t.allPublishedVersions)}}let gt=(()=>{class n{constructor(t,i,o,s,l,_,p,R,Z,N,D){this.bridge=t,this.config=i,this.connector=o,this.dialogs=s,this.legacyNodeService=l,this.mdsService=_,this.nodeHelper=p,this.nodeService=R,this.router=Z,this.toast=N,this.translate=D,this.onDisableInherit=new e.vpe,this.onInitCompleted=new e.vpe,this.handleMode="distinct",this.republish=!1,this.publishedVersions=[],this.initHasStarted=!1,this.destroyed=new y.xQ,this.doiPermission=this.connector.hasToolPermissionInstant(d.u.TOOLPERMISSION_HANDLESERVICE),this.publishCopyPermission=this.connector.hasToolPermissionInstant(d.u.TOOLPERMISSION_PUBLISH_COPY)}ngOnInit(){this.mdsService.observeCompletionStatus().pipe((0,B.R)(this.destroyed),(0,Le.h)(t=>null!==t)).subscribe(t=>{this.mdsCompletion={completed:(t.mandatory.completed||0)+(t.mandatoryForPublish.completed||0),total:(t.mandatory.total||0)+(t.mandatoryForPublish.total||0)}})}ngOnChanges(t){var i=this;return(0,C.Z)(function*(){i.node&&i.permissions&&!i.initHasStarted&&(i.initHasStarted=!0,i.refresh(),i.node=(yield i.legacyNodeService.getNodeMetadata(i.node.ref.id,[d.u.ALL]).toPromise()).node,i.refresh(),i.onInitCompleted.emit(),i.onInitCompleted.complete())})()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}getLicense(){return this.node.properties[d.u.CCM_PROP_LICENSE]?.[0]}getLicenseText(){return this.translate.instant("LICENSE.NAMES."+this.getLicense())}openLicense(){var t=this;return(0,C.Z)(function*(){(yield t.dialogs.openLicenseDialog({kind:"nodes",nodes:[t.node]})).afterClosed().subscribe(o=>{o&&(t.node=o[0],t.refresh())})})()}openMetadata(){var t=this;return(0,C.Z)(function*(){(yield t.dialogs.openMdsEditorDialogForNodes({nodes:[t.node],immediatelyShowMissingRequiredWidgets:!0})).afterClosed().subscribe(o=>{o&&(t.node=o[0],t.refresh())})})()}refresh(){this.doiActive=this.nodeHelper.isDOIActive(this.node,this.permissions),this.doiDisabled=this.doiActive;const t=this.node?.properties?.[d.u.CCM_PROP_PUBLISHED_MODE]?.[0];t===I.Copy&&(this.shareModeCopy=!0,this.isCopy=!0,this.legacyNodeService.getPublishedCopies(this.node.ref.id).subscribe(i=>{this.publishedVersions=i.nodes.reverse(),this.updatePublishedVersions()},i=>{this.toast.error(i)})),t!==I.Copy&&(this.republish="new"),this.shareModeDirect=this.permissions.some(i=>i.authority?.authorityName===d.u.AUTHORITY_EVERYONE),this.initialState={copy:this.shareModeCopy,direct:this.shareModeDirect},this.mdsService.initWithNodes([this.node]),this.updatePublishedVersions()}updateShareMode(t,i=!1){var o=this;return(0,C.Z)(function*(){!o.shareModeCopy&&!o.shareModeDirect||i||!o.config.instant("publishingNotice",!1)?(o.shareModeCopy&&o.doiPermission&&"copy"===t&&(o.doiActive=!0),o.updatePublishedVersions()):(yield o.dialogs.openGenericDialog({title:"WORKSPACE.SHARE.PUBLISHING_WARNING_TITLE",message:"WORKSPACE.SHARE.PUBLISHING_WARNING_MESSAGE",buttons:He.G2})).afterClosed().subscribe(l=>{"YES"===l?o.updateShareMode(t,!0):(o.shareModeDirect=!1,o.shareModeCopy=!1)})})()}updatePermissions(t){if(t=t.filter(i=>i.authority.authorityName!==d.u.AUTHORITY_EVERYONE),this.shareModeDirect){const i=Ue.b.getAllAuthoritiesPermission();i.permissions=[d.u.ACCESS_CONSUMER,d.u.ACCESS_CC_PUBLISH],t.push(i)}return t}save(){return new De.y(t=>{!this.shareModeCopy||("new"!==this.republish||this.currentVersionPublished())&&this.isCopy?this.shareModeCopy&&"update"===this.republish?this.nodeService.copyMetadata(this.publishedVersions[0].ref.id,this.node.ref.id,{}).subscribe(({node:i})=>{t.next(i),t.complete()},i=>{t.error(i),t.complete()}):(t.next(null),t.complete()):this.legacyNodeService.publishCopy(this.node.ref.id,this.doiPermission&&!this.doiDisabled&&this.doiActive?this.handleMode:null).subscribe(({node:i})=>{t.next(i),t.complete()},i=>{t.error(i),t.complete()})})}openVersion(t){const i=this.connector.getAbsoluteEdusharingUrl()+this.router.serializeUrl(this.router.createUrlTree([r.ru.ROUTER_PREFIX,"render",t.ref.id]));P.d.openUrl(i,this.bridge,g.qU.Blank)}currentVersionPublished(){return 0!==this.publishedVersions?.filter(t=>t.properties[d.u.LOM_PROP_LIFECYCLE_VERSION]?.[0]===this.node.properties[d.u.LOM_PROP_LIFECYCLE_VERSION]?.[0]).length}updatePublishedVersions(){if(!this.isCopy&&this.shareModeCopy||"new"===this.republish){if(this.node?.properties){const t=u.W.deepCopy(this.node);t.properties[d.u.CCM_PROP_PUBLISHED_DATE+"_LONG"]=[(new Date).getTime()],this.doiActive&&!this.doiDisabled&&this.doiPermission&&(t.properties[d.u.CCM_PROP_PUBLISHED_HANDLE_ID]=[!0]),t.status="new",this.allPublishedVersions=[t].concat(this.publishedVersions),this.handleMode=this.hasExactOneHandle()?"update":"distinct"}}else"update"===this.republish?(this.allPublishedVersions=u.W.deepCopy(this.publishedVersions),this.allPublishedVersions[0].status="update"):this.allPublishedVersions=this.publishedVersions}getType(){return this.node?.isDirectory?this.node.collection?"COLLECTION":"DIRECTORY":"DOCUMENT"}copyAllowed(){return this.publishCopyPermission&&!this.node?.isDirectory}setRepublish(){this.doiActive=!1!==this.republish&&this.doiPermission,this.updatePublishedVersions()}hasExactOneHandle(){return 1===new Set(this.allPublishedVersions.filter(t=>!t.status&&t.properties[d.u.CCM_PROP_PUBLISHED_HANDLE_ID]).map(t=>t.properties[d.u.CCM_PROP_PUBLISHED_HANDLE_ID][0])).size}isLicenseMissing(){return!this.getLicense()&&this.isLicenseEmpty&&!this.node.isDirectory}isAuthorMissing(){return this.isAuthorEmpty&&!this.node.isDirectory}canBePublished(){return this.mdsCompletion?.completed===this.mdsCompletion?.total||this.initialState.copy||this.initialState.direct}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(we.d),e.Y36(r.eB),e.Y36(ke.x),e.Y36(k.H),e.Y36(Ye.x),e.Y36(V.t),e.Y36(Ke.G),e.Y36(S.sX),e.Y36(Je.F0),e.Y36(Y.F),e.Y36(m.sK))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog-publish"]],viewQuery:function(i,o){if(1&i&&(e.Gf(Fe,5),e.Gf(Ge,5)),2&i){let s;e.iGM(s=e.CRH())&&(o.shareModeCopyRef=s.first),e.iGM(s=e.CRH())&&(o.shareModeDirectRef=s.first)}},inputs:{node:"node",permissions:"permissions",inherited:"inherited",isAuthorEmpty:"isAuthorEmpty",isLicenseEmpty:"isLicenseEmpty"},outputs:{onDisableInherit:"onDisableInherit",onInitCompleted:"onInitCompleted"},features:[e._Bn([V.t]),e.TTD],decls:10,vars:9,consts:[[1,"group-padding"],[1,"mat-heading-4"],[4,"ngIf"],["mode","warning",4,"ngIf"],["mode","info",4,"ngIf"],["class","share-type",4,"ngIf"],["class","doi",4,"ngIf"],["class","published-versions-container",4,"ngIf"],["mode","error",4,"ngIf"],["mode","info"],["mat-button","","color","primary","esToolpermissionCheck","","toolpermission","TOOLPERMISSION_LICENSE",3,"click"],["esIcon","arrow_forward"],["mode","warning"],["mat-button","","color","primary",3,"click"],["mode","error"],[1,"share-type"],["value","direct",3,"ngModel","disabled","ngModelChange"],["shareModeDirectRef",""],["slot","label"],["slot","description",1,"description"],[3,"ngModel","disabled","ngModelChange"],["shareModeCopyRef",""],[1,"published-versions-container"],[1,"published-versions"],[1,"version-republish"],[3,"disabled","value"],["slot","description"],[1,"doi"],["id","doi",3,"disabled","ngModel","ngModelChange"],[1,"strong","label"],["esIcon","vpn_key"],[1,"label-secondary"],["class","handle-mode",4,"ngIf"],[1,"handle-mode"],[3,"ngModel","ngModelChange"],["value","distinct"],["value","update",3,"disabled"],[1,"published-versions","mat-heading-6"],["class","no-versions",4,"ngIf"],["class","version",3,"version-virtual","version-update",4,"ngFor","ngForOf"],[1,"no-versions"],[1,"version"],[1,"version-group"],[1,"version-comment"],[1,"version-number"],[1,"version-date"],[1,"version-handle"],["esIcon","vpn_key",3,"matTooltip",4,"ngIf"],[1,"version-actions"],["mat-button","","color","primary",3,"disabled","matTooltip","click"],["esIcon","open_in_new"],["esIcon","vpn_key",3,"matTooltip"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,nt,6,5,"ng-container",2),e.YNc(5,it,8,6,"es-info-message",3),e.YNc(6,ot,3,3,"es-info-message",4),e.YNc(7,rt,20,17,"div",5),e.qZA(),e.YNc(8,ct,10,9,"div",6),e.YNc(9,ht,7,5,"div",7)),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"WORKSPACE.SHARE.PUBLISH_"+o.getType())," "),e.xp6(2),e.Q6J("ngIf",!(null!=o.node&&o.node.isDirectory)),e.xp6(1),e.Q6J("ngIf",o.inherited),e.xp6(1),e.Q6J("ngIf",o.isCopy),e.xp6(1),e.Q6J("ngIf",!o.inherited&&o.canBePublished()),e.xp6(1),e.Q6J("ngIf",o.doiPermission&&o.publishCopyPermission&&!o.inherited&&o.shareModeCopy&&"new"===o.republish),e.xp6(1),e.Q6J("ngIf",o.shareModeCopy))},dependencies:[h.sg,h.O5,F.gM,g.ar,f.JJ,f.On,H.u,O.lW,E.oG,x.VQ,x.U0,T.w,Qe.h,Be.m,m.X$,g.ik,We.E,qe],styles:["es-info-message[_ngcontent-%COMP%]{display:flex;padding:10px 20px}es-info-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.share-type[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:flex;padding:10px 0}.group-padding[_ngcontent-%COMP%]{padding:5px 25px}.group-padding[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{white-space:pre-line}.published-versions-container[_ngcontent-%COMP%]{padding:5px 28px}.published-versions-container[_ngcontent-%COMP%]   h6.published-versions[_ngcontent-%COMP%]{padding-top:10px}.published-versions-container[_ngcontent-%COMP%]   .no-versions[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:90%;color:var(--textLight);font-style:italic;text-align:center;padding-top:10px}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]{display:flex;flex-direction:column}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;margin:5px 10px;width:100%;justify-content:space-between}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%] > mat-radio-button[_ngcontent-%COMP%]{padding:0 10px}@media screen and (max-width: 700px){.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{flex-direction:column}}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   es-info-message[_ngcontent-%COMP%]{display:block}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;background-color:#f9f9f9;padding:5px 20px;margin:5px 0;border-radius:50px}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px 6px}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.version-number[_ngcontent-%COMP%]{align-items:flex-end}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{color:var(--textLight);text-transform:uppercase;font-size:var(--fontSizeXSmall)}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-handle[_ngcontent-%COMP%]{color:var(--textLight);width:40px;display:flex;justify-content:flex-end}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-date[_ngcontent-%COMP%]{font-size:90%}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version.version-virtual[_ngcontent-%COMP%]{background:#e1f7ed;border:2px dashed #42ca8d}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version.version-update[_ngcontent-%COMP%]{background:#fbead5;border:2px dashed #e98c1b}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-actions[_ngcontent-%COMP%]{align-self:center}.published-versions-container[_ngcontent-%COMP%]   .published-versions[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   .version-actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:40px;margin:5px}.doi[_ngcontent-%COMP%]{background-color:#f9f9f9;margin:0 0 20px;padding:10px 58px}.doi[_ngcontent-%COMP%]   .handle-mode[_ngcontent-%COMP%]{padding-top:8px}.doi[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;align-items:center}.doi[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin:0 5px}"]})}return n})();var I=function(n){return n.Direct="direct",n.Copy="copy",n}(I||{});function ut(n,a){1&n&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"hr"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",15),e._UZ(7,"hr"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"WORKSPACE.SHARE.DELETED")))}function mt(n,a){1&n&&(e.TgZ(0,"i",17),e._uU(1,"cancel"),e.qZA())}function Ct(n,a){1&n&&(e.TgZ(0,"i",17),e._uU(1,"undo"),e.qZA())}function ft(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.YNc(1,ut,8,3,"div",11),e.TgZ(2,"div")(3,"div",4)(4,"span",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",12),e.NdJ("keyup.enter",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.remove(s))})("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.remove(s))}),e.ALo(7,"translate"),e.YNc(8,mt,2,0,"i",13),e.YNc(9,Ct,2,0,"i",13),e.qZA()()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isDeleted(t)),e.xp6(4),e.Oqu(i.getName(t)),e.xp6(1),e.ekj("disabled","INDIRECT"===t.type)("opacity-invisible",!i.showDelete),e.s9C("title",e.lcZ(7,9,"INDIRECT"===t.type?"WORKSPACE.SHARE.USAGE_INDIRECT":"")),e.xp6(2),e.Q6J("ngIf",!i.isDeleted(t)),e.xp6(1),e.Q6J("ngIf",i.isDeleted(t))}}function Pt(n,a){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,ft,10,11,"div",9),e.qZA()),2&n){const t=e.oxw();e.Q6J("@cardAnimation",t.showAll),e.xp6(1),e.Q6J("ngForOf",t.usages)}}const Ot=function(n){return{fallback:n}};let xt=(()=>{class n{static#e=this.ICON_MAP={MOODLE:"school",COLLECTION:"layers"};isDeleted(t){return-1!=this.deleteList.indexOf(t)}getIcon(){return n.ICON_MAP[this.name.toUpperCase()]||"extension"}getName(t){if(t.collection)return t.collection.title;let i=t.usageXmlParams;if(i&&null!=i.general.referencedInName){const o="WORKSPACE.SHARE.USAGE_SUBTYPE."+i.general.referencedInType.toUpperCase();let s=this.translation.instant(o);return s===o&&(s=i.general.referencedInType),this.translation.instant("WORKSPACE.SHARE.USAGE_INFO",{instance:i.general.referencedInInstance,type:s,name:i.general.referencedInName})}return t.courseId}remove(t){this.showDelete&&"INDIRECT"!=t.type&&(this.isDeleted(t)?this.deleteList.splice(this.deleteList.indexOf(t),1):this.deleteList.push(t),this.deleteListChange.emit(this.deleteList))}constructor(t){this.translation=t,this.deleteListChange=new e.vpe,this.showDelete=!0,this.onRemoveAll=new e.vpe,this.onRemove=new e.vpe,this.showAll=!1}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(m.sK))};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog-usage"]],inputs:{name:"name",usages:"usages",deleteList:"deleteList",showDelete:"showDelete"},outputs:{deleteListChange:"deleteListChange",onRemoveAll:"onRemoveAll",onRemove:"onRemove"},decls:12,vars:10,consts:[[1,"group"],[1,"container"],[1,"icon"],[1,"type","material-icons"],[1,"name"],[1,"primary"],[1,"material-icons","clickable","toggle",3,"click"],["class","all",4,"ngIf"],[1,"all"],["class","single",4,"ngFor","ngForOf"],[1,"single"],["class","deleted-info",4,"ngIf"],["tabindex","0",1,"remove",3,"title","keyup.enter","click"],["class","material-icons",4,"ngIf"],[1,"deleted-info"],[1,"line"],[1,"info"],[1,"material-icons"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),e._uU(4),e.qZA()(),e.TgZ(5,"div",4)(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return o.showAll=!o.showAll}),e._uU(10),e.qZA()()(),e.YNc(11,Pt,2,2,"div",7),e.qZA()),2&i&&(e.xp6(4),e.Oqu(o.getIcon()),e.xp6(3),e.AsE("",e.xi3(8,5,"WORKSPACE.SHARE.USAGE_TYPE."+o.name.toUpperCase(),e.VKq(8,Ot,o.name))," (",o.usages.length,")"),e.xp6(3),e.Oqu(o.showAll?"keyboard_arrow_down":"keyboard_arrow_right"),e.xp6(1),e.Q6J("ngIf",o.showAll))},dependencies:[h.sg,h.O5,g.ar,m.X$],styles:[".group[_ngcontent-%COMP%]{width:100%}.deleted-info[_ngcontent-%COMP%]{width:calc(100% + 20px);height:30px;position:absolute;align-items:center;left:-15px;top:0;z-index:1;display:flex;border-radius:25px;font-weight:700;background-color:#eee9}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{flex-grow:1;padding:0 15px}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:last-child{padding-right:25px}.deleted-info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;background:#000;height:1px}.container[_ngcontent-%COMP%]{display:flex;width:100%}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;overflow:hidden;padding:3px 0;align-items:center}.container[_ngcontent-%COMP%] > .icon[_ngcontent-%COMP%]{padding-left:10px}.container[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:left;padding:3px 10px;height:40px}.container[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%] > .secondary[_ngcontent-%COMP%]{font-size:80%;color:var(--textLight);margin-top:-3px;min-height:3px}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{padding:0 5px}.single[_ngcontent-%COMP%]{display:flex;padding-left:25px;position:relative}.single[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.all[_ngcontent-%COMP%]{padding-bottom:5px}.icon[_ngcontent-%COMP%]{padding-right:5px}.name[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.icon[_ngcontent-%COMP%], .remove[_ngcontent-%COMP%]{min-width:24px}.remove[_ngcontent-%COMP%]{position:relative;z-index:2;cursor:pointer}.remove[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .type[_ngcontent-%COMP%]{color:var(--textLight)}.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}"],data:{animation:[(0,U.X$)("cardAnimation",g.Le.cardAnimation())]}})}return n})();const At=["publish"],St=["inheritRef"],Et=["state"],Tt=["shareLink"];function vt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openShareLinkDialog())}),e._UZ(1,"i",15),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"OPTIONS.SHARE_LINK")," "))}function Mt(n,a){if(1&n&&e.YNc(0,vt,4,3,"button",13),2&n){const t=e.oxw();e.Q6J("ngIf",!t.isCollection()&&!t.isBulk()&&t.showShareLink())}}function bt(n,a){1&n&&(e._UZ(0,"i",16),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"WORKSPACE.TAB_INVITE")))}function yt(n,a){1&n&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.NO_FUZZY")," "))}const It=function(){return{field:"secondary"}};function Rt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip",24),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.removePermission(s))}),e.TgZ(1,"div",25)(2,"span",26),e._uU(3),e.ALo(4,"permissionName"),e.qZA(),e.TgZ(5,"span",27),e._uU(6),e.ALo(7,"permissionName"),e.qZA()(),e._UZ(8,"i",28),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,2,t)),e.xp6(3),e.Oqu(e.xi3(7,4,t,e.DdM(7,It)))}}function Zt(n,a){1&n&&(e.ynx(0),e._UZ(1,"i",32),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",33),e.BQk()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WORKSPACE.SHARE.TYPE_UNKNOWN")))}function Nt(n,a){1&n&&(e.ynx(0),e._UZ(1,"i",34),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",33),e.BQk()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WORKSPACE.SHARE.TYPE_VIEWER")))}function Dt(n,a){1&n&&(e.ynx(0),e._UZ(1,"i",35),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",33),e.BQk()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WORKSPACE.SHARE.TYPE_COWORKER")))}function Lt(n,a){1&n&&(e.ynx(0),e._UZ(1,"i",36),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",33),e.BQk()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WORKSPACE.SHARE.TYPE_COORDINATOR")))}function Ut(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chooseType())}),e.ALo(2,"translate"),e.YNc(3,Zt,6,3,"ng-container",31),e.YNc(4,Nt,6,3,"ng-container",31),e.YNc(5,Dt,6,3,"ng-container",31),e.YNc(6,Lt,6,3,"ng-container",31),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.uIk("aria-label",e.lcZ(2,7,"WORKSPACE.SHARE.TYPE_MENU_LABEL_NEW"))("aria-expanded",t.showChooseType||null)("aria-controls",t.showChooseType?"es-share-dialog-choose-type-menu":null),e.xp6(2),e.Q6J("ngIf",0==t.currentType.length),e.xp6(1),e.Q6J("ngIf",t.currentType.indexOf("Consumer")>-1),e.xp6(1),e.Q6J("ngIf",t.currentType.indexOf("Collaborator")>-1),e.xp6(1),e.Q6J("ngIf",t.currentType.indexOf("Coordinator")>-1)}}function Ht(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-share-dialog-choose-type",37),e.NdJ("onCancel",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.showChooseType=!1)})("onType",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setType(o))}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("aria-label",e.lcZ(1,4,"WORKSPACE.SHARE.TYPE_MENU_LABEL_NEW"))("selected",t.currentType)("isDirectory",t._nodes[0].isDirectory)("canPublish",!t.isSafe)}}function wt(n,a){if(1&n&&(e.TgZ(0,"div",19)(1,"mat-chip-set",20),e.YNc(2,Rt,9,8,"mat-chip",21),e.qZA(),e.YNc(3,Ut,7,9,"div",22),e.YNc(4,Ht,2,6,"es-share-dialog-choose-type",23),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.getNewInvitedAuthorities()),e.xp6(1),e.Q6J("ngIf",t.getNewInvitedAuthorities().length),e.xp6(1),e.Q6J("ngIf",t.showChooseType)}}function kt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",42)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"textarea",43),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.notifyMessage=o)}),e.ALo(5,"translate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("@overlay",t.notifyUsers),e.xp6(2),e.Oqu(e.lcZ(3,4,"WORKSPACE.SHARE.MESSAGE")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"WORKSPACE.SHARE.MESSAGE_PLACEHOLDER")),e.Q6J("ngModel",t.notifyMessage)}}function Yt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"mat-checkbox",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.notifyUsers=o)}),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",40),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,kt,6,8,"mat-form-field",41),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.notifyUsers),e.xp6(2),e.Oqu(e.lcZ(4,4,"WORKSPACE.NOTIFY_TITLE")),e.xp6(3),e.Oqu(e.lcZ(7,6,"WORKSPACE.NOTIFY_INFO")),e.xp6(2),e.Q6J("ngIf",t.notifyUsers)}}function Kt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",44)(1,"mat-radio-group",45),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.bulkMode=o)}),e.TgZ(2,"h4",46),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-radio-button",47)(6,"es-multi-line-label"),e.ynx(7,48),e._uU(8),e.ALo(9,"translate"),e.BQk(),e.ynx(10,49),e._uU(11),e.ALo(12,"translate"),e.BQk(),e.qZA()(),e.TgZ(13,"mat-radio-button",50)(14,"es-multi-line-label"),e.ynx(15,48),e._uU(16),e.ALo(17,"translate"),e.BQk(),e.ynx(18,49),e._uU(19),e.ALo(20,"translate"),e.BQk(),e.qZA()()(),e.TgZ(21,"div",51)(22,"mat-slide-toggle",52),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.bulkInvite=o)}),e.TgZ(23,"es-multi-line-label"),e.ynx(24,48),e._uU(25),e.ALo(26,"translate"),e.BQk(),e.ynx(27,49),e._uU(28),e.ALo(29,"translate"),e.BQk(),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.bulkMode),e.xp6(2),e.Oqu(e.lcZ(4,10,"WORKSPACE.SHARE.BULK_MODE.TITLE")),e.xp6(5),e.hij(" ",e.lcZ(9,12,"WORKSPACE.SHARE.BULK_MODE.EXTEND")," "),e.xp6(3),e.hij(" ",e.lcZ(12,14,"WORKSPACE.SHARE.BULK_MODE.EXTEND_DESCRIPTION")," "),e.xp6(5),e.hij(" ",e.lcZ(17,16,"WORKSPACE.SHARE.BULK_MODE.REPLACE")," "),e.xp6(3),e.hij(" ",e.lcZ(20,18,"WORKSPACE.SHARE.BULK_MODE.REPLACE_DESCRIPTION")," "),e.xp6(3),e.Q6J("ngModel",t.bulkInvite)("disabled",!t.publishPermission),e.xp6(3),e.hij(" ",e.lcZ(26,20,"WORKSPACE.SHARE.PUBLISH.MODE_DIRECT")," "),e.xp6(3),e.hij(" ",e.lcZ(29,22,"WORKSPACE.SHARE.PUBLISH.MODE_DIRECT_INFO_MULTIPLE")," ")}}function Jt(n,a){1&n&&(e._UZ(0,"i",62),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"WORKSPACE.TAB_INVITED")))}function Qt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-mat-link",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.showHistory())}),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",64),e.qZA()}2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"WORKSPACE.SHARE.SHOW_HISTORY")," "))}function Bt(n,a){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"WORKSPACE.SHARE.GROUP_OWNER")))}function Wt(n,a){if(1&n&&e._UZ(0,"es-share-dialog-permission",66),2&n){const t=e.oxw(2);e.Q6J("permission",t.owner)("isDirectory",t._nodes[0].isDirectory)("readOnly",!0)("showDelete",!1)}}function qt(n,a){if(1&n&&(e.TgZ(0,"div",76),e._UZ(1,"es-share-dialog-permission",77),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("permission",t)("isDirectory",i._nodes[0].isDirectory)("inherit",!0)("readOnly",!0)}}function Ft(n,a){if(1&n&&(e.TgZ(0,"div",74),e.YNc(1,qt,2,4,"div",75),e.qZA()),2&n){const t=e.oxw(3);e.ekj("crossed",!t.inherited),e.xp6(1),e.Q6J("ngForOf",t.inherit)}}function Gt(n,a){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.INHERIT_DISABLED")," "))}function jt(n,a){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.INHERIT_ACCESS_DENIED")," "))}function Vt(n,a){1&n&&(e.TgZ(0,"div",79),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.INHERIT_EMPTY")," "))}function zt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",67)(2,"div",65),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",68)(6,"mat-checkbox",69,70),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(7),s=e.oxw(2);return e.KtG(s.onCheckInherit(o))})("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.inherited=o)}),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.YNc(10,Ft,2,3,"div",71),e.YNc(11,Gt,3,3,"div",72),e.YNc(12,jt,3,3,"div",72),e.YNc(13,Vt,3,3,"div",73),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,7,"WORKSPACE.SHARE.GROUP_INHERIT")),e.xp6(3),e.Q6J("ngModel",t.inherited),e.xp6(2),e.Oqu(e.lcZ(9,9,"WORKSPACE.SHARE.INHERIT")),e.xp6(2),e.Q6J("ngIf",t.inherited&&t.inherit&&t.inherit.length),e.xp6(1),e.Q6J("ngIf",!t.inherited),e.xp6(1),e.Q6J("ngIf",t.inherited&&t.inheritAccessDenied),e.xp6(1),e.Q6J("ngIf",t.inherited&&!t.inherit.length&&!t.inheritAccessDenied)}}function $t(n,a){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.GROUP_GROUPS")," "))}function Xt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"es-share-dialog-permission",80),e.NdJ("onRemove",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.removePermission(s))})("onType",function(o){const l=e.CHM(t).$implicit,_=e.oxw(2);return l.permissions=o.permissions,e.KtG(_.updatePermissionInfo())}),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.ekj("added",i.isNewPermission(t)),e.Q6J("permission",t)("readOnly",!t.editable&&!i.isNewPermission(t))("showDelete",t.editable||i.isNewPermission(t))("isDeleted",i.isDeleted(t))("isDirectory",i._nodes[0].isDirectory)("canPublish",!i.isSafe)}}function en(n,a){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.GROUP_USERS")," "))}function tn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"es-share-dialog-permission",80),e.NdJ("onRemove",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.removePermission(s))})("onType",function(o){const l=e.CHM(t).$implicit,_=e.oxw(2);return l.permissions=o.permissions,e.KtG(_.updatePermissionInfo())}),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.ekj("added",i.isNewPermission(t)),e.Q6J("permission",t)("readOnly",!t.editable&&!i.isNewPermission(t))("showDelete",t.editable||i.isNewPermission(t))("isDeleted",i.isDeleted(t))("isDirectory",i._nodes[0].isDirectory)("canPublish",!i.isSafe)}}function nn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",65),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"es-mat-link",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openShareLinkDialog())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"es-share-dialog-permission",82),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,6,"WORKSPACE.SHARE.LINK")),e.xp6(3),e.Oqu(e.lcZ(6,8,"WORKSPACE.SHARE.MANAGE_LINK")),e.xp6(2),e.Q6J("permission",t.linkEnabled)("isDirectory",t._nodes[0].isDirectory)("readOnly",!0)("showDelete",!1)}}function on(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-mat-link",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.tab=2)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.MANAGE_PUBLISH"),""))}function sn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",65),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,on,3,3,"es-mat-link",83),e._UZ(5,"es-share-dialog-permission",84),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,9,"WORKSPACE.SHARE.PUBLISH_LABEL")),e.xp6(2),e.Q6J("ngIf",t.publishPermission&&!t.isBulk()&&!t.isSafe),e.xp6(1),e.ekj("added",!(null!=t.publishComponent.initialState&&t.publishComponent.initialState.direct)&&!(null!=t.publishComponent.initialState&&t.publishComponent.initialState.copy)&&(t.publishComponent.shareModeDirect||t.publishComponent.shareModeCopy)),e.Q6J("permission",t.publishEnabled)("isDirectory",t._nodes[0].isDirectory)("readOnly",!0)("showDelete",!1)("isDeleted",((null==t.publishComponent.initialState?null:t.publishComponent.initialState.direct)||(null==t.publishComponent.initialState?null:t.publishComponent.initialState.copy))&&!t.publishComponent.shareModeDirect&&!t.publishComponent.shareModeCopy)}}function an(n,a){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"WORKSPACE.SHARE.USAGES")))}function rn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",85)(1,"es-share-dialog-usage",86),e.NdJ("deleteListChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deletedUsages=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("name","COLLECTION")("usages",t.collections)("deleteList",t.deletedUsages)}}function ln(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"es-share-dialog-usage",86),e.NdJ("deleteListChange",function(o){e.CHM(t);const s=e.oxw(3);return e.KtG(s.deletedUsages=o)}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("name",t.key)("usages",t.value)("deleteList",i.deletedUsages)}}function cn(n,a){if(1&n&&(e.TgZ(0,"div",85),e.YNc(1,ln,1,3,"es-share-dialog-usage",87),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","null"!==t.key)}}function dn(n,a){if(1&n&&(e.TgZ(0,"mat-tab",53),e.YNc(1,Jt,4,3,"ng-template",3),e.TgZ(2,"div",54),e.YNc(3,Qt,4,3,"es-mat-link",55),e.YNc(4,Bt,3,3,"div",56),e.YNc(5,Wt,1,4,"es-share-dialog-permission",57),e.YNc(6,zt,14,11,"div",31),e.YNc(7,$t,3,3,"div",56),e.TgZ(8,"div",58),e.YNc(9,Xt,2,8,"div",59),e.qZA(),e.YNc(10,en,3,3,"div",56),e.TgZ(11,"div",58),e.YNc(12,tn,2,8,"div",59),e.qZA(),e.YNc(13,nn,8,10,"ng-container",31),e.YNc(14,sn,6,11,"ng-container",31),e.YNc(15,an,3,3,"div",56),e.YNc(16,rn,2,3,"div",60),e.YNc(17,cn,2,1,"div",61),e.ALo(18,"keyvalue"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t._nodes&&t._nodes[0].ref.id),e.xp6(1),e.Q6J("ngIf",t.owner),e.xp6(1),e.Q6J("ngIf",t.owner),e.xp6(1),e.Q6J("ngIf",t.inheritAllowed&&!t.isCollection()),e.xp6(1),e.Q6J("ngIf",t.permissionsGroup&&t.permissionsGroup.length),e.xp6(2),e.Q6J("ngForOf",t.permissionsGroup),e.xp6(1),e.Q6J("ngIf",t.permissionsUser&&t.permissionsUser.length),e.xp6(2),e.Q6J("ngForOf",t.permissionsUser),e.xp6(1),e.Q6J("ngIf",t.showLink&&t.link),e.xp6(1),e.Q6J("ngIf",!!(null!=t.publishComponent&&t.publishComponent.shareModeDirect||null!=t.publishComponent&&t.publishComponent.shareModeCopy||null!=t.publishComponent&&null!=t.publishComponent.initialState&&t.publishComponent.initialState.direct||null!=t.publishComponent&&null!=t.publishComponent.initialState&&t.publishComponent.initialState.copy)),e.xp6(1),e.Q6J("ngIf",t.hasUsages()),e.xp6(1),e.Q6J("ngIf",t.collections&&t.collections.length),e.xp6(1),e.Q6J("ngForOf",e.lcZ(18,13,t.usages))}}function _n(n,a){1&n&&(e._UZ(0,"i",91),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"WORKSPACE.TAB_PUBLISH")))}function pn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",53),e.YNc(1,_n,4,3,"ng-template",3),e.TgZ(2,"div",88)(3,"es-share-dialog-publish",89,90),e.NdJ("onInitCompleted",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setInitialState())})("onDisableInherit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.inherited=!1)}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("node",t._nodes[0])("permissions",t.permissions)("inherited",t.getPublishInherit())("isAuthorEmpty",!!t.isAuthorRequired()&&t.isAuthorEmpty())("isLicenseEmpty",!!t.isLicenseMandatory()&&t.isLicenseEmpty())}}function hn(n,a){1&n&&(e._UZ(0,"i",94),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"WORKSPACE.TAB_RESTRICTED_ACCESS")))}function gn(n,a){if(1&n&&(e.TgZ(0,"mat-tab",53),e.YNc(1,hn,4,3,"ng-template",3),e.TgZ(2,"div",92),e._UZ(3,"es-share-dialog-restricted-access",93),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("node",t._nodes[0])}}function un(n,a){1&n&&(e._UZ(0,"i",97),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"WORKSPACE.TAB_ADVANCED")))}function mn(n,a){1&n&&(e.TgZ(0,"h4",46),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WORKSPACE.SHARE.NO_PERMISSIONS")," "))}function Cn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",101)(1,"mat-checkbox",102),e.NdJ("change",function(o){const l=e.CHM(t).$implicit,_=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.setPermission(_,l,o))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.s9C("id",i.authority.authorityName+"_"+t),e.Q6J("checked",o.hasImplicitPermission(i,t))("disabled",o.isImplicitPermission(i,t)),e.xp6(1),e.hij(" ",t," ")}}function fn(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",98)(2,"i",99),e._uU(3),e.qZA(),e._uU(4),e.ALo(5,"permissionName"),e.qZA(),e.YNc(6,Cn,3,4,"div",100),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu("USER"===t.authority.authorityType?"person":"group"),e.xp6(1),e.hij("",e.lcZ(5,3,t)," "),e.xp6(2),e.Q6J("ngForOf",i.ALL_PERMISSIONS)}}function Pn(n,a){if(1&n&&(e.TgZ(0,"mat-tab",53),e.YNc(1,un,4,3,"ng-template",3),e.TgZ(2,"div",95),e.YNc(3,mn,3,3,"h4",96),e.YNc(4,fn,7,5,"div",59),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.permissionsUser.length+t.permissionsGroup.length==0),e.xp6(1),e.Q6J("ngForOf",t.permissionsGroup.concat(t.permissionsUser))}}function On(n,a){if(1&n&&(e.TgZ(0,"div",106),e._UZ(1,"i",107),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n){const t=e.oxw(3);e.ekj("state-changed",t.isStateModified()),e.xp6(3),e.hij(" ",e.lcZ(4,3,"WORKSPACE.SHARE.STATE.PRIVATE"),"")}}function xn(n,a){if(1&n&&(e.TgZ(0,"div",106),e._UZ(1,"i",108),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n){const t=e.oxw(3);e.ekj("state-changed",t.isStateModified()),e.xp6(3),e.hij(" ",e.lcZ(4,3,"WORKSPACE.SHARE.STATE.SHARED"),"")}}function An(n,a){if(1&n&&(e.TgZ(0,"div",106)(1,"i",109),e._uU(2,"public"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&n){const t=e.oxw(3);e.ekj("state-changed",t.isStateModified()),e.xp6(4),e.hij(" ",e.lcZ(5,3,"WORKSPACE.SHARE.STATE.PUBLIC"),"")}}function Sn(n,a){if(1&n&&(e.TgZ(0,"div",104),e.YNc(1,On,5,5,"div",105),e.YNc(2,xn,5,5,"div",105),e.YNc(3,An,6,5,"div",105),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","PRIVATE"===t.getState()),e.xp6(1),e.Q6J("ngIf","SHARED"===t.getState()),e.xp6(1),e.Q6J("ngIf","PUBLIC"===t.getState())}}function En(n,a){if(1&n&&e.YNc(0,Sn,4,3,"div",103),2&n){const t=e.oxw();e.Q6J("ngIf",t.initialState)}}let Tn=(()=>{class n{set tab(t){this._tab=t,this.updateButtons()}get tab(){return this._tab}constructor(t,i,o,s,l,_,p,R,Z,N,D,Mn,bn,yn,In){this.data=t,this.dialogRef=i,this.applicationRef=o,this.authenticationService=s,this.cardDialogUtils=l,this.collectionService=_,this.config=p,this.connector=R,this.localEvents=Z,this.dialogs=N,this.iam=D,this.nodeApi=Mn,this.toast=bn,this.translate=yn,this.usageApi=In,this.RestConstants=r.u6,this.ALL_PERMISSIONS=["All","Read","ReadPreview","ReadContent","DownloadContent","Print","ReadAll","Comment","Rate","Write","Delete","DeleteChildren","DeleteNode","AddChildren","Consumer","ConsumerMetadata","Editor","Contributor","Collaborator","Coordinator","ReadPermissions","ChangePermissions","CCPublish","Relation","Comment","Feedback","Deny"],this.PERMISSIONS_FORCES=[["Read",["ConsumerMetadata"]],["Read",["Consumer"]],["ReadPreview",["ReadAll"]],["ReadContent",["ReadAll"]],["Print",["Consumer"]],["DownloadContent",["Consumer"]],["ReadAll",["Consumer"]],["Comment",["Consumer"]],["Feedback",["Consumer"]],["Rate",["Consumer"]],["Write",["Editor"]],["DeleteChildren",["Delete"]],["DeleteNode",["Delete"]],["AddChildren",["Contributor"]],["Relation",["Contributor"]],["ReadPermissions",["Contributor"]],["Contributor",["Collaborator"]]],this._tab=0,this.newPermissions=[],this.inheritAccessDenied=!1,this.bulkMode="extend",this.bulkInvite=!1,this.link=!1,this.inheritAllowed=!1,this.isSharedScope=!1,this.globalSearch=!1,this.globalAllowed=!1,this.fuzzyAllowed=!1,this.isSafe=!1,this.collectionColumns=P.d.getDefaultCollectionColumns(),this.deletedPermissions=[],this.deletedUsages=[],this.currentType=[r.u6.ACCESS_CONSUMER,r.u6.ACCESS_CC_PUBLISH],this.notifyUsers=!0,this.inherit=[],this.permissions=null,this.showChooseType=!1,this.linkEnabled=new r.y3,this.linkEnabled.authority={authorityName:this.translate.instant("WORKSPACE.SHARE.LINK_ENABLED_INFO"),authorityType:"LINK"},this.linkEnabled.permissions=[r.u6.PERMISSION_CONSUMER],this.linkDisabled=new r.y3,this.linkDisabled.authority={authorityName:this.translate.instant("WORKSPACE.SHARE.LINK_DISABLED_INFO"),authorityType:"LINK"},this.linkDisabled.permissions=[],this.publishEnabled=new r.y3,this.publishEnabled.authority={authorityName:this.translate.instant("WORKSPACE.SHARE.PUBLISH_ENABLED"),authorityType:"EVERYONE"},this.publishEnabled.permissions=[r.u6.PERMISSION_CONSUMER,r.u6.ACCESS_CC_PUBLISH],this.connector.isLoggedIn(!1).subscribe(Rn=>{this.isSafe=null!=Rn.currentScope,this.updateToolpermissions()}),this.initNodes()}ngOnInit(){this.initButtons()}ngAfterViewInit(){this.initCardRefs()}initButtons(){const t=[new r.Qd("CANCEL",{color:"standard"},()=>this.cancel()),new r.Qd("SAVE",{color:"primary"},()=>this.save())];this.dialogRef.patchConfig({buttons:t})}initNodes(){(i=>"string"==typeof this.data.nodes[0])()?(this.dialogRef.patchState({isLoading:!0}),A.D(this.data.nodes.map(i=>this.nodeApi.getNodeMetadata(i,[r.u6.ALL]))).subscribe(i=>{this.dialogRef.patchState({isLoading:!1});const o=i.map(({node:s})=>s);this.setNodes(o)})):this.setNodes(this.data.nodes)}initCardRefs(){this.dialogRef.patchConfig({customHeaderBarContent:this.shareLinkRef,customBottomBarContent:this.stateRef})}isCollection(){return null==this._nodes||-1!==this._nodes[0].aspects.indexOf(r.u6.CCM_ASPECT_COLLECTION)}openShareLinkDialog(){var t=this;return(0,C.Z)(function*(){const i=t._nodes[0];(yield t.dialogs.openShareLinkDialog({node:i})).afterClosed().subscribe(()=>t.updateNodeLink())})()}addSuggestion(t){this.addAuthority(t)}setNodes(t){this.cardDialogUtils.configForNodes(t).then(i=>this.dialogRef.patchConfig(i)),this._nodes=t,this.initialize()}initialize(){const t=new Set(this._nodes.map(i=>i.isDirectory));if(1!==t.size)return this.toast.error(null,"WORKSPACE.SHARE.ERROR_INVALID_TYPE_COMBINATION"),void setTimeout(()=>this.cancel());t.values().next()&&(this.currentType=[r.u6.ACCESS_CONSUMER]),this.data.currentPermissions?(this.originalPermissions=u.W.deepCopy(this.data.currentPermissions),this.setPermissions(this.data.currentPermissions.permissions),this.isInherited(this.data.currentPermissions.inherited),this.showLink=!1):(this.showLink=!0,this.updateNodeLink(),this.dialogRef.patchState({isLoading:!0}),(0,A.D)(this._nodes.map(i=>this.nodeApi.getNodePermissions(i.ref.id))).subscribe(i=>{this.originalPermissions=u.W.deepCopy(i.map(o=>o.permissions.localPermissions)),1===i.length&&i[0].permissions?(this.setPermissions(i[0].permissions.localPermissions.permissions),this.isInherited(i[0].permissions.localPermissions.inherited),setTimeout(()=>this.setInitialState())):this.setPermissions([]),this.dialogRef.patchState({isLoading:!1})}),this.reloadUsages()),1===this._nodes.length&&this._nodes[0].parent&&this._nodes[0].parent.id&&(this.nodeApi.getNodePermissions(this._nodes[0].parent.id).subscribe(i=>{i.permissions&&(this.inherit=i.permissions.inheritedPermissions,this.removePermissions(this.inherit,"OWNER"),this.inherit=this.inherit.filter(o=>o.authority.authorityName!==this.connector.getCurrentLogin()?.authorityName),this.removePermissions(i.permissions.localPermissions.permissions,"OWNER"),this.inherit=P.d.mergePermissions(this.inherit,i.permissions.localPermissions.permissions),this.initialState=this.getState())},i=>{this.inheritAccessDenied=!0}),this.nodeApi.getNodeParents(this._nodes[0].ref.id).subscribe(i=>{this.inheritAllowed="MY_FILES"===i.scope||i.nodes.length>1,this.isSharedScope="SHARED_FILES"===i.scope,this.updateToolpermissions()},i=>{this.inheritAllowed=!0,this.updateToolpermissions()}),this._nodes[0].ref.id&&this.nodeApi.getNodeMetadata(this._nodes[0].ref.id,[r.u6.ALL]).subscribe(i=>{let o=i.node.properties[r.u6.CM_CREATOR][0],s=i.node.createdBy;i.node.properties[r.u6.CM_OWNER]&&(o=i.node.properties[r.u6.CM_OWNER][0],s=i.node.owner),this.owner=new r.y3,this.owner.authority={authorityName:o,authorityType:"USER"},this.owner.user=s,this.iam.getUser(o).subscribe(l=>{this.owner.user=l.person.profile,this.owner=u.W.deepCopy(this.owner)},l=>{}),this.owner.permissions=["Owner"]})),this.connector.isLoggedIn(!1).subscribe(i=>{this.isAdmin=i.isAdmin})}isDeleted(t){return-1!==this.deletedPermissions.indexOf(t.authority.authorityName)}cancel(){this.dialogRef.close(null)}hasUsages(){return this.usages&&Object.keys(this.usages).length}showHistory(){this.dialogs.openShareHistoryDialog({node:this._nodes[0]})}filterDisabledPermissions(t){let i=[];if(!t)return i;for(let o of t)-1===this.deletedPermissions.indexOf(o.authority.authorityName)&&i.push(o);return i}setPermission(t,i,o){if(o.checked)-1==t.permissions.indexOf(i)&&t.permissions.push(i);else{let s=t.permissions.indexOf(i);-1!=s&&t.permissions.splice(s,1)}this.applicationRef.tick()}isImplicitPermission(t,i){if("All"!=i&&-1!=t.permissions.indexOf("All")||"Coordinator"!=i&&-1!=t.permissions.indexOf("Coordinator"))return!0;for(let o of this.PERMISSIONS_FORCES){if(o[0]!=i)continue;let s=o[1];if(!s)return!1;let l=!0;for(let _ of s)if(_!=i&&!this.hasImplicitPermission(t,_)){l=!1;break}if(l)return!0}return!1}hasImplicitPermission(t,i){return-1!=t.permissions.indexOf(i)||this.isImplicitPermission(t,i)}updateNodeLink(){this.nodeApi.getNodeShares(this._nodes[0].ref.id,r.u6.SHARE_LINK).subscribe(t=>{this.link=t.length>0&&0!=t[0].expiryDate})}reloadUsages(){this.usageApi.getNodeUsagesCollection(this._nodes[0].ref.id).subscribe(t=>{this.collections=t.filter(i=>"ACTIVE"===i.collectionUsageType),this.usageApi.getNodeUsages(this._nodes[0].ref.id).subscribe(i=>{const o=i.usages.filter(s=>0===this.collections.filter(l=>l.nodeId===s.nodeId).length);this.usages=r.kD.getNodeUsagesByRepositoryType(o)})})}openCollection(t){window.open(g.ru.ROUTER_PREFIX+"collections?id="+t.ref.id)}isStateModified(){return this.initialState!==this.getState()}getState(){if(this.getPublishActive()||this.getPublishInherit())return"PUBLIC";const t=[...this.permissions??[],...this.inherited?this.inherit:[]];for(const i of t)if(i.authority.authorityName!==r.u6.AUTHORITY_EVERYONE&&i.authority.authorityName!==this.connector.getCurrentLogin()?.authorityName)return"SHARED";return"PRIVATE"}isBulk(){return this._nodes&&this._nodes.length>1}showShareLink(){return!this.isCollection()&&this.connector.hasToolPermissionInstant(r.u6.TOOLPERMISSION_INVITE_LINK)}updateButtons(){}chooseType(){this.showChooseType=!0}chooseTypeList(t){this.showChooseTypeList=t}removePermission(t){this.isDeleted(t)?this.deletedPermissions.splice(this.deletedPermissions.indexOf(t.authority.authorityName),1):this.deletedPermissions.push(t.authority.authorityName)}setType(t){this.currentType=t.permissions,t.wasMain&&(this.showChooseType=!1);for(let i of this.newPermissions)i.permissions=u.W.deepCopy(this.currentType)}contains(t,i,o){for(let s of t)if(s.authority.authorityName==i.authority.authorityName&&(!o||u.W.arrayEquals(s.permissions,i.permissions)))return!0;return!1}addAuthority(t){if(null==t)return;let i=new r.y3;i.authority={authorityName:t.authorityName,authorityType:t.authorityType},"USER"==t.authorityType?i.user=t.profile:i.group=t.profile,i.permissions=this.currentType,i=u.W.deepCopy(i),-1!=this.deletedPermissions.indexOf(i.authority.authorityName)?this.deletedPermissions.splice(this.deletedPermissions.indexOf(i.authority.authorityName),1):this.contains(this.permissions,i,!1)?this.toast.error(null,"WORKSPACE.PERMISSION_AUTHORITY_EXISTS"):(this.newPermissions.push(i),this.permissions.push(i),this.setPermissions(this.permissions)),this.searchStr=""}isNewPermission(t){return!this.originalPermissions?.length||!this.originalPermissions[0].permissions||!this.contains(this.originalPermissions[0].permissions,t,!0)}save(){var t=this;return(0,C.Z)(function*(){if(null!=t.permissions){t.dialogRef.patchState({isLoading:!0});let i=t.inherited&&t.inheritAllowed&&!t.isCollection();const o=t._nodes.map((s,l)=>(0,C.Z)(function*(){let _=u.W.deepCopy(t.permissions);if(t.isBulk()){if(t.bulkInvite){const p=r.bv.getAllAuthoritiesPermission();p.permissions=[r.u6.ACCESS_CONSUMER,r.u6.ACCESS_CC_PUBLISH],_.push(p)}i=t.originalPermissions[l].inherited,"extend"===t.bulkMode&&(_=P.d.mergePermissionsWithHighestPermission(t.originalPermissions[l].permissions,_))}if(_=_.filter(p=>!t.isDeleted(p)),t.publishComponent){_=t.publishComponent.updatePermissions(_);try{yield t.publishComponent.save().toPromise()}catch(p){return t.toast.error(p),void t.dialogRef.patchState({isLoading:!1})}}if(t.restrictedAccessComponent)try{t.data.sendToApi&&(yield t.restrictedAccessComponent.save())}catch(p){return t.toast.error(p),void t.dialogRef.patchState({isLoading:!1})}yield t.handlePermissionsPerNode(s,_,i)}));(0,A.D)(o.map(s=>s())).subscribe(()=>{t.data.sendToApi&&t.updateUsages(r.bv.copyPermissions(u.W.deepCopy(t.permissions),i))},s=>{t.toast.error(s),t.dialogRef.patchState({isLoading:!1})})}})()}updateToolpermissions(){this.connector.hasToolPermission(this.isSafe?this.isSharedScope?r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE:r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE:this.isSharedScope?r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE:r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH).subscribe(t=>this.globalAllowed=t),this.authenticationService.hasToolpermission(this.isSafe?this.isSharedScope?r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE:r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE:this.isSharedScope?r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE:r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH).then(t=>this.globalAllowed=t),this.authenticationService.hasToolpermission(r.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_FUZZY).then(t=>this.fuzzyAllowed=t),this.authenticationService.hasToolpermission(r.u6.TOOLPERMISSION_INVITE_ALLAUTHORITIES).then(t=>this.publishPermission=t),this.authenticationService.hasToolpermission(r.u6.TOOLPERMISSION_CONTROL_RESTRICTED_ACCESS).then(t=>this.restrictedAccessPermission=t)}updatePermissionInfo(){let t;for(let i of this.newPermissions){if(t&&!u.W.arrayEquals(t,i.permissions))return void(this.currentType=[]);t=i.permissions}t&&(this.currentType=t)}removePermissions(t,i){for(let o=0;o<i.length;o++)t[o]&&t[o].authority.authorityType==i&&(t.splice(o,1),o--)}setPermissions(t){null==t&&(t=[]),this.permissions=t,this.permissionsUser=this.permissions.slice(),this.permissionsGroup=this.permissions.slice(),this.removePermissions(this.permissionsUser,r.u6.AUTHORITY_TYPE_GROUP),this.removePermissions(this.permissionsUser,r.u6.AUTHORITY_TYPE_EVERYONE),this.removePermissions(this.permissionsGroup,r.u6.AUTHORITY_TYPE_USER),this.removePermissions(this.permissionsGroup,r.u6.AUTHORITY_TYPE_EVERYONE)}getPublishInherit(){return this.inherited&&-1!==this.getAuthorityPos(this.inherit,r.u6.AUTHORITY_EVERYONE)}localPublish(){return-1!==this.getAuthorityPos(this.permissions,r.u6.AUTHORITY_EVERYONE)&&-1===this.deletedPermissions?.indexOf(r.u6.AUTHORITY_EVERYONE)}getPublishActive(){return this.getPublishInherit()||this.publishComponent?.shareModeDirect||this.publishComponent?.shareModeCopy}getAuthorityPos(t,i){let o=0;for(let s of t){if(s.authority.authorityName==i)return o;o++}return-1}updateUsages(t,i=0,o=!1){if(i===this.deletedUsages.length||this.isBulk())return this.data.sendToApi&&this.localEvents.nodesChanged.emit(this.data.nodes),this.dialogRef.close(this.getEmitObject(t)),void(o||this.toast.toast("WORKSPACE.PERMISSIONS_UPDATED"));let s=this.deletedUsages[i];s.collection?this.collectionService.removeFromCollection(s.resourceId,s.collection.ref.id).subscribe(()=>{this.updateUsages(t,i+1)},l=>{this.toast.error(l),this.updateUsages(t,i+1,!0)}):this.usageApi.deleteNodeUsage(this._nodes[0].ref.id,s.nodeId).subscribe(()=>{this.updateUsages(t,i+1)},l=>{this.toast.error(l),this.updateUsages(t,i+1,!0)})}getEmitObject(t){return{permissions:t,notify:this.notifyUsers,notifyMessage:this.notifyMessage}}handlePermissionsPerNode(t,i,o){var s=this;return(0,C.Z)(function*(){const l=r.bv.copyAndCleanPermissions(i,o);if(!s.data.sendToApi)return s.dialogRef.close(s.getEmitObject(r.bv.copyPermissions(i,o))),null;yield s.nodeApi.setNodePermissions(t.ref.id,l,s.notifyUsers&&s.data.sendMessages,s.notifyMessage,!1).toPromise()})()}setInitialState(){this.initialState=this.getState()}getNewInvitedAuthorities(){return this.filterDisabledPermissions(this.newPermissions).filter(t=>t.authority.authorityName!==r.u6.AUTHORITY_EVERYONE)}onCheckInherit(t){t._checked||this.isLicenseMandatory()&&!this.isLicenseEmpty()&&(this.isAuthorRequired()&&this.isAuthorEmpty()?this.toast.error(null,this.translate.instant("WORKSPACE.LICENSE.RELEASE_WITHOUT_AUTHOR")):this.toast.error(null,this.translate.instant("WORKSPACE.SHARE.PUBLISH.LICENSE_REQUIRED")),t.preventDefaultEvent())}isInherited(t){this.inherited=this.isLicenseMandatory()&&!this.isLicenseEmpty()?(!this.isAuthorRequired()||!this.isAuthorEmpty())&&t:t}isLicenseMandatory(){return this.config.instant("publish.licenseMandatory",!1)}isAuthorMandatory(){return this.config.instant("publish.authorMandatory",!1)}isLicenseEmpty(){return null==this._nodes||!this._nodes[0].properties[r.u6.CCM_PROP_LICENSE]?.[0]}isAuthorRequired(){return!(!this.isAuthorMandatory()||null===this._nodes||this._nodes[0].properties[r.u6.CCM_PROP_LICENSE]?.includes("CC_0")||this._nodes[0].properties[r.u6.CCM_PROP_LICENSE]?.includes("PDM"))}isAuthorEmpty(){return null==this._nodes||!this._nodes[0].properties[r.u6.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0]}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36($.W9),e.Y36(te.Y),e.Y36(e.z2F),e.Y36(S.$h),e.Y36(ne.Z),e.Y36(r.i6),e.Y36(r.eB),e.Y36(r.xD),e.Y36(g.Xn),e.Y36(k.H),e.Y36(r.Du),e.Y36(r.xE),e.Y36(Y.F),e.Y36(m.sK),e.Y36(r.kD))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["es-share-dialog"]],viewQuery:function(i,o){if(1&i&&(e.Gf(At,5),e.Gf(w,5),e.Gf(St,5),e.Gf(Et,5),e.Gf(Tt,5)),2&i){let s;e.iGM(s=e.CRH())&&(o.publishComponent=s.first),e.iGM(s=e.CRH())&&(o.restrictedAccessComponent=s.first),e.iGM(s=e.CRH())&&(o.inheritRef=s.first),e.iGM(s=e.CRH())&&(o.stateRef=s.first),e.iGM(s=e.CRH())&&(o.shareLinkRef=s.first)}},decls:18,vars:10,consts:[["shareLink",""],["mat-stretch-tabs","",3,"selectedIndex","selectedIndexChange"],[1,"tabContent","tabContentInvite"],["mat-tab-label",""],[1,"invite-group"],[1,"group","groupInvite"],[3,"globalSearchAllowed","onChooseAuthority"],["class","hintNoFuzzy",4,"ngIf"],["class","group groupToInvite",4,"ngIf"],["class","groupMessage",4,"ngIf"],["class","bulk-config",4,"ngIf"],["class","tabContent",4,"ngIf"],["state",""],["mat-raised-button","","class","share-link-button",3,"click",4,"ngIf"],["mat-raised-button","",1,"share-link-button",3,"click"],["esIcon","link"],["esIcon","group_add",1,"tab-icon"],[1,"tab-label"],[1,"hintNoFuzzy"],[1,"group","groupToInvite"],[1,"toInvite"],[3,"removed",4,"ngFor","ngForOf"],["class","typeButton",4,"ngIf"],["class","typeAdd",3,"aria-label","selected","isDirectory","canPublish","onCancel","onType",4,"ngIf"],[3,"removed"],[1,"mat-chip-group"],[1,"primary"],[1,"secondary"],["matChipRemove","","esIcon","cancel"],[1,"typeButton"],["mat-raised-button","","role","combobox","aria-haspopup","true",3,"click"],[4,"ngIf"],["esIcon","help_outline"],["aria-hidden","true","esIcon","keyboard_arrow_down"],["esIcon","remove_red_eye"],["esIcon","edit"],["esIcon","work"],[1,"typeAdd",3,"aria-label","selected","isDirectory","canPublish","onCancel","onType"],[1,"groupMessage"],["id","notify",3,"ngModel","ngModelChange"],[1,"notify-info"],["floatLabel","always",4,"ngIf"],["floatLabel","always"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","3","cdkAutosizeMaxRows","5","id","message","name","message",3,"ngModel","placeholder","ngModelChange"],[1,"bulk-config"],[3,"ngModel","ngModelChange"],[1,"mat-heading-4"],["value","extend"],["slot","label"],["slot","description"],["value","replace"],[1,"publish-bulk"],[3,"ngModel","disabled","ngModelChange"],[1,"tabContent"],[1,"invited"],["class","history uppercase",3,"click",4,"ngIf"],["class","groupName",4,"ngIf"],["class","groupEntry owner",3,"permission","isDirectory","readOnly","showDelete",4,"ngIf"],[1,"normal"],[4,"ngFor","ngForOf"],["class","usage",4,"ngIf"],["class","usage",4,"ngFor","ngForOf"],["esIcon","group",1,"tab-icon"],[1,"history","uppercase",3,"click"],["esIcon","arrow_forward"],[1,"groupName"],[1,"groupEntry","owner",3,"permission","isDirectory","readOnly","showDelete"],[1,"groupHeading"],[1,"inheritCheck"],["id","inherit",3,"ngModel","click","ngModelChange"],["inheritRef",""],["class","inherit",3,"crossed",4,"ngIf"],["class","inheritDisabled",4,"ngIf"],["class","inheritEmpty",4,"ngIf"],[1,"inherit"],["class","groupEntry",4,"ngFor","ngForOf"],[1,"groupEntry"],[3,"permission","isDirectory","inherit","readOnly"],[1,"inheritDisabled"],[1,"inheritEmpty"],[1,"groupEntry",3,"permission","readOnly","showDelete","isDeleted","isDirectory","canPublish","onRemove","onType"],[1,"manageLink","uppercase",3,"click"],[1,"groupEntry","link",3,"permission","isDirectory","readOnly","showDelete"],["class","manageLink uppercase",3,"click",4,"ngIf"],[1,"groupEntry","link",3,"permission","isDirectory","readOnly","showDelete","isDeleted"],[1,"usage"],[1,"usageEntry",3,"name","usages","deleteList","deleteListChange"],["class","usageEntry",3,"name","usages","deleteList","deleteListChange",4,"ngIf"],[1,"publish-tab"],[3,"node","permissions","inherited","isAuthorEmpty","isLicenseEmpty","onInitCompleted","onDisableInherit"],["publish",""],["esIcon","public",1,"tab-icon"],[1,"restricted-access-tab"],[3,"node"],["esIcon","lock",1,"tab-icon"],[1,"advanced"],["class","mat-heading-4",4,"ngIf"],["esIcon","settings",1,"tab-icon"],[1,"advancedAuthority"],[1,"type","material-icons"],["class","advancedPermission",4,"ngFor","ngForOf"],[1,"advancedPermission"],[3,"id","checked","disabled","change"],["class","state",4,"ngIf"],[1,"state"],["class","show-state",3,"state-changed",4,"ngIf"],[1,"show-state"],["esIcon","lock"],["esIcon","group"],[1,"material-icons",2,"color","#42ca8d"]],template:function(i,o){1&i&&(e.YNc(0,Mt,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"mat-tab-group",1),e.NdJ("selectedIndexChange",function(l){return o.tab=l}),e.TgZ(3,"mat-tab",2),e.YNc(4,bt,4,3,"ng-template",3),e.TgZ(5,"div",4)(6,"div",5)(7,"es-authority-search-input",6),e.NdJ("onChooseAuthority",function(l){return o.addSuggestion(l)}),e.qZA(),e.YNc(8,yt,3,3,"div",7),e.qZA(),e.YNc(9,wt,5,3,"div",8),e.YNc(10,Yt,9,8,"div",9),e.qZA(),e.YNc(11,Kt,30,24,"div",10),e.qZA(),e.YNc(12,dn,19,15,"mat-tab",11),e.YNc(13,pn,5,5,"mat-tab",11),e.YNc(14,gn,4,1,"mat-tab",11),e.YNc(15,Pn,5,2,"mat-tab",11),e.qZA(),e.YNc(16,En,1,1,"ng-template",null,12,e.W1O)),2&i&&(e.xp6(2),e.Q6J("selectedIndex",o.tab),e.xp6(5),e.Q6J("globalSearchAllowed",o.globalAllowed),e.xp6(1),e.Q6J("ngIf",o.globalSearch&&!o.fuzzyAllowed),e.xp6(1),e.Q6J("ngIf",o.getNewInvitedAuthorities().length),e.xp6(1),e.Q6J("ngIf",o.data.sendMessages&&o.getNewInvitedAuthorities().length),e.xp6(1),e.Q6J("ngIf",o.isBulk()),e.xp6(1),e.Q6J("ngIf",o._nodes&&1===o._nodes.length),e.xp6(1),e.Q6J("ngIf",o._nodes&&o.publishPermission&&!o.isBulk()&&!o.isSafe),e.xp6(1),e.Q6J("ngIf",o._nodes&&o.restrictedAccessPermission&&!o.isBulk()&&!o.isSafe),e.xp6(1),e.Q6J("ngIf",o.isAdmin&&o.permissionsUser&&o.permissionsGroup))},dependencies:[ie.e,h.sg,h.O5,g.ar,f.Fj,f.JJ,f.On,oe.N,O.lW,E.oG,v.HS,v.qH,v.J4,K.KE,K.hX,se.Nt,ae.IC,x.VQ,x.U0,J.Rr,M.uD,M.uX,M.SP,T.w,q,Ne,gt,xt,w,h.Nd,m.X$,G.B],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]     mat-checkbox .mat-checkbox-layout, [_nghost-%COMP%]     mat-radio-button .mat-radio-label{white-space:normal}[_nghost-%COMP%]     .mat-tab-body-wrapper{flex-grow:1}.mat-mdc-tab-group[_ngcontent-%COMP%]{height:100%;flex-grow:1;min-height:0}.mat-mdc-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}.advancedPermission[_ngcontent-%COMP%]{float:left;width:33.33%}.hintNoFuzzy[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:10px;padding:0 10px;color:var(--textLight)}.group[_ngcontent-%COMP%]{position:relative;display:flex;padding:10px 20px}.groupInvite[_ngcontent-%COMP%]{padding:26px 20px 10px;flex-direction:column}.invited[_ngcontent-%COMP%], .advanced[_ngcontent-%COMP%]{padding:20px 25px}.advanced[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{justify-content:center}.advancedAuthority[_ngcontent-%COMP%]{color:var(--textLight);float:left;width:100%;font-weight:700;padding:10px 0}.advancedAuthority[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:5px;padding-right:10px}.history[_ngcontent-%COMP%]{padding-right:20px;float:right}.groupMessage[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-direction:column;gap:15px}.groupMessage[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.invite-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.publish-bulk[_ngcontent-%COMP%]{margin-top:20px;margin-left:-25px;width:calc(100% + 50px);padding:20px 25px;background-color:#eee}.bulk-config[_ngcontent-%COMP%]{padding:20px 25px}.bulk-config[_ngcontent-%COMP%]   .mat-heading-4[_ngcontent-%COMP%]{padding-bottom:15px}.bulk-config[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{padding:5px 10px}.groupToInvite[_ngcontent-%COMP%]{display:flex;margin-top:35px;padding-bottom:45px;padding-right:20px;align-items:center}.groupToInvite[_ngcontent-%COMP%]   .toInvite[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-wrap:wrap;width:100%}.groupToInvite[_ngcontent-%COMP%]   .toInvite[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-weight:700}.groupToInvite[_ngcontent-%COMP%]   .typeButton[_ngcontent-%COMP%]{display:flex}.groupToInvite[_ngcontent-%COMP%]   .typeButton[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{padding:0 4px;display:inline}.groupToInvite[_ngcontent-%COMP%]   .typeButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px}.crossed[_ngcontent-%COMP%]{text-decoration:line-through}.groupEntry[_ngcontent-%COMP%], .usageEntry[_ngcontent-%COMP%]{width:100%;display:flex;background:#eee;border-radius:25px;margin-bottom:6px;align-items:center;border:2px dashed transparent}.groupEntry[_ngcontent-%COMP%]   es-share-dialog-permission[_ngcontent-%COMP%], .usageEntry[_ngcontent-%COMP%]   es-share-dialog-permission[_ngcontent-%COMP%]{width:100%}.groupEntry[_ngcontent-%COMP%]{min-height:35px}.added[_ngcontent-%COMP%]{background:transparent;border-color:#42ca8d}.inherit[_ngcontent-%COMP%]{color:var(--textLight);min-height:50px}.inherit[_ngcontent-%COMP%]   .groupEntry[_ngcontent-%COMP%]{border:1px solid #42ca8d;cursor:default}.normal[_ngcontent-%COMP%], .owner[_ngcontent-%COMP%]{cursor:default}.groupHeading[_ngcontent-%COMP%]{display:flex;align-items:baseline;padding-bottom:10px}.groupName[_ngcontent-%COMP%]{color:var(--textLight);font-size:90%;padding-top:15px;padding-bottom:5px;float:left}.inheritDisabled[_ngcontent-%COMP%], .inheritEmpty[_ngcontent-%COMP%]{font-size:90%;color:var(--textLight);padding:0 10px 20px;font-style:italic;width:100%;text-align:center;white-space:pre-wrap}.tabContentInvite[_ngcontent-%COMP%]{padding-top:0}.inheritCheck[_ngcontent-%COMP%]{float:left;padding-left:20px}.manageLink[_ngcontent-%COMP%]{float:right;padding-right:15px;position:relative;top:14px}.typeAdd[_ngcontent-%COMP%]{position:absolute;right:20px;width:310px!important;top:-60px}.notify-info[_ngcontent-%COMP%]{color:var(--textLight)}.share-link-button[_ngcontent-%COMP%]{width:230px}.share-link-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.state[_ngcontent-%COMP%]{font-size:9pt}.state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--textLight);vertical-align:bottom;font-size:14pt;margin-right:3px}.state[_ngcontent-%COMP%]   .show-state[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;border:2px dashed transparent;border-radius:15px;padding:6px 10px}.state[_ngcontent-%COMP%]   .state-changed[_ngcontent-%COMP%]{border-color:#42ca8d}.state[_ngcontent-%COMP%]   .state-changed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--textLight)}@media screen and (max-width: 700px){.typeButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:auto;width:76px}.typeButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.advancedPermission[_ngcontent-%COMP%]{width:50%}.publish[_ngcontent-%COMP%]   .doi[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:0}.publish[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{display:none}.typeButton[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{left:0}.groupToInvite[_ngcontent-%COMP%]{padding-bottom:60px}.share-type-mobile[_ngcontent-%COMP%]{position:absolute;top:58px;right:25px;color:var(--textLight);display:block}}@media screen and (max-width: 500px){.groupHeading[_ngcontent-%COMP%]{flex-direction:column;padding-bottom:5px}.inheritCheck[_ngcontent-%COMP%]{padding-left:5px}.state[_ngcontent-%COMP%]   .show-state[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:none}.state[_ngcontent-%COMP%]   .state-changed[_ngcontent-%COMP%]{border-color:transparent}.state[_ngcontent-%COMP%]   .state-changed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#42ca8d}}"],data:{animation:[(0,U.X$)("overlay",g.Le.openOverlay())]}})}return n})(),vn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[z.m]})}return n})()}}]);