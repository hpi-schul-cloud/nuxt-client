"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[7364],{7364:(R,d,o)=>{o.r(d),o.d(d,{AddWithConnectorDialogComponent:()=>E,AddWithConnectorDialogModule:()=>M});var h=o(50555),f=o(45125),u=o(88419),r=o(81771),m=o(53461),t=o(65879),C=o(91486),p=o(96814),s=o(56223),y=o(23680),g=o(64170),A=o(24516),v=o(98525),T=o(71365);function O(i,l){if(1&i&&(t.TgZ(0,"mat-option",5),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",l.index),t.xp6(1),t.hij(" ",t.lcZ(2,2,"CONNECTOR.MIMETYPE."+("application/zip"===e.mimetype?e.ccressourcetype+"_"+e.ccressourceversion+"_"+e.ccresourcesubtype:e.mimetype)),"")}}function N(i,l){if(1&i&&(t.TgZ(0,"div",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"CONNECTOR."+e.connector.id+".FILENAME"),": ",e.name,".",e.getType().filetype,"\n")}}let E=(()=>{class i{get name(){return this.nameSubject.value}set name(e){this.nameSubject.next(e)}constructor(e,n){this.data=e,this.dialogRef=n,this.connector=this.processConnector(this.data.connector),this.nameSubject=new f.X(this.data.name??""),this.type=0,this.initDialogConfig()}cancel(){this.dialogRef.close(null)}create(){this.name.trim()&&this.dialogRef.close({name:this.name,type:this.getType()})}processConnector(e){for(let n=0;n<e.filetypes.length;n++)e.filetypes[n].creatable||e.filetypes.splice(n,1);return e}initDialogConfig(){const e=new r.Qd("CANCEL",{color:"standard"},()=>this.cancel()),n=new r.Qd("CREATE",{color:"primary"},()=>this.create());this.dialogRef.patchConfig({title:"CONNECTOR."+this.connector.id+".TITLE",subtitle:"CONNECTOR."+this.connector.id+".NAME",avatar:{kind:"icon",icon:this.connector.icon},buttons:[e,n]}),this.nameSubject.subscribe(a=>n.disabled=!a.trim()),this.nameSubject.pipe((0,u.P)(a=>!!a)).subscribe(()=>this.dialogRef.patchConfig({closable:m.IA.Standard}))}getType(){return this.connector.filetypes[this.type]}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(m.W9),t.Y36(C.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["es-add-with-connector-dialog"]],decls:14,vars:13,consts:[["matInput","","type","text","name","filename","autofocus","",3,"ngModel","ngModelChange"],["input",""],["name","filetype",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","name",4,"ngIf"],[3,"value"],[1,"name"]],template:function(n,a){1&n&&(t.TgZ(0,"form")(1,"mat-form-field")(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",0,1),t.NdJ("ngModelChange",function(c){return a.name=c}),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"mat-select",2),t.NdJ("ngModelChange",function(c){return a.type=c}),t.YNc(12,O,3,4,"mat-option",3),t.qZA()()(),t.YNc(13,N,3,5,"div",4)),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,9,"CONNECTOR."+a.connector.id+".PLACEHOLDER")),t.xp6(2),t.Q6J("ngModel",a.name),t.xp6(2),t.ekj("hide",1===a.connector.filetypes.length),t.xp6(2),t.Oqu(t.lcZ(10,11,"CONNECTOR_FORMAT_LABEL")),t.xp6(2),t.Q6J("ngModel",a.type)("disabled",1===a.connector.filetypes.length),t.xp6(1),t.Q6J("ngForOf",a.connector.filetypes),t.xp6(1),t.Q6J("ngIf",a.name.trim()))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,y.ey,g.KE,g.hX,A.Nt,v.gD,T.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return i})(),M=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[h.m]})}return i})()}}]);