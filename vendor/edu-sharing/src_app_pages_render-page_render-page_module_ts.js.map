{"version":3,"file":"src_app_pages_render-page_render-page_module_ts.js","mappings":"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","sources":["./src/app/core-module/rest/services/rest-tracking.service.ts","./src/app/pages/render-page/comments-list/comments-list.component.ts","./src/app/pages/render-page/comments-list/comments-list.component.html","./src/app/pages/render-page/node-relations/node-relations-widget.component.ts","./src/app/pages/render-page/node-relations/node-relations-widget.component.html","./src/app/pages/render-page/render-helper.service.ts","./src/app/pages/render-page/render-page-routing.module.ts","./src/app/pages/render-page/render-page.component.ts","./src/app/pages/render-page/render-page.component.html","./src/app/pages/render-page/render-page.module.ts","./src/app/pages/render-page/touchevents.directive.ts","./src/app/pages/render-page/video-controls/duration.pipe.ts","./src/app/pages/render-page/video-controls/video-controls.component.ts","./src/app/pages/render-page/video-controls/video-controls.component.html","./node_modules/rxjs/_esm2015/internal/operators/skipWhile.js"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { RestConnectorService } from './rest-connector.service';\nimport { RestConstants } from '../rest-constants';\nimport { EventType } from '../data-object';\nimport { RequestObject } from '../request-object';\n\n@Injectable({ providedIn: 'root' })\nexport class RestTrackingService {\n    constructor(private connector: RestConnectorService) {}\n\n    trackEvent(\n        event: EventType,\n        node: string = null,\n        repository = RestConstants.HOME_REPOSITORY,\n    ): Observable<void> {\n        let query = this.connector.createUrl(\n            'tracking/:version/tracking/:repository/:event?node=:node',\n            repository,\n            [\n                [':event', event],\n                [':node', node],\n            ],\n        );\n        console.log(query);\n        return this.connector.put(query, null, this.connector.getRequestOptions());\n    }\n}\n","import { trigger } from '@angular/animations';\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { OptionItem, UIAnimation } from 'ngx-edu-sharing-ui';\nimport {\n    Comment,\n    Comments,\n    LoginResult,\n    Node,\n    RestCommentsService,\n    RestConnectorService,\n    RestConstants,\n    RestIamService,\n    User,\n} from '../../../core-module/core.module';\nimport { Toast } from '../../../services/toast';\nimport { YES_OR_NO } from '../../../features/dialogs/dialog-modules/generic-dialog/generic-dialog-data';\nimport { DialogsService } from '../../../features/dialogs/dialogs.service';\n\n@Component({\n    selector: 'es-comments-list',\n    templateUrl: 'comments-list.component.html',\n    styleUrls: ['comments-list.component.scss'],\n    animations: [\n        trigger('fade', UIAnimation.fade()),\n        trigger('cardAnimation', UIAnimation.cardAnimation()),\n    ],\n})\nexport class CommentsListComponent {\n    public _node: Node;\n    private isGuest: boolean;\n    user: User;\n    comments: Comment[];\n    private edit: Comment[];\n    options: OptionItem[];\n\n    public newComment = '';\n    public editComment: Comment = null;\n    public editCommentText: string;\n    loading: boolean;\n    sending: boolean;\n    hasPermission: boolean;\n\n    @Input() set node(node: Node) {\n        this._node = node;\n        this.refresh();\n    }\n    @Output() onCancel = new EventEmitter();\n    @Output() onLoading = new EventEmitter();\n    /**\n     * Some data has changed, may be a new, removed or edited comment\n     * @type {EventEmitter<any>}\n     */\n    @Output() onChange = new EventEmitter();\n    dropdown = -1;\n\n    constructor(\n        private commentsApi: RestCommentsService,\n        private connector: RestConnectorService,\n        private dialogs: DialogsService,\n        private iam: RestIamService,\n        private toast: Toast,\n    ) {\n        this.connector.isLoggedIn(false).subscribe((data: LoginResult) => {\n            this.isGuest = data.isGuest;\n            if (!data.isGuest) {\n                this.iam.getCurrentUserAsync().then((data) => {\n                    this.user = data.person;\n                    this.hasPermission = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COMMENT_WRITE,\n                    );\n                });\n            }\n        });\n    }\n    saveEditComment() {\n        this.onLoading.emit(true);\n        this.commentsApi\n            .editComment(this.editComment.ref.id, this.editCommentText.trim())\n            .subscribe(\n                () => {\n                    this.onLoading.emit(false);\n                    this.onChange.emit();\n                    this.editComment = null;\n                    this.refresh();\n                },\n                (error: any) => {\n                    this.toast.error(error);\n                    this.onLoading.emit(false);\n                },\n            );\n    }\n    getOptions(comment: Comment) {\n        let options: OptionItem[] = [];\n        let isAuthor = this.user && this.user.authorityName == comment.creator.authorityName;\n        if (isAuthor) {\n            options.push(\n                new OptionItem('NODE_COMMENTS.OPTION_EDIT', 'edit', () => {\n                    this.editComment = comment;\n                    this.editCommentText = comment.comment;\n                }),\n            );\n        }\n        if (isAuthor || this._node.access.indexOf(RestConstants.ACCESS_WRITE) != -1) {\n            options.push(\n                new OptionItem('NODE_COMMENTS.OPTION_DELETE', 'delete', async () => {\n                    const dialogRef = await this.dialogs.openGenericDialog({\n                        title: 'NODE_COMMENTS.DELETE_COMMENT',\n                        message: 'NODE_COMMENTS.DELETE_COMMENT_MESSAGE',\n                        buttons: YES_OR_NO,\n                    });\n                    dialogRef.afterClosed().subscribe((response) => {\n                        if (response === 'YES') {\n                            this.onLoading.emit(true);\n                            this.toast.closeProgressSpinner();\n                            this.commentsApi.deleteComment(comment.ref.id).subscribe(\n                                () => {\n                                    this.refresh();\n                                    this.onChange.emit();\n                                    this.onLoading.emit(false);\n                                },\n                                (error: any) => {\n                                    this.toast.error(error);\n                                    this.onLoading.emit(false);\n                                },\n                            );\n                        }\n                    });\n                }),\n            );\n        }\n        return options;\n    }\n    public canComment() {\n        if (this.isGuest || !this.user || !this.hasPermission) return false;\n        return this._node.access.indexOf(RestConstants.ACCESS_COMMENT) !== -1;\n    }\n    public addComment() {\n        if (!this.newComment.trim()) {\n            this.toast.error(null, 'NODE_COMMENTS.COMMENT_EMPTY');\n            return;\n        }\n        this.sending = true;\n        this.onLoading.emit(true);\n        this.commentsApi.addComment(this._node.ref.id, this.newComment.trim()).subscribe(\n            () => {\n                this.sending = false;\n                this.onLoading.emit(false);\n                this.onChange.emit();\n                this.newComment = '';\n                this.refresh();\n            },\n            (error: any) => {\n                this.sending = false;\n                this.toast.error(error);\n                this.onLoading.emit(false);\n            },\n        );\n    }\n    public cancel() {\n        this.onCancel.emit();\n    }\n\n    private refresh() {\n        this.comments = null;\n        if (!this._node) return;\n        if (this.loading) {\n            setTimeout(() => this.refresh(), 100);\n            return;\n        }\n        this.loading = true;\n        this.commentsApi.getComments(this._node.ref.id, this._node.ref.repo).subscribe(\n            (data: Comments) => {\n                this.loading = false;\n                this.comments = data && data.comments ? data.comments.reverse() : [];\n            },\n            (error: any) => {\n                this.loading = false;\n                this.toast.error(error);\n            },\n        );\n    }\n}\n","<es-dropdown #dropdown [options]=\"options\"></es-dropdown>\n<div *ngIf=\"_node\" class=\"group\">\n  <div class=\"new\" *ngIf=\"canComment()\">\n    <div class=\"left\">\n      <es-user-avatar [size]=\"'small'\" [user]=\"user\"></es-user-avatar>\n    </div>\n    <div class=\"right\">\n      <form (ngSubmit)=\"addComment()\">\n        <mat-form-field>\n          <textarea\n            matInput\n            name=\"addComment\"\n            [disabled]=\"sending\"\n            placeholder=\"{{ 'NODE_COMMENTS.NEW_COMMENT_PLACEHOLDER' | translate }}\"\n            [(ngModel)]=\"newComment\"\n          ></textarea>\n        </mat-form-field>\n        <button *ngIf=\"!sending\" mat-icon-button (click)=\"addComment()\">\n          <i esIcon=\"send\"></i>\n        </button>\n        <es-spinner-small *ngIf=\"sending\"></es-spinner-small>\n      </form>\n    </div>\n  </div>\n  <div class=\"new-no-permission\" *ngIf=\"!canComment()\">\n    <div class=\"no-permission\">{{ 'NODE_COMMENTS.NO_PERMISSION' | translate }}</div>\n  </div>\n  <div class=\"comments comments-loading\" *ngIf=\"loading\"><es-spinner></es-spinner></div>\n  <div class=\"comments\" [class.commentsLong]=\"!canComment()\" *ngIf=\"comments\">\n    <div *ngIf=\"comments && !comments.length && canComment()\" class=\"no-comments\">\n      {{ 'NODE_COMMENTS.NO_COMMENTS' | translate }}\n    </div>\n    <div *ngFor=\"let comment of comments; let i = index\" class=\"comment\">\n      <div class=\"top\">\n        <div class=\"left\">\n          <es-user-avatar [link]=\"true\" [size]=\"'small'\" [user]=\"comment.creator\"></es-user-avatar>\n        </div>\n        <div class=\"right\">\n          <div class=\"creator\">\n            <div class=\"name\">{{ comment.creator | authorityName }}</div>\n            <button\n              mat-icon-button\n              #menuTrigger=\"matMenuTrigger\"\n              class=\"dropdown-dummy\"\n              [matMenuTriggerFor]=\"dropdown.menu\"\n              (click)=\"options = getOptions(comment)\"\n            >\n              <i\n                esIcon=\"more_vert\"\n                class=\"dropdown\"\n                *ngIf=\"getOptions(comment) && getOptions(comment).length\"\n              ></i>\n            </button>\n          </div>\n          <div class=\"commentText\" *ngIf=\"comment != editComment\">{{ comment.comment }}</div>\n          <div class=\"commentTextEdit\" *ngIf=\"comment == editComment\">\n            <form (ngSubmit)=\"saveEditComment()\">\n              <mat-form-field>\n                <textarea\n                  matInput\n                  name=\"comment\"\n                  placeholder=\"{{ 'NODE_COMMENTS.NEW_COMMENT_PLACEHOLDER' | translate }}\"\n                  [(ngModel)]=\"editCommentText\"\n                ></textarea>\n              </mat-form-field>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div class=\"icons\" *ngIf=\"comment == editComment\">\n        <div\n          class=\"btn-negative\"\n          tabindex=\"0\"\n          (click)=\"editComment = null\"\n          (keyup.enter)=\"editComment = null\"\n        >\n          <i esIcon=\"close\"></i>\n        </div>\n        <div\n          class=\"btn-positive\"\n          tabindex=\"0\"\n          (click)=\"saveEditComment()\"\n          (keyup.enter)=\"saveEditComment()\"\n        >\n          <i esIcon=\"check\"></i>\n        </div>\n      </div>\n      <div class=\"date\" *ngIf=\"comment != editComment\">{{ comment.created | formatDate }}</div>\n    </div>\n  </div>\n</div>\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { NodeService, RelationData, RelationService } from 'ngx-edu-sharing-api';\nimport { ListItem } from 'ngx-edu-sharing-ui';\nimport { forkJoin as observableForkJoin } from 'rxjs';\nimport { Node } from '../../../core-module/rest/data-object';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestHelper } from '../../../core-module/rest/rest-helper';\n\n@Component({\n    selector: 'es-mds-node-relations-widget',\n    templateUrl: 'node-relations-widget.component.html',\n    styleUrls: ['node-relations-widget.component.scss'],\n})\nexport class MdsNodeRelationsWidgetComponent implements OnInit, OnChanges {\n    loading = true;\n    @Input() node: Node;\n    relations: RelationData[];\n    columns = [new ListItem('NODE', RestConstants.LOM_PROP_TITLE)];\n    versions: Node[];\n    forkedOrigin: Node;\n    forkedChilds: Node[];\n\n    constructor(private relationService: RelationService, private nodeService: NodeService) {}\n\n    ngOnInit(): void {}\n\n    ngOnChanges(changes?: SimpleChanges) {\n        if (this.node) {\n            observableForkJoin([\n                this.nodeService.getForkedChilds(this.node),\n                this.nodeService.getPublishedCopies(this.node.ref.id),\n                this.relationService.getRelations(this.node.ref.id),\n            ]).subscribe(async (result) => {\n                this.forkedChilds = result[0].nodes;\n                this.versions = result[1].nodes.reverse();\n                this.relations = result[2].relations;\n                // is a forked child\n                if (this.node.properties[RestConstants.CCM_PROP_FORKED_ORIGIN]) {\n                    this.nodeService\n                        .getNode(\n                            RestHelper.removeSpacesStoreRef(\n                                this.node.properties[RestConstants.CCM_PROP_FORKED_ORIGIN][0],\n                            ),\n                        )\n                        .subscribe(\n                            (node) => {\n                                this.forkedOrigin = node;\n                                this.loading = false;\n                            },\n                            (error) => {\n                                // soft error, do not trigger toast\n                                error.preventDefault();\n                                this.loading = false;\n                            },\n                        );\n                } else {\n                    this.loading = false;\n                }\n            });\n        }\n    }\n\n    getRelationKeys() {\n        return [...new Set(this.relations?.map((r) => r.type))].sort();\n    }\n\n    getRelations(key: string) {\n        return this.relations.filter((r) => r.type === key);\n    }\n\n    isCurrentVersion(version: Node) {\n        // collection refs always refer to the latest version\n        if (this.node.aspects.includes(RestConstants.CCM_ASPECT_IO_REFERENCE)) {\n            const publishedVersion = this.versions.find(\n                (v) => v.ref.id === this.node.properties[RestConstants.CCM_PROP_IO_ORIGINAL]?.[0],\n            );\n            if (publishedVersion) {\n                return publishedVersion === version;\n            }\n            return this.versions.indexOf(version) === 0;\n        }\n        return (\n            this.node.properties[RestConstants.LOM_PROP_LIFECYCLE_VERSION]?.[0] ===\n            version.properties[RestConstants.LOM_PROP_LIFECYCLE_VERSION]?.[0]\n        );\n    }\n}\n","<div class=\"node-relations-widget\">\n  <es-spinner *ngIf=\"loading\"></es-spinner>\n  <ng-container *ngIf=\"!loading\">\n    <div class=\"relations-group versions\" *ngIf=\"versions?.length\">\n      <h5 class=\"relations-heading\">{{ 'NODE_RELATIONS.RELATION_TYPE.VERSIONS' | translate }}</h5>\n      <div class=\"relation-nodes version\">\n        <es-node-url\n          class=\"relation-node\"\n          *ngFor=\"let version of versions\"\n          [class.current-version]=\"isCurrentVersion(version)\"\n          [node]=\"version\"\n          [queryParams]=\"{ closeOnBack: true }\"\n          target=\"_BLANK\"\n        >\n          <es-node-row [node]=\"version\" [columns]=\"columns\">\n            <ng-template #customMetadata>\n              <div class=\"info-group\">\n                <label>{{ 'WORKSPACE.SHARE.PUBLISH.VERSION_DATE_ABSOLUTE' | translate }}</label>\n                <span\n                  >{{ version.properties['ccm:published_date_LONG']?.[0] | formatDate:{relative: false} }}</span\n                >\n              </div>\n              <div class=\"info-group\">\n                <label>{{ 'WORKSPACE.SHARE.PUBLISH.VERSION_NUMBER' | translate }}</label>\n                <span\n                  >{{ version.properties['cclom:version']?.[0] }}\n                  <span *ngIf=\"isCurrentVersion(version)\" class=\"current-version-text\">\n                    ({{ 'NODE_RELATIONS.CURRENT_VERSION' | translate }})\n                  </span></span\n                >\n              </div>\n            </ng-template>\n          </es-node-row>\n        </es-node-url>\n      </div>\n    </div>\n\n    <div\n      class=\"empty\"\n      *ngIf=\"!versions?.length && !relations?.length && !forkedChilds?.length && !forkedOrigin\"\n    >\n      {{ 'NODE_RELATIONS.NO_RELATIONS' | translate }}\n    </div>\n    <div class=\"relations-group\" *ngFor=\"let key of getRelationKeys()\">\n      <h5 class=\"relations-heading\">{{ 'NODE_RELATIONS.RELATION_TYPE.' + key | translate }}</h5>\n      <div class=\"relation-nodes\">\n        <es-node-url\n          class=\"relation-node\"\n          [node]=\"relation.node\"\n          [queryParams]=\"{ closeOnBack: true }\"\n          target=\"_BLANK\"\n          *ngFor=\"let relation of getRelations(key)\"\n        >\n          <es-node-row [node]=\"relation.node\" [columns]=\"columns\">\n            <ng-template #customMetadata>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.RELATION_CREATED' | translate }}</label>\n                <span>{{ relation.timestamp | formatDate : { relative: true } }}</span>\n              </div>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.RELATION_CREATOR' | translate }}</label>\n                <span>{{ relation.creator | authorityName }}</span>\n              </div>\n            </ng-template>\n          </es-node-row>\n        </es-node-url>\n      </div>\n    </div>\n    <ng-container *ngIf=\"forkedOrigin\">\n      <h5 class=\"relations-heading\">\n        {{ 'NODE_RELATIONS.RELATION_TYPE.FORKED_ORIGIN' | translate }}\n      </h5>\n      <div class=\"relation-nodes version\">\n        <es-node-url\n          class=\"relation-node\"\n          [node]=\"forkedOrigin\"\n          [queryParams]=\"{ closeOnBack: true }\"\n          target=\"_BLANK\"\n        >\n          <es-node-row [node]=\"forkedOrigin\" [columns]=\"columns\">\n            <ng-template #customMetadata>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.VARIANT_CREATED' | translate }}</label>\n                <span>{{ forkedOrigin.createdAt | formatDate : { relative: true } }}</span>\n              </div>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.VARIANT_CREATOR' | translate }}</label>\n                <span>{{ forkedOrigin.createdBy | authorityName }}</span>\n              </div>\n            </ng-template>\n          </es-node-row>\n        </es-node-url>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"forkedChilds?.length\">\n      <h5 class=\"relations-heading\">\n        {{ 'NODE_RELATIONS.RELATION_TYPE.FORKED_CHILDS' | translate }}\n      </h5>\n      <div class=\"relation-nodes version\">\n        <es-node-url\n          class=\"relation-node\"\n          *ngFor=\"let child of forkedChilds\"\n          [node]=\"child\"\n          [queryParams]=\"{ closeOnBack: true }\"\n          target=\"_BLANK\"\n        >\n          <es-node-row [node]=\"child\" [columns]=\"columns\">\n            <ng-template #customMetadata>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.VARIANT_CREATED' | translate }}</label>\n                <span>{{ child.createdAt | formatDate : { relative: true } }}</span>\n              </div>\n              <div class=\"info-group\">\n                <label>{{ 'NODE_RELATIONS.VARIANT_CREATOR' | translate }}</label>\n                <span>{{ child.createdBy | authorityName }}</span>\n              </div>\n            </ng-template>\n          </es-node-row>\n        </es-node-url>\n      </div>\n    </ng-container>\n  </ng-container>\n</div>\n<ng-template let-key=\"key\" let-nodes=\"nodes\"> </ng-template>\n","import {\n    ComponentFactoryResolver,\n    ComponentRef,\n    Injectable,\n    ViewContainerRef,\n} from '@angular/core';\nimport {\n    ListItem,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    NodeEntriesWrapperComponent,\n    OptionsHelperDataService,\n    Scope,\n    SpinnerComponent,\n    Target,\n} from 'ngx-edu-sharing-ui';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EventType, Node } from '../../core-module/rest/data-object';\nimport { RestConstants } from '../../core-module/rest/rest-constants';\nimport { RestTrackingService } from '../../core-module/rest/services/rest-tracking.service';\nimport { RestUsageService } from '../../core-module/rest/services/rest-usage.service';\nimport { UIHelper } from '../../core-ui-module/ui-helper';\nimport { MdsEditorWrapperComponent } from '../../features/mds/mds-editor/mds-editor-wrapper/mds-editor-wrapper.component';\nimport { replaceElementWithDiv } from '../../features/mds/mds-editor/util/replace-element-with-div';\nimport { CommentsListComponent } from './comments-list/comments-list.component';\nimport { MdsNodeRelationsWidgetComponent } from './node-relations/node-relations-widget.component';\nimport { VideoControlsComponent } from './video-controls/video-controls.component';\n\n@Injectable()\nexport class RenderHelperService {\n    private static isCollectionRef(node: Node) {\n        return node.aspects.indexOf(RestConstants.CCM_ASPECT_IO_REFERENCE) !== -1;\n    }\n\n    private videoControlsRef: ComponentRef<VideoControlsComponent>;\n    private viewContainerRef: ViewContainerRef;\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private usageApi: RestUsageService,\n        private optionsHelperService: OptionsHelperDataService,\n        private tracking: RestTrackingService,\n    ) {}\n\n    setViewContainerRef(viewContainerRef: ViewContainerRef) {\n        this.viewContainerRef = viewContainerRef;\n    }\n\n    injectModuleComments(node: Node) {\n        const data = {\n            node,\n        };\n        UIHelper.injectAngularComponent(\n            this.componentFactoryResolver,\n            this.viewContainerRef,\n            CommentsListComponent,\n            document.getElementsByTagName('comments')[0],\n            data,\n        );\n    }\n\n    injectModuleInCollections(node: Node) {\n        let domCollections: Element;\n        let parent: Element;\n        try {\n            domCollections = document.evaluate(\n                '//*[@id=\"edusharing_rendering_metadata\"]//collections',\n                document,\n                null,\n                XPathResult.FIRST_ORDERED_NODE_TYPE,\n                null,\n            ).singleNodeValue as Element;\n            parent = domCollections.parentElement.parentElement;\n        } catch (e) {\n            return;\n        }\n\n        domCollections = replaceElementWithDiv(domCollections);\n        UIHelper.injectAngularComponent(\n            this.componentFactoryResolver,\n            this.viewContainerRef,\n            SpinnerComponent,\n            domCollections,\n        );\n        this.getCollectionsContainingNode(node).subscribe(\n            (collections) => {\n                // @TODO: This does currently ignore the \"hideIfEmpty\" flag of the mds template\n                if (collections.length === 0) {\n                    parent.remove();\n                    return;\n                }\n                const data = {\n                    dataSource: new NodeDataSource(collections),\n                    columns: ListItem.getCollectionDefaults(),\n                    displayType: NodeEntriesDisplayType.SmallGrid,\n                };\n                const entriesComponentRef = UIHelper.injectAngularComponent(\n                    this.componentFactoryResolver,\n                    this.viewContainerRef,\n                    NodeEntriesWrapperComponent,\n                    domCollections,\n                    data,\n                    { delay: 250 },\n                );\n                entriesComponentRef.instance.ngOnChanges();\n            },\n            (error) => {\n                parent.remove();\n            },\n        );\n    }\n    injectNodeRelationsWidget(node: Node) {\n        let domRelations;\n        try {\n            domRelations = document.evaluate(\n                '//*[@id=\"edusharing_rendering_metadata\"]//nodeRelations',\n                document,\n                null,\n                XPathResult.FIRST_ORDERED_NODE_TYPE,\n                null,\n            ).singleNodeValue as Element;\n        } catch (e) {}\n        if (domRelations) {\n            domRelations = replaceElementWithDiv(domRelations);\n            const component = UIHelper.injectAngularComponent(\n                this.componentFactoryResolver,\n                this.viewContainerRef,\n                MdsNodeRelationsWidgetComponent,\n                domRelations,\n                {\n                    node,\n                },\n            );\n            component.instance.ngOnChanges();\n            return component;\n        }\n        return null;\n    }\n\n    injectMetadataEditor(node: Node, groupId = 'io_render') {\n        const metadata = document.querySelector('.edusharing_rendering_metadata_body');\n        const parent = metadata.parentElement;\n        parent.removeChild(metadata);\n        const component = UIHelper.injectAngularComponent(\n            this.componentFactoryResolver,\n            this.viewContainerRef,\n            MdsEditorWrapperComponent,\n            parent,\n            {\n                groupId,\n                nodes: [node],\n                editorMode: 'inline',\n                embedded: true,\n            },\n        );\n        // enforce to render all widgets, since rendering does not support extended state\n        component.instance.getInstanceService().shouldShowExtendedWidgets$.next(true);\n        return component;\n    }\n\n    private getCollectionsContainingNode(node: Node): Observable<Node[]> {\n        const id = this.getOriginalId(node);\n        return this.usageApi.getNodeUsagesCollection(id, node.ref.repo).pipe(\n            map((usages) => usages.filter((usage) => usage.collectionUsageType === 'ACTIVE')),\n            map((usages) => usages.map((usage) => usage.collection)),\n        );\n    }\n\n    private getOriginalId(node: Node): string {\n        if (RenderHelperService.isCollectionRef(node)) {\n            return node.properties[RestConstants.CCM_PROP_IO_ORIGINAL];\n        } else {\n            return node.ref.id;\n        }\n    }\n\n    /**\n     * find injected link based actions with attribute es-action\n     * (they're generated by the backend)\n     * and replace them with internal function/action calls\n     */\n    applyActionButtons(node: Node) {\n        let result: XPathResult;\n        try {\n            result = document.evaluate(\n                '//*[@id=\"edusharing_rendering_metadata\"]//a[@data-es-action]',\n                document,\n                null,\n                XPathResult.UNORDERED_NODE_ITERATOR_TYPE,\n                null,\n            );\n        } catch (e) {}\n        if (result) {\n            let action: HTMLElement;\n            while ((action = result.iterateNext() as HTMLElement)) {\n                const actionName = action.getAttribute('data-es-action');\n                action.onclick = async (event) => {\n                    event.preventDefault();\n                    this.optionsHelperService.setData({\n                        scope: Scope.Render,\n                        activeObjects: [node],\n                    });\n                    const option = (\n                        await this.optionsHelperService.getAvailableOptions(Target.List, [node])\n                    ).filter((o) => o.name === actionName);\n                    if (option.length === 1 && option[0].isEnabled) {\n                        option[0].callback(node);\n                    } else {\n                        console.warn('No action was available for: ' + actionName);\n                    }\n                };\n            }\n        }\n    }\n\n    doAll(node: Node) {\n        this.injectModuleInCollections(node);\n        this.injectNodeRelationsWidget(node);\n        this.injectModuleComments(node);\n        this.applyActionButtons(node);\n        this.injectVideoControls(node);\n        this.injectEventHandler(node);\n    }\n\n    injectEventHandler(node: Node) {\n        const videoElement = document.querySelector('#edusharing_rendering_content_href');\n        videoElement.addEventListener('click', () => {\n            this.tracking.trackEvent(EventType.OPEN_EXTERNAL_LINK, node.ref.id).subscribe(() => {});\n        });\n    }\n    injectVideoControls(node: Node) {\n        let videoElement: HTMLVideoElement;\n        let target: Element;\n        try {\n            videoElement = document.querySelector('.edusharing_rendering_content_wrapper video');\n            if (!videoElement) {\n                throw new Error();\n            }\n            const listener = () => {\n                this.tracking\n                    .trackEvent(EventType.VIEW_MATERIAL_PLAY_MEDIA, node.ref.id)\n                    .subscribe(() => {});\n                videoElement.removeEventListener('play', listener);\n            };\n            videoElement.addEventListener('play', listener);\n            target = document.createElement('div');\n            document\n                .querySelector('.edusharing_rendering_wrapper')\n                .parentElement.appendChild(target);\n        } catch (e) {\n            // console.log(\"did not find video element, skipping controls\",e);\n            setTimeout(() => this.injectVideoControls(node), 1000 / 30);\n            return;\n        }\n        const data = {\n            video: videoElement,\n            node,\n        };\n        this.videoControlsRef = UIHelper.injectAngularComponent(\n            this.componentFactoryResolver,\n            this.viewContainerRef,\n            VideoControlsComponent,\n            target,\n            data,\n        );\n    }\n\n    /**\n     * applies the render data given as the detailsSnippet and injects it in the given HTMLELement\n     * Script urls given by the rendering data will be obeyed. However, inline scripts are NOT supported\n     * This function should be used to align with CSP security policies\n     */\n    applyRenderData(htmlElement: HTMLElement, detailsSnippet: string) {\n        htmlElement.innerHTML = detailsSnippet;\n        Array.from(htmlElement.querySelectorAll('script')).forEach((script) => {\n            const newScriptElement = document.createElement('script');\n            if (\n                !Array.from(script.attributes)\n                    .map((a) => a.name)\n                    .includes('src')\n            ) {\n                console.warn(\n                    'Rendering provided an inline script without a src! This script can not be executed!',\n                    script,\n                );\n            }\n            Array.from(script.attributes).forEach((attr) => {\n                newScriptElement.setAttribute(attr.name, attr.value);\n            });\n            document.head.appendChild(newScriptElement);\n            script.parentElement.removeChild(script);\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { RenderPageComponent } from './render-page.component';\n\nconst routes: Routes = [\n    {\n        path: ':node',\n        component: RenderPageComponent,\n    },\n    {\n        path: ':node/:version',\n        component: RenderPageComponent,\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class RenderPageRoutingModule {}\n","import { trigger } from '@angular/animations';\nimport { Location, PlatformLocation } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    ViewChild,\n    ViewContainerRef,\n} from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService, ProposalNode } from 'ngx-edu-sharing-api';\nimport {\n    ActionbarComponent,\n    DefaultGroups,\n    ElementType,\n    InteractionType,\n    ListItem,\n    LocalEventsService,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    OptionItem,\n    OptionsHelperDataService,\n    Scope,\n    Target,\n    TemporaryStorageService,\n    TranslationsService,\n    UIAnimation,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\nimport { Subject } from 'rxjs';\nimport { filter, skipWhile, takeUntil } from 'rxjs/operators';\nimport { AppComponent } from '../../app.component';\nimport {\n    ConfigurationHelper,\n    ConfigurationService,\n    EventListener,\n    FrameEventsService,\n    LoginResult,\n    Mds,\n    Node,\n    NodeList,\n    RestConnectorService,\n    RestConnectorsService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestMdsService,\n    RestNetworkService,\n    RestNodeService,\n    RestSearchService,\n    RestToolService,\n    UIService,\n} from '../../core-module/core.module';\nimport { MdsHelper } from '../../core-module/rest/mds-helper';\nimport { UIHelper } from '../../core-ui-module/ui-helper';\nimport { LoadingScreenService } from '../../main/loading-screen/loading-screen.service';\nimport { MainNavService } from '../../main/navigation/main-nav.service';\nimport { CardService } from '../../services/card.service';\nimport { NodeHelperService } from '../../services/node-helper.service';\nimport { OptionsHelperService } from '../../services/options-helper.service';\nimport { Toast } from '../../services/toast';\nimport { BreadcrumbsService } from '../../shared/components/breadcrumbs/breadcrumbs.service';\nimport { CardComponent } from '../../shared/components/card/card.component';\nimport { RenderHelperService } from './render-helper.service';\n\n@Component({\n    selector: 'es-render-page',\n    templateUrl: 'render-page.component.html',\n    styleUrls: ['render-page.component.scss'],\n    providers: [OptionsHelperDataService, RenderHelperService],\n    animations: [trigger('fadeFast', UIAnimation.fade(UIAnimation.ANIMATION_TIME_FAST))],\n})\nexport class RenderPageComponent implements EventListener, OnInit, OnDestroy {\n    readonly DisplayType = NodeEntriesDisplayType;\n    readonly InteractionType = InteractionType;\n    @Input() set node(node: Node | string) {\n        const id = (node as Node).ref ? (node as Node).ref.id : (node as string);\n        jQuery('#nodeRenderContent').html('');\n        this._nodeId = id;\n        this.loadRenderData();\n    }\n    constructor(\n        private translate: TranslateService,\n        private translations: TranslationsService,\n        private uiService: UIService,\n        private nodeHelper: NodeHelperService,\n        private renderHelper: RenderHelperService,\n        private location: Location,\n        private connector: RestConnectorService,\n        private connectors: RestConnectorsService,\n        private iam: RestIamService,\n        private mdsApi: RestMdsService,\n        private nodeApi: RestNodeService,\n        private searchApi: RestSearchService,\n        private toolService: RestToolService,\n        private cardServcie: CardService,\n        viewContainerRef: ViewContainerRef,\n        private frame: FrameEventsService,\n        private toast: Toast,\n        private configLegacy: ConfigurationService,\n        private configService: ConfigService,\n        private route: ActivatedRoute,\n        private networkService: RestNetworkService,\n        private breadcrumbsService: BreadcrumbsService,\n        _ngZone: NgZone,\n        private router: Router,\n        private platformLocation: PlatformLocation,\n        private optionsHelper: OptionsHelperDataService,\n        private loadingScreen: LoadingScreenService,\n        public mainNavService: MainNavService,\n        private temporaryStorageService: TemporaryStorageService,\n        private localEvents: LocalEventsService,\n    ) {\n        (window as any).nodeRenderComponentRef = { component: this, zone: _ngZone };\n        (window as any).ngRender = {\n            setDownloadUrl: (url: string) => {\n                this.setDownloadUrl(url);\n            },\n        };\n        this.frame.addListener(this, this.destroyed$);\n        this.renderHelper.setViewContainerRef(viewContainerRef);\n\n        this.translations.waitForInit().subscribe(() => {\n            this.banner = ConfigurationHelper.getBanner(this.configService);\n            this.connector.setRoute(this.route, this.router);\n            this.networkService.prepareCache();\n            this.route.queryParams.subscribe((params: Params) => {\n                this.closeOnBack = params.closeOnBack === 'true';\n                this.editor = params.editor;\n                this.fromLogin = params.fromLogin === 'true' || params.redirectFromSSO === 'true';\n                this.repository = params.repository\n                    ? params.repository\n                    : RestConstants.HOME_REPOSITORY;\n                this.queryParams = params;\n                const childobject = params.childobject_id ? params.childobject_id : null;\n                this.isChildobject = childobject != null;\n                this.route.params.subscribe((params: Params) => {\n                    if (params.node) {\n                        this.isRoute = true;\n                        const dataSource: NodeDataSource<Node> = this.temporaryStorageService.get(\n                            TemporaryStorageService.NODE_RENDER_PARAMETER_DATA_SOURCE,\n                        );\n                        if (dataSource) {\n                            this.list = dataSource.getData();\n                        } else {\n                            this.list = this.temporaryStorageService.get(\n                                TemporaryStorageService.NODE_RENDER_PARAMETER_LIST,\n                            );\n                        }\n                        this.connector.isLoggedIn(false).subscribe((data: LoginResult) => {\n                            this.isSafe = data.currentScope == RestConstants.SAFE_SCOPE;\n                            if (params.version) {\n                                this.version = params.version;\n                            }\n                            if (childobject) {\n                                setTimeout(() => (this.node = childobject), 10);\n                            } else {\n                                setTimeout(() => (this.node = params.node), 10);\n                            }\n                        });\n                    }\n                });\n            });\n        });\n        this.frame.broadcastEvent(FrameEventsService.EVENT_VIEW_OPENED, 'node-render');\n    }\n\n    ngOnInit(): void {\n        this.mainNavService.setMainNavConfig({\n            show: true,\n            showNavigation: false,\n            currentScope: 'render',\n        });\n        this.optionsHelper.registerGlobalKeyboardShortcuts();\n        this.localEvents.nodesChanged\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe(() => this.refresh());\n        this.localEvents.nodesDeleted\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe(() => this.close());\n    }\n\n    public isLoading = true;\n    public isBuildingPage = false;\n    /**\n     * Show a bar at the top with the node name or not\n     * @type {boolean}\n     */\n    @Input() showTopBar = true;\n    /**\n     * Node version, -1 indicates the latest\n     * @type {string}\n     */\n    @Input() version = RestConstants.NODE_VERSION_CURRENT;\n    /**\n     *   display metadata\n     */\n    @Input() metadata = true;\n    private isRoute = false;\n    private list: Node[];\n    private isSafe = false;\n    private isOpenable: boolean;\n    private closeOnBack: boolean;\n    private editor: string;\n    private fromLogin = false;\n    public banner: any;\n    private repository: string;\n    private downloadButton: OptionItem;\n    private downloadUrl: string;\n    currentOptions: OptionItem[];\n    sequence: NodeList;\n    sequenceParent: Node;\n    canScrollLeft = false;\n    canScrollRight = false;\n    private queryParams: Params;\n    public similarNodes = new NodeDataSource<Node>();\n    mds: Mds;\n    isDestroyed = false;\n    private readonly destroyed$ = new Subject<void>();\n\n    @ViewChild('sequencediv') sequencediv: ElementRef;\n    @ViewChild('actionbar') actionbar: ActionbarComponent;\n    isChildobject = false;\n    _node: Node;\n    _nodeId: string;\n    @Output() onClose = new EventEmitter();\n    similarNodeColumns: ListItem[] = [];\n\n    @HostListener('window:beforeunload', ['$event'])\n    beforeunloadHandler(event: any) {\n        if (this.isSafe) {\n            this.connector.logout().toPromise();\n        }\n    }\n    @HostListener('window:resize', ['$event'])\n    onResize(event: any) {\n        this.setScrollparameters();\n    }\n\n    @HostListener('document:keydown', ['$event'])\n    handleKeyboardEvent(event: KeyboardEvent) {\n        if (CardComponent.getNumberOfOpenCards() > 0) {\n            return;\n        }\n        if (event.code == 'ArrowLeft' && this.canSwitchBack()) {\n            this.switchPosition(this.getPosition() - 1);\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n        if (event.code == 'ArrowRight' && this.canSwitchForward()) {\n            this.switchPosition(this.getPosition() + 1);\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n    }\n    close() {\n        if (this.isRoute) {\n            if (this.closeOnBack) {\n                window.close();\n            } else {\n                if (this.fromLogin && !AppComponent.isRedirectedFromLogin()) {\n                    UIHelper.goToDefaultLocation(\n                        this.router,\n                        this.platformLocation,\n                        this.configLegacy,\n                        false,\n                    );\n                } else {\n                    this.location.back();\n                    // use a timeout to let the browser try to go back in history first\n                    setTimeout(() => {\n                        if (!this.isDestroyed) {\n                            this.mainNavService.getMainNav().topBar?.toggleMenuSidebar();\n                        }\n                    }, 250);\n                }\n            }\n        } else this.onClose.emit();\n    }\n\n    showDetails() {\n        const element = document.getElementById('edusharing_rendering_metadata');\n        element.setAttribute('tabindex', '-1');\n        element.addEventListener(\n            'blur',\n            (event) => (event.target as HTMLElement).removeAttribute('tabindex'),\n            { once: true },\n        );\n        element.focus({ preventScroll: true });\n        element.scrollIntoView({ behavior: 'smooth' });\n    }\n    public getPosition() {\n        if (!this._node || !this.list) return -1;\n        let i = 0;\n        for (const node of this.list) {\n            if (node.ref.id == this._node.ref.id || node.ref.id == this.sequenceParent.ref.id)\n                return i;\n            i++;\n        }\n        return -1;\n    }\n    onEvent(event: string, data: any): void {\n        if (event == FrameEventsService.EVENT_REFRESH) {\n            this.refresh();\n        }\n    }\n    ngOnDestroy() {\n        (window as any).ngRender = null;\n        this.isDestroyed = true;\n        this.destroyed$.next();\n        this.destroyed$.complete();\n    }\n\n    public switchPosition(pos: number) {\n        // this.router.navigate([UIConstants.ROUTER_PREFIX+\"render\",this.list[pos].ref.id]);\n        this.isLoading = true;\n        this.sequence = null;\n        this.node = this.list[pos];\n        // this.options=[];\n    }\n    public canSwitchBack() {\n        return (\n            this.list && this.getPosition() > 0 && !this.list[this.getPosition() - 1].isDirectory\n        );\n    }\n    public canSwitchForward() {\n        return (\n            this.list &&\n            this.getPosition() < this.list.length - 1 &&\n            !this.list[this.getPosition() + 1].isDirectory\n        );\n    }\n    public refresh() {\n        if (this.isLoading) {\n            return;\n        }\n        this.optionsHelper.clearComponents(this.actionbar);\n        this.isLoading = true;\n        this.node = this._nodeId;\n    }\n    viewParent() {\n        this.isChildobject = false;\n        this.router.navigate([], {\n            relativeTo: this.route,\n            queryParamsHandling: 'merge',\n            queryParams: {\n                childobject_id: null,\n            },\n            replaceUrl: true,\n        });\n    }\n    viewChildobject(node: Node, pos: number) {\n        this.isChildobject = true;\n        this.router.navigate([], {\n            relativeTo: this.route,\n            queryParamsHandling: 'merge',\n            queryParams: {\n                childobject_id: node.ref.id,\n            },\n            replaceUrl: true,\n        });\n    }\n    private loadNode() {\n        if (!this._node) {\n            this.isBuildingPage = false;\n            return;\n        }\n\n        const download = new OptionItem('OPTIONS.DOWNLOAD', 'cloud_download', () =>\n            this.downloadCurrentNode(),\n        );\n        download.elementType = OptionsHelperService.DownloadElementTypes;\n        // use callback since isEnabled gets ignored\n        download.customEnabledCallback = (nodes) => {\n            return (\n                this._node.downloadUrl != null &&\n                (!this._node.properties[RestConstants.CCM_PROP_IO_WWWURL] ||\n                    !RestNetworkService.isFromHomeRepo(this._node))\n            );\n        };\n        download.group = DefaultGroups.View;\n        download.priority = 25;\n        download.showAsAction = true;\n        if (this.isCollectionRef()) {\n            this.nodeApi\n                .getNodeMetadata(this._node.properties[RestConstants.CCM_PROP_IO_ORIGINAL])\n                .subscribe(\n                    (node) => {\n                        this.addDownloadButton(download);\n                    },\n                    (error: any) => {\n                        if (error.status == RestConstants.HTTP_NOT_FOUND) {\n                            download.isEnabled = false;\n                        }\n                        this.addDownloadButton(download);\n                    },\n                );\n            return;\n        }\n        this.addDownloadButton(download);\n    }\n    private loadRenderData() {\n        const loadingTask = this.loadingScreen.addLoadingTask({ until: this.destroyed$ });\n        this.isLoading = true;\n        this.optionsHelper.clearComponents(this.actionbar);\n        if (this.isBuildingPage) {\n            setTimeout(() => this.loadRenderData(), 50);\n            return;\n        }\n        const parameters = {\n            showDownloadButton: this.configLegacy.instant('rendering.showDownloadButton', false),\n            showDownloadAdvice: !this.isOpenable,\n        };\n        this._node = null;\n        this.isBuildingPage = true;\n        // we only fetching versions for the primary parent (child objects don't have versions)\n        this.nodeApi\n            .getNodeRenderSnippet(\n                this._nodeId,\n                this.version && !this.isChildobject ? this.version : '-1',\n                parameters,\n                this.repository,\n            )\n            .subscribe(\n                (data) => {\n                    if (!data.detailsSnippet) {\n                        console.error(data);\n                        this.toast.error(null, 'RENDERSERVICE_API_ERROR');\n                    } else {\n                        this._node = data.node;\n                        this.isOpenable = this.connectors.connectorSupportsEdit(this._node) != null;\n                        const finish = (set: Mds = null) => {\n                            this.similarNodeColumns = MdsHelper.getColumns(\n                                this.translate,\n                                set,\n                                'search',\n                            );\n                            this.mds = set;\n                            const nodeRenderContent = jQuery('#nodeRenderContent');\n                            nodeRenderContent.html(data.detailsSnippet);\n                            this.moveInnerStyleToHead(nodeRenderContent);\n                            this.postprocessHtml();\n                            this.handleProposal();\n                            this.renderHelper.doAll(this._node);\n                            this.linkSearchableWidgets();\n                            this.loadNode();\n                            this.loadSimilarNodes();\n                            this.isLoading = false;\n                        };\n                        this.getSequence(() => {\n                            this.mdsApi.getSet(this.getMdsId(), this.repository).subscribe(\n                                (set) => {\n                                    finish(set);\n                                },\n                                (error) => {\n                                    console.warn('mds fetch error', error);\n                                    finish();\n                                },\n                            );\n                        });\n                    }\n                    this.isLoading = false;\n                    loadingTask.done();\n                },\n                (error) => {\n                    console.log(error.error.error);\n                    if (\n                        error?.error?.error === 'org.edu_sharing.restservices.DAOMissingException'\n                    ) {\n                        this.toast.error(null, 'TOAST.RENDER_NOT_FOUND', null, null, null, {\n                            link: {\n                                caption: 'BACK',\n                                callback: () => this.close(),\n                            },\n                        });\n                    } else {\n                        this.toast.error(error);\n                    }\n                    this.isLoading = false;\n                    loadingTask.done();\n                },\n            );\n        this.nodeApi\n            .getNodeParents(this._nodeId)\n            .subscribe((nodes) => this.breadcrumbsService.setNodePath(nodes.nodes.reverse()));\n    }\n    private postprocessHtml() {\n        if (!this.configLegacy.instant('rendering.showPreview', true)) {\n            jQuery('.edusharing_rendering_content_wrapper').hide();\n            jQuery('.showDetails').hide();\n        }\n        if (this.isOpenable) {\n            jQuery('#edusharing_downloadadvice').hide();\n        }\n        const element = jQuery('#edusharing_rendering_content_href');\n        element.click((event: any) => {\n            if (this.connector.getBridgeService().isRunningCordova()) {\n                const href = element.attr('href');\n                this.connector.getBridgeService().getCordova().openBrowser(href);\n                event.preventDefault();\n            }\n        });\n    }\n    private downloadSequence() {\n        const nodes = [this.sequenceParent].concat(this.sequence.nodes);\n        this.nodeHelper.downloadNodes(nodes, this.sequenceParent.name + '.zip');\n    }\n\n    private downloadCurrentNode() {\n        if (this.downloadUrl) {\n            this.nodeHelper.downloadUrl(this.downloadUrl, 'download', {\n                node: this._node,\n                triggerTrackingEvent: true,\n            });\n        } else {\n            this.nodeHelper.downloadNode(this._node, this.isChildobject ? null : this.version);\n        }\n    }\n\n    private openConnector(node: Node, newWindow = true) {\n        if (RestToolService.isLtiObject(node)) {\n            this.toolService.openLtiObject(node);\n        } else {\n            UIHelper.openConnector(\n                this.connectors,\n                this.iam,\n                this.frame,\n                this.toast,\n                node,\n                null,\n                null,\n                null,\n                newWindow,\n            );\n        }\n    }\n\n    private async initOptions() {\n        this.optionsHelper.setData({\n            scope: Scope.Render,\n            activeObjects: [this._node],\n            parent: new Node(this._node.parent.id),\n            allObjects: this.list,\n            customOptions: {\n                useDefaultOptions: true,\n                addOptions: this.currentOptions,\n            },\n            postPrepareOptions: (options, objects) => {\n                if (this.version && this.version !== RestConstants.NODE_VERSION_CURRENT) {\n                    options.filter((o) => o.name === 'OPTIONS.OPEN')[0].isEnabled = false;\n                }\n            },\n        });\n        await this.optionsHelper.initComponents(this.actionbar);\n        this.optionsHelper.refreshComponents();\n        this.postprocessHtml();\n        this.isBuildingPage = false;\n        this.handleQueryAction();\n    }\n\n    private isCollectionRef() {\n        return this._node.aspects.indexOf(RestConstants.CCM_ASPECT_IO_REFERENCE) != -1;\n    }\n\n    private addDownloadButton(download: OptionItem) {\n        this.nodeApi\n            .getNodeChildobjects(this.sequenceParent.ref.id, this.sequenceParent.ref.repo)\n            .subscribe((data: NodeList) => {\n                this.downloadButton = download;\n                const options: OptionItem[] = [];\n                options.splice(0, 0, download);\n                if (\n                    data.nodes.length > 0 ||\n                    this._node.aspects.indexOf(RestConstants.CCM_ASPECT_IO_CHILDOBJECT) != -1\n                ) {\n                    const downloadAll = new OptionItem('OPTIONS.DOWNLOAD_ALL', 'archive', () => {\n                        this.downloadSequence();\n                    });\n                    downloadAll.elementType = [\n                        ElementType.Node,\n                        ElementType.NodeChild,\n                        ElementType.NodePublishedCopy,\n                    ];\n                    downloadAll.group = DefaultGroups.View;\n                    downloadAll.priority = 35;\n                    options.splice(1, 0, downloadAll);\n                }\n                this.currentOptions = options;\n                this.initOptions();\n            });\n    }\n    setDownloadUrl(url: string) {\n        console.info('url from rendering', url);\n        if (this.downloadButton != null) {\n            this.downloadButton.customEnabledCallback = () => url != null;\n        }\n\n        this.downloadUrl = url;\n        this.initOptions();\n    }\n\n    private getSequence(onFinish: () => void) {\n        if (this._node.aspects.indexOf(RestConstants.CCM_ASPECT_IO_CHILDOBJECT) != -1) {\n            this.nodeApi.getNodeMetadata(this._node.parent.id).subscribe((data) => {\n                this.sequenceParent = data.node;\n                this.nodeApi\n                    .getNodeChildobjects(this.sequenceParent.ref.id, this.sequenceParent.ref.repo)\n                    .subscribe((data: NodeList) => {\n                        if (data.nodes.length > 0) {\n                            this.sequence = data;\n                        } else {\n                            this.sequence = null;\n                        }\n                        setTimeout(() => this.setScrollparameters(), 100);\n                        onFinish();\n                    });\n            });\n        } else {\n            this.sequenceParent = this._node;\n            this.nodeApi\n                .getNodeChildobjects(this.sequenceParent.ref.id, this.sequenceParent.ref.repo)\n                .subscribe(\n                    (data: NodeList) => {\n                        if (data.nodes.length > 0) {\n                            this.sequence = data;\n                        } else {\n                            this.sequence = null;\n                        }\n                        setTimeout(() => this.setScrollparameters(), 100);\n                        onFinish();\n                    },\n                    (error) => {\n                        console.error('failed sequence fetching');\n                        console.error(error);\n                        onFinish();\n                    },\n                );\n        }\n    }\n\n    scroll(direction: string) {\n        const element = this.sequencediv.nativeElement;\n        const width = window.innerWidth / 2;\n        this.uiService\n            .scrollSmoothElement(\n                element.scrollLeft + (direction == 'left' ? -width : width),\n                element,\n                2,\n                'x',\n            )\n            .then((limit) => {\n                this.setScrollparameters();\n            });\n    }\n\n    private setScrollparameters() {\n        if (!this.sequence) return;\n        const element = this.sequencediv.nativeElement;\n        if (element.scrollLeft <= 20) {\n            this.canScrollLeft = false;\n        } else {\n            this.canScrollLeft = true;\n        }\n        if (element.scrollLeft + 20 >= element.scrollWidth - window.innerWidth) {\n            this.canScrollRight = false;\n        } else {\n            this.canScrollRight = true;\n        }\n    }\n    private getNodeName(node: Node) {\n        return RestHelper.getName(node);\n    }\n    getName(): string {\n        if (this._node) {\n            return this.getNodeName(this._node);\n        } else {\n            return '';\n        }\n    }\n    getNodeTitle(node: Node) {\n        return RestHelper.getTitle(node);\n    }\n\n    public switchNode(event: any) {\n        this.uiService.scrollSmooth();\n        this.node = event.node;\n    }\n\n    private loadSimilarNodes() {\n        this.similarNodes.isLoading = true;\n        this.searchApi.searchFingerprint(this._nodeId).subscribe((data: NodeList) => {\n            this.similarNodes.isLoading = false;\n            this.similarNodes.setData(data.nodes, data.pagination);\n        });\n    }\n\n    private linkSearchableWidgets() {\n        try {\n            this.mds.widgets\n                .filter((w: any) => w.isSearchable)\n                .forEach((w: any) => {\n                    try {\n                        const values = document.querySelectorAll(\n                            \"#edusharing_rendering_metadata [data-widget-id='\" +\n                                w.id +\n                                \"'] .mdsWidgetMultivalue .mdsValue\",\n                        );\n                        values.forEach((v: HTMLElement) => {\n                            v.classList.add('clickable', 'mdsValueClickable');\n                            v.tabIndex = 0;\n                            const key = v.getAttribute('data-value-key');\n                            v.onclick = () => {\n                                this.navigateToSearch(w.id, key);\n                            };\n                            v.onkeyup = (k) => {\n                                if (k.key === 'Enter') {\n                                    this.navigateToSearch(w.id, key);\n                                }\n                            };\n                        });\n                    } catch (e) {}\n                });\n            // document.getElementsByClassName(\"edusharing_rendering_content_wrapper\")[0].ge;\n        } catch (e) {\n            console.warn('Could not read the widget list from the metadataset', e);\n        }\n    }\n\n    private navigateToSearch(id: any, value: string) {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            const data: any = {};\n            data[id] = [value];\n            params.mds = this.getMdsId();\n            params.sidenav = true;\n            params.repo = this.repository;\n            params.parameters = JSON.stringify(data);\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'search'], { queryParams: params });\n        });\n    }\n\n    private getMdsId() {\n        return this._node.metadataset ? this._node.metadataset : RestConstants.DEFAULT;\n    }\n\n    private async handleProposal() {\n        if (this.queryParams.proposal && this.queryParams.proposalCollection) {\n            (this._node as ProposalNode).proposal = (\n                await this.nodeApi\n                    .getNodeMetadata(this.queryParams.proposal, [RestConstants.ALL])\n                    .toPromise()\n            ).node;\n            (this._node as ProposalNode).proposalCollection = new Node(\n                this.queryParams.proposalCollection,\n            );\n            // access is granted when we can fetch the node\n            (this._node as ProposalNode).accessible = true;\n            this.optionsHelper.refreshComponents();\n        }\n    }\n\n    /**\n     * check if the current url requested to directly open an action (from the actionbar),\n     * and if so, call it\n     */\n    private async handleQueryAction() {\n        if (this.queryParams.action) {\n            const option = (await this.optionsHelper.getAvailableOptions(Target.Actionbar)).filter(\n                (o) => o.name === this.queryParams.action,\n            )?.[0];\n            if (option) {\n                if (option.isEnabled) {\n                    option.callback();\n                    // wait until a dialog has opened, then, as soon as the particular dialog closed\n                    // trigger that the action has been done\n                    this.cardServcie.hasOpenModals\n                        .pipe(\n                            skipWhile((h) => !h),\n                            filter((h) => !h),\n                        )\n                        .subscribe(() => this.onQueryActionDone());\n                } else {\n                    console.warn('action ' + this.queryParams.action + ' is currently not enabled');\n                }\n            } else {\n                console.warn(\n                    'action ' +\n                        this.queryParams.action +\n                        ' is either not supported or not allowed for current user',\n                );\n            }\n        }\n    }\n\n    private onQueryActionDone() {\n        if (this.queryParams.action) {\n            window.close();\n        }\n    }\n\n    /**\n     * Moves a style element that is a child of `element` to the document head.\n     *\n     * Existing style elements that were previously moved to the document head like this will be\n     * removed.\n     *\n     * The style element will be removed from document head on `ngDestroy`.\n     */\n    private moveInnerStyleToHead(element: JQuery<HTMLElement>): void {\n        const styleAttr = 'data-render-content-style';\n        jQuery('[' + styleAttr + ']').remove();\n        const style = element.find('style');\n        style.attr(styleAttr, '');\n        jQuery(document.head).append(style);\n        this.destroyed$.subscribe(() => style.remove());\n    }\n}\n","<div\n  class=\"topBar fixed\"\n  *ngIf=\"showTopBar && !mainNavService.getMainNav()?.topBar?.isSidenavOpen()\"\n>\n  <div class=\"displayBar\">\n    <div class=\"left\">\n      <button mat-button title=\"{{ 'BACK' | translate }}\" (click)=\"close()\">\n        <i esIcon=\"keyboard_arrow_left\"></i>\n        <span class=\"render-back\">{{ 'BACK' | translate }}</span>\n      </button>\n    </div>\n    <div class=\"center\">\n      <button\n        mat-button\n        *ngIf=\"_node\"\n        (click)=\"showDetails()\"\n        title=\"{{ 'GOTO' | translate }} {{ 'INFO' | translate }}\"\n      >\n        <i esIcon=\"info_outline\"></i> <span class=\"hidemobile\">{{ 'INFO' | translate }}</span>\n      </button>\n    </div>\n    <div class=\"right\">\n      <es-actionbar\n        #actionbar\n        [backgroundType]=\"'dark'\"\n        [numberOfAlwaysVisibleOptions]=\"1\"\n        [numberOfAlwaysVisibleOptionsMobile]=\"0\"\n      ></es-actionbar>\n    </div>\n  </div>\n</div>\n<div *ngIf=\"getPosition() != -1\">\n  <button\n    class=\"previous\"\n    *ngIf=\"canSwitchBack()\"\n    cdkMonitorElementFocus\n    (click)=\"switchPosition(getPosition() - 1)\"\n  >\n    <i esIcon=\"keyboard_arrow_left\" [aria]=\"true\"></i>\n  </button>\n  <button\n    class=\"next\"\n    *ngIf=\"canSwitchForward()\"\n    cdkMonitorElementFocus\n    (click)=\"switchPosition(getPosition() + 1)\"\n  >\n    <i esIcon=\"keyboard_arrow_right\" [aria]=\"true\"></i>\n  </button>\n</div>\n<div>\n  <div id=\"nodeRenderContentWrapper\">\n    <div *ngIf=\"sequence\" id=\"sequence\" #sequencediv>\n      <div\n        class=\"wrapperouter clickable\"\n        tabindex=\"0\"\n        (click)=\"viewParent()\"\n        (keyup.enter)=\"viewParent()\"\n      >\n        <span class=\"itemTitle\">{{ getNodeTitle(sequenceParent) }}</span>\n        <div class=\"wrapper\" [class.selected]=\"_nodeId == sequenceParent.ref.id\">\n          <img src=\"{{ sequenceParent.preview.url }}&crop=true&width=100&height=75\" />\n        </div>\n      </div>\n      <div\n        *ngFor=\"let item of sequence.nodes; let i = index\"\n        tabindex=\"0\"\n        class=\"wrapperouter clickable\"\n        (click)=\"viewChildobject(item, i)\"\n        (keyup.enter)=\"viewChildobject(item, i)\"\n      >\n        <span class=\"itemTitle\">{{ getNodeTitle(item) }}</span>\n        <div class=\"wrapper\" [class.selected]=\"_nodeId == item.ref.id\">\n          <img src=\"{{ item.preview.url }}&crop=true&width=100&height=75\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"scroller left clickable\" *ngIf=\"canScrollLeft\" (click)=\"scroll('left')\" id=\"left\">\n      <i esIcon=\"keyboard_arrow_left\" [aria]=\"true\"></i>\n    </div>\n    <div\n      class=\"scroller right clickable\"\n      *ngIf=\"canScrollRight\"\n      (click)=\"scroll('right')\"\n      id=\"right\"\n    >\n      <i esIcon=\"keyboard_arrow_right\" [aria]=\"true\"></i>\n    </div>\n    <!-- Ideally, we would be be using the actual h1 headings for [esTitle], but since these are\n    injected by the rendering service, we use a completely hidden element here. -->\n    <h1 esTitle hidden class=\"display-none\">{{ getNodeTitle(_node) }}</h1>\n    <div\n      id=\"nodeRenderContent\"\n      [class.hide]=\"isLoading\"\n      esTouchEvent\n      (ngSwipeRight)=\"canSwitchBack() ? switchPosition(getPosition() - 1) : null\"\n      (ngSwipeLeft)=\"canSwitchForward() ? switchPosition(getPosition() + 1) : null\"\n    ></div>\n    <div class=\"nodeRenderLoading\" *ngIf=\"isLoading\">\n      <es-spinner></es-spinner>\n    </div>\n\n    <div class=\"similarNodes\" *ngIf=\"!similarNodes.isEmpty()\">\n      <div class=\"caption\">hnliche Objekte</div>\n      <es-node-entries-wrapper\n        [dataSource]=\"similarNodes\"\n        [displayType]=\"DisplayType.Grid\"\n        [columns]=\"similarNodeColumns\"\n        [checkbox]=\"false\"\n        [elementInteractionType]=\"InteractionType.DefaultActionLink\"\n      >\n      </es-node-entries-wrapper>\n    </div>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../shared/shared.module';\nimport { CommentsListComponent } from './comments-list/comments-list.component';\nimport { MdsNodeRelationsWidgetComponent } from './node-relations/node-relations-widget.component';\nimport { RenderPageRoutingModule } from './render-page-routing.module';\nimport { RenderPageComponent } from './render-page.component';\nimport { TouchEventDirective } from './touchevents.directive';\nimport { DurationPipe } from './video-controls/duration.pipe';\nimport { VideoControlsComponent } from './video-controls/video-controls.component';\n\n@NgModule({\n    declarations: [\n        CommentsListComponent,\n        DurationPipe,\n        MdsNodeRelationsWidgetComponent,\n        RenderPageComponent,\n        TouchEventDirective,\n        VideoControlsComponent,\n    ],\n    imports: [SharedModule, RenderPageRoutingModule],\n})\nexport class RenderPageModule {}\n","import { Directive, EventEmitter, HostListener, Output } from '@angular/core';\n\n@Directive({ selector: '[esTouchEvent]' })\nexport class TouchEventDirective {\n    @Output() ngSwipeLeft = new EventEmitter();\n    @Output() ngSwipeRight = new EventEmitter();\n\n    private touchStart: any;\n\n    @HostListener('touchstart', ['$event']) onTouchStart(event: any) {\n        this.touchStart = event;\n    }\n\n    @HostListener('touchend', ['$event']) onTouchEnd(event: any) {\n        let horizontal =\n            event.changedTouches[0].clientX - this.touchStart.changedTouches[0].clientX;\n        let vertical = event.changedTouches[0].clientY - this.touchStart.changedTouches[0].clientY;\n        let horizontalRelative = horizontal / window.innerWidth;\n        if (Math.abs(horizontalRelative) < 0.1 || Math.abs(horizontal) < 50) return;\n        // Vertical touches currently not supported\n        if (Math.abs(horizontal) / Math.abs(vertical) < 5) return;\n        if (horizontal < 0) this.ngSwipeLeft.emit(horizontalRelative);\n        else this.ngSwipeRight.emit(horizontalRelative);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'esDuration',\n})\nexport class DurationPipe implements PipeTransform {\n    transform(value: number, maxValue: number = value): string {\n        const totalSeconds = Math.floor(value);\n        const hours: number = Math.floor(totalSeconds / 3600);\n        const minutes: number = Math.floor((totalSeconds - hours * 3600) / 60);\n        const seconds: number = totalSeconds - hours * 3600 - minutes * 60;\n        if (maxValue < 3600) {\n            return toTwoDigitString(minutes) + ':' + toTwoDigitString(seconds);\n        } else {\n            return (\n                toTwoDigitString(hours) +\n                ':' +\n                toTwoDigitString(minutes) +\n                ':' +\n                toTwoDigitString(seconds)\n            );\n        }\n    }\n}\n\nfunction toTwoDigitString(n: number): string {\n    if (n < 10) {\n        return '0' + n.toString();\n    } else {\n        return n.toString();\n    }\n}\n","import { catchError, filter, first, map, tap } from 'rxjs/operators';\nimport { trigger } from '@angular/animations';\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Options } from 'ngx-slider-v2';\nimport { of, ReplaySubject } from 'rxjs';\nimport { BridgeService } from '../../../services/bridge.service';\nimport { RestCollectionService, RestConnectorService } from '../../../core-module/core.module';\nimport { Node } from '../../../core-module/rest/data-object';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestNodeService } from '../../../core-module/rest/services/rest-node.service';\nimport { NodesRightMode, TemporaryStorageService, UIAnimation } from 'ngx-edu-sharing-ui';\nimport { Toast } from '../../../services/toast';\nimport { DurationPipe } from './duration.pipe';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\n\ninterface VideoControlsValues {\n    startTime: number;\n    endTime: number;\n    title: string;\n}\n\n@Component({\n    selector: 'es-video-controls',\n    templateUrl: 'video-controls.component.html',\n    styleUrls: ['video-controls.component.scss'],\n    animations: [trigger('fromRight', UIAnimation.fromRight())],\n})\nexport class VideoControlsComponent implements OnInit, OnDestroy {\n    @Input() node: Node;\n    @Input() video: HTMLVideoElement;\n    @Input() size: 'small' | 'large' = 'large';\n    @Output() updateCurrentNode = new EventEmitter<Node>();\n\n    /** Data chosen by the user and saved with the video */\n    values: VideoControlsValues;\n    /** Whether the user has all required permissions to use this tool on the given node */\n    hasRequiredPermissions: boolean;\n    isLoading = false;\n    sliderOptions: Options;\n    private playbackStartedTime: Date;\n    private previousValues: VideoControlsValues;\n    private destroyed$: ReplaySubject<void> = new ReplaySubject(1);\n\n    constructor(\n        private bridge: BridgeService,\n        private collectionService: RestCollectionService,\n        private connector: RestConnectorService,\n        private nodeService: RestNodeService,\n        private nodeHelper: NodeHelperService,\n        private router: Router,\n        private mainNav: MainNavService,\n        private temporaryStorage: TemporaryStorageService,\n        private toast: Toast,\n    ) {}\n\n    ngOnInit(): void {\n        // This component is injected programmatically without calling ngOnChanges. Therefore, we\n        // require that critical inputs are available after init and don't support updates on these\n        // values.\n        if (!this.node) {\n            throw new Error('Missing required input `node`');\n        }\n        if (!this.video) {\n            throw new Error('Missing required input `video`');\n        }\n        this.hasRequiredPermissions = this.getHasRequiredPermissions(this.node);\n        if (this.video.duration) {\n            this.onVideoLoaded();\n        } else {\n            this.video.onloadedmetadata = () => {\n                this.onVideoLoaded();\n            };\n        }\n    }\n\n    ngOnDestroy() {\n        this.destroyed$.next();\n        this.destroyed$.complete();\n    }\n\n    async save(): Promise<void> {\n        if (this.isCollectionRef(this.node) && this.isOwner(this.node)) {\n            const node = await this.writeVideoControlsValues(this.node, this.values);\n            if (node) {\n                this.updateCurrentNode.emit(node);\n            }\n        } else {\n            // Not an individual object, choose new location first.\n            this.mainNav.getDialogs().addToCollection = [this.node];\n            this.mainNav\n                .getDialogs()\n                .onStoredAddToCollection.pipe(first())\n                .pipe\n                // takeUntil(this.destroyed$)\n                ()\n                .pipe(\n                    filter((ref) => ref.references.some((r) => r.originalId === this.node.ref.id)),\n                )\n                .subscribe(async ({ references }) => {\n                    const node = await this.writeVideoControlsValues(\n                        references[0],\n                        this.values,\n                        false,\n                    );\n                    this.node = node;\n                    this.updateCurrentNode.emit(node);\n                });\n        }\n    }\n\n    onValueChange(value: number, type: 'start' | 'end') {\n        if (\n            type === 'start' &&\n            value !== this.previousValues?.startTime\n            // || type === 'end' && value !== this.previousValues?.endTime\n        ) {\n            this.video.currentTime = value;\n        }\n        this.previousValues = { ...this.values };\n    }\n\n    private onVideoLoaded(): void {\n        this.sliderOptions = this.getSliderOptions(this.video);\n        this.values = this.readVideoControlsValues(this.node, this.video);\n        this.registerVideoHooks(this.video);\n        this.video.currentTime = this.values.startTime;\n    }\n\n    private getHasRequiredPermissions(node: Node): boolean {\n        if (this.connector.getCurrentLogin().isGuest) {\n            return false;\n        } else if (\n            !this.connector.hasToolPermissionInstant(RestConstants.TOOLPERMISSION_VIDEO_AUDIO_CUT)\n        ) {\n            return false;\n        } else {\n            if (this.isCollectionRef(node)) {\n                if (this.isOwner(node)) {\n                    return this.nodeHelper.getNodesRight([node], RestConstants.ACCESS_WRITE);\n                } else {\n                    return this.nodeHelper.getNodesRight(\n                        [node],\n                        RestConstants.ACCESS_CC_PUBLISH,\n                        NodesRightMode.Effective,\n                    );\n                }\n            } else {\n                return this.nodeHelper.getNodesRight([node], RestConstants.ACCESS_CC_PUBLISH);\n            }\n        }\n    }\n\n    /**\n     * Reads video-control values from `node`.\n     *\n     * Uses `video` to set meaningful fallback values in case node doesn't define video-control\n     * values. `video` has to have loaded metadata.\n     */\n    readVideoControlsValues(node: Node, video: HTMLVideoElement): VideoControlsValues {\n        const values: VideoControlsValues = {\n            title: node.properties[RestConstants.LOM_PROP_TITLE]?.[0] ?? '',\n            startTime: 0,\n            endTime: video.duration,\n        };\n        const vttCuesJson: string[] = node.properties[RestConstants.CCM_PROP_IO_REF_VIDEO_VTT];\n        if (vttCuesJson && vttCuesJson.length === 1) {\n            const vttCues = JSON.parse(vttCuesJson[0]);\n            const vttCue = vttCues[vttCues.length - 1];\n            if (vttCue) {\n                values.startTime = vttCue.startTime;\n                values.endTime = vttCue.endTime;\n            }\n        }\n        return values;\n    }\n    convertStringToTime(str: string) {\n        const splitted = str.split(':');\n        if (splitted.length === 2) {\n            return parseInt(splitted[0], 10) * 60 + parseInt(splitted[1], 10);\n        } else if (splitted.length === 3) {\n            return (\n                parseInt(splitted[0], 10) * 3600 +\n                parseInt(splitted[1], 10) * 60 +\n                parseInt(splitted[2], 10)\n            );\n        }\n        return 0;\n    }\n\n    private writeVideoControlsValues(\n        node: Node,\n        values: VideoControlsValues,\n        showMessage = true,\n    ): Promise<Node | null> {\n        this.isLoading = true;\n        const props = {\n            [RestConstants.CCM_PROP_IO_REF_VIDEO_VTT]: [\n                JSON.stringify([\n                    {\n                        startTime: values.startTime,\n                        endTime: values.endTime,\n                        text: '',\n                    },\n                ]),\n            ],\n            [RestConstants.LOM_PROP_TITLE]: [values.title],\n        };\n        return this.nodeService\n            .editNodeMetadata(node.ref.id, props)\n            .pipe(\n                tap({\n                    next: () => {\n                        if (showMessage) {\n                            this.toast.toast('VIDEO_CONTROLS.SAVED');\n                        }\n                    },\n                    error: (error) => {\n                        this.toast.error(error);\n                    },\n                    complete: () => {\n                        this.isLoading = false;\n                    },\n                }),\n                map((nodeWrapper) => nodeWrapper.node),\n                // Don't propagate errors any further.\n                catchError((error) => of(null)),\n            )\n            .toPromise();\n    }\n\n    private getSliderOptions(video: HTMLVideoElement): Options {\n        const durationPipe = new DurationPipe();\n        return {\n            floor: 0,\n            ceil: video.duration,\n            animate: true,\n            draggableRange: true,\n            minRange: 1,\n            translate: (value: number): string => durationPipe.transform(value, video.duration),\n        };\n    }\n\n    private registerVideoHooks(video: HTMLVideoElement): void {\n        const videoControlsComponent = this;\n        video.addEventListener('timeupdate', function pauseOnEndTime() {\n            // Pause each time endTime is reached, but allow to resume playback.\n            if (\n                this.currentTime >= videoControlsComponent.values.endTime &&\n                // Pause only up to one second after exceeding endTime.\n                Math.abs(this.currentTime - videoControlsComponent.values.endTime) < 1 &&\n                // Do not pause if playback was started less than 2 seconds ago.\n                new Date().getTime() - videoControlsComponent.playbackStartedTime?.getTime() > 2000\n            ) {\n                this.pause();\n            }\n        });\n        video.addEventListener('play', function onPlay() {\n            videoControlsComponent.playbackStartedTime = new Date();\n        });\n    }\n\n    isCollectionRef(node: Node) {\n        return node.aspects.indexOf(RestConstants.CCM_ASPECT_IO_REFERENCE) !== -1;\n    }\n\n    isOwner(node: Node) {\n        return (\n            node.properties[RestConstants.CM_CREATOR][0] ===\n            this.connector.getCurrentLogin().authorityName\n        );\n    }\n}\n","<div\n  *ngIf=\"sliderOptions && hasRequiredPermissions\"\n  class=\"selection\"\n  [class.small]=\"size === 'small'\"\n>\n  <mat-expansion-panel class=\"mat-elevation-z0\">\n    <mat-expansion-panel-header>\n      <mat-panel-title>\n        {{ 'VIDEO_CONTROLS.HEADING' | translate }}\n      </mat-panel-title>\n    </mat-expansion-panel-header>\n    <ng-template matExpansionPanelContent>\n      <div class=\"selectionSlider\">\n        <ngx-slider\n          [(value)]=\"values.startTime\"\n          [(highValue)]=\"values.endTime\"\n          [options]=\"sliderOptions\"\n          (valueChange)=\"onValueChange($event, 'start')\"\n          (highValueChange)=\"onValueChange($event, 'end')\"\n        ></ngx-slider>\n      </div>\n      <div>\n        <form class=\"addChapter\">\n          <div class=\"time\">\n            <mat-form-field class=\"startTime\">\n              <mat-label>{{ 'START' | translate }}</mat-label>\n              <input\n                matInput\n                type=\"text\"\n                name=\"startTime\"\n                id=\"startTime\"\n                pattern=\"\\d\\d:\\d\\d(:\\d\\d)?\"\n                [ngModel]=\"values.startTime | esDuration : video.duration\"\n                (ngModelChange)=\"\n                  values.startTime =\n                    ($event.length === 8 || $event.length === 5) &&\n                    convertStringToTime($event) !== 0\n                      ? convertStringToTime($event)\n                      : values.startTime\n                \"\n              />\n            </mat-form-field>\n          </div>\n          <div class=\"time\">\n            <mat-form-field class=\"endTime\">\n              <mat-label>{{ 'STOP' | translate }}</mat-label>\n              <input\n                matInput\n                type=\"text\"\n                name=\"endTime\"\n                id=\"endTime\"\n                pattern=\"\\d\\d:\\d\\d(:\\d\\d)?\"\n                [ngModel]=\"values.endTime | esDuration : video.duration\"\n                (ngModelChange)=\"\n                  values.endTime =\n                    ($event.length === 8 || $event.length === 5) &&\n                    convertStringToTime($event) !== 0\n                      ? convertStringToTime($event)\n                      : values.endTime\n                \"\n              />\n            </mat-form-field>\n          </div>\n          <div class=\"title\">\n            <mat-form-field>\n              <mat-label>{{ 'NODE.cm:title' | translate }}</mat-label>\n              <input\n                matInput\n                type=\"text\"\n                name=\"chapterName\"\n                id=\"chapterName\"\n                [(ngModel)]=\"values.title\"\n              />\n            </mat-form-field>\n          </div>\n          <div class=\"save\">\n            <button mat-raised-button color=\"primary\" (click)=\"save()\" *ngIf=\"!isLoading\">\n              {{ 'SAVE' | translate }}\n            </button>\n            <es-spinner-small *ngIf=\"isLoading\">{{ 'SAVE' | translate }}</es-spinner-small>\n          </div>\n        </form>\n      </div>\n    </ng-template>\n  </mat-expansion-panel>\n</div>\n","import { Subscriber } from '../Subscriber';\nexport function skipWhile(predicate) {\n    return (source) => source.lift(new SkipWhileOperator(predicate));\n}\nclass SkipWhileOperator {\n    constructor(predicate) {\n        this.predicate = predicate;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));\n    }\n}\nclass SkipWhileSubscriber extends Subscriber {\n    constructor(destination, predicate) {\n        super(destination);\n        this.predicate = predicate;\n        this.skipping = true;\n        this.index = 0;\n    }\n    _next(value) {\n        const destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    }\n    tryCallPredicate(value) {\n        try {\n            const result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    }\n}\n"],"names":["RestConstants","RestTrackingService","constructor","connector","trackEvent","event","node","repository","HOME_REPOSITORY","query","createUrl","console","log","put","getRequestOptions","_","i0","inject","i1","RestConnectorService","_2","factory","fac","providedIn","trigger","EventEmitter","OptionItem","UIAnimation","YES_OR_NO","elementStart","listener","CommentsListComponent_div_2_div_1_button_8_Template_button_click_0_listener","restoreView","_r9","ctx_r8","nextContext","resetView","addComment","element","elementEnd","CommentsListComponent_div_2_div_1_Template_form_ngSubmit_4_listener","_r11","ctx_r10","CommentsListComponent_div_2_div_1_Template_textarea_ngModelChange_6_listener","$event","ctx_r12","newComment","template","CommentsListComponent_div_2_div_1_button_8_Template","CommentsListComponent_div_2_div_1_es_spinner_small_9_Template","advance","property","ctx_r2","user","propertyInterpolate","pipeBind1","sending","text","textInterpolate","textInterpolate1","comment_r15","comment","CommentsListComponent_div_2_div_4_div_2_div_13_Template_form_ngSubmit_1_listener","_r25","ctx_r24","saveEditComment","CommentsListComponent_div_2_div_4_div_2_div_13_Template_textarea_ngModelChange_3_listener","ctx_r26","editCommentText","ctx_r20","CommentsListComponent_div_2_div_4_div_2_div_14_Template_div_click_1_listener","_r28","ctx_r27","editComment","CommentsListComponent_div_2_div_4_div_2_div_14_Template_div_keyup_enter_1_listener","ctx_r29","CommentsListComponent_div_2_div_4_div_2_div_14_Template_div_click_3_listener","ctx_r30","CommentsListComponent_div_2_div_4_div_2_div_14_Template_div_keyup_enter_3_listener","ctx_r31","created","CommentsListComponent_div_2_div_4_div_2_Template_button_click_9_listener","restoredCtx","_r34","$implicit","ctx_r33","options","getOptions","CommentsListComponent_div_2_div_4_div_2_i_11_Template","CommentsListComponent_div_2_div_4_div_2_div_12_Template","CommentsListComponent_div_2_div_4_div_2_div_13_Template","CommentsListComponent_div_2_div_4_div_2_div_14_Template","CommentsListComponent_div_2_div_4_div_2_div_15_Template","creator","_r0","menu","ctx_r14","length","CommentsListComponent_div_2_div_4_div_1_Template","CommentsListComponent_div_2_div_4_div_2_Template","classProp","ctx_r5","canComment","comments","CommentsListComponent_div_2_div_1_Template","CommentsListComponent_div_2_div_2_Template","CommentsListComponent_div_2_div_3_Template","CommentsListComponent_div_2_div_4_Template","ctx_r1","loading","CommentsListComponent","_node","refresh","commentsApi","dialogs","iam","toast","onCancel","onLoading","onChange","dropdown","isLoggedIn","subscribe","data","isGuest","getCurrentUserAsync","then","person","hasPermission","hasToolPermissionInstant","TOOLPERMISSION_COMMENT_WRITE","emit","ref","id","trim","error","_this","isAuthor","authorityName","push","access","indexOf","ACCESS_WRITE","_asyncToGenerator","dialogRef","openGenericDialog","title","message","buttons","afterClosed","response","closeProgressSpinner","deleteComment","ACCESS_COMMENT","cancel","setTimeout","getComments","repo","reverse","directiveInject","RestCommentsService","i2","DialogsService","RestIamService","i3","Toast","selectors","inputs","outputs","decls","vars","consts","template","CommentsListComponent_Template","rf","ctx","CommentsListComponent_div_2_Template","fade","cardAnimation","ListItem","forkJoin","observableForkJoin","RestHelper","MdsNodeRelationsWidgetComponent_ng_container_2_div_1_es_node_url_5_ng_template_2_span_13_Template","pipeBind2","version_r9","properties","pureFunction0","_c0","ctx_r11","isCurrentVersion","MdsNodeRelationsWidgetComponent_ng_container_2_div_1_es_node_url_5_ng_template_2_Template","templateRefExtractor","_c1","columns","MdsNodeRelationsWidgetComponent_ng_container_2_div_1_es_node_url_5_Template","ctx_r3","versions","relation_r16","timestamp","_c2","MdsNodeRelationsWidgetComponent_ng_container_2_div_3_es_node_url_5_ng_template_2_Template","ctx_r15","MdsNodeRelationsWidgetComponent_ng_container_2_div_3_es_node_url_5_Template","key_r14","getRelations","ctx_r21","forkedOrigin","createdAt","createdBy","elementContainerStart","MdsNodeRelationsWidgetComponent_ng_container_2_ng_container_4_ng_template_7_Template","elementContainerEnd","ctx_r6","child_r23","MdsNodeRelationsWidgetComponent_ng_container_2_ng_container_5_es_node_url_5_ng_template_2_Template","ctx_r22","MdsNodeRelationsWidgetComponent_ng_container_2_ng_container_5_es_node_url_5_Template","ctx_r7","forkedChilds","MdsNodeRelationsWidgetComponent_ng_container_2_div_1_Template","MdsNodeRelationsWidgetComponent_ng_container_2_div_2_Template","MdsNodeRelationsWidgetComponent_ng_container_2_div_3_Template","MdsNodeRelationsWidgetComponent_ng_container_2_ng_container_4_Template","MdsNodeRelationsWidgetComponent_ng_container_2_ng_container_5_Template","relations","getRelationKeys","MdsNodeRelationsWidgetComponent","relationService","nodeService","LOM_PROP_TITLE","ngOnInit","ngOnChanges","changes","getForkedChilds","getPublishedCopies","_ref","result","nodes","CCM_PROP_FORKED_ORIGIN","getNode","removeSpacesStoreRef","preventDefault","_x","apply","arguments","Set","map","r","type","sort","key","filter","version","aspects","includes","CCM_ASPECT_IO_REFERENCE","publishedVersion","find","v","CCM_PROP_IO_ORIGINAL","LOM_PROP_LIFECYCLE_VERSION","RelationService","NodeService","features","NgOnChangesFeature","MdsNodeRelationsWidgetComponent_Template","MdsNodeRelationsWidgetComponent_es_spinner_1_Template","MdsNodeRelationsWidgetComponent_ng_container_2_Template","MdsNodeRelationsWidgetComponent_ng_template_3_Template","NodeDataSource","NodeEntriesDisplayType","NodeEntriesWrapperComponent","Scope","SpinnerComponent","Target","EventType","UIHelper","MdsEditorWrapperComponent","replaceElementWithDiv","VideoControlsComponent","RenderHelperService","isCollectionRef","componentFactoryResolver","usageApi","optionsHelperService","tracking","setViewContainerRef","viewContainerRef","injectModuleComments","injectAngularComponent","document","getElementsByTagName","injectModuleInCollections","domCollections","parent","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","parentElement","e","getCollectionsContainingNode","collections","remove","dataSource","getCollectionDefaults","displayType","SmallGrid","entriesComponentRef","delay","instance","injectNodeRelationsWidget","domRelations","component","injectMetadataEditor","groupId","metadata","querySelector","removeChild","editorMode","embedded","getInstanceService","shouldShowExtendedWidgets$","next","getOriginalId","getNodeUsagesCollection","pipe","usages","usage","collectionUsageType","collection","applyActionButtons","UNORDERED_NODE_ITERATOR_TYPE","action","iterateNext","actionName","getAttribute","onclick","setData","scope","Render","activeObjects","option","getAvailableOptions","List","o","name","isEnabled","callback","warn","doAll","injectVideoControls","injectEventHandler","videoElement","addEventListener","OPEN_EXTERNAL_LINK","target","Error","listener","VIEW_MATERIAL_PLAY_MEDIA","removeEventListener","createElement","appendChild","video","videoControlsRef","applyRenderData","htmlElement","detailsSnippet","innerHTML","Array","from","querySelectorAll","forEach","script","newScriptElement","attributes","a","attr","setAttribute","value","head","ComponentFactoryResolver","RestUsageService","OptionsHelperDataService","RouterModule","RenderPageComponent","routes","path","RenderPageRoutingModule","_3","forChild","imports","exports","DefaultGroups","ElementType","InteractionType","TemporaryStorageService","UIConstants","Subject","skipWhile","takeUntil","AppComponent","ConfigurationHelper","FrameEventsService","Node","RestNetworkService","RestToolService","MdsHelper","OptionsHelperService","CardComponent","RenderPageComponent_div_0_button_10_Template_button_click_0_listener","_r10","ctx_r9","showDetails","propertyInterpolate2","RenderPageComponent_div_0_Template_button_click_3_listener","_r12","close","RenderPageComponent_div_0_button_10_Template","ctx_r0","RenderPageComponent_div_1_button_1_Template_button_click_0_listener","_r16","switchPosition","getPosition","RenderPageComponent_div_1_button_2_Template_button_click_0_listener","_r18","ctx_r17","RenderPageComponent_div_1_button_1_Template","RenderPageComponent_div_1_button_2_Template","canSwitchBack","canSwitchForward","RenderPageComponent_div_4_div_7_Template_div_click_0_listener","_r24","item_r21","i_r22","index","ctx_r23","viewChildobject","RenderPageComponent_div_4_div_7_Template_div_keyup_enter_0_listener","ctx_r25","getNodeTitle","_nodeId","propertyInterpolate1","preview","url","sanitizeUrl","RenderPageComponent_div_4_Template_div_click_2_listener","_r27","viewParent","RenderPageComponent_div_4_Template_div_keyup_enter_2_listener","ctx_r28","RenderPageComponent_div_4_div_7_Template","sequenceParent","sequence","RenderPageComponent_div_5_Template_div_click_0_listener","_r30","scroll","RenderPageComponent_div_6_Template_div_click_0_listener","_r32","similarNodes","DisplayType","Grid","similarNodeColumns","DefaultActionLink","jQuery","html","loadRenderData","translate","translations","uiService","nodeHelper","renderHelper","location","connectors","mdsApi","nodeApi","searchApi","toolService","cardServcie","frame","configLegacy","configService","route","networkService","breadcrumbsService","_ngZone","router","platformLocation","optionsHelper","loadingScreen","mainNavService","temporaryStorageService","localEvents","isLoading","isBuildingPage","showTopBar","NODE_VERSION_CURRENT","isRoute","isSafe","fromLogin","canScrollLeft","canScrollRight","isDestroyed","destroyed$","isChildobject","onClose","window","nodeRenderComponentRef","zone","ngRender","setDownloadUrl","addListener","waitForInit","banner","getBanner","setRoute","prepareCache","queryParams","params","closeOnBack","editor","redirectFromSSO","childobject","childobject_id","get","NODE_RENDER_PARAMETER_DATA_SOURCE","list","getData","NODE_RENDER_PARAMETER_LIST","currentScope","SAFE_SCOPE","broadcastEvent","EVENT_VIEW_OPENED","setMainNavConfig","show","showNavigation","registerGlobalKeyboardShortcuts","nodesChanged","nodesDeleted","beforeunloadHandler","logout","toPromise","onResize","setScrollparameters","handleKeyboardEvent","getNumberOfOpenCards","code","stopPropagation","isRedirectedFromLogin","goToDefaultLocation","back","getMainNav","topBar","toggleMenuSidebar","element","getElementById","removeAttribute","once","focus","preventScroll","scrollIntoView","behavior","i","onEvent","EVENT_REFRESH","ngOnDestroy","complete","pos","isDirectory","clearComponents","actionbar","navigate","relativeTo","queryParamsHandling","replaceUrl","loadNode","download","downloadCurrentNode","elementType","DownloadElementTypes","customEnabledCallback","downloadUrl","CCM_PROP_IO_WWWURL","isFromHomeRepo","group","View","priority","showAsAction","getNodeMetadata","addDownloadButton","status","HTTP_NOT_FOUND","loadingTask","addLoadingTask","until","parameters","showDownloadButton","instant","showDownloadAdvice","isOpenable","getNodeRenderSnippet","connectorSupportsEdit","finish","set","getColumns","mds","nodeRenderContent","moveInnerStyleToHead","postprocessHtml","handleProposal","linkSearchableWidgets","loadSimilarNodes","getSequence","getSet","getMdsId","done","link","caption","getNodeParents","setNodePath","hide","click","getBridgeService","isRunningCordova","href","getCordova","openBrowser","downloadSequence","concat","downloadNodes","triggerTrackingEvent","downloadNode","openConnector","newWindow","isLtiObject","openLtiObject","initOptions","allObjects","customOptions","useDefaultOptions","addOptions","currentOptions","postPrepareOptions","objects","initComponents","refreshComponents","handleQueryAction","getNodeChildobjects","downloadButton","splice","CCM_ASPECT_IO_CHILDOBJECT","downloadAll","NodeChild","NodePublishedCopy","info","onFinish","direction","sequencediv","nativeElement","width","innerWidth","scrollSmoothElement","scrollLeft","limit","scrollWidth","getNodeName","getName","getTitle","switchNode","scrollSmooth","searchFingerprint","pagination","widgets","w","isSearchable","values","classList","add","tabIndex","navigateToSearch","onkeyup","k","getCommonParameters","sidenav","JSON","stringify","ROUTER_PREFIX","metadataset","DEFAULT","_this2","proposal","proposalCollection","ALL","accessible","_this3","Actionbar","hasOpenModals","h","onQueryActionDone","styleAttr","style","append","TranslateService","TranslationsService","UIService","i4","NodeHelperService","i5","i6","Location","RestConnectorsService","RestMdsService","RestNodeService","RestSearchService","i7","CardService","ViewContainerRef","i8","ConfigurationService","i9","ConfigService","i10","ActivatedRoute","i11","BreadcrumbsService","NgZone","Router","PlatformLocation","i12","LoadingScreenService","i13","MainNavService","LocalEventsService","viewQuery","RenderPageComponent_Query","resolveWindow","RenderPageComponent_resize_HostBindingHandler","RenderPageComponent_keydown_HostBindingHandler","resolveDocument","RenderPageComponent_Template","RenderPageComponent_div_0_Template","RenderPageComponent_div_1_Template","RenderPageComponent_div_4_Template","RenderPageComponent_div_5_Template","RenderPageComponent_div_6_Template","RenderPageComponent_Template_div_ngSwipeRight_9_listener","RenderPageComponent_Template_div_ngSwipeLeft_9_listener","RenderPageComponent_div_10_Template","RenderPageComponent_div_11_Template","tmp_0_0","isSidenavOpen","isEmpty","ANIMATION_TIME_FAST","SharedModule","TouchEventDirective","DurationPipe","RenderPageModule","declarations","ngSwipeLeft","ngSwipeRight","onTouchStart","touchStart","onTouchEnd","horizontal","changedTouches","clientX","vertical","clientY","horizontalRelative","Math","abs","hostBindings","TouchEventDirective_HostBindings","TouchEventDirective_touchend_HostBindingHandler","transform","maxValue","totalSeconds","floor","hours","minutes","seconds","toTwoDigitString","pure","n","toString","catchError","first","tap","of","ReplaySubject","NodesRightMode","VideoControlsComponent_div_0_ng_template_6_button_25_Template_button_click_0_listener","_r5","ctx_r4","save","VideoControlsComponent_div_0_ng_template_6_Template_ngx_slider_valueChange_1_listener","_r7","startTime","VideoControlsComponent_div_0_ng_template_6_Template_ngx_slider_highValueChange_1_listener","endTime","onValueChange","VideoControlsComponent_div_0_ng_template_6_Template_input_ngModelChange_9_listener","convertStringToTime","VideoControlsComponent_div_0_ng_template_6_Template_input_ngModelChange_16_listener","VideoControlsComponent_div_0_ng_template_6_Template_input_ngModelChange_23_listener","ctx_r13","VideoControlsComponent_div_0_ng_template_6_button_25_Template","VideoControlsComponent_div_0_ng_template_6_es_spinner_small_26_Template","sliderOptions","duration","VideoControlsComponent_div_0_ng_template_6_Template","size","bridge","collectionService","mainNav","temporaryStorage","updateCurrentNode","hasRequiredPermissions","getHasRequiredPermissions","onVideoLoaded","onloadedmetadata","isOwner","writeVideoControlsValues","getDialogs","addToCollection","onStoredAddToCollection","references","some","originalId","previousValues","currentTime","getSliderOptions","readVideoControlsValues","registerVideoHooks","getCurrentLogin","TOOLPERMISSION_VIDEO_AUDIO_CUT","getNodesRight","ACCESS_CC_PUBLISH","Effective","vttCuesJson","CCM_PROP_IO_REF_VIDEO_VTT","vttCues","parse","vttCue","str","splitted","split","parseInt","showMessage","props","text","editNodeMetadata","nodeWrapper","durationPipe","ceil","animate","draggableRange","minRange","videoControlsComponent","pauseOnEndTime","Date","getTime","playbackStartedTime","pause","onPlay","CM_CREATOR","BridgeService","RestCollectionService","VideoControlsComponent_Template","VideoControlsComponent_div_0_Template","fromRight","Subscriber","predicate","source","lift","SkipWhileOperator","call","subscriber","SkipWhileSubscriber","destination","skipping","_next","tryCallPredicate","Boolean","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[14]}