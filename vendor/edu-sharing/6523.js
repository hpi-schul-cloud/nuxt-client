"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[6523],{58723:(M,v,a)=>{a.d(v,{t:()=>P});var d=a(65879),c=a(22941),g=a(34068);let P=(()=>{class u{constructor(o,_,m){this.ngZone=o,this.router=_,this.scrollPositionRestoration=m,this.appendTimeout=500,this.timeout=null,this.route=[],this.params=null,this.replaceUrl=!0,this.skipScrollToTop=!0,this.shouldAppend=!1}scheduleNavigation({route:o,queryParams:_,replaceUrl:m=!1,skipScrollToTop:x=!1}){o&&(this.route=o),this.params={...this.params??{},..._??{}},m||(this.replaceUrl=!1),x||(this.skipScrollToTop=!1),this.timeout||(this.timeout=setTimeout(()=>{this.skipScrollToTop&&this.scrollPositionRestoration.skipNextScrollEvent(),this.router.navigate(this.route,{queryParams:this.params,queryParamsHandling:"merge",replaceUrl:this.shouldAppend||this.replaceUrl}),this.timeout=null,this.route=[],this.params=null,this.replaceUrl=!0,this.skipScrollToTop=!0,this.shouldAppend||(this.shouldAppend=!0,this.ngZone.runOutsideAngular(()=>setTimeout(()=>this.shouldAppend=!1,this.appendTimeout)))}))}static#e=this.\u0275fac=function(_){return new(_||u)(d.LFG(d.R0b),d.LFG(c.F0),d.LFG(g.n))};static#t=this.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},26523:(M,v,a)=>{a.d(v,{CO:()=>t,hB:()=>h});var d=a(47354),c=a(12994),g=a(49193),P=a(45125),u=a(90001),S=a(72079),o=a(96124),_=a(17927),m=a(96776),x=a(75222),p=a(19352),E=a(52081),D=a(16640);let I=0;class h extends E.hB{get paginator(){return this._paginationHandler.paginator}set paginator(e){this._paginationHandler.paginator=e}get sortPanel(){return this._sortHandler.sortPanel}set sortPanel(e){this._sortHandler.sortPanel=e}set itemsCap(e){this._itemsCap=e,this.renderDataSubscription&&this._connectRenderData()}constructor(e){super(),this._injector=e,this._paginationHandler=new s(this._injector),this._sortHandler=new r(this._injector),this._renderChangesSubscription=null,this._cache=new E.ZP,this._isLoading=new P.X(!0),this._initDone=!1,this._resetDone=!1,this.id=I++,this._registerLoadingState()}connect(){return this.renderDataSubscription||this._connectRenderData(),this.renderData}disconnect(){}init({paginationConfig:e,defaultSort:i}){this._paginationHandler.init(e),this._sortHandler.init(i)}setRemote(e){this._remote=e,this._updateRemoteSubscription()}getData(){return this.renderData.value}isEmpty(){return 0===this.dataStream.value?.length}hasMore(){return this._paginationHandler.hasMore()}loadMore(){return this._paginationHandler.loadMore()}getTotal(){return this._paginationHandler.length}observeTotal(){return this.dataStream.pipe((0,o.U)(()=>this._paginationHandler.length))}appendData(e,i="after"){let n=this.dataStream.value;n="after"===i?n.concat(e):e.concat(n),this.dataStream.next(n),this._paginationHandler.length+=e.length,this._cache.clear()}removeData(e){const i=this.dataStream.value,n=i.filter(l=>e.includes(l)).length,z=i.filter(l=>!e.includes(l));this.dataStream.next(z),this._paginationHandler.length-=n,this._cache.clear()}registerQueryParameters(e){this._paginationHandler.registerQueryParameters(e),this._sortHandler.registerQueryParameters(e)}dumpState(){return console.assert(!1===this.isLoading,"dumping state not supported while loading"),{_cache:{...this._cache},_pageIndex:this._paginationHandler.pageIndex,_pageSize:this._paginationHandler.pageSize,_length:this._paginationHandler.length}}registerRestoreFunction(e){this._restoreFunction=e}_restoreState(e){Object.assign(this._cache,e._cache),this._paginationHandler.pageIndex=e._pageIndex,this._paginationHandler.pageSize=e._pageSize,this._paginationHandler.length=e._length}_resetState(){const e=this._restoreFunction?.();e?this._restoreState(e):(this._paginationHandler.length=null,this._initDone&&this._paginationHandler.firstPage(),this._cache.clear())}_registerLoadingState(){this._isLoading.subscribe(e=>{this.isLoading=!!e&&(this._initDone?this._resetDone?"page":"reset":"initial")})}_connectRenderData(){this.renderDataSubscription?.unsubscribe(),this.renderDataSubscription=this.itemsCap?this.itemsCap.connect(this.dataStream).subscribe(e=>this.renderData.next(e)):this.dataStream.subscribe(e=>this.renderData.next(e))}_updateRemoteSubscription(){this._resetDone=!1,this._resetState();const e=d.T(this._sortHandler.sortChange.pipe((0,_.b)(({source:n})=>{this._resetDone=!1,this._cache.clear(),"user"===n&&this._paginationHandler.firstPage()})),this._sortHandler.initialized),i=d.T(this._paginationHandler.pageChange,this._paginationHandler.initialized);this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=c.aj([e,i]).pipe((0,m.b)(0),(0,o.U)(()=>this._cache.getMissingRange(this._getRequestRange())),(0,_.b)(n=>n&&this._isLoading.next(!0)),(0,x.w)(n=>this._downloadAndCache(n)),(0,o.U)(()=>this._cache.get(this._getDisplayRange())),(0,_.b)(()=>{this._initDone=!0,this._resetDone=!0}),(0,_.b)({next:()=>this._isLoading.next(!1),error:()=>this._isLoading.next(!1)})).subscribe(n=>this.dataStream.next(n))}_getRequestRange(){const e=this._paginationHandler.pageIndex*this._paginationHandler.pageSize;let i=(this._paginationHandler.pageIndex+1)*this._paginationHandler.pageSize;return null!==this._paginationHandler.length&&(i=Math.min(i,this._paginationHandler.length)),{startIndex:e,endIndex:i}}_getDisplayRange(){const e=this._getRequestRange();return{startIndex:e.startIndex,endIndex:Math.min(e.endIndex,this._paginationHandler.length)}}_downloadAndCache(e){return e?this._remote({range:e,sort:this._sortHandler.currentSort}).pipe((0,_.b)(i=>this._paginationHandler.length=i.total),(0,_.b)(i=>this._cache.add(this._getCacheSlice(e,i.data))),(0,o.U)(()=>{})):g.of(null)}_getCacheSlice(e,i){return{startIndex:e.startIndex,endIndex:Math.min(e.endIndex,e.startIndex+i.length),data:i}}}function t(f){return{data:f.nodes,total:f.pagination.total}}class s{get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._initPaginator(e)}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=e,this.paginator&&(this.paginator.pageIndex=e)}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e,this.paginator&&(this.paginator.pageSize=e)}get length(){return this._length}set length(e){this._length=e,this.paginator&&(this.paginator.length=e)}constructor(e){this._injector=e,this._pageIndex=0,this._length=null,this._initialized=new u.t,this.initialized=this._initialized.asObservable(),this._isInitialized=!1,this._pageChange=new S.xQ,this.pageChange=this._pageChange.asObservable(),this._paginatorReset=new S.xQ}init(e){this._config=e,this.pageSize=e.defaultPageSize,this._isInitialized=!0,this._initialized.next(),this._initialized.complete()}firstPage(){const e=this.pageIndex,i=this.pageSize;this.pageIndex=0,"infinite-scroll"===this._config.strategy&&(this.pageSize=this._config.defaultPageSize),(e!==this.pageIndex||i!==this.pageSize)&&this._emitPageEvent()}hasMore(){if(this._isInitialized)return this.length>(this.pageIndex+1)*this.pageSize}loadMore(){return"infinite-scroll"!==this._config.strategy?(console.warn(`Called loadMore with pagination strategy ${this._config.strategy}.`,"The only supported strategy for loadMore is 'infinite-scroll'."),!1):!!this.hasMore()&&(this.pageSize=Math.min(this.pageSize+this._config.defaultPageSize,this.length),this._emitPageEvent(),!0)}registerQueryParameters(e){if(!this._isInitialized)throw new Error("Tried to register query params before initializing");if("infinite-scroll"===this._config.strategy)return;const i=this._injector.get(D.l),n=i.createMapped({toString:l=>(l+1).toString(),fromString:l=>parseInt(l)-1},0),z=i.createMapped({toString:l=>l.toString(),fromString:l=>parseInt(l)},this._config.defaultPageSize);n.registerQueryParameter("page",e),z.registerQueryParameter("pageSize",e),c.aj([n.observeValue(),z.observeValue()]).subscribe(([l,b])=>{this.pageIndex=l,this.pageSize=b,this._emitPageEvent()}),this.pageChange.subscribe(l=>{n.setUserValue(l.pageIndex),z.setUserValue(l.pageSize)})}_initPaginator(e){this._paginatorReset.next(),e&&(e.pageIndex=this.pageIndex,e.pageSize=this.pageSize,e.length=this.length,e.page.pipe((0,p.R)(this._paginatorReset)).subscribe(i=>{this.pageIndex=i.pageIndex,this.pageSize=i.pageSize,this.length=i.length,this._emitPageEvent()}))}_emitPageEvent(){this._pageChange.next({pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}class r{get sortPanel(){return this._sortPanel}set sortPanel(e){this._sortPanel=e,this._initSortPanel(e)}get currentSort(){return this._currentSort}set currentSort(e){this._currentSort=e,this.sortPanel&&(this.sortPanel.active=e.active,this.sortPanel.direction=e.direction)}constructor(e){this._injector=e,this._sortChange=new S.xQ,this.sortChange=this._sortChange.asObservable(),this._initialized=new u.t,this.initialized=this._initialized.asObservable(),this._isInitialized=!1,this._sortPanelReset=new S.xQ}init(e){this._defaultSort=e={active:e?.active,direction:e?.direction},this.currentSort=e,this._isInitialized=!0,this._initialized.next(),this._initialized.complete()}_changeSort(e,i){e.direction||(e=this._defaultSort),(this.currentSort.active!==e.active||this.currentSort.direction!==e.direction)&&(this.currentSort={...e},this._sortChange.next({...e,source:i}))}registerQueryParameters(e){if(!this._isInitialized)throw new Error("Tried to register query params before initializing")}_initSortPanel(e){this._sortPanelReset.next(),e&&(e.active=this.currentSort?.active,e.direction=this.currentSort?.direction,e.sortChange.pipe((0,p.R)(this._sortPanelReset)).subscribe(i=>{this._changeSort(i,"user")}))}}},16640:(M,v,a)=>{a.d(v,{l:()=>x});var d=a(12994),c=a(45125),g=a(96124),P=a(32068),u=a(97734),S=a(17927),o=a(52081),_=a(65879),m=a(58723);let x=(()=>{class h{constructor(s){p.navigationScheduler=s}createDict(s){return new p(E,s)}createString(s){return new p(new D,s)}createMapped(s,r){return new p(new O(s),r)}createBoolean(s){return new p(I,s)}static#e=this.\u0275fac=function(r){return new(r||h)(_.LFG(m.t))};static#t=this.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();class p{get value(){return this.getValue()}set value(t){this.setUserValue(t)}constructor(t,s){this._type=t,this._systemValue=new c.X(this._type.null),this._userValue=new c.X(null),this._overrideValue=new c.X({useOverride:!1}),this._mergedValue=new c.X(null),void 0!==s&&this.setSystemValue(s),this._getMergedValue().subscribe(this._mergedValue)}setSystemValue(t){this._serialize(t)!==this._serialize(this._systemValue.value)&&this._systemValue.next(t)}setUserValue(t){this._serialize(t)!==this._serialize(this._userValue.value)&&(this._serialize(t)===this._serialize(this._systemValue.value)?this.resetUserValue():this._userValue.next(t))}resetUserValue(){null!==this._userValue.value&&this._userValue.next(null)}getUserValue(){return this._userValue.value}observeUserValue(){return this._userValue.asObservable()}setOverrideValue(t){(!this._overrideValue.value.useOverride||this._serialize(this._overrideValue.value.value)!==this._serialize(t))&&this._overrideValue.next({useOverride:!0,value:t})}unsetOverrideValue(){this._overrideValue.value.useOverride&&this._overrideValue.next({useOverride:!1})}getValue(){return this._mergedValue.value}observeValue(){return this._mergedValue.asObservable()}getQueryParamEntry(t=this.getValue()){const s=this._serialize(t);return s===this._serialize(this._systemValue.value)?{}:{[this._queryParam]:s}}observeQueryParamEntry(){return this.observeValue().pipe((0,g.U)(t=>this.getQueryParamEntry(t)))}registerQueryParameter(t,s,{replaceUrl:r=!1,skipScrollToTop:f=!1}={}){let e;this._queryParam&&console.warn(`Registered user value for query parameter ${t} which is already registered for query parameter ${this._queryParam}`),this._queryParam=t,s.queryParams.pipe((0,g.U)(i=>i[t]),(0,P.x)(),(0,u.h)(i=>i!==e),(0,S.b)(i=>e=i),(0,g.U)(i=>this._deserialize(i))).subscribe(i=>this.setUserValue(i)),this._userValue.pipe((0,g.U)(i=>this._serialize(i)),(0,u.h)(i=>i!==e),(0,S.b)(i=>e=i)).subscribe(i=>{p.navigationScheduler.scheduleNavigation({queryParams:{[t]:i},replaceUrl:r,skipScrollToTop:f})})}registerSessionStorage(t){let s=sessionStorage.getItem(t);(0,o.Nf)(s)&&this.setUserValue(this._deserialize(s)),this._userValue.pipe((0,g.U)(r=>this._serialize(r))).subscribe(r=>{s!==r&&(s=r,(0,o.Nf)(r)?sessionStorage.setItem(t,r):sessionStorage.removeItem(t))})}registerFormControl(t){this.observeValue().pipe((0,g.U)(s=>this._serialize(s)),(0,u.h)(s=>s!==t.value)).subscribe(s=>t.setValue(s)),t.valueChanges.pipe((0,g.U)(s=>this._deserialize(s))).subscribe(s=>this.setUserValue(s))}_serialize(t){return(0,o.Nf)(t)?this._type.serialize(t):null}_deserialize(t){return(0,o.Nf)(t)?this._type.deserialize(t):null}_getMergedValue(){return d.aj([this._systemValue,this._userValue,this._overrideValue]).pipe((0,g.U)(([t,s,r])=>r.useOverride?r.value:this._type.merge(t,s)),(0,P.x)())}}const E={null:{},merge:(h,t)=>({...h,...t}),serialize:JSON.stringify,deserialize:JSON.parse};class D{constructor(){this.null=null,this.merge=(t,s)=>s??t,this.serialize=t=>t,this.deserialize=t=>t}}class O{constructor(t){this.mapping=t,this.null=null,this.merge=(s,r)=>r??s,this.serialize=this.mapping.toString,this.deserialize=this.mapping.fromString}}const I={null:!1,merge:(h,t)=>t??h,serialize:h=>h?"true":"false",deserialize:h=>"true"===h}}}]);