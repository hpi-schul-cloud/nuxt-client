"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[2848],{22848:(B,y,c)=>{c.r(y),c.d(y,{UserManagementPageModule:()=>pn});var C=c(50555),N=c(22941),l=c(81771),R=c(72079),A=c(90721),e=c(65879),T=c(1189),M=c(96814),a=c(52081),D=c(63030),te=c(5178),I=c(86381),O=c(74104),F=c(19374),G=c(66848),h=c(15861),x=c(86825),K=c(77504),ne=c(97734),j=c(94462),ie=c(83848),U=c(64634),w=c(76754),oe=c(4254),W=c(19445),V=c(36692),b=c(71365),se=c(98617),q=c(13838),E=c(56223),H=c(17162),re=c(35799),z=c(23680),J=c(32296),Q=c(75986),L=c(64170),Y=c(24516),$=c(98525),ae=c(31579),v=c(99994),le=c(92596),_e=c(65928);function ce(o,r){1&o&&(e.TgZ(0,"div",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PERMISSIONS.TOOLPERMISSIONS.DENY")," "))}function de(o,r){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ce,3,3,"div",9),e.TgZ(8,"div",10),e._uU(9),e.ALo(10,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"GROUP"===t._authority.authorityType?"PERMISSIONS.TOOLPERMISSIONS.MEMBERS_ALLOWED":"EVERYONE"===t._authority.authorityType?"PERMISSIONS.TOOLPERMISSIONS.EVERYONE_ALLOWED":"PERMISSIONS.TOOLPERMISSIONS.USER_ALLOWED"),": "),e.xp6(3),e.Oqu(e.lcZ(6,6,"PERMISSIONS.TOOLPERMISSIONS.ALLOW")),e.xp6(2),e.Q6J("ngIf","EVERYONE"!==t._authority.authorityType),e.xp6(2),e.Oqu(e.lcZ(10,8,"PERMISSIONS.TOOLPERMISSIONS.RESULT"))}}function pe(o,r){1&o&&e._UZ(0,"es-spinner")}function ue(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"TOOLPERMISSION."+t)," ")}}const me=function(o){return{connector:o}};function ge(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,"TOOLPERMISSION.TOOLPERMISSION_CONNECTOR"+(i.getTpSafe(t)?"_SAFE":""),e.VKq(4,me,i.getTpConnector(t)))," ")}}const he=function(o){return{repository:o}};function Se(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,"TOOLPERMISSION.TOOLPERMISSION_REPOSITORY",e.VKq(4,he,i.getTpRepository(t)))," ")}}function Ee(o,r){1&o&&(e.TgZ(0,"es-info-message",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PERMISSIONS.TOOLPERMISSIONS.SYSTEM_MANAGED_WARNING")," "))}function Oe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"mat-checkbox",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.deny[s]=n)})("change",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(3);return s.allow[n]=!1,e.KtG(s.change(n))}),e.qZA()()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.MGl("name","deny",t,""),e.Q6J("disabled",-1!=i.changing.indexOf(t))("ngModel",i.deny[t])}}function fe(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"es-spinner-small"),e.qZA())}function Te(o,r){1&o&&e._UZ(0,"i",30)}function Me(o,r){1&o&&(e._UZ(0,"i",31),e.ALo(1,"translate")),2&o&&e.s9C("matTooltip",e.lcZ(1,1,"PERMISSIONS.TOOLPERMISSIONS.INHERIT_UNKNOWN"))}function Ie(o,r){if(1&o&&(e.TgZ(0,"div",26)(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Te,1,0,"i",28),e.YNc(5,Me,2,3,"i",29),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("title",i.isImplicit(t)?i.getImplicitDetail(t):""),e.xp6(2),e.hij(" ",e.lcZ(3,4,"PERMISSIONS.TOOLPERMISSIONS.STATUS_"+i.getEffective(t))," "),e.xp6(2),e.Q6J("ngIf",i.isImplicit(t)),e.xp6(1),e.Q6J("ngIf","UNKNOWN"===i.getEffective(t))}}function Ce(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",7),e.YNc(2,ue,3,3,"div",4),e.YNc(3,ge,3,6,"div",4),e.YNc(4,Se,3,6,"div",4),e.TgZ(5,"div",19),e._uU(6),e.qZA(),e.YNc(7,Ee,3,3,"es-info-message",20),e.qZA(),e.TgZ(8,"div",21)(9,"mat-checkbox",22),e.NdJ("ngModelChange",function(n){const p=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.allow[p]=n)})("change",function(){const s=e.CHM(t).$implicit,p=e.oxw(3);return p.deny[s]=!1,e.KtG(p.change(s))}),e.qZA()(),e.YNc(10,Oe,2,3,"div",23),e.TgZ(11,"div",10),e.YNc(12,fe,2,0,"div",4),e.YNc(13,Ie,6,6,"div",24),e.qZA()()}if(2&o){const t=r.$implicit,i=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf","CONNECTORS"!==i.name&&"REPOSITORIES"!==i.name),e.xp6(1),e.Q6J("ngIf","CONNECTORS"===i.name),e.xp6(1),e.Q6J("ngIf","REPOSITORIES"===i.name),e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",null==n.permissions[t]?null:n.permissions[t].systemManaged),e.xp6(2),e.MGl("name","allow",t,""),e.Q6J("disabled",-1!=n.changing.indexOf(t))("ngModel",n.allow[t]),e.xp6(1),e.Q6J("ngIf","EVERYONE"!==n._authority.authorityType),e.xp6(1),e.ekj("allowed","ALLOWED"===n.getEffective(t))("denied","ALLOWED"!==n.getEffective(t)),e.xp6(1),e.Q6J("ngIf",-1!=n.changing.indexOf(t)),e.xp6(1),e.Q6J("ngIf",-1==n.changing.indexOf(t))}}function Ae(o,r){if(1&o&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"i",16),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ce,14,15,"div",17),e.qZA()),2&o){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("esIcon",t.icon),e.xp6(1),e.hij("",e.lcZ(4,3,"PERMISSIONS.TOOLPERMISSIONS.GROUP."+t.name)," "),e.xp6(2),e.Q6J("ngForOf",i.getToolpermissionsForGroup(t))}}function Pe(o,r){1&o&&e._UZ(0,"es-spinner-small")}function Ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.createToolpermission())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3);e.ekj("disabled",!t.addName.trim()),e.xp6(1),e.hij(" ",e.lcZ(2,3,"PERMISSIONS.TOOLPERMISSIONS.ADD")," ")}}function xe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",15)(2,"i",33),e._uU(3,"add"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",34)(7,"mat-form-field")(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.addName=n)}),e.qZA()(),e.YNc(12,Pe,1,0,"es-spinner-small",4),e.YNc(13,Ne,3,5,"button",36),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.hij("",e.lcZ(5,5,"PERMISSIONS.TOOLPERMISSIONS.GROUP.ADD")," "),e.xp6(5),e.Oqu(e.lcZ(10,7,"PERMISSIONS.TOOLPERMISSIONS.GROUP.ADD_LABEL")),e.xp6(2),e.Q6J("ngModel",t.addName),e.xp6(1),e.Q6J("ngIf",t.creatingToolpermission),e.xp6(1),e.Q6J("ngIf",!t.creatingToolpermission)}}function Re(o,r){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,Ae,6,5,"div",12),e.YNc(2,xe,14,9,"div",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.getGroups()),e.xp6(1),e.Q6J("ngIf","EVERYONE"===t._authority.authorityType)}}class S{static#e=this.STATUS_ALLOWED="ALLOWED";static#t=this.STATUS_DENIED="DENIED";static#n=this.STATUS_UNDEFINED="UNDEFINED";static#i=this.STATUS_UNKNOWN="UNKNOWN";static#o=this.GROUPS=[{name:"SHARING",icon:"share",permissions:[l.u6.TOOLPERMISSION_INVITE,l.u6.TOOLPERMISSION_INVITE_STREAM,l.u6.TOOLPERMISSION_INVITE_LINK,l.u6.TOOLPERMISSION_INVITE_SHARE,l.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH,l.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE,l.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_FUZZY,l.u6.TOOLPERMISSION_INVITE_HISTORY]},{name:"LICENSING",icon:"copyright",permissions:[l.u6.TOOLPERMISSION_LICENSE,l.u6.TOOLPERMISSION_INVITE_ALLAUTHORITIES,l.u6.TOOLPERMISSION_PUBLISH_COPY,l.u6.TOOLPERMISSION_MANAGE_RELATIONS,l.u6.TOOLPERMISSION_HANDLESERVICE,l.u6.TOOLPERMISSION_CONTROL_RESTRICTED_ACCESS]},{name:"DATA_MANAGEMENT",icon:"folder",permissions:[l.u6.TOOLPERMISSION_WORKSPACE,l.u6.TOOLPERMISSION_CREATE_ELEMENTS_FILES,l.u6.TOOLPERMISSION_CREATE_ELEMENTS_FOLDERS,l.u6.TOOLPERMISSION_CREATE_MAP_LINK,l.u6.TOOLPERMISSION_UNCHECKEDCONTENT,l.u6.TOOLPERMISSION_COMMENT_WRITE,l.u6.TOOLPERMISSION_RATE_READ,l.u6.TOOLPERMISSION_RATE_WRITE,l.u6.TOOLPERMISSION_MATERIAL_FEEDBACK]},{name:"ACCOUNT_MANAGEMENT",icon:"group",permissions:[l.u6.TOOLPERMISSION_SIGNUP_GROUP]},{name:"SAFE",icon:"lock",permissions:[l.u6.TOOLPERMISSION_CONFIDENTAL,l.u6.TOOLPERMISSION_INVITE_SAFE,l.u6.TOOLPERMISSION_INVITE_SHARE_SAFE,l.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE,l.u6.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE]},{name:"COLLECTIONS",icon:"layers",permissions:[l.u6.TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS,l.u6.TOOLPERMISSION_COLLECTION_PROPOSAL,l.u6.TOOLPERMISSION_COLLECTION_EDITORIAL,l.u6.TOOLPERMISSION_COLLECTION_CURRICULUM,l.u6.TOOLPERMISSION_COLLECTION_PINNING,l.u6.TOOLPERMISSION_VIDEO_AUDIO_CUT,l.u6.TOOLPERMISSION_COLLECTION_CHANGE_OWNER]},{name:"MANAGEMENT",icon:"settings",permissions:[l.u6.TOOLPERMISSION_USAGE_STATISTIC,l.u6.TOOLPERMISSION_GLOBAL_STATISTICS_NODES,l.u6.TOOLPERMISSION_GLOBAL_STATISTICS_USER]},{name:"MEDIACENTER",icon:"business",permissions:[l.u6.TOOLPERMISSION_MEDIACENTER_MANAGE]},{name:"CONNECTORS",icon:"edit"},{name:"REPOSITORIES",icon:"cloud"},{name:"OTHER",icon:"help"}];getGroups(){return S.GROUPS}getToolpermissionsForGroup(r){if(r.permissions)return r.permissions;let t=Object.keys(this.permissions);if("CONNECTORS"==r.name)return t.filter(i=>i.startsWith(l.u6.TOOLPERMISSION_CONNECTOR_PREFIX));if("REPOSITORIES"==r.name)return t.filter(i=>i.startsWith(l.u6.TOOLPERMISSION_REPOSITORY_PREFIX));for(let i of S.GROUPS)if(i.permissions)for(let n of i.permissions){let s=t.indexOf(n);-1!=s&&t.splice(s,1)}else"CONNECTORS"==i.name?t=t.filter(n=>!n.startsWith(l.u6.TOOLPERMISSION_CONNECTOR_PREFIX)):"REPOSITORIES"==i.name&&(t=t.filter(n=>!n.startsWith(l.u6.TOOLPERMISSION_REPOSITORY_PREFIX)));return t}set authority(r){null!=r&&(this._authority=r,this.isLoading=!0,this.name=new v.F(this.translate).transform(r,null),this.refresh())}constructor(r,t,i,n,s){this.toast=r,this.admin=t,this.node=i,this.translate=n,this.iam=s,this.isLoading=!1,this.addName="",this.creatingToolpermission=!1,this.changing=[],this.onClose=new e.vpe,this.buttons=l.Qd.getSingleButton("CLOSE",()=>this.close(),"standard")}close(){this.onClose.emit()}change(r){this.changing.push(r),this.admin.setToolpermissions(this._authority.authorityName,this.getPermissions()).subscribe(()=>{this.refresh(()=>{let t=this.changing.indexOf(r);-1!=t&&this.changing.splice(t,1)})},t=>{this.toast.error(t)})}getEffective(r){return this.deny[r]?S.STATUS_DENIED:this.allow[r]&&this.permissions[r]?.effective!=S.STATUS_DENIED?S.STATUS_ALLOWED:this.denyInit[r]||this.permissions[r]?.effective!=S.STATUS_DENIED?this.allow[r]!=this.allowInit[r]||this.deny[r]!=this.denyInit[r]?S.STATUS_UNKNOWN:this.permissions[r]?.effective:S.STATUS_DENIED}isImplicit(r){return!(this._authority.authorityType==l.u6.AUTHORITY_TYPE_EVERYONE||this.getEffective(r)==S.STATUS_UNDEFINED||this.deny[r]||(!this.allow[r]||this.permissions[r].effective!=S.STATUS_DENIED)&&this.allow[r])}getImplicitDetail(r){let t=[];for(let i of this.permissions[r].effectiveSource)t.push(i.authorityType==l.u6.AUTHORITY_TYPE_EVERYONE?this.translate.instant("PERMISSIONS.TOOLPERMISSIONS.EVERYONE_ALLOWED"):new v.F(this.translate).transform(i,null));return this.translate.instant("PERMISSIONS.TOOLPERMISSIONS.INHERIT_DETAIL",{memberships:t.join(", ")})}getPermissions(){let r={};for(let t in this.permissions)this.allow[t]?r[t]=S.STATUS_ALLOWED:this.deny[t]&&(r[t]=S.STATUS_DENIED);return r}refresh(r=null){this.admin.getToolpermissions(this._authority.authorityName).subscribe(t=>{this.isLoading=!1,this.permissions=t,this.allow={},this.deny={};for(let i in this.permissions){let n=this.permissions[i].explicit;this.allow[i]=n==S.STATUS_ALLOWED,this.deny[i]=n==S.STATUS_DENIED}this.allowInit=U.W.deepCopy(this.allow),this.denyInit=U.W.deepCopy(this.deny),r&&r()},t=>{this.toast.error(t),this.close()})}createToolpermission(){this.creatingToolpermission=!0,this.admin.addToolpermission(this.addName).subscribe(()=>{this.toast.toast("PERMISSIONS.TOOLPERMISSIONS.ADDED",{name:this.addName}),this.addName="",this.creatingToolpermission=!1,this.refresh()},r=>{this.creatingToolpermission=!1,this.toast.error(r)})}getTpConnector(r){return-1!=(r=r.substring(l.u6.TOOLPERMISSION_CONNECTOR_PREFIX.length)).indexOf("_safe")&&(r=r.substring(0,r.indexOf("_safe"))),this.translate.instant("CONNECTOR."+r+".NAME")}getTpSafe(r){return r.endsWith("_safe")}getTpRepository(r){return r.substring(l.u6.TOOLPERMISSION_REPOSITORY_PREFIX.length)}static#s=this.\u0275fac=function(t){return new(t||S)(e.Y36(T.F),e.Y36(l.F_),e.Y36(l.xE),e.Y36(b.sK),e.Y36(l.Du))};static#r=this.\u0275cmp=e.Xpm({type:S,selectors:[["es-toolpermission-manager"]],inputs:{authority:"authority"},outputs:{onClose:"onClose"},decls:8,vars:9,consts:[["width","xlarge","height","xlarge",3,"title","subtitle","buttons","isCancelable","onCancel"],[1,"heading-group"],["class","heading",4,"ngIf"],[1,"toolpermissions"],[4,"ngIf"],["class","table",4,"ngIf"],[1,"heading"],[1,"name"],[1,"checkboxDiv"],["class","checkboxDiv",4,"ngIf"],[1,"result"],[1,"table"],["class","group",4,"ngFor","ngForOf"],["class","group-add",4,"ngIf"],[1,"group"],[1,"card-title-element"],[3,"esIcon"],["class","groupTable",4,"ngFor","ngForOf"],[1,"groupTable"],[1,"technicalName"],["mode","warning",4,"ngIf"],[1,"checkboxDiv","checkboxInput"],[3,"disabled","ngModel","name","ngModelChange","change"],["class","checkboxDiv checkboxInput",4,"ngIf"],[3,"title",4,"ngIf"],["mode","warning"],[3,"title"],[1,"text"],["esIcon","edu-inherit","class","inherit",4,"ngIf"],["class","inherit","esIcon","warning",3,"matTooltip",4,"ngIf"],["esIcon","edu-inherit",1,"inherit"],["esIcon","warning",1,"inherit",3,"matTooltip"],[1,"group-add"],[1,"material-icons"],[1,"add"],["matInput","","name","addName",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"es-card",0),e.NdJ("onCancel",function(){return i.close()}),e.ALo(1,"translate"),e.TgZ(2,"div",1),e.YNc(3,de,11,10,"div",2),e.qZA(),e.TgZ(4,"div",3)(5,"form"),e.YNc(6,pe,1,0,"es-spinner",4),e.YNc(7,Re,3,2,"div",5),e.qZA()()()),2&t&&(e.s9C("title",e.lcZ(1,7,"PERMISSIONS.TOOLPERMISSIONS.TITLE")),e.Q6J("subtitle",i.name)("buttons",i.buttons)("isCancelable",0==i.changing.length),e.xp6(3),e.Q6J("ngIf",!i.isLoading),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[q.A,M.sg,M.O5,le.gM,a.ar,a.OR,E._Y,E.Fj,E.JJ,E.JL,E.On,E.F,H.u,J.lW,Q.oG,L.KE,L.hX,Y.Nt,_e.h,b.X$],styles:["[_nghost-%COMP%]     .table .allowed #Mask{fill:#40bf8e}[_nghost-%COMP%]     .table .denied #Mask{fill:#cd2457}.card-scroll[_ngcontent-%COMP%]{top:0;height:calc(100% - 67px)}.heading-group[_ngcontent-%COMP%]{width:100%;background-color:#fff;position:sticky;top:0;z-index:1;height:60px}.heading-group[_ngcontent-%COMP%]   .fade[_ngcontent-%COMP%]{position:absolute;z-index:100;left:0;top:108px;width:100%;height:20px;background:linear-gradient(to bottom,#fff 15%,rgba(255,255,255,.0001))}.toolpermissions[_ngcontent-%COMP%]   .groupTable[_ngcontent-%COMP%]{padding:0 25px}.heading[_ngcontent-%COMP%], .groupTable[_ngcontent-%COMP%]{display:flex}.heading[_ngcontent-%COMP%]{font-weight:700;color:var(--textLight);padding:10px 0;margin:0 25px}.table[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-top:-10px}.group[_ngcontent-%COMP%], .group-add[_ngcontent-%COMP%]{display:flex;flex-direction:column}.group-add[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 0}.group-add[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex-grow:1;width:auto;margin:0 30px}.group-add[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:0 30px}.groupName[_ngcontent-%COMP%]{color:var(--textLight);font-weight:700;text-align:left;padding:10px 20px}.name[_ngcontent-%COMP%]{flex-grow:1;text-align:left;align-self:center;padding:10px 0;word-break:break-word}.name[_ngcontent-%COMP%]   .technicalName[_ngcontent-%COMP%]{font-size:70%;word-break:break-all;color:#aaa;font-style:italic}.checkboxDiv[_ngcontent-%COMP%]{width:75px;min-width:75px;align-self:center}.checkboxDiv[_ngcontent-%COMP%] > mat-checkbox[_ngcontent-%COMP%]{padding-left:13px}.checkboxInput[_ngcontent-%COMP%]{padding-top:7px}.checkboxDiv[_ngcontent-%COMP%], .result[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .result es-spinner-small .preloader-wrapper.small{width:20px;height:20px}[_nghost-%COMP%]     .mat-checkbox-inner-container{margin:0}[_nghost-%COMP%]     .add .mat-form-field-wrapper{padding:0}.heading[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{justify-content:center}.result[_ngcontent-%COMP%]{width:100px;min-width:100px;display:flex;align-items:center}.result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{white-space:pre-wrap}.result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .inherit[_ngcontent-%COMP%]{cursor:default;padding-left:10px;font-size:16px;display:flex;align-items:center}.allowed[_ngcontent-%COMP%]{color:#40bf8e}.denied[_ngcontent-%COMP%]{color:#cd2457}"],data:{animation:[(0,x.X$)("fade",a.Le.fade()),(0,x.X$)("cardAnimation",a.Le.cardAnimation())]}})}const be=["actionbar"],Le=["actionbarMember"],ve=["actionbarSignup"],Ze=["mainList"],ye=["memberAdd"],De=["signupList"],Ue=["addToComponent"];function we(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.setOrgTab())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"PERMISSIONS.INFO_GLOBAL_"+t._mode)),e.xp6(3),e.Oqu(e.lcZ(6,4,"PERMISSIONS.CHOOSE_ORG"))}}function Ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"a",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.deselectOrg())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.setOrgTab())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"PERMISSIONS.NO_ORG")),e.xp6(3),e.Oqu(e.lcZ(6,4,"PERMISSIONS.CHOOSE_ORG")))}const Je=function(o){return{org:o}};function Fe(o,r){if(1&o&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Ge,7,6,"span",2),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,2,"PERMISSIONS.INFO_ORG_"+t._mode,e.VKq(5,Je,t.org.profile.displayName))),e.xp6(2),e.Q6J("ngIf",t.isAdmin)}}function qe(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,we,7,6,"div",2),e.YNc(2,Fe,5,7,"div",2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.org),e.xp6(1),e.Q6J("ngIf",t.org)}}function He(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-toolpermission-manager",16),e.NdJ("onClose",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toolpermissionAuthority=null)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("authority",t.toolpermissionAuthority)}}function Qe(o,r){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.USER_STATUS."+t))}}function Ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",22)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",23),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editStatus.status.status=n)}),e.ALo(5,"translate"),e.YNc(6,Qe,3,4,"mat-option",24),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"PERMISSIONS.STATUS_LABEL")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"PERMISSIONS.STATUS.null")),e.Q6J("ngModel",t.editStatus.status.status),e.xp6(2),e.Q6J("ngForOf",t.STATUS_TYPES)}}const ke=function(){return{relative:!1,time:!0}};function Be(o,r){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"formatDate"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"PERMISSIONS.STATUS_LAST_CHANGE"),": ",e.xi3(3,4,t.editStatus.status.date,e.DdM(7,ke))," ")}}function Ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-card",17),e.NdJ("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editStatus=null)}),e.ALo(1,"translate"),e.ALo(2,"authorityName"),e.TgZ(3,"div",18),e.YNc(4,Ye,7,8,"mat-form-field",19),e.TgZ(5,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.editStatusNotify=n)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,Be,4,8,"div",21),e.qZA()()}if(2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,8,"PERMISSIONS.SET_STATUS")),e.s9C("subtitle",e.lcZ(2,10,t.editStatus)),e.Q6J("isCancelable",!0)("buttons",t.editStatusButtons),e.xp6(4),e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngModel",t.editStatusNotify),e.xp6(1),e.Oqu(e.lcZ(7,12,"PERMISSIONS.STATUS_NOTIFY")),e.xp6(2),e.Q6J("ngIf",t.editStatus.status.date)}}function je(o,r){1&o&&(e.TgZ(0,"es-info-message",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PERMISSIONS.ORG_SIGNUP_NO_EMAIL")," "))}function We(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-input-password",37),e.NdJ("valueChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.groupSignupDetails.signupPassword=n)}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"PERMISSIONS.ORG_SIGNUP_PASSWORD")),e.s9C("hint",e.lcZ(2,5,"PERMISSIONS.ORG_SIGNUP_PASSWORD_HINT")),e.Q6J("value",t.groupSignupDetails.signupPassword)}}function Ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-card",27),e.NdJ("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.groupSignupDetails=null)}),e.ALo(1,"translate"),e.TgZ(2,"div",28),e.YNc(3,je,3,3,"es-info-message",29),e.TgZ(4,"mat-form-field")(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.groupSignupDetails.signupMethod=n)}),e.TgZ(9,"mat-option",30),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-option",31),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"mat-option",32),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-option",33),e._uU(19),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"es-info-message",34),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,We,3,7,"es-input-password",35),e.qZA()()}if(2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,13,"PERMISSIONS.ORG_SIGNUP")),e.Q6J("node",t.groupSignup)("isCancelable",!0)("buttons",t.signupButtons),e.xp6(3),e.Q6J("ngIf",!t.groupSignup.profile.groupEmail),e.xp6(3),e.Oqu(e.lcZ(7,15,"PERMISSIONS.ORG_SIGNUP_METHOD")),e.xp6(2),e.Q6J("ngModel",t.groupSignupDetails.signupMethod),e.xp6(2),e.Oqu(e.lcZ(11,17,"PERMISSIONS.ORG_SIGNUP_METHODS.disabled")),e.xp6(3),e.Oqu(e.lcZ(14,19,"PERMISSIONS.ORG_SIGNUP_METHODS.simple")),e.xp6(3),e.Oqu(e.lcZ(17,21,"PERMISSIONS.ORG_SIGNUP_METHODS.password")),e.xp6(3),e.Oqu(e.lcZ(20,23,"PERMISSIONS.ORG_SIGNUP_METHODS.list")),e.xp6(3),e.hij(" ",e.lcZ(23,25,"PERMISSIONS.ORG_SIGNUP_METHODS."+(t.groupSignupDetails.signupMethod||"disabled")+"_DETAILS")," "),e.xp6(2),e.Q6J("ngIf","password"===t.groupSignupDetails.signupMethod)}}function ze(o,r){1&o&&(e.TgZ(0,"h5",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PERMISSIONS.ORG_SIGNUP_LIST_EMPTY")," "))}function $e(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-card",38),e.NdJ("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.groupSignupListShown=!1)}),e.ALo(1,"translate"),e.TgZ(2,"div",39)(3,"div",40),e._UZ(4,"es-actionbar",41,42),e.qZA(),e.TgZ(6,"es-node-entries-wrapper",43,44),e.NdJ("clickItem",function(n){e.CHM(t);const s=e.MAs(7),p=e.oxw();return e.KtG(p.selectOnClick(s,n))}),e.YNc(8,ze,3,3,"ng-template",null,14,e.W1O),e.qZA()()()}if(2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,11,"PERMISSIONS.ORG_SIGNUP_LIST")),e.Q6J("node",t.groupSignup)("isCancelable",!0)("buttons",t.signupListButtons),e.xp6(4),e.Q6J("numberOfAlwaysVisibleOptions",1)("numberOfAlwaysVisibleOptionsMobile",1),e.xp6(2),e.Q6J("scope",t.Scope.UserManagement)("displayType",t.DisplayType.Table)("elementInteractionType",t.InteractionType.Emitter)("columns",t.addMemberColumns)("dataSource",t.groupSignupList)}}function Xe(o,r){if(1&o&&(e.TgZ(0,"div",49)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",50),e._uU(5),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"PERMISSIONS.INTERNAL_NAME")),e.xp6(3),e.Oqu(t.edit.authorityName)}}function et(o,r){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.GROUP_TYPE."+t))}}function tt(o,r){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.SCOPE_TYPE."+t))}}function nt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",22)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",54),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.edit.profile.scopeType=n)}),e.ALo(5,"translate"),e.YNc(6,tt,3,4,"mat-option",24),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,4,"GROUP.scopeType")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"PERMISSIONS.SCOPE_TYPE.null")),e.Q6J("ngModel",t.edit.profile.scopeType),e.xp6(2),e.Q6J("ngForOf",t.SCOPE_TYPES)}}function it(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",51),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.displayName=n)}),e.qZA()(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",52),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.groupEmail=n)}),e.qZA()(),e.TgZ(11,"mat-form-field",22)(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"mat-select",53),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.groupType=n)}),e.ALo(16,"translate"),e.YNc(17,et,3,4,"mat-option",24),e.qZA()(),e.YNc(18,nt,7,8,"mat-form-field",19),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,9,"GROUP.displayName")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.displayName),e.xp6(3),e.Oqu(e.lcZ(9,11,"GROUP.groupEmail")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.groupEmail),e.xp6(3),e.Oqu(e.lcZ(14,13,"GROUP.groupType")),e.xp6(2),e.s9C("placeholder",e.lcZ(16,15,"PERMISSIONS.GROUP_TYPE.null")),e.Q6J("ngModel",t.edit.profile.groupType),e.xp6(2),e.Q6J("ngForOf",t.GROUP_TYPES),e.xp6(1),e.Q6J("ngIf",t.isAdmin)}}function ot(o,r){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.GROUP_TYPE."+t))}}function st(o,r){1&o&&(e.TgZ(0,"div",56)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"es-breadcrumbs",57),e.ALo(5,"translate"),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"PERMISSIONS.ORG_HOME_FOLDER_LABEL")),e.xp6(2),e.s9C("home",e.lcZ(5,6,"PERMISSIONS.ORG_HOME_FOLDER_MAIN")),e.Q6J("clickable",!0)("createLink",!0))}function rt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",51),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.displayName=n)}),e.qZA()(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",52),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.groupEmail=n)}),e.qZA()(),e.TgZ(11,"mat-form-field",22)(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"mat-select",53),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.groupType=n)}),e.ALo(16,"translate"),e.YNc(17,ot,3,4,"mat-option",24),e.qZA()(),e.YNc(18,st,6,8,"div",55),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,9,"ORG.displayName")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.displayName),e.xp6(3),e.Oqu(e.lcZ(9,11,"ORG.groupEmail")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.groupEmail),e.xp6(3),e.Oqu(e.lcZ(14,13,"ORG.groupType")),e.xp6(2),e.s9C("placeholder",e.lcZ(16,15,"PERMISSIONS.GROUP_TYPE.null")),e.Q6J("ngModel",t.edit.profile.groupType),e.xp6(2),e.Q6J("ngForOf",t.ORG_TYPES),e.xp6(1),e.Q6J("ngIf",null==t.edit.folderPath?null:t.edit.folderPath.length)}}function at(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",69),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.editDetails.authorityName=n)}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"USER.authorityName")),e.xp6(2),e.Q6J("ngModel",t.editDetails.authorityName)}}function lt(o,r){if(1&o&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"USER.PRIMARY_AFFILIATION."+t))}}function _t(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-select",70),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.edit.profile.primaryAffiliation=n)}),e._UZ(1,"mat-option"),e.YNc(2,lt,3,4,"mat-option",24),e.qZA()}if(2&o){const t=e.oxw(3);e.Q6J("ngModel",t.edit.profile.primaryAffiliation),e.xp6(2),e.Q6J("ngForOf",t.PRIMARY_AFFILIATIONS)}}function ct(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",71),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.edit.profile.primaryAffiliation=n)}),e.qZA()}if(2&o){const t=e.oxw(3);e.Q6J("ngModel",t.edit.profile.primaryAffiliation)}}function dt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"es-input-password",72),e.NdJ("valueChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.editDetails.password=n)}),e.ALo(2,"translate"),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.s9C("label",e.lcZ(2,2,"USER.password")),e.Q6J("value",t.editDetails.password)}}function pt(o,r){if(1&o&&e._UZ(0,"es-user-quota",73),2&o){const t=e.oxw(3);e.Q6J("quota",t.edit.quota)}}function ut(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,at,5,4,"mat-form-field",2),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",58),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.firstName=n)}),e.qZA()(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",59),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.lastName=n)}),e.qZA()(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"input",60),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.email=n)}),e.qZA()(),e.TgZ(17,"div",61)(18,"mat-form-field")(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,_t,3,2,"mat-select",62),e.YNc(23,ct,1,1,"input",63),e.qZA(),e.TgZ(24,"button",64),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.primaryAffiliationList=!n.primaryAffiliationList)}),e.TgZ(25,"i",65),e._uU(26),e.qZA()()(),e.YNc(27,dt,3,4,"div",2),e.TgZ(28,"div",66)(29,"mat-form-field")(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"input",67),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.edit.profile.sizeQuota=n)}),e.qZA()(),e.YNc(34,pt,1,1,"es-user-quota",68),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.editId),e.xp6(3),e.Oqu(e.lcZ(5,15,"USER.firstName")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.firstName),e.xp6(3),e.Oqu(e.lcZ(10,17,"USER.lastName")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.lastName),e.xp6(3),e.Oqu(e.lcZ(15,19,"USER.email")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.email),e.xp6(4),e.Oqu(e.lcZ(21,21,"USER.primaryAffiliation")),e.xp6(2),e.Q6J("ngIf",t.primaryAffiliationList),e.xp6(1),e.Q6J("ngIf",!t.primaryAffiliationList),e.xp6(3),e.Oqu(t.primaryAffiliationList?"edit":"list"),e.xp6(1),e.Q6J("ngIf",!t.editId),e.xp6(4),e.Oqu(e.lcZ(32,23,"USER.sizeQuota")),e.xp6(2),e.Q6J("ngModel",t.edit.profile.sizeQuota),e.xp6(1),e.Q6J("ngIf",t.editId&&t.edit.quota.enabled)}}function mt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-card",46),e.NdJ("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelEdit())}),e.ALo(1,"translate"),e.TgZ(2,"div",47)(3,"form"),e.YNc(4,Xe,6,4,"div",48),e.YNc(5,it,19,17,"div",2),e.YNc(6,rt,19,17,"div",2),e.YNc(7,ut,35,25,"div",2),e.qZA()()()}if(2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,7,"PERMISSIONS."+(null==t.editId?"CREATE":"EDIT")+"_"+t._mode)),e.Q6J("subtitle",t.editId?t.edit.authorityName:t.editDetails.authorityName?t.editDetails.authorityName:t.edit.profile.displayName)("buttons",t.editButtons),e.xp6(4),e.Q6J("ngIf",t.editId),e.xp6(1),e.Q6J("ngIf","GROUP"===t._mode),e.xp6(1),e.Q6J("ngIf","ORG"===t._mode),e.xp6(1),e.Q6J("ngIf","USER"===t._mode)}}function gt(o,r){1&o&&e._UZ(0,"es-actionbar",83,84)}const ht=function(o){return{group:o}};function St(o,r){if(1&o&&(e.TgZ(0,"div",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,"PERMISSIONS.CURRENT_MEMBERS",e.VKq(4,ht,t.editMembers.profile?t.editMembers.profile.displayName:t.org.profile.displayName))," ")}}function Et(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-card",74),e.NdJ("onScrolled",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.refreshMemberList())})("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelEditMembers())}),e.ALo(1,"translate"),e.TgZ(2,"div",75)(3,"div",76)(4,"form",77),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.searchMembers())}),e.TgZ(5,"mat-form-field")(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",78),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.manageMemberSearch=n)}),e.qZA()()(),e.YNc(10,gt,2,0,"es-actionbar",79),e.qZA(),e.YNc(11,St,3,6,"div",80),e.TgZ(12,"es-node-entries-wrapper",81,82),e.NdJ("clickItem",function(n){e.CHM(t);const s=e.MAs(13),p=e.oxw();return e.KtG(p.selectOnClick(s,n))})("fetchData",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.refreshMemberList())}),e.qZA()()()}if(2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,12,t.addMembers?"PERMISSIONS.ADD_MEMBER_TO_GROUP":"ALL"===t.editMembers?"PERMISSIONS.EDIT_ORG_MEMBERS":t.editMembers?"PERMISSIONS.EDIT_MEMBERS":"PERMISSIONS.EDIT_MEMBER_GROUPS")),e.Q6J("subtitle",t.addMembers?t.addMembers.profile.displayName:t.editMembers?t.editMembers.profile.displayName:t.editGroups.authorityName)("buttons",t.memberButtons),e.xp6(7),e.Oqu(e.lcZ(8,14,t.addMembers?"PERMISSIONS.SEARCH_USER":t.editGroups?"PERMISSIONS.SEARCH_GROUPS":"PERMISSIONS.SEARCH_MEMBER")),e.xp6(2),e.Q6J("ngModel",t.manageMemberSearch),e.xp6(1),e.Q6J("ngIf",t.editMembers||t.editGroups),e.xp6(1),e.Q6J("ngIf",t.editMembers),e.xp6(1),e.Q6J("scope",t.Scope.UserManagement)("columns",t.editGroups?t.editGroupColumns:t.addMemberColumns)("dataSource",t.memberList)("displayType",t.DisplayType.Table)("elementInteractionType",t.InteractionType.Emitter)}}function Ot(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",86)(1,"div",87)(2,"es-permissions-authorities",88,89),e.NdJ("onSelection",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.addToSelection=n)}),e.qZA()(),e.TgZ(4,"div",90)(5,"button",91),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelAddTo())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",92),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addToSelect())}),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("@fromRight",t.addTo),e.xp6(2),e.Q6J("mode","GROUP")("org",t.org)("embedded",!0),e.xp6(4),e.Oqu(e.lcZ(7,7,"CANCEL")),e.xp6(2),e.Q6J("disabled",!(null!=t.addToSelection&&t.addToSelection.length)),e.xp6(1),e.hij(" ",e.lcZ(10,9,"PERMISSIONS.ADD_TO")," ")}}function ft(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",93)(1,"form",77),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.searchQuery=n.embeddedQuery)}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"input",94),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.embeddedQuery=n)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,2,"PERMISSIONS.SEARCH_"+t._mode)),e.xp6(2),e.Q6J("ngModel",t.embeddedQuery)}}function Tt(o,r){1&o&&(e.TgZ(0,"h5",96),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"PERMISSIONS.NO_ELEMENTS")))}function Mt(o,r){1&o&&(e.TgZ(0,"h5",96),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PERMISSIONS.NO_ELEMENTS_SEARCH")," "))}function It(o,r){if(1&o&&(e.YNc(0,Tt,3,3,"h5",95),e.YNc(1,Mt,3,3,"h5",95)),2&o){const t=e.oxw();e.Q6J("ngIf",!t._searchQuery),e.xp6(1),e.Q6J("ngIf",!!t._searchQuery)}}let Ct=(()=>{class o{set searchQuery(t){this._searchQuery=t,setTimeout(()=>this.search())}set org(t){this._org=t}get org(){return this._org}updateMemberSuggestions(t){this.editMembers==this.org||null==this.org?this.iam.searchUsers(t.input).subscribe(i=>{const n=[];for(const s of i.users){const p=new j.u(s.authorityName,s.profile.firstName+" "+s.profile.lastName,"person","");p.originalObject=s,n.push(p)}this.memberSuggestions=n},i=>console.log(i)):this.iam.getGroupMembers(this.org.authorityName,t.input,"USER").subscribe(i=>{const n=[];for(const s of i.authorities){const p=new j.u(s.authorityName,s.profile.firstName+" "+s.profile.lastName,"person","");p.originalObject=s,n.push(p)}this.memberSuggestions=n},i=>console.log(i))}addMember(t){"ALL"===this.editMembers?this.iam.addGroupMember(this.org.authorityName,t.item.id).subscribe(()=>{this.memberList.reset(),this.searchMembers()},i=>this.handleError(i)):this.iam.addGroupMember(this.editMembers.authorityName,t.item.id).subscribe(()=>{this.memberList.reset(),this.searchMembers()},i=>this.handleError(i))}set mode(t){this._mode=t}getMemberOptions(){const t=[];if(this.editMembers||this.editGroups){const i=new a.BA("PERMISSIONS.MENU_REMOVE_MEMBERSHIP","delete",s=>this.deleteMembership(w.G.getActionbarNodes(this.nodeMemberAdd.getSelection().selected,s)));i.constrains=[a.xk.User],i.group=a.EM.Delete,i.elementType=[a.Hd.Group],t.push(i);const n=new a.BA("PERMISSIONS.MENU_REMOVE_MEMBER","delete",s=>{this.deleteMember(w.G.getActionbarNodes(this.nodeMemberAdd.getSelection().selected,s))});n.constrains=[a.xk.User],n.group=a.EM.Delete,n.elementType=[a.Hd.Person],t.push(n)}return t}getColumns(t,i=!1){const n=[];return"USER"==t?(n.push(new a.HC(t,l.u6.AUTHORITY_NAME)),n.push(new a.HC(t,l.u6.AUTHORITY_FIRSTNAME)),n.push(new a.HC(t,l.u6.AUTHORITY_LASTNAME)),i||(n.push(new a.HC(t,l.u6.AUTHORITY_EMAIL)),n.push(new a.HC(t,l.u6.AUTHORITY_STATUS)))):"GROUP"==t?(n.push(new a.HC(t,l.u6.AUTHORITY_DISPLAYNAME)),i||n.push(new a.HC(t,l.u6.AUTHORITY_GROUPTYPE))):(n.push(new a.HC(t,l.u6.AUTHORITY_DISPLAYNAME)),n.push(new a.HC(t,l.u6.AUTHORITY_GROUPTYPE))),n}constructor(t,i,n,s,p,u,m,f,P,Z,_,d,g){this.breadcrumbsService=t,this.connector=i,this.dialogs=n,this.iam=s,this.node=p,this.nodeHelper=u,this.optionsHelperService=m,this.organization=f,this.ref=P,this.router=Z,this.toast=_,this.translate=d,this.uiService=g,this.DisplayType=a.P8,this.InteractionType=a.s_,this.Scope=a.sX,this.sortConfig={allowed:!0,active:null,direction:"asc",columns:[]},this.GROUP_TYPES=l.u6.VALID_GROUP_TYPES,this.STATUS_TYPES=l.u6.VALID_PERSON_STATUS_TYPES,this.SCOPE_TYPES=l.u6.VALID_SCOPE_TYPES,this.ORG_TYPES=l.u6.VALID_GROUP_TYPES_ORG,this.PRIMARY_AFFILIATIONS=l.u6.USER_PRIMARY_AFFILIATIONS,this.columns=[],this.addMemberColumns=[],this.editGroupColumns=[],this.options={useDefaultOptions:!0,supportedOptions:[],addOptions:[]},this.memberOptions={useDefaultOptions:!1,addOptions:[]},this.isAdmin=!1,this.editStatusNotify=!0,this.groupSignupListShown=!1,this.groupSignupList=new a.AL,this.onDeselectOrg=new e.vpe,this.embedded=!1,this.onSelection=new e.vpe,this.setTab=new e.vpe,this.memberList=new a.AL,this.primaryAffiliationList=!0,this.signupActions={useDefaultOptions:!1},this.dataSource=new a.AL,this.isAdmin=this.connector.getCurrentLogin()?.isAdmin,this.organization.getOrganizations().subscribe(un=>{this.updateOptions(),this.updateButtons()})}ngAfterViewInit(){this.nodeEntries.getSelection().changed.pipe((0,ne.h)(()=>"ORG"!==this._mode)).subscribe(t=>this.onSelection.emit(t.source.selected))}ngOnChanges(t){var i=this;return(0,h.Z)(function*(){i.updateColumns(),yield i.updateOptions()})()}search(){this.refresh()}changeSort(t){("GROUP"==this._mode||"USER"==this._mode)&&(this.sortConfig.active=t.active),this.sortConfig.direction=t.direction,this.dataSource.reset(),this.loadAuthorities()}getList(t){return w.G.getActionbarNodes(this.nodeEntries.getSelection().selected,t)}updateOptions(){var t=this;return(0,h.Z)(function*(){if(t.embedded)t.options.addOptions=[],t.options.supportedOptions=[];else{t.options.supportedOptions=["OPTIONS.DEBUG"];const i=[];if("ORG"===t._mode){const _=new a.BA("PERMISSIONS.MENU_TOOLPERMISSIONS_GLOBAL","playlist_add_check",d=>t.toolpermissionAuthority=l.u6.getAuthorityEveryone());_.elementType=[a.Hd.Unknown],_.group=a.EM.Primary,_.priority=10,_.constrains=[a.xk.Admin,a.xk.NoSelection],i.push(_)}if("GROUP"===t._mode){const _=new a.BA("PERMISSIONS.MENU_CREATE_GROUP","add",d=>t.createGroup());_.elementType=[a.Hd.Unknown],_.group=a.EM.Primary,_.constrains=[a.xk.NoSelection],i.push(_)}if("USER"===t._mode){if(t.org){const d=new a.BA("PERMISSIONS.MENU_ADD_GROUP_MEMBERS","person_add",g=>t.addMembersFunction(t.org));d.elementType=[a.Hd.Unknown],d.group=a.EM.Primary,d.priority=10,d.constrains=[a.xk.NoSelection],i.push(d)}if(t.orgs){const d=new a.BA("PERMISSIONS.MENU_CREATE_USER","add",g=>t.createAuthority());d.elementType=[a.Hd.Unknown],d.group=a.EM.Primary,d.priority=10,d.constrains=[a.xk.Admin,a.xk.NoSelection],i.push(d)}const _=new a.BA("PERMISSIONS.EXPORT_MEMBER","cloud_download",d=>t.downloadMembers());_.onlyDesktop=!0,_.elementType=[a.Hd.Unknown],_.group=a.EM.Primary,_.priority=10,_.constrains=[a.xk.NoSelection],i.push(_)}if("ORG"===t._mode&&t.orgs&&t.orgs.canCreate){const _=new a.BA("PERMISSIONS.ADD_ORG","add",d=>t.createOrg());_.elementType=[a.Hd.Unknown],_.group=a.EM.Primary,_.priority=20,_.constrains=[a.xk.Admin,a.xk.NoSelection],i.push(_)}const n=new a.BA("PERMISSIONS.ORG_SIGNUP_LIST","playlist_add",function(){var _=(0,h.Z)(function*(d){t.toast.showProgressSpinner(),t.groupSignup=t.getList(d)[0],t.groupSignupListShown=!0,t.ref.tick(),t.signupList.getSelection().clear(),t.groupSignupList.setData(yield t.iam.getGroupSignupList(t.groupSignup.authorityName).toPromise()),yield t.signupList.initOptionsGenerator({actionbar:t.actionbarSignup,customOptions:t.signupActions}),t.toast.closeProgressSpinner()});return function(d){return _.apply(this,arguments)}}());n.elementType=[a.Hd.Group],n.group=a.EM.Edit,n.customShowCallback=function(){var _=(0,h.Z)(function*(d){return"list"===d[0].signupMethod});return function(d){return _.apply(this,arguments)}}(),n.priority=20,n.constrains=[a.xk.NoBulk],i.push(n);const s=new a.BA("PERMISSIONS.ORG_SIGNUP","checkbox",_=>{t.groupSignup=t.getList(_)[0],t.groupSignupDetails={signupMethod:t.getList(_)[0].signupMethod??"disabled",signupPassword:""}});s.elementType=[a.Hd.Group],s.group=a.EM.Edit,s.priority=30,s.constrains=[a.xk.NoBulk],i.push(s);const p=new a.BA("PERMISSIONS.MENU_ADD_TO_GROUP","group_add",_=>t.addToGroup(_));p.elementType=[a.Hd.Person],p.group=a.EM.Primary,p.priority=10,p.constrains=[a.xk.User],i.push(p);const u=new a.BA("PERMISSIONS.MENU_EDIT_GROUPS","group",_=>t.openEditGroups(_));if(u.elementType=[a.Hd.Person],u.group=a.EM.Primary,u.priority=20,u.constrains=[a.xk.User,a.xk.NoBulk],i.push(u),"GROUP"===t._mode){const _=new a.BA("PERMISSIONS.MENU_ADD_GROUP_MEMBERS","group_add",g=>t.addMembersFunction(g));_.elementType=[a.Hd.Group],_.group=a.EM.Primary,_.constrains=[a.xk.NoBulk,a.xk.User],i.push(_);const d=new a.BA("PERMISSIONS.MENU_MANAGE_GROUP","group",g=>t.manageMembers(g));d.elementType=[a.Hd.Group],d.group=a.EM.Primary,d.constrains=[a.xk.NoBulk,a.xk.User],i.push(d)}if("GROUP"===t._mode||t.orgs&&t.orgs.canCreate){const _=new a.BA("PERMISSIONS.MENU_EDIT_GROUP","edit",d=>t.editAuthority(d));_.constrains=[a.xk.NoBulk],_.elementType=[a.Hd.Group],_.group=a.EM.Edit,_.priority=10,i.push(_)}if(t.orgs&&t.orgs.canCreate){const _=new a.BA("PERMISSIONS.MENU_EDIT_PERSON","edit",d=>t.editAuthority(d));_.constrains=[a.xk.Admin,a.xk.NoBulk],_.elementType=[a.Hd.Person],_.group=a.EM.Edit,_.priority=10,i.push(_)}const m=new a.BA("PERMISSIONS.MENU_TOOLPERMISSIONS","playlist_add_check",_=>{t.toolpermissionAuthority=t.getList(_)[0]});if(m.constrains=[a.xk.Admin,a.xk.NoBulk],m.elementType=[a.Hd.Group,a.Hd.Person],m.group=a.EM.Reuse,i.push(m),"GROUP"===t._mode){const _=new a.BA("PERMISSIONS.MENU_DELETE","delete",d=>t.deleteAuthority(d,g=>t.startDelete(g)));_.constrains=[a.xk.User],_.elementType=[a.Hd.Group],_.group=a.EM.Delete,i.push(_)}const f=new a.BA("PERMISSIONS.MENU_STATUS","check",_=>t.setPersonStatus(t.getList(_)[0]));if(f.constrains=[a.xk.NoBulk,a.xk.Admin],f.elementType=[a.Hd.Person],f.group=a.EM.Edit,i.push(f),t.org){const _=new a.BA("PERMISSIONS.MENU_EXCLUDE","delete",d=>t.startExclude(t.getList(d)));_.constrains=[a.xk.User],_.elementType=[a.Hd.Person],_.group=a.EM.Delete,i.push(_)}if("ORG"===t._mode&&t.orgs&&t.orgs.canCreate){const _=new a.BA("PERMISSIONS.MENU_DELETE","delete",d=>t.deleteAuthority(d,g=>t.deleteOrg(g)));_.group=a.EM.Delete,_.elementType=[a.Hd.Group],_.constrains=[a.xk.Admin],i.push(_)}t.options.addOptions=i;const P=new a.BA("PERMISSIONS.ORG_SIGNUP_ADD","person_add",_=>{t.toast.showProgressSpinner();const d=w.G.getActionbarNodes(t.signupList.getSelection().selected,_);(0,K.D)(d.map(g=>t.iam.confirmSignup(t.groupSignup.authorityName,g.authorityName))).subscribe(()=>{t.groupSignupListShown=!1,t.toast.toast("PERMISSIONS.ORG_SIGNUP_ADD_CONFIRM"),t.toast.closeProgressSpinner()},g=>{t.toast.error(g),t.toast.closeProgressSpinner()})});P.elementType=[a.Hd.Person],P.group=a.EM.Primary;const Z=new a.BA("PERMISSIONS.ORG_SIGNUP_REJECT","close",_=>{t.toast.showProgressSpinner();const d=w.G.getActionbarNodes(t.signupList.getSelection().selected,_);(0,K.D)(d.map(g=>t.iam.rejectSignup(t.groupSignup.authorityName,g.authorityName))).subscribe(()=>{t.groupSignupListShown=!1,t.toast.toast("PERMISSIONS.ORG_SIGNUP_REJECT_CONFIRM"),t.toast.closeProgressSpinner()},g=>{t.toast.error(g),t.toast.closeProgressSpinner()})});Z.elementType=[a.Hd.Person],Z.group=a.EM.Delete,t.signupActions.addOptions=[P,Z]}yield t.nodeEntries?.initOptionsGenerator({actionbar:t.actionbar,customOptions:t.options})})()}cancelEdit(){this.edit=null}cancelAddTo(){this.addTo=null}cancelEditMembers(){this.editMembers=null,this.addMembers=null,this.editGroups=null}addMembersToGroup(){this.toast.showProgressSpinner(),this.addToSelection=[this.addMembers],this.addToList=this.nodeMemberAdd.getSelection().selected,this.addMembers=null,this.addToSingle(()=>this.refresh())}checkOrgExists(t){this.organization.getOrganizations(t,!1).subscribe(i=>{i.organizations.length?(this.closeDialog(),this.toast.toast("PERMISSIONS.ORG_CREATED"),this.refresh()):setTimeout(()=>this.checkOrgExists(t),2e3)})}saveEdits(){if("GROUP"==this._mode||"ORG"==this._mode){if(null==this.editId){const t=this.edit.profile.displayName,i=this.edit.profile;return void("ORG"==this._mode?(this.toast.showProgressSpinner(),this.organization.createOrganization(t).subscribe(n=>{this.edit=null,this.iam.editGroup(n.authorityName,i).subscribe(()=>{setTimeout(()=>this.checkOrgExists(t),2e3)},s=>{this.toast.error(s),this.toast.closeProgressSpinner()})},n=>{this.toast.error(n),this.toast.closeProgressSpinner()})):(this.toast.showProgressSpinner(),this.iam.createGroup(t,this.edit.profile,this.org?this.org.groupName:"").subscribe(()=>{this.edit=null,this.toast.closeProgressSpinner(),this.toast.toast("PERMISSIONS.GROUP_CREATED"),this.refresh()},n=>{this.toast.error(n),this.toast.closeProgressSpinner()})))}this.iam.editGroup(this.editId,this.edit.profile).subscribe(()=>{this.edit=null,this.toast.toast("PERMISSIONS.GROUP_EDITED"),this.refresh()},t=>this.toast.error(t))}else{const t=U.W.deepCopy(this.edit);if(this.edit.profile?.vcard&&(t.profile.vcard=this.edit.profile.vcard.copy()),t.profile.sizeQuota*=1048576,this.toast.showProgressSpinner(),null==this.editId){const i=this.editDetails.authorityName;this.iam.createUser(i,this.editDetails.password,t.profile).subscribe(()=>{this.edit=null,this.toast.closeProgressSpinner(),this.org?this.iam.addGroupMember(this.org.authorityName,i).subscribe(()=>{this.toast.toast("PERMISSIONS.USER_CREATED"),this.refresh()},s=>this.toast.error(s)):(this.toast.toast("PERMISSIONS.USER_CREATED"),this.refresh())},s=>{this.toast.error(s),this.toast.closeProgressSpinner()})}else this.iam.editUser(this.editId,t.profile).subscribe(()=>{this.edit=null,this.toast.toast("PERMISSIONS.USER_EDITED"),this.refresh(),this.toast.closeProgressSpinner()},i=>{this.toast.error(i),this.toast.closeProgressSpinner()})}}loadAuthorities(t=null){var i=this;this.dataSource.isLoading=!0;let n=l.u6.AUTHORITY_NAME;"ORG"==this._mode&&(n=l.u6.CM_PROP_AUTHORITY_DISPLAYNAME),"GROUP"!=this._mode||this.org?"USER"==this._mode&&!this.org&&(n=this.sortConfig.active,n===l.u6.AUTHORITY_STATUS&&(n=l.u6.CM_ESPERSONSTATUS)):(n=this.sortConfig.active,n==l.u6.AUTHORITY_DISPLAYNAME&&(n=l.u6.CM_PROP_AUTHORITY_DISPLAYNAME),n==l.u6.AUTHORITY_GROUPTYPE&&(n=l.u6.CCM_PROP_AUTHORITY_GROUPTYPE));const s={sortBy:[n],sortAscending:"asc"===this.sortConfig.direction,offset:this.dataSource.getData().length},p=this._searchQuery?this._searchQuery:"";this.organization.getOrganizations(p,!1).subscribe(u=>{this.orgs=u,this.updateOptions()}),"ORG"===this._mode?this.organization.getOrganizations(p,!this.isAdmin,s).subscribe(function(){var u=(0,h.Z)(function*(m){yield i.dataSource.appendData(m.organizations.filter(f=>f.administrationAccess)),i.dataSource.isLoading=!1,i.updateOptions()});return function(m){return u.apply(this,arguments)}}()):this.org?this.iam.getGroupMembers(this.org.authorityName,p,this._mode,s).subscribe(function(){var u=(0,h.Z)(function*(m){i.dataSource.setPagination(m.pagination),yield i.dataSource.appendData(m.authorities),i.dataSource.isLoading=!1});return function(m){return u.apply(this,arguments)}}()):"GROUP"==this._mode?this.iam.searchGroups(p,!0,"","",s).subscribe(function(){var u=(0,h.Z)(function*(m){i.dataSource.setPagination(m.pagination),yield i.dataSource.appendData(m.groups),i.dataSource.isLoading=!1});return function(m){return u.apply(this,arguments)}}()):"USER"==this._mode&&this.iam.searchUsers(p,!0,"",s).subscribe(function(){var u=(0,h.Z)(function*(m){i.dataSource.setPagination(m.pagination),yield i.dataSource.appendData(m.users),i.dataSource.isLoading=!1});return function(m){return u.apply(this,arguments)}}())}editAuthority(t){const i=this.getList(t);"ORG"==this._mode?this.node.getNodeParents(i[0].sharedFolder.id,!0).subscribe(n=>{this.edit=U.W.deepCopy(i[0]),n.nodes=n.nodes.reverse().slice(1),this.edit.folderPath=n.nodes,this.breadcrumbsService.setNodePath(n.nodes),this.editId=this.edit.authorityName},n=>this.toast.error(n)):"USER"==this._mode?this.iam.getUser(i[0].authorityName).subscribe(n=>{this.edit=n.person,this.edit.profile.sizeQuota=n.person.quota.sizeQuota/1024/1024,this.editId=this.edit.authorityName,this.primaryAffiliationList=!this.edit.profile.primaryAffiliation||-1!=this.PRIMARY_AFFILIATIONS.indexOf(this.edit.profile.primaryAffiliation)}):(this.edit=U.W.deepCopy(i[0]),this.editId=this.edit.authorityName),this.updateButtons()}addToGroup(t){const i=this.getList(t);this.addTo=i,this.addToSelection=null,this.uiService.waitForComponent(this,"addToComponent").subscribe(()=>this.addToComponent.loadAuthorities())}openEditGroups(t){const i=this.getList(t);this.editGroups=i[0],this.initMembersList(),this.manageMemberSearch="",this.memberList.reset(),this.searchMembers()}addToSelect(){this.addToList=this.nodeEntries.getSelection().selected,this.addToSingle()}addToSingle(t=null,i=0,n=0,s=0){if(i!=this.addToList.length)this.toast.showProgressSpinner(),this.iam.addGroupMember(this.addToSelection[n].authorityName,this.addToList[i].authorityName).subscribe(()=>{this.addToSingle(t,i+1,n,s)},p=>{p.status==l.u6.DUPLICATE_NODE_RESPONSE?s++:this.toast.error(p),this.addToSingle(t,i+1,n,s)});else if(n<this.addToSelection.length-1)this.addToSingle(t,0,n+1,s);else{if(0==n)s?this.showToast("PERMISSIONS.USER_ADDED_FAILED",{count:i-s,error:s,group:this.addToSelection[0].profile.displayName}):this.showToast("PERMISSIONS.USER_ADDED_TO_GROUP",{count:i,group:this.addToSelection[0].profile.displayName});else{const p=this.addToList.length*this.addToSelection.length;s?this.showToast("PERMISSIONS.USER_ADDED_FAILED_MULTI",{count:p-s,error:s}):this.showToast("PERMISSIONS.USER_ADDED_TO_GROUP_MULTI",{count:p})}this.addTo=null,this.toast.closeProgressSpinner(),t&&t()}}deleteAuthority(t,i){var n=this;return(0,h.Z)(function*(){const s=n.getList(t);"GROUP"==n._mode&&s.filter(u=>u.groupType==l.u6.GROUP_TYPE_ADMINISTRATORS).length?n.toast.error(null,"PERMISSIONS.DELETE_ERROR_ADMINISTRATORS"):(yield n.dialogs.openGenericDialog({title:"PERMISSIONS.DELETE_TITLE",message:"PERMISSIONS.DELETE_"+n._mode+(1===s.length?"_SINGLE":""),messageParameters:{name:"USER"==n._mode?s[0].authorityName:s[0].profile.displayName},buttons:oe.OU})).afterClosed().subscribe(u=>{"YES_DELETE"===u&&i(s)})})()}refresh(){this.dataSource.reset(),this.nodeEntries.getSelection().clear(),this.optionsHelperService.refreshComponents(),this.loadAuthorities()}closeDialog(){this.toast.closeProgressSpinner()}startDelete(t,i=0,n=!1){if(this.closeDialog(),i==t.length)return this.toast.closeProgressSpinner(),this.refresh(),void(n||this.toast.toast("PERMISSIONS.DELETED_"+this._mode));this.toast.showProgressSpinner(),"USER"==this._mode?console.error("delete for user does not exists"):this.iam.deleteGroup(t[i].authorityName).subscribe(()=>this.startDelete(t,i+1,n),s=>{this.toast.error(s),this.startDelete(t,i+1,!0)})}startExclude(t,i=0){if(this.closeDialog(),i==t.length)return this.toast.closeProgressSpinner(),this.refresh(),void this.toast.toast("PERMISSIONS.DELETED_"+this._mode);this.toast.showProgressSpinner(),this.organization.removeMember(this.org.groupName,t[i].authorityName).subscribe(()=>this.startExclude(t,i+1),n=>this.toast.error(n))}createAuthority(){this.edit={profile:{}},this.editDetails={},this.editId=null,this.updateButtons()}createGroup(){this.createAuthority(),this.edit.profile.groupType=null,this.edit.profile.scopeType=null}createOrg(){this.createGroup()}addMembersFunction(t){if("ALL"===t)this.addMembers=this.org;else{const i=this.getList(t);this.addMembers=i[0]}this.initMembersList(),this.manageMemberSearch="",this.searchMembers()}manageMembers(t){if("ALL"===t)this.editMembers=this.org;else{const i=this.getList(t);this.editMembers=i[0]}this.initMembersList(),this.manageMemberSearch="",this.searchMembers()}deleteMember(t,i=0){if(t.length===i)return this.toast.toast("PERMISSIONS.MEMBER_REMOVED"),this.memberOptions.addOptions=this.getMemberOptions(),this.memberList.reset(),this.searchMembers(),void this.toast.closeProgressSpinner();this.toast.showProgressSpinner(),this.iam.deleteGroupMember("ALL"===this.editMembers?this.org.authorityName:this.editMembers.authorityName,t[i].authorityName).subscribe(()=>{this.deleteMember(t,i+1)},n=>this.toast.error(n))}deleteMembership(t,i=0){if(t.length===i)return this.toast.toast("PERMISSIONS.MEMBERSHIP_REMOVED"),this.memberOptions.addOptions=this.getMemberOptions(),this.memberList.reset(),this.searchMembers(),void this.toast.closeProgressSpinner();this.toast.showProgressSpinner(),this.iam.deleteGroupMember(t[i].authorityName,this.editGroups.authorityName).subscribe(()=>{this.deleteMembership(t,i+1)},n=>this.toast.error(n))}searchMembers(){this.memberOptions.addOptions=this.getMemberOptions(),this.memberList.reset(),this.nodeMemberAdd.getSelection().clear(),this.refreshMemberList()}refreshMemberList(){var t=this;if(this.memberList.isLoading=!0,this.addMembers)if(this.org&&this.addMembers.authorityName!=this.org.authorityName){const i={sortBy:["authorityName"],offset:this.memberList.getData().length};this.iam.getGroupMembers(this.org.authorityName,this.manageMemberSearch,l.u6.AUTHORITY_TYPE_USER,i).subscribe(function(){var n=(0,h.Z)(function*(s){t.memberList.setPagination(s.pagination),yield t.memberList.appendData(s.authorities),t.memberList.isLoading=!1});return function(s){return n.apply(this,arguments)}}())}else{const i={sortBy:["firstName"],offset:this.memberList.getData().length};this.iam.searchUsers(this.manageMemberSearch,!0,"",i).subscribe(function(){var n=(0,h.Z)(function*(s){t.memberList.setPagination(s.pagination),yield t.memberList.appendData(s.users),t.memberList.isLoading=!1});return function(s){return n.apply(this,arguments)}}())}else if(this.editGroups){const i={sortBy:["authorityName"],offset:this.memberList.getData().length};this.iam.getUserGroups(this.editGroups.authorityName,this.manageMemberSearch,i).subscribe(function(){var n=(0,h.Z)(function*(s){t.memberList.setPagination(s.pagination),yield t.memberList.appendData(s.groups),t.memberList.isLoading=!1});return function(s){return n.apply(this,arguments)}}())}else{const i={sortBy:["authorityName"],offset:this.memberList.getData().length};this.iam.getGroupMembers(this.editMembers.authorityName,this.manageMemberSearch,l.u6.AUTHORITY_TYPE_USER,i).subscribe(function(){var n=(0,h.Z)(function*(s){t.memberList.setPagination(s.pagination),yield t.memberList.appendData(s.authorities),t.memberList.isLoading=!1});return function(s){return n.apply(this,arguments)}}())}this.updateButtons()}handleError(t){t.status==l.u6.DUPLICATE_NODE_RESPONSE?this.toast.error(null,"PERMISSIONS.USER_EXISTS_IN_GROUP"):this.toast.error(t)}handleKeyboardEvent(t){if("Escape"==t.key){if(this.addTo)return void(this.addTo=null);if(this.edit)return void(this.edit=null);if(this.editMembers)return void this.cancelEditMembers()}}deleteOrg(t){this.toast.showProgressSpinner(),this.organization.deleteOrganization(t[0].authorityName).subscribe(()=>{this.toast.toast("PERMISSIONS.ORG_REMOVED"),this.toast.closeProgressSpinner(),this.closeDialog(),this.refresh()},n=>{this.toast.error(n),this.toast.closeProgressSpinner(),this.refresh()})}deselectOrg(){this.onDeselectOrg.emit(),setTimeout(()=>this.refresh())}setOrgTab(){this.setTab.emit(0)}downloadMembers(){const t=this.columns.map(n=>this.translate.instant(this._mode+"."+n.name)),i=[];for(const n of this.dataSource.getData())i.push([n.authorityName,n.profile.firstName,n.profile.lastName,n.profile.email,n.status.status]);ie.I.download(this.translate.instant("PERMISSIONS.DOWNLOAD_MEMBER_FILENAME"),t,i)}openFolder(t){A.d.goToWorkspaceFolder(this.node,this.router,this.connector.getCurrentLogin(),t.id)}updateButtons(){this.editButtons=[new l.Qd("CANCEL",{color:"standard"},()=>this.cancelEdit()),new l.Qd("SAVE",{color:"primary"},()=>this.saveEdits())];const t=new l.Qd("ADD",{color:"primary"},()=>this.addMembersToGroup());t.disabled=this.nodeMemberAdd?.getSelection()?.isEmpty(),this.memberButtons=[new l.Qd("CLOSE",{color:"standard"},()=>this.cancelEditMembers())],this.addMembers&&this.memberButtons.push(t),this.editStatusButtons=[new l.Qd("CANCEL",{color:"standard"},()=>{this.editStatus=null}),new l.Qd("SAVE",{color:"primary"},()=>this.savePersonStatus())],this.signupButtons=l.Qd.getSaveCancel(()=>this.groupSignupDetails=null,()=>this.saveGroupSignup()),this.signupListButtons=[new l.Qd("CLOSE",{color:"standard"},()=>this.groupSignupListShown=null)]}setPersonStatus(t){this.editStatus=t,this.updateButtons()}savePersonStatus(){this.toast.showProgressSpinner(),this.iam.updateUserStatus(this.editStatus.authorityName,this.editStatus.status.status,this.editStatusNotify).subscribe(()=>{this.toast.closeProgressSpinner(),this.editStatus=null},t=>{this.toast.closeProgressSpinner(),this.toast.error(t)})}saveGroupSignup(){this.toast.showProgressSpinner(),"disabled"===this.groupSignupDetails.signupMethod&&(this.groupSignupDetails.signupMethod=null),this.iam.editGroupSignup(this.groupSignup.authorityName,this.groupSignupDetails).subscribe(()=>{this.groupSignupDetails=null,this.refresh(),this.toast.toast("PERMISSIONS.ORG_SIGNUP_SAVED"),this.toast.closeProgressSpinner()},t=>{this.toast.error(t),this.toast.closeProgressSpinner()})}getLink(t,i){return this.nodeHelper.getNodeLink(t,i)}onClick(t){if("ORG"===this._mode){if(!this.nodeEntries.getSelection().isEmpty()&&t.element===this._org)return this._org=null,this.onSelection.emit(null),void this.nodeEntries.getSelection().clear();this._org=t.element}console.log(t,this._mode),this.nodeEntries.getSelection().clear(),this.nodeEntries.getSelection().select(t.element),this.onSelection.emit(this.nodeEntries.getSelection().selected)}updateColumns(){this.sortConfig.columns="USER"==this._mode?[new a.Sw("USER","authorityName"),new a.Sw("USER","firstName"),new a.Sw("USER","lastName"),new a.Sw("USER","email"),new a.Sw("USER","status")]:[new a.Sw("GROUP","displayName"),new a.Sw("GROUP","groupType")],this.sortConfig.active=this.sortConfig.columns[0].name,this.columns=this.getColumns(this._mode,this.embedded),this.addMemberColumns=this.getColumns("USER",!0),this.editGroupColumns=this.getColumns("GROUP",!0)}selectOnClick(t,i){t.getSelection().clear(),t.getSelection().select(i.element)}initMembersList(){var t=this;return(0,h.Z)(function*(){t.ref.tick(),yield t.nodeMemberAdd?.initOptionsGenerator({actionbar:t.actionbarMember,customOptions:t.memberOptions}),t.nodeMemberAdd.getSelection().changed.subscribe(()=>t.updateButtons())})()}showToast(t,i){this.toast.toast(t,i,null,null,null,{message:t,type:"info",subtype:T.p.InfoData,html:!0})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(W.d),e.Y36(l.xD),e.Y36(V.H),e.Y36(l.Du),e.Y36(l.xE),e.Y36(w.G),e.Y36(a.tC),e.Y36(l.K$),e.Y36(e.z2F),e.Y36(N.F0),e.Y36(T.F),e.Y36(b.sK),e.Y36(l.VL))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["es-permissions-authorities"]],viewQuery:function(i,n){if(1&i&&(e.Gf(be,5),e.Gf(Le,5),e.Gf(ve,5),e.Gf(Ze,5),e.Gf(ye,5),e.Gf(De,5),e.Gf(Ue,5)),2&i){let s;e.iGM(s=e.CRH())&&(n.actionbar=s.first),e.iGM(s=e.CRH())&&(n.actionbarMember=s.first),e.iGM(s=e.CRH())&&(n.actionbarSignup=s.first),e.iGM(s=e.CRH())&&(n.nodeEntries=s.first),e.iGM(s=e.CRH())&&(n.nodeMemberAdd=s.first),e.iGM(s=e.CRH())&&(n.signupList=s.first),e.iGM(s=e.CRH())&&(n.addToComponent=s.first)}},hostBindings:function(i,n){1&i&&e.NdJ("keydown",function(p){return n.handleKeyboardEvent(p)},!1,e.evT)},inputs:{searchQuery:"searchQuery",org:"org",embedded:"embedded",mode:"mode"},outputs:{onDeselectOrg:"onDeselectOrg",onSelection:"onSelection",setTab:"setTab"},features:[e._Bn([W.d,a.tC]),e.TTD],decls:17,vars:20,consts:[[1,"topFrame"],[1,"info"],[4,"ngIf"],["actionbar",""],[3,"authority","onClose",4,"ngIf"],["height","auto",3,"title","subtitle","isCancelable","buttons","onCancel",4,"ngIf"],["height","auto",3,"title","node","isCancelable","buttons","onCancel",4,"ngIf"],["height","large",3,"title","node","isCancelable","buttons","onCancel",4,"ngIf"],["height","xlarge",3,"title","subtitle","buttons","onCancel",4,"ngIf"],["icon","person_add","width","xlarge","height","xlarge",3,"title","subtitle","buttons","onScrolled","onCancel",4,"ngIf"],["class","addTo",4,"ngIf"],["class","searchEmbedded",4,"ngIf"],["infinite-scroll","",1,"list",3,"scope","scrollWindow","displayType","elementInteractionType","columns","configureColumns","dataSource","checkbox","sort","scrolled","fetchData","clickItem","sortChange"],["mainList",""],["empty",""],[1,"clickable",3,"click"],[3,"authority","onClose"],["height","auto",3,"title","subtitle","isCancelable","buttons","onCancel"],[1,"card-content-padding","card-status"],["floatLabel","always",4,"ngIf"],[3,"ngModel","ngModelChange"],["class","status-change",4,"ngIf"],["floatLabel","always"],["name","status",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"status-change"],["height","auto",3,"title","node","isCancelable","buttons","onCancel"],[1,"card-content-padding","org-signup"],["mode","warning","class","warning-email",4,"ngIf"],["value","disabled"],["value","simple"],["value","password"],["value","list"],["mode","info"],[3,"value","label","hint","valueChange",4,"ngIf"],["mode","warning",1,"warning-email"],[3,"value","label","hint","valueChange"],["height","large",3,"title","node","isCancelable","buttons","onCancel"],[1,"card-content-padding","org-signup-list"],[1,"actionbar"],[3,"numberOfAlwaysVisibleOptions","numberOfAlwaysVisibleOptionsMobile"],["actionbarSignup",""],[3,"scope","displayType","elementInteractionType","columns","dataSource","clickItem"],["signupList",""],[1,"mat-heading-5"],["height","xlarge",3,"title","subtitle","buttons","onCancel"],[1,"card-content-padding","card-edit"],["class","editSystemName",4,"ngIf"],[1,"editSystemName"],[1,"infoText"],["matInput","","name","displayName","required","","autofocus","",3,"ngModel","ngModelChange"],["matInput","","name","groupEmail",3,"ngModel","ngModelChange"],["name","orgType",3,"ngModel","placeholder","ngModelChange"],["name","scopeType",3,"ngModel","placeholder","ngModelChange"],["class","folder-path",4,"ngIf"],[1,"folder-path"],[3,"home","clickable","createLink"],["matInput","","name","firstName","required","",3,"ngModel","ngModelChange"],["matInput","","name","lastName","required","",3,"ngModel","ngModelChange"],["matInput","","name","email","required","",3,"ngModel","ngModelChange"],[1,"group"],["name","primaryAffiliation",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","name","primaryAffiliation",3,"ngModel","ngModelChange",4,"ngIf"],["mat-flat-button","",3,"click"],[1,"material-icons"],[1,"quota"],["matInput","","name","sizeQuota","required","",3,"ngModel","ngModelChange"],[3,"quota",4,"ngIf"],["matInput","","name","authorityName","required","","autofocus","",3,"ngModel","ngModelChange"],["name","primaryAffiliation",3,"ngModel","ngModelChange"],["matInput","","type","text","name","primaryAffiliation",3,"ngModel","ngModelChange"],[3,"label","value","valueChange"],[3,"quota"],["icon","person_add","width","xlarge","height","xlarge",3,"title","subtitle","buttons","onScrolled","onCancel"],[1,"card-content-padding"],[1,"memberActions"],[3,"ngSubmit"],["matInput","","type","search","name","manageMemberSearch",3,"ngModel","ngModelChange"],["class","memberItem memberActionBar",4,"ngIf"],["class","currentMembers",4,"ngIf"],[3,"scope","columns","dataSource","displayType","elementInteractionType","clickItem","fetchData"],["memberAdd",""],[1,"memberItem","memberActionBar"],["actionbarMember",""],[1,"currentMembers"],[1,"addTo"],[1,"addToList"],[3,"mode","org","embedded","onSelection"],["addToComponent",""],[1,"btns"],["mat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"searchEmbedded"],["matInput","","type","search","name","embeddedSearch",3,"ngModel","ngModelChange"],["class","noElements",4,"ngIf"],[1,"noElements"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,qe,3,2,"div",2),e.qZA(),e._UZ(3,"es-actionbar",null,3),e.qZA(),e.YNc(5,He,1,1,"es-toolpermission-manager",4),e.YNc(6,Ke,9,14,"es-card",5),e.YNc(7,Ve,25,27,"es-card",6),e.YNc(8,$e,10,13,"es-card",7),e.YNc(9,mt,8,9,"es-card",8),e.YNc(10,Et,14,16,"es-card",9),e.YNc(11,Ot,11,11,"div",10),e.YNc(12,ft,7,4,"div",11),e.TgZ(13,"es-node-entries-wrapper",12,13),e.NdJ("scrolled",function(){return n.loadAuthorities()})("fetchData",function(p){return n.loadAuthorities(p)})("clickItem",function(p){return n.onClick(p)})("sortChange",function(p){return n.changeSort(p)}),e.YNc(15,It,2,2,"ng-template",null,14,e.W1O),e.qZA()),2&i&&(e.xp6(2),e.Q6J("ngIf","ORG"!==n._mode&&!n.embedded),e.xp6(3),e.Q6J("ngIf",n.toolpermissionAuthority),e.xp6(1),e.Q6J("ngIf",n.editStatus),e.xp6(1),e.Q6J("ngIf",n.groupSignupDetails),e.xp6(1),e.Q6J("ngIf",n.groupSignupListShown),e.xp6(1),e.Q6J("ngIf",n.edit),e.xp6(1),e.Q6J("ngIf",n.editGroups||n.editMembers||n.addMembers),e.xp6(1),e.Q6J("ngIf",n.addTo),e.xp6(1),e.Q6J("ngIf",n.embedded),e.xp6(1),e.ekj("listEmbedded",n.embedded),e.Q6J("scope",n.Scope.UserManagement)("scrollWindow",!1)("displayType",n.DisplayType.Table)("elementInteractionType",n.InteractionType.Emitter)("columns",n.columns)("configureColumns",!n.embedded)("dataSource",n.dataSource)("checkbox","ORG"!==n._mode)("sort",n.sortConfig))},dependencies:[se.n,q.A,M.sg,M.O5,a.nv,a.ar,a.Ry,a.cE,E._Y,E.Fj,E.JJ,E.JL,E.Q7,E.On,E.F,H.u,re.P,z.ey,J.lW,Q.oG,L.KE,L.hX,Y.Nt,$.gD,ae.h,o,S,v.F,b.X$,a.ik],styles:['.topFrame[_ngcontent-%COMP%]{position:fixed;z-index:1;width:100%;padding:15px 10px;display:flex;align-items:center}.topFrame[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex-grow:1;color:var(--palette-foreground-text);font-weight:700;margin:0 20px}.topFrame[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-transform:uppercase}.topFrame[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto;grid-gap:5px}.topFrame[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-height:1.25em;max-height:1.25em;-webkit-line-clamp:1;-webkit-box-orient:vertical}.topFrame[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:not(:first-child):before{color:#383838;content:" | ";cursor:default}.topFrame[_ngcontent-%COMP%]   es-actionbar[_ngcontent-%COMP%]{min-width:170px;display:flex;justify-content:flex-end}.org-signup[_ngcontent-%COMP%]   .warning-email[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.org-signup[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .org-signup[_ngcontent-%COMP%]   es-input-password[_ngcontent-%COMP%]{width:100%}.org-signup[_ngcontent-%COMP%]   es-input-password[_ngcontent-%COMP%]{display:flex;margin-top:20px}.org-signup-list[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;color:#0000008a}.org-signup-list[_ngcontent-%COMP%]   .actionbar[_ngcontent-%COMP%]{display:flex;width:100%;height:45px;justify-content:flex-end}  .org-signup es-input-password mat-form-field{width:100%}.memberActions[_ngcontent-%COMP%]{height:50px;display:table;margin-bottom:10px}.memberActions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px;width:100%}.memberActionBar[_ngcontent-%COMP%]{position:absolute;top:25px;right:40px}.memberItem[_ngcontent-%COMP%]{display:table-cell}.memberInput[_ngcontent-%COMP%]{width:280px}[_nghost-%COMP%]     .card-status mat-checkbox{display:flex;margin-bottom:20px}[_nghost-%COMP%]     .card-edit mat-form-field{width:100%}[_nghost-%COMP%]     .card-edit .folder-path{display:flex;flex-direction:column}[_nghost-%COMP%]     .card-edit .folder-path   .breadcrumb{flex-wrap:wrap}[_nghost-%COMP%]     .card-edit .group{display:flex;align-items:center;margin-bottom:20px}[_nghost-%COMP%]     .card-edit .group .mat-form-field-wrapper{padding-bottom:0}.editSystemName[_ngcontent-%COMP%]{margin-bottom:10px}.noElements[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:10px;color:#0000008a;font-size:110%}.infoText[_ngcontent-%COMP%]{padding:5px 15px}#orgType[_ngcontent-%COMP%]{margin-bottom:1.5em}.folderLocation[_ngcontent-%COMP%]{color:var(--primary)}.list[_ngcontent-%COMP%]{overflow-y:auto;position:fixed;top:calc(var(--mainnavHeight) + 105px);width:100%;height:calc(100% - (var(--mainnavHeight) + 105px))}.searchEmbedded[_ngcontent-%COMP%]{padding:10px}.searchEmbedded[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.listEmbedded[_ngcontent-%COMP%]{top:270px;height:calc(100% - 330px);width:400px}.formEmbedded[_ngcontent-%COMP%]{width:400px}label.search[_ngcontent-%COMP%]{position:relative;top:8px;left:82px}.currentMembers[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:10px}.addTo[_ngcontent-%COMP%]{position:fixed;right:0;width:400px;top:calc(115px + var(--mainnavHeight));height:calc(100% - 115px - var(--mainnavHeight));z-index:2;padding-bottom:20px;background-color:#fff;box-shadow:0 0 5px #0000004d}.addTo[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:space-between}.addToList[_ngcontent-%COMP%]{height:calc(100% - 37px);overflow-y:auto}#groupType[_ngcontent-%COMP%]{margin-bottom:20px}'],data:{animation:[(0,x.X$)("fromRight",a.Le.fromRight()),(0,x.X$)("fade",a.Le.fade()),(0,x.X$)("cardAnimation",a.Le.cardAnimation())]}})}return o})();var X=c(68504),At=c(45125),k=c(22557),ee=c(87466);function Pt(o,r){if(1&o&&(e.TgZ(0,"es-card",9),e.ALo(1,"translate"),e.TgZ(2,"div",10),e._UZ(3,"textarea",11),e.TgZ(4,"mat-hint"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()),2&o){const t=e.oxw();e.s9C("title",e.lcZ(1,5,"PERMISSIONS.DELETE.RESULTS")),e.Q6J("isCancelable",!1)("buttons",t.deleteButtons),e.xp6(3),e.Q6J("ngModel",t.deleteResult),e.xp6(2),e.Oqu(e.lcZ(6,7,"PERMISSIONS.DELETE.RESULTS_HINT"))}}function Nt(o,r){1&o&&e._UZ(0,"es-spinner")}function xt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"h3",12)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.refresh())}),e._UZ(5,"i",14),e.qZA()()}2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"PERMISSIONS.DELETE.USER_LIST")))}function Rt(o,r){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"es-node-entries-wrapper",16),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("displayType",t.DisplayType.Table)("columns",t.columns)("dataSource",t.usersDataSource)("checkbox",!0)("elementInteractionType",t.InteractionType.Emitter)}}function bt(o,r){1&o&&(e._UZ(0,"es-info-message",17),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.NO_USERS"))}function Lt(o,r){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.description)}}function vt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"h3",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field")(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.job=n)}),e.TgZ(9,"mat-option",21),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,Lt,2,2,"mat-option",22),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,6,"PERMISSIONS.DELETE.JOBS.CAPTION")," "),e.xp6(4),e.Oqu(e.lcZ(7,8,"PERMISSIONS.DELETE.JOBS.TITLE")),e.xp6(2),e.Q6J("ngModel",t.job),e.xp6(1),e.Q6J("value","NONE"),e.xp6(1),e.Oqu(e.lcZ(11,10,"PERMISSIONS.DELETE.JOBS.DEFAULT")),e.xp6(2),e.Q6J("ngForOf",t.jobs)}}function Zt(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function yt(o,r){1&o&&(e._UZ(0,"es-info-message",34),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.HOME_FOLDER_NONE"))}function Dt(o,r){1&o&&(e._UZ(0,"es-info-message",34),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.HOME_FOLDER_DELETE"))}function Ut(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function wt(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function Gt(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function Jt(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function Ft(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function qt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",35)(1,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.options.sharedFolders.move=n)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.options.sharedFolders.move),e.xp6(1),e.Oqu(e.lcZ(3,2,"PERMISSIONS.DELETE.MOVE_SHARED_FILES"))}}function Ht(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function Qt(o,r){if(1&o&&(e.TgZ(0,"mat-radio-button",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"PERMISSIONS.DELETE.DELETE_MODE."+t))}}function Yt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-option",40),e.NdJ("removed",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.receiver=null)}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"authorityName"),e.qZA(),e._UZ(4,"i",41),e.qZA()}if(2&o){const t=e.oxw(4);e.xp6(2),e.Oqu(e.lcZ(3,1,t.receiver))}}function kt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-option",40),e.NdJ("removed",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.receiverGroup=null)}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"authorityName"),e.qZA(),e._UZ(4,"i",41),e.qZA()}if(2&o){const t=e.oxw(4);e.xp6(2),e.Oqu(e.lcZ(3,1,t.receiverGroup))}}function Bt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"h4",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"es-authority-search-input",37),e.NdJ("onChooseAuthority",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.receiver=n)}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-chip-listbox"),e.YNc(7,Yt,5,3,"mat-chip-option",38),e.qZA(),e.TgZ(8,"h4",24),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"es-authority-search-input",39),e.NdJ("onChooseAuthority",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.receiverGroup=n)}),e.ALo(12,"translate"),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-chip-listbox"),e.YNc(15,kt,5,3,"mat-chip-option",38),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,12,"PERMISSIONS.DELETE.RECEIVER_CAPTION")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,14,"PERMISSIONS.DELETE.RECEIVER")),e.Q6J("globalSearchAllowed",!0)("showRecent",!1),e.xp6(3),e.Q6J("ngIf",t.receiver),e.xp6(2),e.hij(" ",e.lcZ(10,16,"PERMISSIONS.DELETE.RECEIVER_GROUP_CAPTION")," "),e.xp6(2),e.s9C("hint",e.lcZ(12,18,"PERMISSIONS.DELETE.RECEIVER_GROUP_HINT")),e.s9C("placeholder",e.lcZ(13,20,"PERMISSIONS.DELETE.RECEIVER_GROUP")),e.Q6J("mode",t.AuthoritySearchMode.Organizations)("globalSearchAllowed",!0)("showRecent",!1),e.xp6(4),e.Q6J("ngIf",t.receiverGroup)}}function Kt(o,r){1&o&&(e._UZ(0,"es-info-message",34),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.NO_RECEIVER"))}function jt(o,r){1&o&&(e._UZ(0,"es-info-message",34),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.DELETE_COLLECTIONS"))}function Wt(o,r){1&o&&(e._UZ(0,"es-info-message",34),e.ALo(1,"translate")),2&o&&e.s9C("message",e.lcZ(1,1,"PERMISSIONS.DELETE.STATE.NON_CONFORM"))}function Vt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",42)(1,"h3",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.options.cleanupMetadata=n)}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-hint"),e._uU(8),e.ALo(9,"translate"),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,4,"PERMISSIONS.DELETE.METADATA.CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.cleanupMetadata),e.xp6(1),e.Oqu(e.lcZ(6,6,"PERMISSIONS.DELETE.METADATA.DELETE")),e.xp6(3),e.Oqu(e.lcZ(9,8,"PERMISSIONS.DELETE.METADATA.HINT"))}}function zt(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"h3",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",23)(6,"div")(7,"h4",24),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.homeFolder.folders=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateForm())}),e.YNc(11,Zt,3,4,"mat-radio-button",22),e.qZA(),e.YNc(12,yt,2,3,"es-info-message",25),e.YNc(13,Dt,2,3,"es-info-message",25),e.qZA(),e.TgZ(14,"div")(15,"h4",24),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.homeFolder.privateFiles=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateForm())}),e.YNc(19,Ut,3,4,"mat-radio-button",22),e.qZA()(),e.TgZ(20,"div")(21,"h4",24),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.homeFolder.ccFiles=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateForm())}),e.YNc(25,wt,3,4,"mat-radio-button",22),e.qZA()()(),e.TgZ(26,"div",26)(27,"h4",24),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-radio-group",27),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.homeFolder.keepFolderStructure=n)}),e.TgZ(31,"mat-radio-button",21),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-radio-button",21),e._uU(35),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",3)(38,"h3",12),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",23)(42,"div")(43,"h4",24),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.sharedFolders.folders=n)}),e.YNc(47,Gt,3,4,"mat-radio-button",22),e.qZA()(),e.TgZ(48,"div")(49,"h4",24),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.sharedFolders.privateFiles=n)}),e.YNc(53,Jt,3,4,"mat-radio-button",22),e.qZA()(),e.TgZ(54,"div")(55,"h4",24),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.sharedFolders.ccFiles=n)}),e.YNc(59,Ft,3,4,"mat-radio-button",22),e.qZA()()(),e.YNc(60,qt,4,4,"div",28),e.qZA(),e.TgZ(61,"div",3)(62,"h3",12),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"div",23)(66,"div")(67,"h4",24),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.collections.privateCollections=n)}),e.YNc(71,Ht,3,4,"mat-radio-button",22),e.qZA()(),e.TgZ(72,"div")(73,"h4",24),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"mat-radio-group",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.collections.publicCollections=n)}),e.YNc(77,Qt,3,4,"mat-radio-button",22),e.qZA()()()(),e.TgZ(78,"div",3),e.YNc(79,Bt,16,22,"div",29),e.qZA(),e.TgZ(80,"div",30),e.YNc(81,Kt,2,3,"es-info-message",25),e.YNc(82,jt,2,3,"es-info-message",25),e.YNc(83,Wt,2,3,"es-info-message",25),e.qZA(),e.YNc(84,Vt,10,10,"div",31),e.TgZ(85,"div",32)(86,"h3",12),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.stream.delete=n)}),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"mat-hint"),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.comments.delete=n)}),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"mat-hint"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.ratings.delete=n)}),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"mat-hint"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.collectionFeedback.delete=n)}),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"mat-hint"),e._uU(111),e.ALo(112,"translate"),e.qZA(),e.TgZ(113,"mat-checkbox",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.options.statistics.delete=n)}),e._uU(114),e.ALo(115,"translate"),e.qZA(),e.TgZ(116,"mat-hint"),e._uU(117),e.ALo(118,"translate"),e.qZA(),e._UZ(119,"es-info-message",33),e.ALo(120,"translate"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,59,"PERMISSIONS.DELETE.HOME_FOLDER.CAPTION")," "),e.xp6(5),e.hij(" ",e.lcZ(9,61,"PERMISSIONS.DELETE.HOME_FOLDER.FOLDERS_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.homeFolder.folders),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(1),e.Q6J("ngIf","none"===t.options.homeFolder.folders),e.xp6(1),e.Q6J("ngIf","delete"===t.options.homeFolder.folders),e.xp6(3),e.hij(" ",e.lcZ(17,63,"PERMISSIONS.DELETE.HOME_FOLDER.PRIVATE_FILES_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.homeFolder.privateFiles),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(3),e.hij(" ",e.lcZ(23,65,"PERMISSIONS.DELETE.HOME_FOLDER.CC_FILES_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.homeFolder.ccFiles),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(3),e.hij(" ",e.lcZ(29,67,"PERMISSIONS.DELETE.HOME_FOLDER.FOLDER_STRUCTURE_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.homeFolder.keepFolderStructure)("disabled",!t.allAssigning()),e.xp6(1),e.Q6J("value",!1),e.xp6(1),e.Oqu(e.lcZ(33,69,"PERMISSIONS.DELETE.FOLDER_STRUCTURE_DISINTEGRATE")),e.xp6(2),e.Q6J("value",!0),e.xp6(1),e.Oqu(e.lcZ(36,71,"PERMISSIONS.DELETE.FOLDER_STRUCTURE_KEEP")),e.xp6(4),e.hij(" ",e.lcZ(40,73,"PERMISSIONS.DELETE.SHARED_FOLDERS.CAPTION")," "),e.xp6(5),e.hij(" ",e.lcZ(45,75,"PERMISSIONS.DELETE.SHARED_FOLDERS.FOLDERS_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.sharedFolders.folders),e.xp6(1),e.Q6J("ngForOf",t.deleteModesFolder),e.xp6(3),e.hij(" ",e.lcZ(51,77,"PERMISSIONS.DELETE.SHARED_FOLDERS.PRIVATE_FILES_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.sharedFolders.privateFiles),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(3),e.hij(" ",e.lcZ(57,79,"PERMISSIONS.DELETE.SHARED_FOLDERS.CC_FILES_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.sharedFolders.ccFiles),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(1),e.Q6J("ngIf","assign"===t.options.sharedFolders.privateFiles||"assign"===t.options.sharedFolders.ccFiles),e.xp6(3),e.hij(" ",e.lcZ(64,81,"PERMISSIONS.DELETE.COLLECTIONS.CAPTION")," "),e.xp6(5),e.hij(" ",e.lcZ(69,83,"PERMISSIONS.DELETE.COLLECTIONS.PRIVATE_COLLECTIONS_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.collections.privateCollections),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(3),e.hij(" ",e.lcZ(75,85,"PERMISSIONS.DELETE.COLLECTIONS.PUBLIC_COLLECTIONS_CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.collections.publicCollections),e.xp6(1),e.Q6J("ngForOf",t.deleteModes),e.xp6(2),e.Q6J("ngIf",t.hasAssigning()),e.xp6(2),e.Q6J("ngIf",t.missingAssigning()),e.xp6(1),e.Q6J("ngIf","delete"===t.options.collections.privateCollections||"delete"===t.options.collections.publicCollections),e.xp6(1),e.Q6J("ngIf",!t.isValid()),e.xp6(1),e.Q6J("ngIf",t.hasAssigning()),e.xp6(3),e.hij(" ",e.lcZ(88,87,"PERMISSIONS.DELETE.USER_INTERACTIONS.CAPTION")," "),e.xp6(2),e.Q6J("ngModel",t.options.stream.delete),e.xp6(1),e.Oqu(e.lcZ(91,89,"PERMISSIONS.DELETE.USER_INTERACTIONS.STREAM")),e.xp6(3),e.Oqu(e.lcZ(94,91,"PERMISSIONS.DELETE.USER_INTERACTIONS.STREAM_HINT")),e.xp6(2),e.Q6J("ngModel",t.options.comments.delete),e.xp6(1),e.Oqu(e.lcZ(97,93,"PERMISSIONS.DELETE.USER_INTERACTIONS.COMMENTS")),e.xp6(3),e.Oqu(e.lcZ(100,95,"PERMISSIONS.DELETE.USER_INTERACTIONS.COMMENTS_HINT")),e.xp6(2),e.Q6J("ngModel",t.options.ratings.delete),e.xp6(1),e.Oqu(e.lcZ(103,97,"PERMISSIONS.DELETE.USER_INTERACTIONS.RATINGS")),e.xp6(3),e.Oqu(e.lcZ(106,99,"PERMISSIONS.DELETE.USER_INTERACTIONS.RATINGS_HINT")),e.xp6(2),e.Q6J("ngModel",t.options.collectionFeedback.delete),e.xp6(1),e.Oqu(e.lcZ(109,101,"PERMISSIONS.DELETE.USER_INTERACTIONS.COLLECTION_FEEDBACK")),e.xp6(3),e.Oqu(e.lcZ(112,103,"PERMISSIONS.DELETE.USER_INTERACTIONS.COLLECTION_FEEDBACK_HINT")),e.xp6(2),e.Q6J("ngModel",t.options.statistics.delete),e.xp6(1),e.Oqu(e.lcZ(115,105,"PERMISSIONS.DELETE.USER_INTERACTIONS.STATISTICS")),e.xp6(3),e.Oqu(e.lcZ(118,107,"PERMISSIONS.DELETE.USER_INTERACTIONS.STATISTICS_HINT")),e.xp6(2),e.s9C("message",e.lcZ(120,109,"PERMISSIONS.DELETE.STATE.ASSIGNING_DELETED_USER"))}}function $t(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,vt,13,12,"div",18),e.YNc(2,zt,121,111,"ng-container",4),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.jobs?null:t.jobs.length),e.xp6(1),e.Q6J("ngIf","NONE"===t.job)}}function Xt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.prepareStart())}),e.ALo(2,"async"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!e.lcZ(2,2,t.canSubmit$)),e.xp6(2),e.hij(" ",e.lcZ(4,4,"PERMISSIONS.DELETE.START")," ")}}let en=(()=>{class o{constructor(t,i,n,s,p,u,m){this.admin=t,this.dialogs=i,this.iam=n,this.storage=s,this.toast=p,this.applicationRef=u,this.translate=m,this.DisplayType=a.P8,this.InteractionType=a.s_,this.AuthoritySearchMode=X.k,this.deleteModes=[l.yP.none,l.yP.assign,l.yP.delete],this.deleteModesFolder=[l.yP.none,l.yP.assign],this.canSubmit$=new At.X(!1),this.usersDataSource=new a.AL,this.columns=[],this.job="NONE";const f={version:"1.0.0",homeFolder:{folders:l.yP.none,privateFiles:l.yP.none,ccFiles:l.yP.none,keepFolderStructure:!1},sharedFolders:{folders:l.yP.none,privateFiles:l.yP.none,ccFiles:l.yP.none},collections:{privateCollections:l.yP.none,publicCollections:l.yP.none},ratings:{delete:!1},comments:{delete:!1},collectionFeedback:{delete:!1},statistics:{delete:!1},stream:{delete:!1},receiver:"",receiverGroup:"",cleanupMetadata:!0};this.storage.get("delete_users_options",f).subscribe(P=>{this.options=P.version===f.version?P:f}),this.columns.push(new a.HC("USER",l.u6.AUTHORITY_NAME)),this.columns.push(new a.HC("USER",l.u6.AUTHORITY_FIRSTNAME)),this.columns.push(new a.HC("USER",l.u6.AUTHORITY_LASTNAME)),this.deleteButtons=l.Qd.getOk(()=>{this.deleteResult=null}),this.refresh()}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.jobs=(yield t.admin.getAllJobs().toPromise()).filter(i=>i.tags?.includes("DeletePersonJob"))})()}isValid(){return!this.anyModeMatches(l.yP.none)}hasAssigning(){return this.anyModeMatches(l.yP.assign)}anyModeMatches(t){return this.options.homeFolder.folders===t||this.options.homeFolder.privateFiles===t||this.options.homeFolder.ccFiles===t||this.options.sharedFolders.folders===t||this.options.sharedFolders.privateFiles===t||this.options.sharedFolders.ccFiles===t||this.options.collections.privateCollections===t||this.options.collections.publicCollections===t}refresh(){this.usersDataSource.isLoading=!0,this.iam.searchUsers("*",!0,"todelete",{maxItems:l.u6.COUNT_UNLIMITED}).subscribe(i=>{this.usersDataSource.setData(i.users,i.pagination),this.applicationRef.tick(),this.nodeEntriesWrapperComponent.getSelection().changed.subscribe(()=>this.canSubmit$.next(this.canSubmit())),this.usersDataSource.isLoading=!1},i=>{this.toast.error(i),this.usersDataSource.isLoading=!1})}prepareStart(){var t=this;return(0,h.Z)(function*(){let i=t.translate.instant("PERMISSIONS.DELETE.CONFIRM.USERS");for(const s of t.nodeEntriesWrapperComponent.getSelection().selected)i+="\n"+new v.F(t.translate).transform(s,null);t.hasAssigning()&&(i+="\n\n"+t.translate.instant("PERMISSIONS.DELETE.CONFIRM.RECEIVER",{user:new v.F(t.translate).transform(t.receiver,null)}),i+="\n\n"+t.translate.instant("PERMISSIONS.DELETE.CONFIRM.RECEIVER_GROUP",{group:new v.F(t.translate).transform(t.receiverGroup,null)})),i+="\n\n"+t.translate.instant("PERMISSIONS.DELETE.CONFIRM.FINAL"),(yield t.dialogs.openGenericDialog({title:"PERMISSIONS.DELETE.CONFIRM.CAPTION",message:i,buttons:[{label:"CANCEL",config:{color:"standard"}},{label:"PERMISSIONS.DELETE.START",config:{color:"primary"}}]})).afterClosed().subscribe(s=>{"PERMISSIONS.DELETE.START"===s&&t.start()})})()}start(){if(this.toast.showProgressSpinner(),"NONE"!==this.job)return void this.admin.startJobSync(this.job.name,{authorities:this.nodeEntriesWrapperComponent.getSelection().selected.map(i=>i.authorityName)}).subscribe(i=>{this.toast.closeProgressSpinner(),this.deleteResult=JSON.stringify(i,null,2),this.refresh()},i=>{this.toast.error(i),this.toast.closeProgressSpinner()});this.hasAssigning()&&(this.options.receiver=this.receiver.authorityName,this.options.receiverGroup=this.receiverGroup.authorityName),this.storage.set("delete_users_options",this.options);const t=U.W.deepCopy(this.options);delete t.version,this.admin.deletePersons(this.nodeEntriesWrapperComponent.getSelection().selected.map(i=>i.authorityName),t).subscribe(i=>{this.toast.closeProgressSpinner(),this.deleteResult=JSON.stringify(i,null,2),this.refresh()},i=>{this.toast.error(i),this.toast.closeProgressSpinner()})}missingAssigning(){return this.hasAssigning()&&(null==this.receiver||null==this.receiverGroup)}canSubmit(){return!this.nodeEntriesWrapperComponent?.getSelection().isEmpty()&&!this.missingAssigning()}allAssigning(){return"assign"===this.options.homeFolder.folders&&"assign"===this.options.homeFolder.privateFiles&&"assign"===this.options.homeFolder.ccFiles}updateForm(){this.allAssigning()||(this.options.homeFolder.keepFolderStructure=!1)}ngAfterViewInit(){}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(l.F_),e.Y36(V.H),e.Y36(l.Du),e.Y36(l.uR),e.Y36(T.F),e.Y36(e.z2F),e.Y36(b.sK))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["es-permissions-delete"]],viewQuery:function(i,n){if(1&i&&e.Gf(a.cE,5),2&i){let s;e.iGM(s=e.CRH())&&(n.nodeEntriesWrapperComponent=s.first)}},decls:12,vars:10,consts:[["icon","delete","width","large","height","xxlarge",3,"title","isCancelable","buttons",4,"ngIf"],[1,"wrapper"],[1,"mat-heading-2","mat-heading-underline"],[1,"group"],[4,"ngIf"],["class","mat-heading-3 mat-heading-underline",4,"ngIf"],["class","user-list",4,"ngIf"],["mode","info",3,"message",4,"ngIf"],["class","group group-buttons",4,"ngIf"],["icon","delete","width","large","height","xxlarge",3,"title","isCancelable","buttons"],[1,"card-result"],["matInput","","readonly","",3,"ngModel"],[1,"mat-heading-3","mat-heading-underline"],["mat-icon-button","",3,"click"],["esIcon","refresh"],[1,"user-list"],[3,"displayType","columns","dataSource","checkbox","elementInteractionType"],["mode","info",3,"message"],["class","group group-jobs",4,"ngIf"],[1,"group","group-jobs"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"side-by-side"],[1,"mat-heading-4"],["mode","warning",3,"message",4,"ngIf"],[1,"structure"],[3,"ngModel","disabled","ngModelChange"],["class","move",4,"ngIf"],["class","assigning",4,"ngIf"],[1,"info-wrapper"],["class","group group-metadata",4,"ngIf"],[1,"group","group-interactions"],["mode","info",1,"info-delete-assigning",3,"message"],["mode","warning",3,"message"],[1,"move"],[1,"assigning"],[3,"globalSearchAllowed","showRecent","placeholder","onChooseAuthority"],[3,"removed",4,"ngIf"],[3,"mode","hint","globalSearchAllowed","showRecent","placeholder","onChooseAuthority"],[3,"removed"],["matChipRemove","","esIcon","cancel"],[1,"group","group-metadata"],[1,"group","group-buttons"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(i,n){1&i&&(e.YNc(0,Pt,7,9,"es-card",0),e.TgZ(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,Nt,1,0,"es-spinner",4),e.YNc(7,xt,6,3,"h3",5),e.YNc(8,Rt,2,5,"div",6),e.qZA(),e.YNc(9,bt,2,3,"es-info-message",7),e.YNc(10,$t,3,2,"div",4),e.YNc(11,Xt,5,6,"div",8),e.qZA()),2&i&&(e.Q6J("ngIf",n.deleteResult),e.xp6(3),e.hij(" ",e.lcZ(4,8,"PERMISSIONS.DELETE.MAIN_HEADING")," "),e.xp6(3),e.Q6J("ngIf",n.usersDataSource.isLoading),e.xp6(1),e.Q6J("ngIf",!n.usersDataSource.isLoading),e.xp6(1),e.Q6J("ngIf",!n.usersDataSource.isEmpty()),e.xp6(1),e.Q6J("ngIf",!n.usersDataSource.isLoading&&n.usersDataSource.isEmpty()),e.xp6(1),e.Q6J("ngIf",!n.usersDataSource.isLoading&&!n.usersDataSource.isEmpty()&&n.options),e.xp6(1),e.Q6J("ngIf",!n.usersDataSource.isLoading))},dependencies:[X.e,q.A,M.sg,M.O5,a.ar,a.OR,a.cE,E.Fj,E.JJ,E.On,H.u,z.ey,J.lW,J.RK,Q.oG,k.z2,k.iO,k.qH,L.KE,L.hX,L.bx,Y.Nt,ee.VQ,ee.U0,$.gD,v.F,M.Ov,b.X$],styles:[".wrapper[_ngcontent-%COMP%]{padding:10px 30px}.wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{padding:0 10%}.wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   es-info-message[_ngcontent-%COMP%]{margin:10px 10%}.wrapper[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]{min-height:200px;max-height:35vh;overflow-y:auto}.wrapper[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{padding:10px 20px}.wrapper[_ngcontent-%COMP%]   .group.group-jobs[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{padding:30px 20px;width:100%;max-width:800px}.wrapper[_ngcontent-%COMP%]   .group-interactions[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .group-metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .group-interactions[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .group-metadata[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:-8px}.wrapper[_ngcontent-%COMP%]   .group-interactions[_ngcontent-%COMP%]   .info-delete-assigning[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .group-metadata[_ngcontent-%COMP%]   .info-delete-assigning[_ngcontent-%COMP%]{padding-top:15px}.wrapper[_ngcontent-%COMP%]   .group-interactions[_ngcontent-%COMP%] > mat-hint[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .group-metadata[_ngcontent-%COMP%] > mat-hint[_ngcontent-%COMP%]{padding-left:46px;padding-bottom:2px;font-size:90%}.wrapper[_ngcontent-%COMP%]   .side-by-side[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .side-by-side[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:0;flex-grow:1}.wrapper[_ngcontent-%COMP%]   .side-by-side[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   es-info-message[_ngcontent-%COMP%]{display:flex;padding:10px}.wrapper[_ngcontent-%COMP%]   .structure[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{display:table;margin:10px auto 0}.wrapper[_ngcontent-%COMP%]   .assigning[_ngcontent-%COMP%]{margin:20px 20% 0}.wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:-5px 0}.card-result[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.card-result[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex-grow:1;padding:25px}.card-result[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{padding:25px}"]})}return o})();function tn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-permissions-authorities",8),e.NdJ("onSelection",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.selected=n?n[0]:null)}),e.qZA()}if(2&o){const t=e.oxw(3);e.Q6J("mode","ORG")("searchQuery",t.searchQuery)}}function nn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-permissions-authorities",9),e.NdJ("onDeselectOrg",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.selected=null)})("setTab",function(n){e.CHM(t);const s=e.oxw(4);return e.KtG(s.setTab(n))}),e.qZA()}if(2&o){const t=e.oxw(4);e.Q6J("mode","GROUP")("searchQuery",t.searchQuery)("org",t.selected)}}function on(o,r){if(1&o&&(e.TgZ(0,"mat-tab",5),e.ALo(1,"translate"),e.YNc(2,nn,1,3,"ng-template",6),e.qZA()),2&o){const t=e.oxw(3);e.hYB("label","",e.lcZ(1,2,"PERMISSIONS.TAB.GROUP"),"",t.selected?" ("+(null==t.selected.profile?null:t.selected.profile.displayName)+")":"","")}}function sn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"es-permissions-authorities",9),e.NdJ("onDeselectOrg",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.selected=null)})("setTab",function(n){e.CHM(t);const s=e.oxw(4);return e.KtG(s.setTab(n))}),e.qZA()}if(2&o){const t=e.oxw(4);e.Q6J("mode","USER")("searchQuery",t.searchQuery)("org",t.selected)}}function rn(o,r){if(1&o&&(e.TgZ(0,"mat-tab",5),e.ALo(1,"translate"),e.YNc(2,sn,1,3,"ng-template",6),e.qZA()),2&o){const t=e.oxw(3);e.hYB("label","",e.lcZ(1,2,"PERMISSIONS.TAB.USER"),"",t.selected?" ("+(null==t.selected.profile?null:t.selected.profile.displayName)+")":"","")}}function an(o,r){1&o&&(e.TgZ(0,"mat-tab",5),e.ALo(1,"translate"),e._UZ(2,"es-permissions-delete"),e.qZA()),2&o&&e.s9C("label",e.lcZ(1,1,"PERMISSIONS.TAB.DELETE"))}function ln(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tab-group",4),e.NdJ("selectedIndexChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setTab(n))}),e.TgZ(1,"mat-tab",5),e.ALo(2,"translate"),e.YNc(3,tn,1,2,"ng-template",6),e.qZA(),e.YNc(4,on,3,4,"mat-tab",7),e.YNc(5,rn,3,4,"mat-tab",7),e.YNc(6,an,3,3,"mat-tab",7),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","dark")("selectedIndex",t.tab),e.xp6(1),e.s9C("label",e.lcZ(2,6,"PERMISSIONS.TAB.ORG")),e.xp6(3),e.Q6J("ngIf",t.selected||t.isAdmin),e.xp6(1),e.Q6J("ngIf",t.selected||t.isAdmin),e.xp6(1),e.Q6J("ngIf",!t.selected&&t.isAdmin)}}function _n(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",1)(2,"h1",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,ln,7,8,"mat-tab-group",3),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"PERMISSIONS.TITLE")),e.xp6(2),e.Q6J("ngIf",!t.isLoading)}}const cn=[{path:"",component:(()=>{class o{constructor(t,i,n,s,p,u,m,f,P,Z){this.toast=t,this.router=i,this.platformLocation=n,this.config=s,this.translations=p,this.organization=u,this.loadingScreen=m,this.mainNav=f,this.connector=P,this.searchField=Z,this.tab=0,this.isAdmin=!1,this.disabled=!1,this.isLoading=!0,this.TABS=["ORG","GROUP","USER","DELETE"],this.destroyed=new R.xQ;const _=this.loadingScreen.addLoadingTask({until:this.destroyed});this.translations.waitForInit().subscribe(()=>{this.connector.isLoggedIn().subscribe(d=>{!d.isValidLogin||d.isGuest||d.currentScope?this.goToLogin():this.organization.getOrganizations().subscribe(g=>{if(this.isAdmin=g.canCreate,!(this.isAdmin||g.organizations.filter(mn=>mn.administrationAccess).length>0))return this.toast.error(null,"TOAST.API_FORBIDDEN"),void A.d.goToDefaultLocation(this.router,this.platformLocation,this.config)}),this.isLoading=!1,_.done()},d=>this.goToLogin()),this.config.get("hideMainMenu").subscribe(d=>{d&&-1!=d.indexOf("permissions")&&(this.disabled=!0)})})}ngOnInit(){this.registerMainNav()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}registerMainNav(){this.mainNav.setMainNavConfig({title:"PERMISSIONS.TITLE",currentScope:"permissions"}),this.updateSearchField()}updateSearchField(){if(3!==this.tab){const t=this.searchField.enable({placeholder:"PERMISSIONS.SEARCH_"+this.TABS[this.tab]},this.destroyed);t.setSearchString(this.searchQuery),t.onSearchTriggered().subscribe(({searchString:i})=>this.doSearch(i))}else this.searchField.disable()}doSearch(t){this.searchQuery=t}setTab(t){if(0==t||this.selected||this.isAdmin){if(t===this.tab)return;0===t&&(this.selected=null),this.searchQuery=null,this.tab=t}else this.toast.error(null,"PERMISSIONS.SELECT_ORGANIZATION"),this.tab=0;this.updateSearchField()}goToLogin(){l.bv.goToLogin(this.router,this.config)}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(T.F),e.Y36(N.F0),e.Y36(M.lw),e.Y36(l.eB),e.Y36(a.fA),e.Y36(l.K$),e.Y36(D.O),e.Y36(te.ZF),e.Y36(l.xD),e.Y36(I.LN))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["es-user-management-page"]],decls:1,vars:1,consts:[[4,"ngIf"],["role","main","esSkipTarget","MAIN_CONTENT"],["esTitle","",1,"cdk-visually-hidden"],["mat-stretch-tabs","",3,"color","selectedIndex","selectedIndexChange",4,"ngIf"],["mat-stretch-tabs","",3,"color","selectedIndex","selectedIndexChange"],[3,"label"],["matTabContent",""],[3,"label",4,"ngIf"],[3,"mode","searchQuery","onSelection"],[3,"mode","searchQuery","org","onDeselectOrg","setTab"]],template:function(i,n){1&i&&e.YNc(0,_n,6,4,"ng-container",0),2&i&&e.Q6J("ngIf",!n.disabled||n.isAdmin)},dependencies:[M.O5,O.Vc,O.uX,O.SP,F.P,G.M,Ct,en,b.X$],styles:["mat-tab-group[_ngcontent-%COMP%]{position:absolute;top:var(--mainnavHeight);width:100%}"],data:{animation:[]}})}return o})()}];let dn=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[N.Bz.forChild(cn),N.Bz]})}return o})(),pn=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[C.m,dn]})}return o})()},19374:(B,y,c)=>{c.d(y,{P:()=>l});var C=c(65879),N=c(79826);let l=(()=>{class R{constructor(e,T){this.elementRef=e,this.skipNav=T}ngOnInit(){this.skipNav.register(this.target,this.elementRef.nativeElement)}ngOnDestroy(){this.skipNav.unregister(this.target)}static#e=this.\u0275fac=function(T){return new(T||R)(C.Y36(C.SBq),C.Y36(N.g))};static#t=this.\u0275dir=C.lG2({type:R,selectors:[["","esSkipTarget",""]],inputs:{target:["esSkipTarget","target"]}})}return R})()},66848:(B,y,c)=>{c.d(y,{M:()=>a});var C=c(72079),N=c(12994),l=c(77504),R=c(96124),A=c(65879),e=c(6593),T=c(52081),M=c(81771);let a=(()=>{class D{constructor(I,O,F,G){this.elementRef=I,this.documentTitle=O,this.translations=F,this.pageHeading=new C.xQ,this.titleOverride=new C.xQ,this.pageTitle=new C.xQ,this.mutationObserver=new MutationObserver(()=>this.updatePageHeading()),this.mutationObserver.observe(this.elementRef.nativeElement,{characterData:!0,subtree:!0}),(0,N.aj)([this.pageHeading,this.titleOverride]).pipe((0,R.U)(([h,x])=>x??h)).subscribe(this.pageTitle),(0,N.aj)([(0,l.D)({branding:G.get("branding"),siteTitle:G.get("siteTitle","edu-sharing")}),this.pageTitle,this.translations.waitForInit()]).subscribe(([h,x])=>this.updateTitle(h,x))}ngOnChanges(I){if(I.esTitle){const O=I.esTitle.currentValue;this.titleOverride.next(""===O?null:O??"")}}ngOnInit(){this.updatePageHeading()}ngOnDestroy(){this.mutationObserver.disconnect()}updatePageHeading(){this.pageHeading.next(this.elementRef.nativeElement.textContent)}updateTitle(I,O){this.documentTitle.setTitle(O?I.branding?O+" - "+I.siteTitle:O:I.siteTitle)}static#e=this.\u0275fac=function(O){return new(O||D)(A.Y36(A.SBq),A.Y36(e.Dx),A.Y36(T.fA),A.Y36(M.eB))};static#t=this.\u0275dir=A.lG2({type:D,selectors:[["","esTitle",""]],inputs:{esTitle:"esTitle"},features:[A.TTD]})}return D})()}}]);