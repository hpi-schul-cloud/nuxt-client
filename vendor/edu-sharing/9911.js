"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[9911],{89911:(D,d,e)=>{e.r(d),e.d(d,{CreateMapLinkDialogComponent:()=>x,CreateMapLinkDialogModule:()=>E});var m=e(50555),g=e(15861),s=e(81771),h=e(90721),p=e(53461),t=e(65879),b=e(91486),C=e(1189),f=e(22941),M=e(19445),v=e(36692),P=e(98617),c=e(56223),A=e(17162),L=e(32296),u=e(64170),y=e(24516),O=e(71365);let x=(()=>{class r{constructor(o,n,a,i,l,N,T,R){this.data=o,this.dialogRef=n,this.connector=a,this.toast=i,this.router=l,this.nodeApi=N,this.breadcrumbsService=T,this.dialogs=R,this.buttons=[new s.Qd("CANCEL",{color:"standard"},()=>this.dialogRef.close(null)),new s.Qd("MAP_LINK.CREATE",{color:"primary"},()=>this.createLink())]}ngOnInit(){this.dialogRef.patchConfig({buttons:this.buttons}),this.name=this.data.node.name,this.updateBreadcrumbs(s.u6.INBOX),this.updateButtons()}updateButtons(){this.buttons[1].disabled=!this.name}chooseDirectory(){var o=this;return(0,g.Z)(function*(){(yield o.dialogs.openFileChooserDialog({title:"MAP_LINK.FILE_PICKER_TITLE",pickDirectory:!0,writeRequired:!0})).afterClosed().subscribe(a=>{a&&o.setDirectory(a)})})()}setDirectory(o){this.updateBreadcrumbs(o[0].ref.id)}updateBreadcrumbs(o){this.nodeApi.getNodeParents(o,!1).subscribe(n=>{this.breadcrumbsService.setNodePath(n.nodes.reverse())})}createLink(){const o=s.bv.createNameProperty(this.name);o[s.u6.CCM_PROP_MAP_REF_TARGET]=[s.bv.createSpacesStoreRef(this.data.node)],this.toast.showProgressSpinner(),this.nodeApi.createNode(this.breadcrumbsService.breadcrumbs$.value[this.breadcrumbsService.breadcrumbs$.value.length-1].ref.id,s.u6.CCM_TYPE_MAP,[s.u6.CCM_ASPECT_MAP_REF],o).subscribe(({node:n})=>{this.toast.toast("MAP_LINK.CREATED",{folder:this.breadcrumbsService.breadcrumbs$.value[this.breadcrumbsService.breadcrumbs$.value.length-1].name},null,null,{link:{caption:"MAP_LINK.CREATED_LINK",callback:()=>{h.d.goToWorkspaceFolder(this.nodeApi,this.router,this.connector.getCurrentLogin(),this.breadcrumbsService.breadcrumbs$.value[this.breadcrumbsService.breadcrumbs$.value.length-1].ref.id)}}}),this.toast.closeProgressSpinner(),this.dialogRef.close(n)},n=>{this.toast.closeProgressSpinner(),this.toast.error(n)})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(p.W9),t.Y36(b.Y),t.Y36(s.xD),t.Y36(C.F),t.Y36(f.F0),t.Y36(s.xE),t.Y36(M.d),t.Y36(v.H))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["es-create-map-link-dialog"]],decls:18,vars:15,consts:[["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"breadcrumb-style"],[1,"breadcrumb-info"],[1,"breadcrumb-group"],["short","always",3,"home","clickable"],[1,"btn-choose"],["mat-raised-button","",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"es-info-message"),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-form-field")(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"input",0),t.NdJ("ngModelChange",function(l){return a.name=l})("ngModelChange",function(){return a.updateButtons()}),t.qZA()(),t.TgZ(8,"div",1)(9,"div",2),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",3),t._UZ(13,"es-breadcrumbs",4)(14,"div",5),t.TgZ(15,"button",6),t.NdJ("click",function(){return a.chooseDirectory()}),t._uU(16),t.ALo(17,"translate"),t.qZA()()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,7,"MAP_LINK.INFO"),"\n"),t.xp6(4),t.Oqu(t.lcZ(6,9,"MAP_LINK.NAME")),t.xp6(2),t.Q6J("ngModel",a.name),t.xp6(3),t.Oqu(t.lcZ(11,11,"MAP_LINK.BREADCRUMB_INFO")),t.xp6(3),t.Q6J("home","WORKSPACE.MY_FILES")("clickable",!1),t.xp6(3),t.hij(" ",t.lcZ(17,13,"MAP_LINK.CHOOSE")," "))},dependencies:[P.n,c.Fj,c.JJ,c.On,A.u,L.lW,u.KE,u.hX,y.Nt,O.X$],styles:["es-info-message[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}mat-form-field[_ngcontent-%COMP%]{margin:25px 0 5px;width:100%}.breadcrumb-style[_ngcontent-%COMP%]{margin:0 -25px -5px;padding:20px 25px;background:#f9f9f9;display:flex;flex-direction:column}.breadcrumb-style[_ngcontent-%COMP%]   .breadcrumb-group[_ngcontent-%COMP%]{display:flex}.breadcrumb-style[_ngcontent-%COMP%]   .breadcrumb-group[_ngcontent-%COMP%] > es-breadcrumbs[_ngcontent-%COMP%]{flex-grow:1}.breadcrumb-style[_ngcontent-%COMP%]   .breadcrumb-info[_ngcontent-%COMP%]{margin:3px 3px 15px}.btn-choose[_ngcontent-%COMP%]{flex-grow:1}.btn-choose[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:10px}"]})}return r})(),E=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=t.oAB({type:r});static#n=this.\u0275inj=t.cJS({imports:[m.m]})}return r})()}}]);