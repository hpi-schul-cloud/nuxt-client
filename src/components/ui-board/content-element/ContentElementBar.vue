<template>
	<div tabindex="-1" class="content-element-bar">
		<div v-if="$slots.menu" class="three-dot-menu">
			<slot name="menu" />
		</div>

		<div v-if="$slots.display" class="content-element-display">
			<slot name="display" />
		</div>

		<div
			v-if="
				$slots.title || $slots.element || $slots.subtitle || $slots.description
			"
			:class="dynamicClasses"
			class="content-element-bar-texts rounded-b py-4"
		>
			<div
				v-if="$slots.title"
				class="content-element-title d-flex flex-row px-4 pb-0"
				:class="{
					'mr-10': hasSlotContent($slots.menu) && !$slots.display,
				}"
			>
				<div v-if="$slots.logo" class="logo-container mr-2">
					<slot name="logo" />
				</div>

				<v-icon v-if="icon" color="black" size="20" class="mr-2">{{
					icon
				}}</v-icon>

				<LineClamp class="content-element-title">
					<slot name="title" />
				</LineClamp>
			</div>

			<div
				v-if="$slots.element"
				class="pl-2 pr-3 mt-n1"
				:class="{ 'mr-10': hasSlotContent($slots.menu) }"
			>
				<slot name="element" />
			</div>

			<div v-if="$slots.subtitle" class="px-4">
				<slot name="subtitle" />
			</div>

			<div v-if="$slots.description" class="px-4">
				<slot name="description" />
			</div>
		</div>
	</div>
</template>

<script setup lang="ts">
import { computed, defineProps, PropType } from "vue";
import LineClamp from "../LineClamp.vue";
import { IconProps } from "vuetify";
import { hasSlotContent } from "@util-vue";

const props = defineProps({
	hasGreyBackground: {
		type: Boolean,
		required: false,
	},
	icon: {
		type: String as PropType<IconProps["icon"]>,
		required: false,
	},
});

const dynamicClasses = computed(() => {
	return {
		"bg-grey-lighten-4": props.hasGreyBackground === true,
	};
});
</script>

<style scoped lang="scss">
.content-element-title {
	font-family: var(--font-accent) !important;
	font-size: 1rem !important;
	font-weight: 700;

	:deep(a) {
		color: var(--v-black-base) !important;
		text-decoration: none;
	}
	:deep(a:hover) {
		text-decoration: underline;
	}
}
.content-element-bar-texts > div ~ div {
	padding-top: 8px;
}

.content-element-bar {
	position: relative;
	color: var(--v-black-base);
}
.content-element-bar:hover {
	.content-element-title {
		text-decoration: underline;
	}

	.content-element-display {
		filter: brightness(80%);
	}
}

.three-dot-menu {
	position: absolute;
	right: 0.75rem;
	top: 0.75rem;
	z-index: 100;

	.v-icon {
		color: var(--v-black-base);
	}
}

.logo-container {
	width: 24px;
	height: 24px;
}
</style>
