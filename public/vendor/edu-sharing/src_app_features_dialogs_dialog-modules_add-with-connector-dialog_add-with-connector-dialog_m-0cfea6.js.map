{"version":3,"file":"src_app_features_dialogs_dialog-modules_add-with-connector-dialog_add-with-connector-dialog_m-0cfea6.js","mappings":"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","sources":["./src/app/features/dialogs/dialog-modules/add-with-connector-dialog/add-with-connector-dialog-data.ts","./src/app/features/dialogs/dialog-modules/add-with-connector-dialog/add-with-connector-dialog.component.ts","./src/app/features/dialogs/dialog-modules/add-with-connector-dialog/add-with-connector-dialog.component.html","./src/app/features/dialogs/dialog-modules/add-with-connector-dialog/add-with-connector-dialog.module.ts"],"sourcesContent":["import { Connector, ConnectorFileType } from 'ngx-edu-sharing-api';\n\nexport class AddWithConnectorDialogData {\n    connector: Connector;\n    name?: string;\n}\n\nexport interface AddWithConnectorDialogResult {\n    name: string;\n    type: ConnectorFileType;\n}\n","import { Component, Inject } from '@angular/core';\nimport { Connector } from 'ngx-edu-sharing-api';\nimport { BehaviorSubject } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { DialogButton } from '../../../../core-module/core.module';\nimport { CARD_DIALOG_DATA, Closable } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport {\n    AddWithConnectorDialogData,\n    AddWithConnectorDialogResult,\n} from './add-with-connector-dialog-data';\n\n@Component({\n    selector: 'es-add-with-connector-dialog',\n    templateUrl: './add-with-connector-dialog.component.html',\n    styleUrls: ['./add-with-connector-dialog.component.scss'],\n})\nexport class AddWithConnectorDialogComponent {\n    readonly connector = this.processConnector(this.data.connector);\n    private nameSubject = new BehaviorSubject<string>(this.data.name ?? '');\n    get name(): string {\n        return this.nameSubject.value;\n    }\n    set name(value: string) {\n        this.nameSubject.next(value);\n    }\n    type = 0;\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: AddWithConnectorDialogData,\n        private dialogRef: CardDialogRef<AddWithConnectorDialogData, AddWithConnectorDialogResult>,\n    ) {\n        this.initDialogConfig();\n    }\n\n    private cancel() {\n        this.dialogRef.close(null);\n    }\n\n    private create() {\n        if (!this.name.trim()) {\n            return;\n        }\n        this.dialogRef.close({ name: this.name, type: this.getType() });\n    }\n\n    private processConnector(connector: Connector): Connector {\n        for (let i = 0; i < connector.filetypes.length; i++) {\n            if (!connector.filetypes[i].creatable) {\n                connector.filetypes.splice(i, 1);\n            }\n        }\n        return connector;\n    }\n\n    private initDialogConfig(): void {\n        const cancelButton = new DialogButton('CANCEL', { color: 'standard' }, () => this.cancel());\n        const createButton = new DialogButton('CREATE', { color: 'primary' }, () => this.create());\n        this.dialogRef.patchConfig({\n            title: 'CONNECTOR.' + this.connector.id + '.TITLE',\n            subtitle: 'CONNECTOR.' + this.connector.id + '.NAME',\n            avatar: { kind: 'icon', icon: this.connector.icon },\n            buttons: [cancelButton, createButton],\n        });\n        this.nameSubject.subscribe((name) => (createButton.disabled = !name.trim()));\n        this.nameSubject\n            .pipe(first((name) => !!name))\n            .subscribe(() => this.dialogRef.patchConfig({ closable: Closable.Standard }));\n    }\n\n    getType() {\n        return this.connector.filetypes[this.type];\n    }\n}\n","<form>\n  <mat-form-field>\n    <mat-label>{{ 'CONNECTOR.' + connector.id + '.PLACEHOLDER' | translate }}</mat-label>\n    <input matInput type=\"text\" #input [(ngModel)]=\"name\" name=\"filename\" autofocus />\n  </mat-form-field>\n  <mat-form-field [class.hide]=\"connector.filetypes.length === 1\">\n    <mat-label>{{ 'CONNECTOR_FORMAT_LABEL' | translate }}</mat-label>\n    <mat-select [(ngModel)]=\"type\" name=\"filetype\" [disabled]=\"connector.filetypes.length === 1\">\n      <mat-option *ngFor=\"let filetype of connector.filetypes; let i = index\" [value]=\"i\">\n        {{\n          'CONNECTOR.MIMETYPE.' +\n            (filetype.mimetype === 'application/zip'\n              ? filetype.ccressourcetype +\n                '_' +\n                filetype.ccressourceversion +\n                '_' +\n                filetype.ccresourcesubtype\n              : filetype.mimetype) | translate\n        }}</mat-option\n      >\n    </mat-select>\n  </mat-form-field>\n</form>\n<div class=\"name\" *ngIf=\"name.trim()\">\n  {{ 'CONNECTOR.' + connector.id + '.FILENAME' | translate }}: {{ name }}.{{ getType().filetype }}\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { AddWithConnectorDialogComponent } from './add-with-connector-dialog.component';\n\nexport { AddWithConnectorDialogComponent };\n\n@NgModule({\n    declarations: [AddWithConnectorDialogComponent],\n    imports: [SharedModule],\n})\nexport class AddWithConnectorDialogModule {}\n"],"names":["AddWithConnectorDialogData","BehaviorSubject","first","DialogButton","CARD_DIALOG_DATA","Closable","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","i_r4","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","filetype_r3","mimetype","ccressourcetype","ccressourceversion","ccresourcesubtype","ɵɵtextInterpolate3","ctx_r2","connector","id","name","getType","filetype","AddWithConnectorDialogComponent","nameSubject","value","next","constructor","data","dialogRef","processConnector","type","initDialogConfig","cancel","close","create","trim","i","filetypes","length","creatable","splice","cancelButton","color","createButton","patchConfig","title","subtitle","avatar","kind","icon","buttons","subscribe","disabled","pipe","closable","Standard","_","ɵɵdirectiveInject","i1","CardDialogRef","_2","selectors","decls","vars","consts","template","AddWithConnectorDialogComponent_Template","rf","ctx","ɵɵlistener","AddWithConnectorDialogComponent_Template_input_ngModelChange_5_listener","$event","AddWithConnectorDialogComponent_Template_mat_select_ngModelChange_11_listener","ɵɵtemplate","AddWithConnectorDialogComponent_mat_option_12_Template","AddWithConnectorDialogComponent_div_13_Template","ɵɵtextInterpolate","ɵɵclassProp","SharedModule","AddWithConnectorDialogModule","_3","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}