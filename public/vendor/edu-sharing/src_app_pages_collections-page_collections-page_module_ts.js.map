{"version":3,"file":"src_app_pages_collections-page_collections-page_module_ts.js","mappings":"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","sources":["./src/app/pages/collections-page/collection-content/collection-content.component.ts","./src/app/pages/collections-page/collection-content/collection-content.component.html","./src/app/pages/collections-page/collection-info-bar/collection-info-bar.component.ts","./src/app/pages/collections-page/collection-info-bar/collection-info-bar.component.html","./src/app/pages/collections-page/collection-new/collection-new.component.ts","./src/app/pages/collections-page/collection-new/collection-new.component.html","./src/app/pages/collections-page/collection-proposals/collection-proposals.component.ts","./src/app/pages/collections-page/collection-proposals/collection-proposals.component.html","./src/app/pages/collections-page/collections-page-routing.module.ts","./src/app/pages/collections-page/collections-page.component.ts","./src/app/pages/collections-page/collections-page.component.html","./src/app/pages/collections-page/collections-page.module.ts","./src/app/pages/collections-page/infobar/infobar.component.ts","./src/app/pages/collections-page/infobar/infobar.component.html","./src/app/pages/collections-page/infobar/infobar.service.ts"],"sourcesContent":["import {\n    Component,\n    ContentChild,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n    AuthenticationService,\n    ConfigService,\n    MdsService,\n    Node,\n    ProposalNode,\n} from 'ngx-edu-sharing-api';\nimport {\n    ActionbarComponent,\n    CanDrop,\n    DragData,\n    DropSource,\n    FetchEvent,\n    InteractionType,\n    ListEventInterface,\n    ListItem,\n    ListItemSort,\n    ListSortConfig,\n    NodeClickEvent,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    NodesRightMode,\n    OptionItem,\n    OptionsHelperDataService,\n    Scope,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\nimport { Subject, forkJoin as observableForkJoin, forkJoin } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as EduData from '../../../core-module/core.module';\nimport {\n    CollectionReference,\n    ConfigurationHelper,\n    LoginResult,\n    NodeWrapper,\n    Permission,\n} from '../../../core-module/core.module';\nimport { Helper } from '../../../core-module/rest/helper';\nimport { MdsHelper } from '../../../core-module/rest/mds-helper';\nimport { RequestObject } from '../../../core-module/rest/request-object';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestHelper } from '../../../core-module/rest/rest-helper';\nimport { RestCollectionService } from '../../../core-module/rest/services/rest-collection.service';\nimport { RestNodeService } from '../../../core-module/rest/services/rest-node.service';\nimport { UIService } from '../../../core-module/rest/services/ui.service';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { Toast } from '../../../services/toast';\nimport { UIHelper } from '../../../core-ui-module/ui-helper';\nimport { DialogsService } from '../../../features/dialogs/dialogs.service';\nimport {\n    ManagementEvent,\n    ManagementEventType,\n} from '../../../features/management-dialogs/management-dialogs.component';\nimport { LoadingScreenService } from '../../../main/loading-screen/loading-screen.service';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\nimport { BridgeService } from '../../../services/bridge.service';\nimport { CollectionInfoBarComponent } from '../collection-info-bar/collection-info-bar.component';\nimport { InfobarService } from '../infobar/infobar.service';\n\n@Component({\n    selector: 'es-collection-content',\n    templateUrl: 'collection-content.component.html',\n    styleUrls: ['collection-content.component.scss'],\n})\nexport class CollectionContentComponent implements OnChanges, OnInit, OnDestroy {\n    private static DEFAULT_REQUEST = {\n        sortBy: [\n            RestConstants.CCM_PROP_COLLECTION_PINNED_STATUS,\n            RestConstants.CCM_PROP_COLLECTION_PINNED_ORDER,\n            RestConstants.CM_MODIFIED_DATE,\n        ],\n        sortAscending: [false, true, false],\n    };\n    referencesDisplayType = NodeEntriesDisplayType.Grid;\n    private readonly destroyed$ = new Subject<void>();\n    readonly ROUTER_PREFIX = UIConstants.ROUTER_PREFIX;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly InteractionType = InteractionType;\n    readonly Scope = Scope;\n\n    @Input() collection: Node;\n    /**\n     * you can subscribe to the clickItem event in case if you want to use emitter\n     */\n    @Input() interactionType: InteractionType = InteractionType.DefaultActionLink;\n    @Input() scope: string;\n    /**\n     * reference to the infobar component\n     * this is required if you want to interconnect it to have support for editing & managing the collection\n     * (the options service is inited in the content component)\n     */\n    @Input() getInfobar: () => CollectionInfoBarComponent;\n    @Input() isRootLevel: boolean;\n    @Input() createAllowed: () => boolean;\n    @Output() clickItem = new EventEmitter<NodeClickEvent<Node | CollectionReference>>();\n    @ContentChild('empty') emptyRef: TemplateRef<unknown>;\n    @ViewChild('actionbarReferences') actionbarReferences: ActionbarComponent;\n    @ViewChild('listReferences') listReferences: ListEventInterface<CollectionReference>;\n\n    private mainNavUpdateTrigger = new Subject<void>();\n    sortCollectionColumns: ListItemSort[] = [\n        new ListItemSort('NODE', RestConstants.CM_PROP_TITLE),\n        new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n        new ListItemSort('NODE', RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION, 'ascending'),\n    ];\n    createSubCollectionOptionItem = new OptionItem('OPTIONS.NEW_COLLECTION', 'layers', () =>\n        this.onCreateCollection(),\n    );\n    sortReferences: ListSortConfig = {\n        active: null,\n        direction: 'asc',\n        columns: [\n            // new ListItemSort('NODE', RestConstants.LOM_PROP_TITLE),\n            new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n            new ListItemSort('NODE', RestConstants.CM_PROP_C_CREATED),\n            new ListItemSort(\n                'NODE',\n                RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION,\n                'ascending',\n            ),\n        ],\n    };\n    sortCollections: ListSortConfig = {\n        active: null,\n        direction: 'asc',\n        columns: [\n            new ListItemSort('NODE', RestConstants.CM_PROP_TITLE),\n            new ListItemSort('NODE', RestConstants.CM_PROP_C_CREATED),\n            new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n            new ListItemSort(\n                'NODE',\n                RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION,\n                'ascending',\n            ),\n        ],\n    };\n    addMaterialSearchOptionItem = new OptionItem('OPTIONS.SEARCH_OBJECT', 'redo', () => {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            params.addToCollection = this.collection.ref.id;\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'search'], {\n                queryParams: params,\n            });\n        });\n    });\n    addMaterialBinaryOptionItem = new OptionItem('OPTIONS.ADD_OBJECT', 'cloud_upload', () => {\n        this.mainNavService.getMainNav().topBar.createMenu.openUploadSelect();\n    });\n    dataSourceCollections = new NodeDataSource<Node>();\n    dataSourceReferences = new NodeDataSource<CollectionReference>();\n    collectionsColumns: ListItem[] = [];\n    referencesColumns: ListItem[] = [];\n    private loadingTask = this.loadingScreen.addLoadingTask({ until: this.destroyed$ });\n\n    private contentNode: Node;\n    permissions: Permission[];\n    login: LoginResult;\n\n    constructor(\n        private authenticationService: AuthenticationService,\n        private bridge: BridgeService,\n        private collectionService: RestCollectionService,\n        private configurationService: ConfigService,\n        private dialogs: DialogsService,\n        private infobar: InfobarService,\n        private loadingScreen: LoadingScreenService,\n        private mainNavService: MainNavService,\n        private mdsService: MdsService,\n        private nodeHelper: NodeHelperService,\n        private nodeService: RestNodeService,\n        private optionsService: OptionsHelperDataService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private toast: Toast,\n        private translation: TranslateService,\n        private uiService: UIService,\n    ) {\n        this.sortCollectionColumns[this.sortCollectionColumns.length - 1].mode = 'ascending';\n        // this.collectionSortEmitter.subscribe((sort: SortEvent) => this.setCollectionSort(sort));\n        // this.collectionCustomSortEmitter.subscribe((state: boolean) => state ? this.toggleCollectionsOrder() : this.changeCollectionsOrder());\n        // this.referenceSortEmitter.subscribe((sort: SortEvent) => this.setReferenceSort(sort));\n        // this.referenceCustomSortEmitter.subscribe((state: boolean) => state ? this.toggleReferencesOrder() : this.changeReferencesOrder());\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'title'));\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'info'));\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'scope'));\n\n        this.mainNavService.getDialogs().onEvent.subscribe((event: ManagementEvent) => {\n            if (event.event === ManagementEventType.AddCollectionNodes) {\n                if (event.data.collection.ref.id === this.collection.ref.id) {\n                    this.listReferences.addVirtualNodes(event.data.references);\n                }\n            }\n        });\n        this.authenticationService\n            .observeLoginInfo()\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe((login) => {\n                this.login = login;\n                this.addMaterialBinaryOptionItem.isEnabled = login.toolPermissions.includes(\n                    RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_FILES,\n                );\n                this.createSubCollectionOptionItem.isEnabled = login.toolPermissions.includes(\n                    RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS,\n                );\n            });\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed$.next();\n        this.destroyed$.complete();\n    }\n\n    async ngOnInit() {\n        const mdsSets = await ConfigurationHelper.getAvailableMds(\n            RestConstants.HOME_REPOSITORY,\n            this.mdsService,\n            this.configurationService,\n        );\n        const set = await this.mdsService\n            .getMetadataSet({ metadataSet: mdsSets[0].id })\n            .toPromise();\n        this.referencesColumns = MdsHelper.getColumns(\n            this.translation,\n            set,\n            'collectionReferences',\n        );\n\n        this.optionsService.clearComponents(this.actionbarReferences);\n        this.registerMainNav();\n        this.mainNavUpdateTrigger.next();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.collection.currentValue) {\n            this.dataSourceCollections.reset();\n            this.dataSourceReferences.reset();\n\n            this.createSubCollectionOptionItem.name =\n                'OPTIONS.' + (this.isRootLevel ? 'NEW_COLLECTION' : 'NEW_SUB_COLLECTION');\n            if (this.isRootLevel) {\n                // display root collections with tabs\n\n                // Use hardcoded sorting for root collection.\n                this.sortCollections.active = RestConstants.CM_MODIFIED_DATE;\n                this.sortCollections.direction = 'desc';\n                // To respect sort configuration of the mds, we would need to wait for it here.\n                //\n                // const sort = metadataSet.sorts.find(sort => sort.id === 'collections');\n                // this.sortCollections.active = sort?.default?.sortBy ?? RestConstants.CM_MODIFIED_DATE;\n                // this.sortCollections.direction = sort?.default?.sortAscending ? 'asc' : 'desc';\n                this.refreshContent();\n            } else {\n                // load metadata of collection\n                this.dataSourceCollections.isLoading = true;\n                this.dataSourceReferences.isLoading = true;\n                // set the collection and load content data by refresh\n                const orderCollections =\n                    this.collection.properties[\n                        RestConstants.CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE\n                    ];\n                this.sortCollections.active =\n                    orderCollections?.[0] || RestConstants.CM_MODIFIED_DATE;\n\n                this.sortCollections.direction =\n                    orderCollections?.[0] === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION\n                        ? 'asc'\n                        : orderCollections?.[1] === 'true'\n                        ? 'asc'\n                        : 'desc';\n\n                const refMode = this.collection.collection.orderMode;\n                const refAscending = this.collection.collection.orderAscending;\n                // cast old order mode to new parameter\n                this.sortReferences.active = ((refMode ===\n                RestConstants.COLLECTION_ORDER_MODE_CUSTOM\n                    ? RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION\n                    : refMode) || RestConstants.CM_MODIFIED_DATE) as any;\n                this.sortReferences.direction =\n                    this.sortReferences.active === RestConstants.COLLECTION_ORDER_MODE_CUSTOM\n                        ? 'asc'\n                        : refAscending\n                        ? 'asc'\n                        : 'desc';\n                this.mainNavUpdateTrigger.next();\n                this.dataSourceCollections.isLoading = false;\n                this.setOptionsCollection();\n                this.refreshContent();\n                if (\n                    this.collection.access.indexOf(RestConstants.ACCESS_CHANGE_PERMISSIONS) !== -1\n                ) {\n                    this.nodeService\n                        .getNodePermissions(this.collection.ref.id)\n                        .subscribe((permissions) => {\n                            this.permissions =\n                                permissions.permissions.localPermissions.permissions.concat(\n                                    permissions.permissions.inheritedPermissions,\n                                );\n                        });\n                }\n            }\n        }\n    }\n\n    isUserAllowedToEdit(collection: Node) {\n        return RestHelper.isUserAllowedToEdit(collection);\n    }\n\n    isAllowedToEditCollection() {\n        if (this.isRootLevel) {\n            return !this.login?.isGuest; //this.tabSelected === RestConstants.COLLECTIONSCOPE_MY\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n    onCreateCollection() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'new',\n                    this.collection.ref.id,\n                ],\n                { queryParams: params },\n            );\n        });\n    }\n    canDropOnCollectionBreadcrumbs = (dropData: DragData<Node | 'HOME'>): CanDrop => {\n        const nodes = dropData.draggedNodes;\n        const target = dropData.target;\n        if (target === 'HOME') {\n            const accept =\n                dropData.action === 'move' &&\n                nodes[0].aspects.indexOf(RestConstants.CCM_ASPECT_COLLECTION) !== -1 &&\n                this.nodeHelper.getNodesRight(nodes, RestConstants.ACCESS_WRITE);\n            return {\n                accept,\n                denyExplicit: !accept,\n            };\n        }\n        if (\n            nodes[0].ref.id === (target as Node).ref.id ||\n            (target as Node).ref.id === this.collection.ref.id ||\n            (nodes[0].collection && dropData.action === 'copy')\n        ) {\n            return {\n                accept: false,\n            };\n        }\n        // do not allow to move anything else than editorial collections into editorial collections (if the source is a collection)\n        if (nodes[0].collection?.hasOwnProperty('childCollectionsCount')) {\n            if (\n                (nodes[0].collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL &&\n                    (target as Node).collection.type !== RestConstants.COLLECTIONTYPE_EDITORIAL) ||\n                (nodes[0].collection.type !== RestConstants.COLLECTIONTYPE_EDITORIAL &&\n                    (target as Node).collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL)\n            ) {\n                return {\n                    accept: false,\n                };\n            }\n        }\n        if (\n            (dropData.action === 'copy' &&\n                !this.nodeHelper.getNodesRight(\n                    nodes,\n                    RestConstants.ACCESS_CC_PUBLISH,\n                    NodesRightMode.Effective,\n                )) ||\n            (dropData.action === 'move' &&\n                !this.nodeHelper.getNodesRight(\n                    nodes,\n                    RestConstants.ACCESS_WRITE,\n                    NodesRightMode.Local,\n                ))\n        ) {\n            return {\n                accept: false,\n            };\n        }\n\n        return {\n            accept: this.nodeHelper.getNodesRight(\n                [target],\n                RestConstants.ACCESS_WRITE,\n                NodesRightMode.Local,\n            ),\n        };\n    };\n\n    canDropOnCollection = (dropData: DragData<Node>): CanDrop => {\n        return this.canDropOnCollectionBreadcrumbs(dropData);\n    };\n\n    canDropOnRef = (dragData: DragData<CollectionReference>): CanDrop => {\n        // do not allow to drop here\n        return {\n            accept: false,\n        };\n    };\n\n    dropOnRef = (target: Node, source: DropSource<CollectionReference>) => {\n        return;\n    };\n    dropOnCollection = (target: Node | 'HOME', source: DropSource<Node>) => {\n        if (source.element[0] === target) {\n            return;\n        }\n        this.toast.showProgressSpinner();\n        if (source.element[0].mediatype === 'collection') {\n            if (source.mode === 'copy') {\n                this.toast.error(null, 'INVALID_OPERATION');\n                this.toast.closeProgressSpinner();\n                return;\n            }\n            this.nodeService\n                .moveNode(\n                    (target as Node)?.ref?.id || RestConstants.COLLECTIONHOME,\n                    source.element[0].ref.id,\n                )\n                .subscribe(\n                    () => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                    (error) => {\n                        this.handleError(error);\n                        this.toast.closeProgressSpinner();\n                    },\n                );\n        } else {\n            if (source.mode === 'copy') {\n                UIHelper.addToCollection(\n                    this.nodeHelper,\n                    this.collectionService,\n                    this.router,\n                    this.bridge,\n                    target as Node,\n                    source.element,\n                    false,\n                    (nodes) => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                );\n            } else if (source.mode === 'move') {\n                forkJoin(\n                    source.element.map((toMove) =>\n                        this.nodeService.moveNode(\n                            (target as Node)?.ref?.id || RestConstants.COLLECTIONHOME,\n                            toMove.ref.id,\n                        ),\n                    ),\n                ).subscribe(\n                    () => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                    (error) => {\n                        this.handleError(error);\n                        this.toast.closeProgressSpinner();\n                    },\n                );\n            } else {\n                this.toast.error(null, 'INVALID_OPERATION');\n            }\n        }\n    };\n    private handleError(error: any) {\n        if (error.status === RestConstants.DUPLICATE_NODE_RESPONSE) {\n            this.toast.error(null, 'COLLECTIONS.ERROR_NODE_EXISTS');\n        } else {\n            this.toast.error(error);\n        }\n    }\n\n    async onContentClick(event: NodeClickEvent<CollectionReference | ProposalNode>): Promise<void> {\n        this.contentNode = event.element;\n        if (event.element.type === RestConstants.CCM_TYPE_COLLECTION_PROPOSAL) {\n            this.clickElementEvent(event);\n        } else if ((event.element as CollectionReference).originalId == null) {\n            const dialogRef = await this.dialogs.openGenericDialog({\n                title: 'COLLECTIONS.ORIGINAL_MISSING',\n                message: 'COLLECTIONS.ORIGINAL_MISSING_INFO',\n                buttons: [\n                    ...(this.isAllowedToDeleteNodes([event.element])\n                        ? [{ label: 'OPTIONS.REMOVE_REF', config: { color: 'standard' as const } }]\n                        : []),\n                    { label: 'COLLECTIONS.OPEN_MISSING', config: { color: 'primary' } },\n                ],\n            });\n            dialogRef.afterClosed().subscribe((response) => {\n                if (response === 'OPTIONS.REMOVE_REF') {\n                    this.deleteFromCollection();\n                } else if (response === 'COLLECTIONS.OPEN_MISSING') {\n                    this.clickElementEvent(event);\n                }\n            });\n        } else {\n            this.clickElementEvent(event);\n        }\n    }\n\n    private clickElementEvent(event: NodeClickEvent<CollectionReference | ProposalNode>) {\n        if (this.interactionType === InteractionType.DefaultActionLink) {\n            this.nodeService\n                .getNodeMetadata(event.element.ref.id)\n                .subscribe((data: NodeWrapper) => {\n                    this.contentNode = data.node;\n                    this.router.navigate([\n                        UIConstants.ROUTER_PREFIX + 'render',\n                        event.element.ref.id,\n                    ]);\n                });\n        } else {\n            this.clickItem.emit(event);\n        }\n    }\n\n    private isAllowedToDeleteNodes(nodes: Node[]) {\n        return (\n            this.isAllowedToDeleteCollection() ||\n            this.nodeHelper.getNodesRight(nodes, RestConstants.ACCESS_DELETE)\n        );\n    }\n    isAllowedToDeleteCollection(): boolean {\n        if (this.isRootLevel) {\n            return false;\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_DELETE);\n    }\n\n    private deleteFromCollection(callback: Function = null) {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .removeFromCollection(this.contentNode.ref.id, this.collection.ref.id)\n            .subscribe(\n                () => {\n                    if (!('proposal' in this.collection)) {\n                        this.toast.toast('COLLECTIONS.REMOVED_FROM_COLLECTION');\n                    }\n                    this.toast.closeProgressSpinner();\n                    this.refreshContent();\n                    if (callback) {\n                        callback();\n                    }\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    private registerMainNav(): void {\n        this.mainNavService.setMainNavConfig({\n            title: 'COLLECTIONS.TITLE',\n            currentScope: 'collections',\n            onCreate: (nodes) => this.addNodesToCollection(nodes),\n        });\n        this.mainNavService.onConnectorCreated\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe((node) => this.addNodesToCollection([node]));\n        this.mainNavUpdateTrigger.pipe(takeUntil(this.destroyed$)).subscribe(async () => {\n            this.mainNavService.patchMainNavConfig({\n                create: {\n                    allowed: this.createAllowed(),\n                    allowBinary: !this.isRootLevel && (await this.isAllowedToEditCollection()),\n                    parent: this.collection ?? null,\n                },\n            });\n        });\n    }\n\n    private refreshContent() {\n        this.dataSourceCollections.reset();\n        this.dataSourceReferences.reset();\n        this.listReferences?.getSelection().clear();\n        this.dataSourceCollections.isLoading = true;\n        this.dataSourceReferences.isLoading = true;\n\n        // set correct scope\n        const request: RequestObject = Helper.deepCopy(CollectionContentComponent.DEFAULT_REQUEST);\n        if (this.sortCollections?.active) {\n            request.sortBy = [this.sortCollections.active];\n\n            request.sortAscending = [this.sortCollections.direction === 'asc'];\n        } else {\n            console.warn('Sort for collections is not defined in the mds!');\n        }\n        // when loading child collections, we load all of them\n        if (!this.isRootLevel) {\n            request.count = RestConstants.COUNT_UNLIMITED;\n        } else {\n            // on root level, obey pinned order if collections are pinned\n            request.sortBy = [\n                RestConstants.CCM_PROP_COLLECTION_PINNED_STATUS,\n                RestConstants.CCM_PROP_COLLECTION_PINNED_ORDER,\n                ...request.sortBy,\n            ];\n            request.sortAscending = [false, true, ...request.sortAscending];\n        }\n        this.collectionService\n            .getCollectionSubcollections(\n                this.collection.ref.id,\n                this.scope,\n                [],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe(\n                (collection) => {\n                    // transfere sub collections and content\n                    this.dataSourceCollections.setData(\n                        collection.collections,\n                        collection.pagination,\n                    );\n                    this.dataSourceCollections.isLoading = false;\n                    if (this.isRootLevel) {\n                        this.finishCollectionLoading();\n                        return;\n                    }\n                    const requestRefs = this.getReferencesRequest();\n                    requestRefs.count = null;\n                    this.collectionService\n                        .getCollectionReferences(\n                            this.collection.ref.id,\n                            [RestConstants.ALL],\n                            requestRefs,\n                            this.collection.ref.repo,\n                        )\n                        .subscribe((refs) => {\n                            this.dataSourceReferences.setData(refs.references, refs.pagination);\n                            this.dataSourceReferences.isLoading = false;\n                            this.finishCollectionLoading();\n                        });\n                },\n                (error: any) => {\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    isMobile() {\n        return this.uiService.isMobile();\n    }\n    async setReferenceSort(sort: ListSortConfig) {\n        const diff = Helper.getKeysWithDifferentValues(this.sortReferences, sort);\n        this.sortReferences = sort;\n        // auto activate the custom sorting when the users switch to \"custom order\"\n        if (diff.includes('active')) {\n            this.sortReferences.customSortingInProgress =\n                this.sortReferences.active === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION;\n        }\n        this.toggleReferencesOrder();\n        if (this.sortReferences.customSortingInProgress) {\n            await this.loadMoreReferences({\n                reset: true,\n                amount: RestConstants.COUNT_UNLIMITED,\n                offset: 0,\n            });\n        }\n        if (diff.includes('customSortingInProgress') && sort.customSortingInProgress) {\n            return;\n        }\n\n        try {\n            await this.nodeService\n                .editNodeProperty(\n                    this.collection.ref.id,\n                    RestConstants.CCM_PROP_COLLECTION_ORDER_MODE,\n                    [sort.active, (sort.direction === 'asc') + ''],\n                )\n                .toPromise();\n            if (sort.active !== RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n                this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_TYPE', {\n                    type: this.translation.instant('NODE.' + sort.active),\n                });\n            }\n        } catch (e) {\n            this.toast.error(e);\n        }\n        this.refreshContent();\n    }\n\n    private getReferencesRequest(): RequestObject {\n        return {\n            sortBy: [this.sortReferences.active],\n            sortAscending: [this.sortReferences.direction === 'asc'],\n        };\n    }\n\n    async loadMoreReferences(event: FetchEvent) {\n        if (!(await this.dataSourceReferences.hasMore()) || this.dataSourceReferences.isLoading) {\n            return;\n        }\n        const request = this.getReferencesRequest();\n        request.offset = event.offset ?? (await this.dataSourceReferences.getData()).length;\n        if (event.amount != null) {\n            request.count = event.amount;\n        }\n        if (event.reset) {\n            this.dataSourceReferences.reset();\n        }\n        this.dataSourceReferences.isLoading = true;\n        this.collectionService\n            .getCollectionReferences(\n                this.collection.ref.id,\n                [RestConstants.ALL],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe((refs) => {\n                this.dataSourceReferences.appendData(refs.references);\n                this.dataSourceReferences.isLoading = false;\n            });\n    }\n\n    async loadMoreCollections() {\n        if (!(await this.dataSourceCollections.hasMore()) || this.dataSourceCollections.isLoading) {\n            return;\n        }\n        const request: any = Helper.deepCopy(CollectionContentComponent.DEFAULT_REQUEST);\n        request.offset = (await this.dataSourceCollections.getData()).length;\n        this.dataSourceCollections.isLoading = true;\n        this.collectionService\n            .getCollectionSubcollections(\n                this.collection.ref.id,\n                this.scope,\n                [],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe((refs) => {\n                this.dataSourceCollections.appendData(refs.collections);\n                this.dataSourceCollections.isLoading = false;\n            });\n    }\n\n    private finishCollectionLoading(callback?: () => void) {\n        this.mainNavService.getMainNav()?.refreshBanner();\n\n        // Cannot trivially reference the add button for the tutorial with\n        // current implementation of generic options.\n        //\n        // TODO: Decide whether to keep the tutorial as it was and implement a\n        // way to reference the option button if necessary.\n\n        // if (\n        //     this.getCollectionId() == RestConstants.ROOT &&\n        //     this.isAllowedToEditCollection()\n        // ) {\n        //     setTimeout(() => {\n        //         this.tutorialElement = this.listCollections.addElementRef;\n        //     });\n        // }\n        if (callback) {\n            callback();\n        }\n        setTimeout(() => {\n            this.setOptionsCollection();\n            this.listReferences?.initOptionsGenerator({\n                actionbar: this.actionbarReferences,\n                parent: this.collection,\n            });\n            if (!this.loadingTask.isDone) {\n                this.loadingTask.done();\n            }\n        });\n    }\n\n    deleteReference(content: EduData.CollectionReference | EduData.Node) {\n        this.contentNode = content;\n        this.deleteFromCollection();\n    }\n\n    async setCollectionSort(sort: ListSortConfig) {\n        this.sortCollections = sort;\n        try {\n            await this.nodeService\n                .editNodeProperty(\n                    this.collection.ref.id,\n                    RestConstants.CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE,\n                    [this.sortCollections.active, (this.sortCollections.direction === 'asc') + ''],\n                )\n                .toPromise();\n        } catch (e) {\n            this.toast.error(e);\n        }\n        this.refreshContent();\n        if (sort.active !== RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n            this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_TYPE', {\n                type: this.translation.instant('NODE.' + sort.active),\n            });\n        }\n        if (this.sortCollections.active === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n            void this.toggleCollectionsOrder();\n        } else {\n            this.infobar.close();\n        }\n    }\n\n    private setOptionsCollection() {\n        this.optionsService.setData({\n            scope: Scope.CollectionsCollection,\n            activeObjects: [this.collection],\n        });\n        this.optionsService.initComponents(this.getInfobar()?.actionbar, this.listReferences);\n        this.optionsService.refreshComponents();\n    }\n\n    async toggleCollectionsOrder() {\n        if (this.sortCollections.customSortingInProgress) {\n            const response = await this.infobar.open({\n                title: 'COLLECTIONS.ORDER_COLLECTIONS',\n                message: 'COLLECTIONS.ORDER_COLLECTIONS_INFO',\n                buttons: [{ label: 'SAVE', config: { color: 'primary' } }],\n            });\n            console.log('response', response);\n            if (response === 'SAVE') {\n                return this.changeCollectionsOrder();\n            } else {\n                this.sortCollections.customSortingInProgress = false;\n            }\n        } else {\n            this.infobar.close();\n        }\n        this.refreshContent();\n    }\n\n    async toggleReferencesOrder() {\n        if (this.sortReferences.customSortingInProgress) {\n            const response = await this.infobar.open({\n                title: 'COLLECTIONS.ORDER_ELEMENTS',\n                message: 'COLLECTIONS.ORDER_ELEMENTS_INFO',\n                buttons: [{ label: 'SAVE', config: { color: 'primary' } }],\n            });\n            this.sortReferences.customSortingInProgress = false;\n            if (response === 'SAVE') {\n                void this.changeReferencesOrder();\n                this.listReferences.getSelection().clear();\n            } else {\n                this.refreshContent();\n            }\n        } else {\n            this.infobar.close();\n        }\n    }\n\n    addNodesToCollection(nodes: Node[], allowDuplicate: boolean | 'ignore' = false) {\n        this.toast.showProgressSpinner();\n        UIHelper.addToCollection(\n            this.nodeHelper,\n            this.collectionService,\n            this.router,\n            this.bridge,\n            this.collection,\n            nodes,\n            false,\n            () => {\n                this.refreshContent();\n                this.toast.closeProgressSpinner();\n            },\n            allowDuplicate,\n        );\n    }\n\n    private async changeReferencesOrder() {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .setOrder(\n                this.collection.ref.id,\n                RestHelper.getNodeIds(await this.dataSourceReferences.getData()),\n            )\n            .subscribe(\n                () => {\n                    this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_CUSTOM');\n                    this.toast.closeProgressSpinner();\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    private async changeCollectionsOrder() {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .setOrder(\n                this.collection.ref.id,\n                RestHelper.getNodeIds(await this.dataSourceCollections.getData()),\n            )\n            .subscribe(\n                () => {\n                    this.sortCollections.customSortingInProgress = false;\n                    this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_CUSTOM');\n                    this.toast.closeProgressSpinner();\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    canDelete(node: EduData.CollectionReference) {\n        return RestHelper.hasAccessPermission(node, 'Delete');\n    }\n\n    isDeleted(node: CollectionReference) {\n        return (\n            node.aspects.includes(RestConstants.CCM_ASPECT_IO_REFERENCE) &&\n            !node.aspects.includes(RestConstants.CCM_ASPECT_REMOTEREPOSITORY) &&\n            !node.originalId\n        );\n    }\n}\n","<div role=\"main\" esSkipTarget=\"MAIN_CONTENT\" class=\"collections-master-div\">\n  <section class=\"collections-cards-div\">\n    <div\n      class=\"collections-wrapper\"\n      [class.wrapper-empty]=\"dataSourceCollections.isEmpty()\"\n      [class.wrapper-edit]=\"isUserAllowedToEdit(collection)\"\n    >\n      <es-node-entries-wrapper\n        [dataSource]=\"dataSourceCollections\"\n        [elementInteractionType]=\"interactionType\"\n        [columns]=\"collectionsColumns\"\n        (clickItem)=\"clickItem.emit($event)\"\n        (fetchData)=\"loadMoreCollections()\"\n        [displayType]=\"NodeEntriesDisplayType.SmallGrid\"\n        [globalOptions]=\"createAllowed() ? [createSubCollectionOptionItem] : []\"\n        [dragDrop]=\"{\n          dragAllowed: isAllowedToEditCollection(),\n          dropAllowed: canDropOnCollection,\n          dropped: dropOnCollection\n        }\"\n        [sort]=\"{\n          active: sortCollections.active,\n          direction: sortCollections.direction,\n          customSortingInProgress: sortCollections.customSortingInProgress,\n          columns: sortCollections.columns,\n          allowed:\n            !isMobile() &&\n            dataSourceCollections.getData()?.length > 1 &&\n            isUserAllowedToEdit(collection) &&\n            !sortReferences?.customSortingInProgress\n        }\"\n        (sortChange)=\"setCollectionSort($event)\"\n      >\n        <ng-template #title>\n          <div class=\"heading-group\">\n            <h2\n              class=\"mat-heading-3\"\n              *ngIf=\"isAllowedToEditCollection() || !dataSourceCollections.isEmpty()\"\n            >\n              <ng-container *ngIf=\"isRootLevel\">{{\n                'COLLECTIONS.TAB.' + scope + '_LONG' | translate\n              }}</ng-container>\n              <ng-container *ngIf=\"!isRootLevel\">{{\n                'COLLECTION.INFO_REFERENCES_MULTI' | translate\n              }}</ng-container>\n            </h2>\n          </div>\n        </ng-template>\n        <ng-template #empty>\n          <div\n            *ngIf=\"!createAllowed()\"\n            class=\"collection-nocontent-container collection-nocontent-big\"\n          >\n            <ng-container *ngTemplateOutlet=\"emptyRef\"></ng-container>\n          </div>\n        </ng-template>\n      </es-node-entries-wrapper>\n      <div\n        *ngIf=\"!isRootLevel && dataSourceCollections.isEmpty() && !dataSourceCollections.isLoading\"\n        class=\"section-headline collection-nocontent-container\"\n      >\n        <div class=\"collection-nocontent-small\" *ngIf=\"isUserAllowedToEdit(collection)\">\n          {{ 'COLLECTIONS.NO_SUBCOLLECTIONS_HINT' | translate }}\n        </div>\n      </div>\n    </div>\n  </section>\n  <ng-container *ngIf=\"!isRootLevel\">\n    <es-collection-proposals\n      [collection]=\"collection\"\n      [canEdit]=\"isAllowedToEditCollection()\"\n      (onContentClick)=\"onContentClick($any($event))\"\n    ></es-collection-proposals>\n    <section class=\"collections-cards-div\" *ngIf=\"!isRootLevel\">\n      <es-actionbar\n        #actionbarReferences\n        class=\"actionbarMaterials\"\n        [numberOfAlwaysVisibleOptions]=\"1\"\n      ></es-actionbar>\n      <div\n        class=\"references-wrapper\"\n        [class.wrapper-table]=\"referencesDisplayType === NodeEntriesDisplayType.Table\"\n        [class.wrapper-empty]=\"dataSourceReferences.isEmpty()\"\n        [class.wrapper-edit]=\"isUserAllowedToEdit(collection)\"\n      >\n        <es-node-entries-wrapper\n          #listReferences\n          [elementInteractionType]=\"InteractionType.Emitter\"\n          [dataSource]=\"dataSourceReferences\"\n          [scope]=\"Scope.CollectionsReferences\"\n          [primaryInstance]=\"true\"\n          [columns]=\"referencesColumns\"\n          [(displayType)]=\"referencesDisplayType\"\n          [dragDrop]=\"{\n            dragAllowed: isAllowedToEditCollection(),\n            dropAllowed: canDropOnRef,\n            dropped: dropOnRef\n          }\"\n          [sort]=\"{\n            active: sortReferences.active,\n            direction: sortReferences.direction,\n            customSortingInProgress: sortReferences.customSortingInProgress,\n            columns: sortReferences.columns,\n            allowed:\n              !isMobile() &&\n              dataSourceReferences.getData()?.length > 1 &&\n              isUserAllowedToEdit(collection) &&\n              !sortCollections?.customSortingInProgress\n          }\"\n          (clickItem)=\"onContentClick($event)\"\n          (sortChange)=\"setReferenceSort($event)\"\n          [globalOptions]=\"\n            isUserAllowedToEdit(collection)\n              ? [addMaterialSearchOptionItem, addMaterialBinaryOptionItem]\n              : []\n          \"\n          (fetchData)=\"loadMoreReferences($event)\"\n        >\n          <ng-template #title>\n            <div class=\"content-header heading-group\">\n              <h2 class=\"mat-heading-3\">\n                {{ 'collections_content' | translate }}\n              </h2>\n            </div>\n          </ng-template>\n          <ng-template #overlay let-element=\"element\">\n            <div class=\"node-deleted\" *ngIf=\"isDeleted(element)\">\n              <div>\n                <i esIcon=\"delete\"></i>\n                <div class=\"headline\">{{ 'ORIGINAL_DELETED' | translate }}</div>\n                <div class=\"subline\">{{ 'ORIGINAL_DELETED_INFO' | translate }}</div>\n                <button\n                  mat-button\n                  color=\"primary\"\n                  (click)=\"\n                    deleteReference(element); $event.stopPropagation(); $event.preventDefault()\n                  \"\n                  *ngIf=\"canDelete(element)\"\n                >\n                  {{ 'ORIGINAL_DELETE' | translate }}\n                </button>\n              </div>\n            </div>\n          </ng-template>\n        </es-node-entries-wrapper>\n        <div\n          *ngIf=\"!dataSourceReferences.isLoading && dataSourceReferences.isEmpty()\"\n          class=\"section-headline collection-nocontent-container\"\n        >\n          <div class=\"collection-nocontent-big\">\n            {{ 'collections_noContentAvailable' | translate }}\n          </div>\n          <div class=\"collection-nocontent-small\" *ngIf=\"isUserAllowedToEdit(collection)\">\n            {{ 'collections_howToAddContent' | translate }}\n          </div>\n        </div>\n      </div>\n    </section>\n  </ng-container>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport { Node, NodeService, NodeStats } from 'ngx-edu-sharing-api';\nimport { RestHelper } from '../../../core-module/rest/rest-helper';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { Permission } from '../../../core-module/rest/data-object';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { ActionbarComponent, ColorHelper, PreferredColor } from 'ngx-edu-sharing-ui';\nimport { MdsViewerComponent } from '../../../features/mds/mds-viewer/mds-viewer.component';\n\n@Component({\n    selector: 'es-collection-info-bar',\n    templateUrl: 'collection-info-bar.component.html',\n    styleUrls: ['collection-info-bar.component.scss'],\n})\nexport class CollectionInfoBarComponent implements OnChanges {\n    @ViewChild('actionbar') actionbar: ActionbarComponent;\n    @ViewChild('mds') mds: MdsViewerComponent;\n    @Input() collection: Node;\n    @Input() permissions: Permission[];\n    @Output() edit = new EventEmitter<void>();\n    stats: NodeStats;\n\n    constructor(private nodeHelper: NodeHelperService, private nodeService: NodeService) {}\n\n    async ngOnChanges(changes: SimpleChanges) {\n        if (changes.collection.currentValue) {\n            if (this.collection.access.includes(RestConstants.ACCESS_CHANGE_PERMISSIONS)) {\n                this.stats = await this.nodeService.getStats(this.collection.ref.id).toPromise();\n            }\n        }\n    }\n\n    isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.collection?.collection?.color) ===\n            PreferredColor.White\n        );\n    }\n\n    hasNonIconPreview(): boolean {\n        const preview = this.collection?.preview;\n        return preview && !preview.isIcon;\n    }\n\n    isAllowedToEditCollection() {\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n\n    getScopeInfo() {\n        return this.nodeHelper.getCollectionScopeInfo(this.collection);\n    }\n}\n","<div\n  role=\"complementary\"\n  [attr.aria-label]=\"'COLLECTIONS.DETAILS' | translate\"\n  class=\"collections-header\"\n  [class.dark-color]=\"isBrightColor()\"\n  [style.background-color]=\"collection?.collection?.color\"\n>\n  <div\n    class=\"card-collection-image-container\"\n    [class.card-collection-icon-container]=\"!hasNonIconPreview()\"\n    style=\"width: 100%\"\n  >\n    <div\n      *ngIf=\"!hasNonIconPreview()\"\n      style=\"width: 250px; height: 200px; margin-left: auto; margin-right: auto\"\n    >\n      <div class=\"card-image-icon-container\">\n        <div\n          class=\"card-image-icon-circle\"\n          [style.cursor]=\"isAllowedToEditCollection() ? 'pointer' : 'auto'\"\n          (click)=\"edit.emit()\"\n        >\n          <i esIcon=\"layers\"></i>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"hasNonIconPreview()\" class=\"card-image-icon-container\">\n      <img\n        role=\"presentation\"\n        class=\"blurred-image\"\n        [src]=\"collection | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true } | async\"\n      />\n      <img\n        *ngIf=\"collection?.preview?.url\"\n        [src]=\"collection | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true } | async\"\n        class=\"collection-header-image\"\n        role=\"presentation\"\n      />\n    </div>\n    <!-- Making the image area clickable poses a violation of accessibility rules. Merge\n    christopher/fix/image-click-areas to remove. -->\n    <div\n      *ngIf=\"isAllowedToEditCollection()\"\n      (click)=\"edit.emit()\"\n      role=\"presentation\"\n      class=\"big-edit-button\"\n    ></div>\n  </div>\n  <div\n    class=\"collections-header-textarea\"\n    [class.collections-header-textarea-bright]=\"isBrightColor()\"\n  >\n    <div class=\"collection-option\">\n      <es-actionbar\n        #actionbar\n        [numberOfAlwaysVisibleOptions]=\"1\"\n        [numberOfAlwaysVisibleOptionsMobile]=\"1\"\n        appearance=\"round\"\n        [style]=\"'flat'\"\n        [dropdownPosition]=\"'right'\"\n      ></es-actionbar>\n    </div>\n    <h1\n      esTitle\n      class=\"collection-new-preview-headline collections-header-texttop\"\n      style=\"overflow: hidden\"\n    >\n      {{ collection?.title }}\n    </h1>\n\n    <div\n      *ngIf=\"collection?.collection?.childCollectionsCount\"\n      class=\"collection-new-preview-subline collections-header-texttop\"\n    >\n      {{ collection.collection.childCollectionsCount }}\n      {{ 'COLLECTION.INFO_REFERENCES_MULTI' | translate }}\n    </div>\n    <div\n      *ngIf=\"collection?.collection?.childReferencesCount\"\n      class=\"collection-new-preview-subline collections-header-texttop\"\n    >\n      {{ collection.collection.childReferencesCount }}\n      {{ 'COLLECTION.INFO_CHILDS_MULTI' | translate }}\n    </div>\n\n    <div class=\"collection-new-preview-infoline\">\n      <i\n        esIcon=\"person\"\n        class=\"icon-bottom\"\n        [altText]=\"('COLLECTIONS.CREATOR' | translate) + ': '\"\n      ></i>\n      &nbsp;\n      <span *ngIf=\"!collection?.collection?.authorFreetext\">{{\n        collection.owner | authorityName\n      }}</span>\n      <span *ngIf=\"collection?.collection?.authorFreetext\">{{\n        collection.collection.authorFreetext\n      }}</span>\n    </div>\n\n    <div class=\"collection-new-preview-infoline\">\n      <i\n        [esIcon]=\"getScopeInfo().icon\"\n        class=\"icon-bottom\"\n        [altText]=\"('COLLECTIONS.SHARING_STATE' | translate) + ': '\"\n      ></i>\n      &nbsp;{{ 'COLLECTION.SCOPE.' + getScopeInfo().scopeName | translate }}\n    </div>\n    <div class=\"collection-permissions collection-label\"></div>\n    <div class=\"collections-metadata\">\n      <es-mds-viewer\n        #mds\n        *ngIf=\"collection?.properties\"\n        groupId=\"collection_sidebar\"\n        [data]=\"collection.properties\"\n        [headingLevel]=\"2\"\n      ></es-mds-viewer>\n    </div>\n\n    <ng-container *ngIf=\"collection?.access?.indexOf('ChangePermissions') !== -1 && permissions\">\n      <h2 class=\"collection-permissions collection-label\">\n        {{ 'COLLECTIONS.PERMISSIONS' | translate }}\n      </h2>\n      <div class=\"collection-permissions collection-content\">\n        <div *ngFor=\"let permission of permissions\">\n          <ng-container *ngIf=\"permission.authority.authorityType !== 'EVERYONE'\">\n            <es-user-avatar [user]=\"permission\" size=\"xsmall\"></es-user-avatar>\n            <span>{{\n              (permission.authority.authorityType === 'GROUP' ? permission.group : permission.user)\n                | authorityName\n            }}</span>\n          </ng-container>\n        </div>\n      </div>\n      <ng-container *ngIf=\"stats\">\n        <h2 class=\"collection-permissions collection-label\">\n          {{ 'COLLECTIONS.STATS.TOTAL' | translate }}\n        </h2>\n        <div class=\"collection-stats collection-content\">\n          {{ stats.total['VIEW_COLLECTION'] }}\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n","import {\n    ApplicationRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    ViewChild,\n} from '@angular/core';\n\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport {\n    ColorHelper,\n    DefaultGroups,\n    InteractionType,\n    ListItem,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    NodeEntriesWrapperComponent,\n    OptionItem,\n    PreferredColor,\n    TranslationsService,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\n\nimport * as EduData from '../../../core-module/core.module';\nimport {\n    ConfigurationHelper,\n    ConfigurationService,\n    DialogButton,\n    EventListener,\n    FrameEventsService,\n    IamGroups,\n    IamUser,\n    LocalPermissions,\n    Node,\n    NodeRef,\n    Permission,\n    RestCollectionService,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestMdsService,\n    RestMediacenterService,\n    RestNodeService,\n    TemporaryStorageService,\n    UIService,\n    User,\n} from '../../../core-module/core.module';\nimport { Toast } from '../../../services/toast';\nimport { ConfigService, Group } from 'ngx-edu-sharing-api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { UIHelper } from '../../../core-ui-module/ui-helper';\nimport { AuthorityNamePipe } from '../../../shared/pipes/authority-name.pipe';\nimport { BridgeService } from '../../../services/bridge.service';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { Observable, Subject } from 'rxjs';\nimport { PlatformLocation } from '@angular/common';\nimport { LoadingScreenService } from '../../../main/loading-screen/loading-screen.service';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\nimport { MdsEditorWrapperComponent } from '../../../features/mds/mds-editor/mds-editor-wrapper/mds-editor-wrapper.component';\nimport { Values } from '../../../features/mds/types/types';\nimport { DialogsService } from '../../../features/dialogs/dialogs.service';\nimport { ShareDialogResult } from '../../../features/dialogs/dialog-modules/share-dialog/share-dialog-data';\n\ntype Step = 'NEW' | 'GENERAL' | 'METADATA' | 'PERMISSIONS' | 'SETTINGS' | 'EDITORIAL_GROUPS';\n\n// component class\n@Component({\n    selector: 'es-collection-new',\n    templateUrl: 'collection-new.component.html',\n    styleUrls: ['collection-new.component.scss'],\n})\nexport class CollectionNewComponent implements EventListener, OnInit, OnDestroy {\n    @ViewChild('mds') mds: MdsEditorWrapperComponent;\n    @ViewChild('organizations') organizationsRef: NodeEntriesWrapperComponent<Group>;\n    readonly InteractionType = InteractionType;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    public hasCustomScope: boolean;\n    public COLORS: string[];\n    public DEFAULT_COLORS: string[] = [\n        '#975B5D',\n        '#692426',\n        '#E6B247',\n        '#A89B39',\n        '#699761',\n        '#32662A',\n        '#60998F',\n        '#29685C',\n        '#759CB7',\n        '#537997',\n        '#976097',\n        '#692869',\n    ];\n    public isLoading = true;\n    currentCollection: EduData.Node;\n    public newCollectionType: string;\n    public properties: Values = {};\n    user: User;\n    public mainnav = true;\n    permissions: LocalPermissions = null;\n    public canInvite: boolean;\n    public shareToAll: boolean;\n    public createEditorial = false;\n    public createCurriculum = false;\n    public createMediacenter = false;\n    public mediacenter: any;\n    public parentId: any;\n    public editId: any;\n    public editorialGroups = new NodeDataSource<Group>();\n    public editorialPublic = true;\n    public editorialColumns: ListItem[] = [\n        new ListItem('GROUP', RestConstants.AUTHORITY_DISPLAYNAME),\n    ];\n    imageData: string | SafeUrl = null;\n    private imageFile: File = null;\n    readonly STEP_NEW = 'NEW';\n    readonly STEP_GENERAL = 'GENERAL';\n    readonly STEP_METADATA = 'METADATA';\n    readonly STEP_PERMISSIONS = 'PERMISSIONS';\n    private STEP_SETTINGS = 'SETTINGS';\n    readonly STEP_EDITORIAL_GROUPS = 'EDITORIAL_GROUPS';\n    STEP_ICONS: { [step in Step]?: string } = {\n        GENERAL: 'edit',\n        METADATA: 'info_outline',\n        PERMISSIONS: 'group_add',\n        SETTINGS: 'settings',\n        EDITORIAL_GROUPS: 'star',\n    };\n    public newCollectionStep: Step = this.STEP_NEW;\n    availableSteps: Step[];\n    private parentCollection: EduData.Node;\n    private originalPermissions: LocalPermissions;\n    private permissionsInfo: ShareDialogResult;\n    private destroyed = new Subject<void>();\n    private loadingTask = this.loadingScreen.addLoadingTask({ until: this.destroyed });\n\n    @ViewChild('file') imageFileRef: ElementRef;\n    @ViewChild('authorFreetextInput') authorFreetextInput: ElementRef<HTMLInputElement>;\n    buttons: DialogButton[];\n    authorFreetext = false;\n    authorFreetextAllowed = false;\n    mdsSet: string;\n    imageOptions: OptionItem[];\n    imageWindow: Window;\n    editorialGroupsSelected: Group[] = [];\n\n    @HostListener('document:keydown', ['$event'])\n    handleKeyboardEvent(event: KeyboardEvent) {\n        if (event.code == 'Escape') {\n            event.preventDefault();\n            event.stopPropagation();\n            this.goBack();\n            return;\n        }\n    }\n    setCollection(collection: EduData.Node) {\n        return new Observable<void>((observer) => {\n            const id = collection.ref.id;\n            this.nodeService.getNodePermissions(id).subscribe((perm: EduData.NodePermissions) => {\n                this.mdsSet = collection.metadataset;\n                this.canInvite =\n                    this.canInvite &&\n                    RestHelper.hasAccessPermission(\n                        collection,\n                        RestConstants.ACCESS_CHANGE_PERMISSIONS,\n                    );\n                this.editorialPublic = perm.permissions.localPermissions?.permissions?.some(\n                    (p: Permission) =>\n                        p.authority?.authorityName === RestConstants.AUTHORITY_EVERYONE,\n                );\n                this.editId = id;\n                this.currentCollection = collection;\n                // cleanup irrelevant data\n                this.currentCollection.rating = null;\n                this.authorFreetext = this.currentCollection.collection.authorFreetext != null;\n                this.originalPermissions = perm.permissions.localPermissions;\n                this.properties = collection.properties;\n                this.newCollectionType = this.getTypeForCollection(this.currentCollection);\n                this.hasCustomScope = false;\n                this.newCollectionStep = this.STEP_GENERAL;\n                if (\n                    this.currentCollection.collection.scope ===\n                    RestConstants.COLLECTIONSCOPE_CUSTOM_PUBLIC\n                ) {\n                    this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                }\n                observer.next();\n                observer.complete();\n            });\n        });\n    }\n\n    onEvent(event: string, data: Node): void {\n        if (event === FrameEventsService.EVENT_APPLY_NODE) {\n            const imageData = data.preview?.data?.[0];\n            if (imageData) {\n                this.imageData = imageData;\n                this.updateImageOptions();\n                fetch(imageData)\n                    .then((res) => res.blob())\n                    .then((blob) => {\n                        this.imageFile = blob as File;\n                    });\n            } else {\n                console.info(data);\n                this.toast.error(null, 'COLLECTIONS.TOAST.ERROR_IMAGE_APPLY');\n            }\n            this.imageWindow?.close();\n        }\n    }\n\n    constructor(\n        private collectionService: RestCollectionService,\n        private nodeService: RestNodeService,\n        private connector: RestConnectorService,\n        private nodeHelper: NodeHelperService,\n        private uiService: UIService,\n        private iamService: RestIamService,\n        private mediacenterService: RestMediacenterService,\n        private route: ActivatedRoute,\n        private mdsService: RestMdsService,\n        private eventService: FrameEventsService,\n        private router: Router,\n        private platformLocation: PlatformLocation,\n        private toast: Toast,\n        private bridge: BridgeService,\n        private temporaryStorage: TemporaryStorageService,\n        private zone: NgZone,\n        private sanitizer: DomSanitizer,\n        private configLegacy: ConfigurationService,\n        private configService: ConfigService,\n        private ref: ApplicationRef,\n        private translations: TranslationsService,\n        private translationService: TranslateService,\n        private loadingScreen: LoadingScreenService,\n        private mainNav: MainNavService,\n        private dialogs: DialogsService,\n    ) {\n        this.eventService.addListener(this, this.destroyed);\n        this.translations.waitForInit().subscribe(() => {\n            this.connector.isLoggedIn().subscribe((data) => {\n                this.mdsService.getSets().subscribe((mdsSets) => {\n                    const sets = ConfigurationHelper.filterValidMds(\n                        RestConstants.HOME_REPOSITORY,\n                        mdsSets.metadatasets,\n                        this.configService,\n                    );\n                    this.mdsSet = sets[0]?.id;\n\n                    this.COLORS = this.configLegacy.instant(\n                        'collections.colors',\n                        this.DEFAULT_COLORS,\n                    );\n                    if (data.statusCode != RestConstants.STATUS_CODE_OK) {\n                        this.toast.error(\n                            { message: 'loginData.statusCode was not ok', data },\n                            'TOOLPERMISSION_ERROR',\n                        );\n                        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n                            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                                queryParams: params,\n                            });\n                        });\n                        return;\n                    }\n                    this.canInvite = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_INVITE,\n                    );\n                    this.shareToAll = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES,\n                    );\n                    this.createEditorial = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    );\n                    this.createCurriculum = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_CURRICULUM,\n                    );\n                    this.mediacenterService.getMediacenters().subscribe((mediacenters) => {\n                        this.createMediacenter =\n                            mediacenters.filter((m) => m.administrationAccess).length === 1 &&\n                            this.connector.hasToolPermissionInstant(\n                                RestConstants.TOOLPERMISSION_INVITE,\n                            );\n                        if (this.createMediacenter) this.mediacenter = mediacenters[0];\n                    });\n                    this.authorFreetextAllowed = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_CHANGE_OWNER,\n                    );\n\n                    this.iamService\n                        .getCurrentUserAsync()\n                        .then((user: IamUser) => (this.user = user.person));\n                    this.route.queryParams.subscribe((queryParams) => {\n                        this.mainnav = queryParams.mainnav !== 'false';\n                        this.route.params.subscribe((params) => {\n                            // get mode from route and validate input data\n                            let mode = params['mode'];\n                            let id = params['id'];\n                            if (queryParams.collection) {\n                                this.setParent(id, null);\n                                this.setCollection(JSON.parse(queryParams.collection)).subscribe(\n                                    () => {\n                                        this.updateAvailableSteps();\n                                        this.isLoading = false;\n                                        if (!this.loadingTask.isDone) {\n                                            this.loadingTask.done();\n                                        }\n                                    },\n                                );\n                            } else if (mode == 'edit') {\n                                this.collectionService.getCollection(id).subscribe((data) => {\n                                    this.nodeService\n                                        .getNodeMetadata(id, [RestConstants.ALL])\n                                        .subscribe((node: EduData.NodeWrapper) => {\n                                            this.setCollection(node.node).subscribe(() => {\n                                                this.updateAvailableSteps();\n                                                this.updateImageOptions();\n                                                this.isLoading = false;\n                                                if (!this.loadingTask.isDone) {\n                                                    this.loadingTask.done();\n                                                }\n                                            });\n                                        });\n                                });\n                            } else {\n                                if (id == RestConstants.ROOT) {\n                                    this.setParent(id, null);\n                                    return;\n                                }\n                                this.collectionService.getCollection(id).subscribe(\n                                    (data: EduData.CollectionWrapper) => {\n                                        this.setParent(id, data.collection);\n                                    },\n                                    (error: any) => {\n                                        this.setParent(id, null);\n                                    },\n                                );\n                            }\n                        });\n                    });\n                    if (\n                        this.connector.hasToolPermissionInstant(\n                            RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH,\n                        ) ||\n                        this.connector.hasToolPermissionInstant(\n                            RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE,\n                        )\n                    ) {\n                        this.iamService\n                            .searchGroups('*', true, RestConstants.GROUP_TYPE_EDITORIAL, '', {\n                                count: RestConstants.COUNT_UNLIMITED,\n                                sortBy: [RestConstants.CM_PROP_AUTHORITY_DISPLAYNAME],\n                                sortAscending: [true],\n                            })\n                            .subscribe((data: IamGroups) => {\n                                this.editorialGroups.setData(\n                                    data.groups as Group[],\n                                    data.pagination,\n                                );\n                            });\n                    }\n                });\n            });\n        });\n    }\n\n    ngOnInit(): void {\n        this.mainNav.setMainNavConfig({\n            title: 'COLLECTIONS.TITLE',\n            currentScope: 'collections',\n            additionalScope: 'edit',\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n\n    getShareStatus() {\n        if (this.permissions || this.originalPermissions) {\n            let perms = this.permissions || this.originalPermissions;\n            let type = RestConstants.COLLECTIONSCOPE_MY;\n            if (perms && perms.permissions) {\n                for (let perm of perms.permissions) {\n                    if (perm.authority.authorityName != this.user.authorityName) {\n                        type = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                    }\n                    if (perm.authority.authorityName == RestConstants.AUTHORITY_EVERYONE) {\n                        type = RestConstants.COLLECTIONSCOPE_ALL;\n                        break;\n                    }\n                }\n            }\n            return type;\n        } else {\n            return RestConstants.COLLECTIONSCOPE_MY;\n        }\n    }\n    private saveCollection() {\n        this.collectionService.updateCollection(this.currentCollection).subscribe(\n            () => {\n                this.navigateToCollectionId(this.currentCollection.ref.id);\n            },\n            (error: any) => {\n                this.nodeHelper.handleNodeError(this.currentCollection.title, error);\n                //this.toast.error(error)\n            },\n        );\n    }\n    private setPermissions(permissions: ShareDialogResult) {\n        if (permissions) {\n            this.permissionsInfo = permissions;\n            this.permissions = permissions.permissions;\n            this.permissions.inherited = false;\n            if (this.permissions.permissions && this.permissions.permissions.length) {\n                this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                for (let permission of this.permissions.permissions) {\n                    if (!permission.hasOwnProperty('editable')) {\n                        permission.editable = true;\n                    }\n                }\n            }\n        }\n    }\n    async editPermissions(): Promise<void> {\n        if (this.permissions == null && !this.editId) {\n            this.permissions = new LocalPermissions();\n        }\n        let nodes: Node[] | string[];\n        if (this.editId) {\n            nodes = [this.editId];\n        } else {\n            const permissionsDummy = new EduData.Node();\n            permissionsDummy.title = this.currentCollection.title;\n            permissionsDummy.iconURL = this.connector.getThemeMimeIconSvg('collection.svg');\n            permissionsDummy.ref = {} as NodeRef;\n            permissionsDummy.aspects = [RestConstants.CCM_ASPECT_COLLECTION];\n            permissionsDummy.properties = {};\n            permissionsDummy.isDirectory = true;\n            nodes = [permissionsDummy];\n        }\n        const dialogRef = await this.dialogs.openShareDialog({\n            nodes,\n            sendMessages: true,\n            sendToApi: false,\n            currentPermissions: this.permissions,\n        });\n        dialogRef.afterClosed().subscribe((result) => this.setPermissions(result));\n    }\n    isNewCollection(): boolean {\n        return this.editId == null;\n    }\n\n    isEditCollection(): boolean {\n        return !this.isNewCollection();\n    }\n\n    newCollectionCancel(): void {\n        let id = this.parentId;\n        if (id == null) id = this.editId;\n        this.navigateToCollectionId(id);\n    }\n\n    setColor(color: string): void {\n        this.currentCollection.collection.color = color;\n    }\n\n    setColorByDirection(event: Event): void {\n        const rowLength = 6;\n        let index = this.COLORS.indexOf(this.currentCollection.collection.color);\n        switch ((event as KeyboardEvent).key) {\n            case 'ArrowUp':\n                index -= rowLength;\n                break;\n            case 'ArrowDown':\n                index += rowLength;\n                break;\n            case 'ArrowLeft':\n                index -= 1;\n                break;\n            case 'ArrowRight':\n                index += 1;\n                break;\n        }\n        if (index >= 0 && index < this.COLORS.length) {\n            this.setColor(this.COLORS[index]);\n            event.preventDefault();\n        }\n    }\n\n    imageDataChanged(event: any): void {\n        // get files and check if available\n        let files = event.target.files;\n        if (typeof files == 'undefined') {\n            return;\n        }\n        if (files.length <= 0) {\n            return;\n        }\n\n        // get first file\n        let file: File = files[0];\n\n        // check if file type is correct\n        let validType = false;\n        if (file.type.startsWith('image')) validType = true;\n        //if (file.type==\"image/jpeg\") validType = true;\n        //if (file.type==\"image/gif\") validType = true;\n        if (!validType) {\n            return;\n        }\n\n        // remember file for upload\n        this.imageFile = file;\n        this.imageData = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file));\n        this.updateImageOptions();\n    }\n    handleError(error: any) {\n        if (error.status == RestConstants.DUPLICATE_NODE_RESPONSE) {\n            this.toast.error(null, 'COLLECTIONS.TOAST.DUPLICATE_NAME');\n            return;\n        }\n        if (RestHelper.errorMessageContains(error, 'Invalid property value')) {\n            this.toast.error(null, 'COLLECTIONS.TOAST.INVALID_NAME');\n            return;\n        }\n        this.toast.error(error);\n    }\n    save(): void {\n        // input data optimize\n        if (!this.currentCollection.collection.description)\n            this.currentCollection.collection.description = '';\n        this.currentCollection.title = this.currentCollection.title.trim();\n        this.currentCollection.collection.description =\n            this.currentCollection.collection.description.trim();\n        if (\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            this.currentCollection.collection.type = this.newCollectionType;\n        } else {\n            this.currentCollection.collection.type = RestConstants.COLLECTIONTYPE_DEFAULT;\n        }\n        if (this.isEditCollection()) {\n            /*\n             *  EDIT\n             */\n\n            this.isLoading = true;\n            this.collectionService.updateCollection(this.currentCollection).subscribe(\n                () => {\n                    this.save2(this.currentCollection);\n                },\n                (error) => {\n                    this.isLoading = false;\n                    this.handleError(error);\n                },\n            );\n        } else {\n            /*\n             *  CREATE\n             */\n            this.isLoading = true;\n            this.collectionService\n                .createCollection(this.currentCollection, this.parentId)\n                .subscribe(\n                    (collection: EduData.CollectionWrapper) => {\n                        this.save2(collection.collection);\n                    },\n                    (error: any) => {\n                        this.isLoading = false;\n                        this.handleError(error);\n                    },\n                );\n        }\n    }\n    private saveImage(collection: EduData.Node): void {\n        if (this.imageData != null) {\n            this.collectionService\n                .uploadCollectionImage(collection.ref.id, this.imageFile, 'image/png')\n                .subscribe(\n                    () => {\n                        this.navigateToCollectionId(collection.ref.id);\n                    },\n                    (error) => {\n                        this.toast.error(null, 'COLLECTIONS.TOAST.ERROR_IMAGE_APPLY');\n                        this.navigateToCollectionId(collection.ref.id);\n                    },\n                );\n        } else if (collection.preview == null) {\n            this.collectionService.deleteCollectionImage(collection.ref.id).subscribe(() => {\n                this.navigateToCollectionId(collection.ref.id);\n            });\n        } else {\n            this.navigateToCollectionId(collection.ref.id);\n        }\n    }\n    setCollectionType(type: string) {\n        this.newCollectionType = type;\n        if (type === RestConstants.COLLECTIONSCOPE_MY) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_MY;\n        }\n        if (type === RestConstants.COLLECTIONSCOPE_ALL) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_ALL;\n        }\n        if (\n            type === RestConstants.COLLECTIONSCOPE_CUSTOM ||\n            type === RestConstants.COLLECTIONTYPE_EDITORIAL\n        ) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n        }\n        if (type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER) {\n            this.switchToAuthorFreetext();\n        }\n        this.updateAvailableSteps();\n        this.goToNextStep();\n    }\n    public getAvailableSteps(): Step[] {\n        let steps: Step[] = [];\n        steps.push(this.STEP_GENERAL);\n        if (\n            this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType == RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            steps.push(this.STEP_METADATA);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONSCOPE_CUSTOM && this.canInvite) {\n            steps.push(this.STEP_PERMISSIONS);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL) {\n            //steps.push(this.STEP_SETTINGS);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL && this.canInvite) {\n            steps.push(this.STEP_EDITORIAL_GROUPS);\n        }\n        return steps;\n    }\n    public isLastStep() {\n        let pos = this.currentStepPosition();\n        return pos >= this.availableSteps.length - 1;\n    }\n    public async goToNextStep() {\n        if (this.newCollectionStep == this.STEP_GENERAL) {\n            if (!this.currentCollection.title) {\n                this.toast.error(null, 'COLLECTIONS.ENTER_NAME');\n                return;\n            }\n        }\n        if (this.newCollectionStep == this.STEP_METADATA) {\n            const props = await this.mds.getValues();\n            if (props == null) {\n                return;\n            }\n            this.properties = props;\n        }\n        if (this.isLastStep()) {\n            this.save();\n        } else {\n            const pos = this.currentStepPosition();\n            this.newCollectionStep = this.availableSteps[pos + 1];\n            // support for legacy mds\n            setTimeout(() => {\n                this.mds?.loadMds(true);\n            });\n            if (this.newCollectionStep == this.STEP_EDITORIAL_GROUPS) {\n                setTimeout(() => {\n                    this.editorialGroupsSelected = this.getEditoralGroups(\n                        this.originalPermissions.permissions,\n                    );\n                    this.organizationsRef.getSelection().select(...this.editorialGroupsSelected);\n                    this.organizationsRef\n                        .getSelection()\n                        .changed.subscribe(\n                            (change) => (this.editorialGroupsSelected = change.source.selected),\n                        );\n                });\n            }\n        }\n        this.updateButtons();\n    }\n    setCollectionGeneral() {}\n    currentStepPosition() {\n        return this.availableSteps.indexOf(this.newCollectionStep);\n    }\n    async goBack() {\n        if (this.newCollectionStep == this.STEP_METADATA) {\n            const props = await this.mds.getValues();\n            if (props != null) {\n                this.properties = props;\n            }\n        }\n        let pos = this.currentStepPosition();\n        if (pos == -1) {\n            this.navigateToCollectionId(this.parentId);\n        } else if (pos == 0) {\n            if (this.editId) {\n                this.navigateToCollectionId(this.editId);\n            } else if (\n                this.parentCollection &&\n                this.parentCollection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL\n            ) {\n                this.navigateToCollectionId(this.parentId);\n            } else {\n                this.newCollectionStep = this.STEP_NEW;\n            }\n        } else {\n            this.newCollectionStep = this.availableSteps[pos - 1];\n            // support for legacy mds\n            setTimeout(() => {\n                this.mds?.loadMds(true);\n            });\n        }\n        this.updateButtons();\n    }\n    navigateToCollectionId(id: string): void {\n        this.isLoading = false;\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            if (id !== RestConstants.ROOT) {\n                params.id = id;\n            }\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                queryParams: params,\n            });\n        });\n    }\n    private save2(collection: EduData.Node) {\n        if (\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            this.nodeService\n                .AddNodeAspects(collection.ref.id, [\n                    RestConstants.CCM_ASPECT_LOMREPLICATION,\n                    RestConstants.CCM_ASPECT_CCLOM_GENERAL,\n                ])\n                .subscribe(() => {\n                    this.nodeService\n                        .editNodeMetadata(collection.ref.id, this.properties)\n                        .subscribe(() => {\n                            this.save3(collection);\n                        });\n                });\n        } else {\n            this.save3(collection);\n        }\n    }\n    public isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.currentCollection.collection.color) ===\n            PreferredColor.White\n        );\n    }\n    private save3(collection: EduData.Node) {\n        if (this.newCollectionType == RestConstants.GROUP_TYPE_EDITORIAL) {\n            // user has access to editorial group but can't invite (strange setting but may happens)\n            if (!this.canInvite) {\n                this.save4(collection);\n                return;\n            }\n            this.permissions = this.getEditorialGroupPermissions();\n        }\n        if (\n            (this.newCollectionType == RestConstants.COLLECTIONSCOPE_CUSTOM ||\n                this.newCollectionType == RestConstants.GROUP_TYPE_EDITORIAL) &&\n            this.permissions &&\n            this.permissions.permissions\n        ) {\n            if (this.originalPermissions && this.originalPermissions.inherited) {\n            }\n            let permissions = RestHelper.copyAndCleanPermissions(\n                this.permissions.permissions,\n                this.originalPermissions ? this.originalPermissions.inherited : false,\n            );\n            this.nodeService\n                .setNodePermissions(\n                    collection.ref.id,\n                    permissions,\n                    this.permissionsInfo ? this.permissionsInfo.notify : false,\n                    this.permissionsInfo ? this.permissionsInfo.notifyMessage : null,\n                )\n                .subscribe(\n                    () => {\n                        this.save4(collection);\n                    },\n                    (error) => {\n                        this.toast.error(error);\n                        this.isLoading = false;\n                    },\n                );\n        } else {\n            this.save4(collection);\n        }\n    }\n\n    private getTypeForCollection(collection: EduData.Node) {\n        if (\n            collection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            collection.collection.type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            return collection.collection.type;\n        }\n        if (collection.collection.scope === RestConstants.COLLECTIONSCOPE_MY && !this.canInvite) {\n            return RestConstants.COLLECTIONSCOPE_MY;\n        }\n        if (\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_MY ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_ORGA ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_ALL ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_CUSTOM_PUBLIC\n        ) {\n            return RestConstants.COLLECTIONSCOPE_CUSTOM;\n        }\n        return collection.collection.scope;\n    }\n\n    private updateAvailableSteps() {\n        this.availableSteps = this.getAvailableSteps();\n        this.updateButtons();\n    }\n\n    private getEditorialGroupPermissions() {\n        const permissions = new LocalPermissions();\n        permissions.permissions = [];\n        if (this.editorialPublic) {\n            const pub = RestHelper.getAllAuthoritiesPermission();\n            pub.permissions = [RestConstants.PERMISSION_CONSUMER];\n            permissions.permissions.push(pub);\n        }\n        for (const group of this.editorialGroupsSelected) {\n            const perm = new Permission();\n            perm.authority = {\n                authorityName: group.authorityName,\n                authorityType: group.authorityType,\n            };\n            perm.permissions = [RestConstants.PERMISSION_COORDINATOR];\n            permissions.permissions.push(perm);\n        }\n        return permissions;\n    }\n\n    private getEditoralGroups(permissions: Permission[]) {\n        let list: Group[] = [];\n        for (let perm of permissions) {\n            for (let group of this.editorialGroups.getData()) {\n                if (group.authorityName == perm.authority.authorityName) {\n                    list.push(group);\n                }\n            }\n        }\n        return list;\n    }\n\n    private setParent(id: string, parent: EduData.Node) {\n        this.parentId = id;\n        this.parentCollection = parent;\n        this.currentCollection = new EduData.Node();\n        this.currentCollection.title = '';\n        this.currentCollection.collection = {\n            description: '',\n            color: this.COLORS[0],\n        } as any;\n        if (\n            this.parentCollection &&\n            this.parentCollection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL\n        ) {\n            if (!this.createEditorial || !this.shareToAll) {\n                this.toast.error(\n                    this.createEditorial\n                        ? RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES\n                        : RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    'TOOLPERMISSION_ERROR',\n                );\n                window.history.back();\n                this.isLoading = false;\n                return;\n            }\n            this.setCollectionType(RestConstants.COLLECTIONTYPE_EDITORIAL);\n        }\n        this.updateAvailableSteps();\n        this.updateImageOptions();\n        this.isLoading = false;\n        if (!this.loadingTask.isDone) {\n            this.loadingTask.done();\n        }\n    }\n\n    private save4(collection: EduData.Node) {\n        // check if there are any nodes that should be added to this collection\n        const add: { nodes: EduData.Node[]; callback: EventEmitter<any> } =\n            this.temporaryStorage.pop(TemporaryStorageService.COLLECTION_ADD_NODES);\n        if (!add) {\n            this.saveImage(collection);\n            return;\n        }\n        UIHelper.addToCollection(\n            this.nodeHelper,\n            this.collectionService,\n            this.router,\n            this.bridge,\n            collection,\n            add.nodes,\n            false,\n            (references) => {\n                this.saveImage(collection);\n                add.callback?.emit({ collection, references });\n                return;\n            },\n        );\n    }\n\n    deleteImage() {\n        this.imageData = null;\n        this.imageFile = null;\n        this.imageFileRef.nativeElement.value = null;\n        this.currentCollection.preview = null;\n        this.updateImageOptions();\n    }\n\n    private updateButtons() {\n        /**\n         *  <a class=\"waves-effect btn\" tabindex=\"0\" (keyup.enter)=\"setCollectionGeneral()\" (click)=\"setCollectionGeneral()\">\n         <span>{{(isLastStep() ? 'SAVE' : 'NEXT') | translate }}</span>\n         </a>\n         <a class=\"waves-effect waves-light btn-flat\" tabindex=\"0\" (keyup.enter)=\"goBack()\" (click)=\"goBack()\">{{ 'BACK' | translate }}</a>\n\n         */\n        this.buttons = [\n            new DialogButton('BACK', { color: 'standard' }, () => this.goBack()),\n            new DialogButton(this.isLastStep() ? 'SAVE' : 'NEXT', { color: 'primary' }, () =>\n                this.goToNextStep(),\n            ),\n        ];\n    }\n\n    switchToAuthorFreetext() {\n        this.authorFreetextAllowed = this.connector.hasToolPermissionInstant(\n            RestConstants.TOOLPERMISSION_COLLECTION_CHANGE_OWNER,\n        );\n        this.authorFreetext = true;\n        this.currentCollection.collection.authorFreetext = new AuthorityNamePipe(\n            this.translationService,\n        ).transform(\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER ||\n                this.currentCollection.collection.type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n                ? this.mediacenter\n                : this.user,\n            null,\n        );\n        setTimeout(() => {\n            this.authorFreetextInput.nativeElement.focus();\n        });\n    }\n\n    cancelAuthorFreetext() {\n        this.authorFreetext = false;\n        this.currentCollection.collection.authorFreetext = null;\n    }\n\n    updateImageOptions() {\n        this.imageOptions = [\n            new OptionItem('COLLECTIONS.NEW.IMAGE.SEARCH', 'search', () => {\n                this.imageWindow = UIHelper.openSearchWithReurl(\n                    this.platformLocation,\n                    this.router,\n                    'WINDOW',\n                    { queryParams: { reurlCreate: false, reurlTypes: ['image'] } },\n                ) as Window;\n                /*this.route\n                r.navigate([], {\n                        relativeTo: this.route,\n                        queryParams: {\n                            collection: JSON.stringify(this.currentCollection)\n                        }\n                    }).then(() => {\n                    });*/\n            }),\n            new OptionItem('COLLECTIONS.NEW.IMAGE.UPLOAD', 'file_upload', () =>\n                this.imageFileRef.nativeElement.click(),\n            ),\n        ];\n        this.imageOptions[0].group = DefaultGroups.Edit;\n        this.imageOptions[1].group = DefaultGroups.Edit;\n        if (\n            this.imageData ||\n            (this.currentCollection.preview && !this.currentCollection.preview.isIcon)\n        ) {\n            this.imageOptions.push(\n                new OptionItem('COLLECTIONS.NEW.IMAGE.DELETE', 'delete', () => this.deleteImage()),\n            );\n            this.imageOptions[2].group = DefaultGroups.Delete;\n        }\n    }\n}\n","<div\n  role=\"main\"\n  esSkipTarget=\"MAIN_CONTENT\"\n  class=\"collections-master-div\"\n  [class.collections-master-div-mainnav]=\"mainnav\"\n>\n  <es-global-progress *ngIf=\"isLoading\"></es-global-progress>\n\n  <div *ngIf=\"!isLoading\" class=\"createContainer\">\n    <div class=\"createProgress\" *ngIf=\"newCollectionStep !== STEP_NEW\">\n      <div\n        *ngFor=\"let step of availableSteps; let i = index\"\n        (click)=\"i < currentStepPosition() ? (newCollectionStep = step) : null\"\n        [class.current]=\"step === newCollectionStep\"\n        [class.finished]=\"i < currentStepPosition()\"\n      >\n        <div class=\"circle\"></div>\n        <i [esIcon]=\"STEP_ICONS[step]\"></i>\n        <div class=\"label\">{{ 'COLLECTIONS.STEP.' + step | translate }}</div>\n        <div class=\"connection\"></div>\n      </div>\n      <div class=\"finish\">\n        <div class=\"circle\"></div>\n        <div class=\"label\">{{ 'COLLECTIONS.STEP.DONE' | translate }}</div>\n      </div>\n    </div>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_NEW\"\n      class=\"collection-new-container\"\n      width=\"normal\"\n      height=\"auto\"\n      modal=\"auto\"\n      title=\"{{ 'COLLECTIONS.CREATE_TYPE' | translate }}\"\n      (onCancel)=\"newCollectionCancel()\"\n    >\n      <div class=\"createCollection collectionShadow\">\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          (click)=\"setCollectionType('MY')\"\n          data-test=\"create-private-collection-button\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"lock\" style=\"color: #995b5b\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.PRIVATE' | translate }}</div>\n            <div class=\"description\">\n              {{ 'COLLECTIONS.CREATE.PRIVATE_DESCRIPTION' | translate }}\n            </div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"canInvite\"\n          (click)=\"setCollectionType('CUSTOM')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"group\" style=\"color: #4f7899\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.SHARED' | translate }}</div>\n            <div class=\"description\">{{ 'COLLECTIONS.CREATE.SHARED_DESCRIPTION' | translate }}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"shareToAll && canInvite\"\n          (click)=\"setCollectionType('EDU_ALL')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"public\" style=\"color: #5c998f\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.PUBLIC' | translate }}</div>\n            <div class=\"description\">{{ 'COLLECTIONS.CREATE.PUBLIC_DESCRIPTION' | translate }}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <div class=\"group\" *ngIf=\"createEditorial && shareToAll\">\n          <button\n            mat-button\n            class=\"collection-item clickable\"\n            *ngIf=\"createEditorial\"\n            (click)=\"setCollectionType('EDITORIAL')\"\n          >\n            <div class=\"iconLeft\"><i esIcon=\"star\" style=\"color: #e9b42a\"></i></div>\n            <div class=\"content\">\n              <div class=\"title\">{{ 'COLLECTIONS.CREATE.EDITORIAL' | translate }}</div>\n              <div class=\"description\">\n                {{ 'COLLECTIONS.CREATE.EDITORIAL_DESCRIPTION' | translate }}\n              </div>\n            </div>\n            <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n          </button>\n          <!--\n        <div class=\"collection-item clickable\" *ngIf=\"createCurriculum\" (click)=\"setCollectionType('CURRICULUM')\">\n          <div class=\"iconLeft\"><i esIcon=\"school\" style=\"color:#995C99;\">school</i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{'COLLECTIONS.CREATE.CURRICULUM' | translate}}</div>\n            <div class=\"description\">{{'COLLECTIONS.CREATE.CURRICULUM_DESCRIPTION' | translate}}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </div>\n        --></div>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"createMediacenter\"\n          (click)=\"setCollectionType('MEDIA_CENTER')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"business\" style=\"color: #4e4b99\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.MEDIA_CENTER' | translate }}</div>\n            <div class=\"description\">\n              {{ 'COLLECTIONS.CREATE.MEDIA_CENTER_DESCRIPTION' | translate }}\n            </div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_GENERAL\"\n      [buttons]=\"buttons\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      title=\"{{ 'collectionNew_preview' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      modal=\"auto\"\n      width=\"xsmall\"\n      height=\"auto\"\n    >\n      <div class=\"collection-general\">\n        <div class=\"collectionImage\">\n          <div class=\"image-upload-field\">\n            <input\n              #file\n              type=\"file\"\n              accept=\"image/*\"\n              name=\"userFile\"\n              (change)=\"imageDataChanged($event)\"\n              class=\"image-upload-field-input\"\n            />\n          </div>\n          <div class=\"button-icon\">\n            <es-actionbar\n              [options]=\"imageOptions\"\n              appearance=\"round\"\n              [numberOfAlwaysVisibleOptions]=\"0\"\n              [numberOfAlwaysVisibleOptionsMobile]=\"0\"\n            ></es-actionbar>\n          </div>\n\n          <!-- Making the image area clickable poses a violation of accessibility rules. Merge\n              christopher/fix/image-click-areas to remove. -->\n          <div\n            *ngIf=\"!imageData && !(currentCollection.preview && !currentCollection.preview.isIcon)\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n            class=\"card-collection-icon-container\"\n          >\n            <div class=\"card-image-distance\"></div>\n            <div\n              class=\"card-image-icon-container\"\n              [style.background-color]=\"currentCollection.collection.color\"\n            >\n              <i esIcon=\"layers\"></i>\n            </div>\n          </div>\n\n          <div\n            *ngIf=\"!imageData && currentCollection.preview && !currentCollection.preview.isIcon\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n            class=\"card-collection-icon-container\"\n          >\n            <img\n              class=\"blurred-image\"\n              [src]=\"\n                currentCollection\n                  | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true }\n                  | async\n              \"\n            />\n            <img\n              [src]=\"\n                currentCollection\n                  | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true }\n                  | async\n              \"\n              class=\"card-image-preview\"\n            />\n          </div>\n\n          <div\n            *ngIf=\"imageData\"\n            class=\"card-collection-image-container\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n          >\n            <div class=\"card-image-container\">\n              <img [src]=\"imageData\" class=\"blurred-image\" />\n              <img [src]=\"imageData\" class=\"card-image-preview\" />\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"collection-new-preview-infoarea\"\n          [style.background-color]=\"currentCollection.collection.color\"\n          [class.dark-color]=\"isBrightColor()\"\n        >\n          <div class=\"collection-new-bg\"></div>\n          <div class=\"dialog-basic-area dialog-input-area\">\n            <mat-form-field\n              [class.mat-form-field-bright]=\"!isBrightColor()\"\n              [class.mat-form-field-dark]=\"isBrightColor()\"\n            >\n              <mat-label>{{ 'collectionNew_placeholderTitle' | translate }}</mat-label>\n              <!-- Autofocus and autocomplete don't work well together here, because the\n                    autocomplete list will open before the card animation finishes. -->\n              <input\n                matInput\n                class=\"title\"\n                [(ngModel)]=\"currentCollection.title\"\n                autofocus\n                autocomplete=\"off\"\n                data-test=\"new-collection-name-input\"\n              />\n            </mat-form-field>\n            <mat-form-field\n              [class.mat-form-field-bright]=\"!isBrightColor()\"\n              [class.mat-form-field-dark]=\"isBrightColor()\"\n            >\n              <mat-label>{{ 'collectionNew_placeholderDescription' | translate }}</mat-label>\n              <textarea matInput [(ngModel)]=\"currentCollection.collection.description\"></textarea>\n            </mat-form-field>\n          </div>\n          <div class=\"collection-new-owner\">\n            <ng-container *ngIf=\"!authorFreetext\">\n              <i esIcon=\"person\"></i>\n              <span>{{ user | authorityName }}</span>\n              <button\n                *ngIf=\"authorFreetextAllowed\"\n                mat-icon-button\n                [attr.aria-label]=\"\n                  'EDIT' | translate : { thing: ('COLLECTIONS.NEW.AUTHOR_FREETEXT' | translate) }\n                \"\n                (click)=\"switchToAuthorFreetext()\"\n              >\n                <i esIcon=\"edit\"></i>\n              </button>\n            </ng-container>\n            <ng-container *ngIf=\"authorFreetext\">\n              <i esIcon=\"person\"></i>\n              <mat-form-field\n                class=\"mat-form-field-no-padding\"\n                [class.mat-form-field-bright]=\"!isBrightColor()\"\n              >\n                <mat-label id=\"collection-new-author-freetext-label\">\n                  {{ 'COLLECTIONS.NEW.AUTHOR_FREETEXT' | translate }}\n                </mat-label>\n                <input\n                  #authorFreetextInput\n                  matInput\n                  [disabled]=\"!authorFreetextAllowed\"\n                  [(ngModel)]=\"currentCollection.collection.authorFreetext\"\n                />\n              </mat-form-field>\n              <button\n                mat-icon-button\n                [attr.aria-label]=\"'CANCEL' | translate\"\n                aria-describedby=\"collection-new-author-freetext-label\"\n                (click)=\"cancelAuthorFreetext()\"\n              >\n                <i esIcon=\"close\"></i>\n              </button>\n            </ng-container>\n          </div>\n\n          <div class=\"dialog-basic-area dialog-color-group\">\n            <div id=\"collection-new-color-picker-label\" class=\"collection-new-preview-infoline\">\n              {{ 'collectionNew_setColor' | translate }}\n            </div>\n            <ul\n              class=\"color-group\"\n              aria-labelledby=\"collection-new-color-picker-label\"\n              tabindex=\"0\"\n              role=\"listbox\"\n              aria-orientation=\"horizontal\"\n              cdkMonitorElementFocus\n              (keydown.arrowright)=\"setColorByDirection($event)\"\n              (keydown.arrowup)=\"setColorByDirection($event)\"\n              (keydown.arrowleft)=\"setColorByDirection($event)\"\n              (keydown.arrowdown)=\"setColorByDirection($event)\"\n              [attr.aria-activedescendant]=\"\n                COLORS.indexOf(currentCollection.collection.color) !== -1\n                  ? 'collection-new-color-picker-option-' +\n                    COLORS.indexOf(currentCollection.collection.color)\n                  : null\n              \"\n            >\n              <li\n                id=\"collection-new-color-picker-option-{{ index }}\"\n                *ngFor=\"let color of COLORS; let index = index\"\n                role=\"option\"\n                class=\"color-option\"\n                [ngClass]=\"{ 'color-selected': currentCollection.collection.color === color }\"\n                [attr.aria-selected]=\"currentCollection.collection.color === color\"\n                [style.background-color]=\"color\"\n                (click)=\"setColor(color)\"\n              >\n                <span class=\"cdk-visually-hidden\">\n                  {{ 'collectionNew_colorIndex' | translate : { index: index + 1 } }}\n                </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_METADATA\"\n      title=\"{{ 'COLLECTIONS.STEP.METADATA' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      modal=\"auto\"\n      width=\"large\"\n      height=\"xlarge\"\n      [buttons]=\"buttons\"\n      class=\"collection-metadata\"\n    >\n      <div class=\"card-content\">\n        <es-mds-editor-wrapper\n          #mds\n          [groupId]=\"'collection_' + newCollectionType.toLowerCase()\"\n          [setId]=\"mdsSet\"\n          [editorMode]=\"'form'\"\n          [embedded]=\"true\"\n          [currentValues]=\"properties\"\n        ></es-mds-editor-wrapper>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_EDITORIAL_GROUPS\"\n      title=\"{{ 'COLLECTIONS.STEP.EDITORIAL_GROUPS' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      modal=\"auto\"\n      width=\"large\"\n      height=\"xxlarge\"\n      [buttons]=\"buttons\"\n      class=\"collection-metadata\"\n    >\n      <div class=\"editorial-group\">\n        <div class=\"editorial-list\">\n          <div class=\"noPermission\" *ngIf=\"!shareToAll\">\n            <h4>{{ 'TOOLPERMISSION_ERROR_HEADER' | translate }}</h4>\n            <h5>{{ 'TOOLPERMISSION.TOOLPERMISSION_INVITE_ALLAUTHORITIES' | translate }}</h5>\n          </div>\n          <es-node-entries-wrapper\n            #organizations\n            [dataSource]=\"editorialGroups\"\n            [displayType]=\"NodeEntriesDisplayType.Table\"\n            [columns]=\"editorialColumns\"\n            [sort]=\"{\n              active: null,\n              direction: 'asc',\n              columns: [],\n              allowed: false\n            }\"\n            [elementInteractionType]=\"InteractionType.Emitter\"\n            (clickItem)=\"organizations.getSelection().toggle($event.element)\"\n          >\n            <ng-template #empty>\n              <div class=\"noGroups\">{{ 'COLLECTIONS.NO_EDITORIAL_GROUPS' | translate }}</div>\n            </ng-template>\n          </es-node-entries-wrapper>\n        </div>\n        <div class=\"editorial-public\">\n          <mat-slide-toggle [(ngModel)]=\"editorialPublic\" color=\"primary\">\n            <es-multi-line-label>\n              <ng-container slot=\"label\">\n                {{ 'COLLECTIONS.EDITORIAL_PUBLIC' | translate }}\n              </ng-container>\n              <ng-container slot=\"description\">\n                {{ 'COLLECTIONS.EDITORIAL_PUBLIC_INFO' | translate }}\n              </ng-container>\n            </es-multi-line-label>\n          </mat-slide-toggle>\n        </div>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_PERMISSIONS\"\n      title=\"{{ 'COLLECTIONS.EDIT_PERMISSIONS' | translate }}\"\n      modal=\"auto\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      [buttons]=\"buttons\"\n      width=\"normal\"\n      height=\"large\"\n      [subtitle]=\"currentCollection.title\"\n      class=\"collection-permission-container\"\n    >\n      <div class=\"card-content\">\n        <div class=\"title\">{{ 'COLLECTIONS.EDIT_PERMISSIONS_SUBTEXT' | translate }}</div>\n        <div class=\"description\">{{ 'COLLECTIONS.EDIT_PERMISSIONS_DESCRIPTION' | translate }}</div>\n        <div class=\"dialog-basic-area permissionsBtn\">\n          <button mat-raised-button (click)=\"editPermissions()\">\n            <i esIcon=\"person_add\"></i>{{ 'COLLECTIONS.EXTENDED_PERMISSIONS_BUTTON' | translate }}\n          </button>\n        </div>\n        <div class=\"status\">\n          {{ 'COLLECTIONS.PERMISSIONS_STATUS_' + getShareStatus() | translate }}\n        </div>\n      </div>\n    </es-card>\n  </div>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport { Node, ProposalNode } from 'ngx-edu-sharing-api';\nimport {\n    ActionbarComponent,\n    InteractionType,\n    ListEventInterface,\n    ListItem,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    OptionsHelperDataService,\n    OptionsHelperService,\n    Scope,\n} from 'ngx-edu-sharing-ui';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestCollectionService } from '../../../core-module/rest/services/rest-collection.service';\nimport {\n    ManagementEvent,\n    ManagementEventType,\n} from '../../../features/management-dialogs/management-dialogs.component';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\n\n@Component({\n    selector: 'es-collection-proposals',\n    templateUrl: 'collection-proposals.component.html',\n    styleUrls: ['collection-proposals.component.scss'],\n    providers: [OptionsHelperDataService],\n})\nexport class CollectionProposalsComponent implements OnChanges {\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly InteractionType = InteractionType;\n    readonly Scope = Scope;\n    proposalColumns = [\n        new ListItem('NODE', RestConstants.CM_PROP_TITLE),\n        new ListItem('NODE_PROPOSAL', RestConstants.CM_CREATOR, { showLabel: false }),\n        new ListItem('NODE_PROPOSAL', RestConstants.CM_PROP_C_CREATED, { showLabel: false }),\n    ];\n    @ViewChild('listProposals') listProposals: ListEventInterface<ProposalNode>;\n    @ViewChild(ActionbarComponent) actionbar: ActionbarComponent;\n    dataSourceCollectionProposals = new NodeDataSource<ProposalNode>();\n\n    @Input() collection: Node;\n    @Input() canEdit: boolean;\n\n    @Output() onContentClick = new EventEmitter<ProposalNode>();\n\n    constructor(\n        private collectionService: RestCollectionService,\n        private mainNavService: MainNavService,\n        private optionsHelperService: OptionsHelperService,\n    ) {\n        this.mainNavService.getDialogs().onEvent.subscribe((event: ManagementEvent) => {\n            if (event.event === ManagementEventType.AddCollectionNodes) {\n                this.refreshProposals();\n            }\n        });\n    }\n    private refreshProposals() {\n        this.dataSourceCollectionProposals.reset();\n        this.dataSourceCollectionProposals.isLoading = true;\n        if (this.canEdit) {\n            this.collectionService\n                .getCollectionProposals(this.collection.ref.id)\n                .subscribe((proposals) => {\n                    proposals.nodes = proposals.nodes.map((p) => {\n                        p.proposalCollection = this.collection;\n                        return p;\n                    });\n                    this.dataSourceCollectionProposals.setData(\n                        proposals.nodes,\n                        proposals.pagination,\n                    );\n                    this.dataSourceCollectionProposals.isLoading = false;\n                    setTimeout(() => {\n                        this.listProposals?.initOptionsGenerator({\n                            actionbar: this.actionbar,\n                        });\n                    });\n                });\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.collection.currentValue !== null && changes.canEdit.currentValue !== null) {\n            this.refreshProposals();\n        }\n    }\n}\n","<section *ngIf=\"!dataSourceCollectionProposals?.isEmpty()\" class=\"collections-cards-div\">\n  <div class=\"content-header heading-group\">\n    <h2 class=\"mat-heading-3\">\n      {{ 'COLLECTIONS.PROPOSALS.TITLE' | translate }}\n    </h2>\n    <es-actionbar></es-actionbar>\n  </div>\n\n  <es-node-entries-wrapper\n    [elementInteractionType]=\"InteractionType.DefaultActionLink\"\n    #listProposals\n    [dataSource]=\"dataSourceCollectionProposals\"\n    [scope]=\"Scope.CollectionsProposals\"\n    [displayType]=\"NodeEntriesDisplayType.Grid\"\n    [columns]=\"proposalColumns\"\n    [globalOptions]=\"\"\n    (clickItem)=\"onContentClick.emit($event.element)\"\n    class=\"no-padding\"\n  ></es-node-entries-wrapper>\n</section>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CollectionNewComponent } from './collection-new/collection-new.component';\nimport { CollectionsPageComponent } from './collections-page.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: CollectionsPageComponent,\n    },\n    {\n        path: 'collection/:mode/:id',\n        component: CollectionNewComponent,\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class CollectionsPageRoutingModule {}\n","import {\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    OnDestroy,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport {\n    ColorHelper,\n    LocalEventsService,\n    NodeEntriesDisplayType,\n    OptionsHelperDataService,\n    PreferredColor,\n    Scope,\n    SortEvent,\n    TranslationsService,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\nimport { Subject, combineLatest } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport * as EduData from '../../core-module/core.module';\nimport {\n    ConfigurationService,\n    DialogButton,\n    Mediacenter,\n    Node,\n    NodeRef,\n    RestCollectionService,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestMediacenterService,\n    RestNetworkService,\n    RestNodeService,\n    TemporaryStorageService,\n    UIService,\n} from '../../core-module/core.module';\nimport { Helper } from '../../core-module/rest/helper';\nimport { UIHelper } from '../../core-ui-module/ui-helper';\nimport { NodeHelperService } from '../../services/node-helper.service';\nimport { Toast } from '../../services/toast';\nimport { BreadcrumbsService } from '../../shared/components/breadcrumbs/breadcrumbs.service';\nimport { CollectionContentComponent } from './collection-content/collection-content.component';\nimport { CollectionInfoBarComponent } from './collection-info-bar/collection-info-bar.component';\n\n// component class\n@Component({\n    selector: 'es-collections-page',\n    templateUrl: 'collections-page.component.html',\n    styleUrls: ['collections-page.component.scss'],\n    // provide a new instance so to not get conflicts with other service instances\n    providers: [OptionsHelperDataService],\n})\nexport class CollectionsPageComponent implements OnDestroy {\n    static INDEX_MAPPING = [\n        RestConstants.COLLECTIONSCOPE_MY,\n        RestConstants.COLLECTIONSCOPE_ORGA,\n        RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL,\n        RestConstants.COLLECTIONSCOPE_TYPE_MEDIA_CENTER,\n        RestConstants.COLLECTIONSCOPE_ALL,\n    ];\n    readonly SCOPES = Scope;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly ROUTER_PREFIX = UIConstants.ROUTER_PREFIX;\n    readonly getInfobar = () => this.infobar;\n\n    @ViewChild('infobar') infobar: CollectionInfoBarComponent;\n    @ViewChild('collectionContentComponent') collectionContentRef: CollectionContentComponent;\n    @ContentChild('collectionContentTemplate') collectionContentTemplateRef: TemplateRef<any>;\n\n    dialogTitle: string;\n    dialogCancelable = false;\n    dialogMessage: string;\n    dialogButtons: DialogButton[];\n    tabSelected: string = RestConstants.COLLECTIONSCOPE_MY;\n    isLoading = true;\n    isReady = false;\n    collection: Node;\n    collectionSortEmitter = new EventEmitter<SortEvent>();\n    collectionCustomSortEmitter = new EventEmitter<boolean>();\n    referenceSortEmitter = new EventEmitter<SortEvent>();\n    referenceCustomSortEmitter = new EventEmitter<boolean>();\n    mainnav = true;\n    isGuest = true;\n    addToOther: EduData.Node[];\n    addPinning: string;\n    tutorialElement: ElementRef;\n\n    // FIXME: `collectionShare` is expected to be of type `Node[]` by `workspace-management` but is\n    // of type `Node` here.\n    private adminMediacenters: Mediacenter[];\n    isRootLevel: boolean;\n    set collectionShare(collectionShare: Node[]) {\n        this._collectionShare = collectionShare as any as Node;\n        this.refreshAll();\n    }\n\n    get collectionShare() {\n        return this._collectionShare as any as Node[];\n    }\n\n    set tabSelectedIndex(pos: number) {\n        if (this.isGuest) {\n            pos += 2; // skip first 2 tabs\n        }\n        if (!this.hasEditorial && pos > 1) {\n            pos++; // skip editorial\n        }\n        if (!this.hasMediacenter && pos > 2) {\n            pos++; // skip mediacenter\n        }\n        this.selectTab(CollectionsPageComponent.INDEX_MAPPING[pos]);\n    }\n\n    get tabSelectedIndex() {\n        let pos = CollectionsPageComponent.INDEX_MAPPING.indexOf(this.tabSelected);\n        if (this.isGuest) {\n            pos -= 2;\n        }\n        if (!this.hasEditorial && pos > 1) {\n            pos--;\n        }\n        if (!this.hasMediacenter && pos > 2) {\n            pos--;\n        }\n        return pos;\n    }\n    private contentDetailObject: any = null;\n    // real parentCollectionId is only available, if user was browsing\n    private parentCollectionId: EduData.Reference = new EduData.Reference(\n        RestConstants.HOME_REPOSITORY,\n        RestConstants.ROOT,\n    );\n    private person: EduData.User;\n    hasEditorial = false;\n    hasMediacenter = false;\n    reurl: any;\n    private _collectionShare: Node;\n    private params: Params;\n    private destroyed = new Subject<void>();\n\n    // inject services\n    constructor(\n        private breadcrumbsService: BreadcrumbsService,\n        private collectionService: RestCollectionService,\n        private config: ConfigurationService,\n        private connector: RestConnectorService,\n        private iamService: RestIamService,\n        private localEvents: LocalEventsService,\n        private mediacenterService: RestMediacenterService,\n        private nodeHelper: NodeHelperService,\n        private nodeService: RestNodeService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private tempStorage: TemporaryStorageService,\n        private optionsService: OptionsHelperDataService,\n        private networkService: RestNetworkService,\n        private temporaryStorageService: TemporaryStorageService,\n        private toast: Toast,\n        private translations: TranslationsService,\n        private uiService: UIService,\n    ) {\n        this.translations.waitForInit().subscribe(() => {\n            combineLatest([\n                this.connector.isLoggedIn(),\n                // FIXME: The sub components should be obserable-aware!\n                this.networkService.getRepositories(),\n            ]).subscribe(\n                ([data]) => {\n                    if (data.isValidLogin && data.currentScope == null) {\n                        this.isGuest = data.isGuest;\n                        this.mediacenterService.getMediacenters().subscribe((mediacenters) => {\n                            this.adminMediacenters = mediacenters.filter(\n                                (m) => m.administrationAccess,\n                            );\n                        });\n                        this.collectionService\n                            .getCollectionSubcollections(\n                                RestConstants.ROOT,\n                                RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL,\n                            )\n                            .subscribe((data) => {\n                                this.hasEditorial = data.collections.length > 0;\n                            });\n                        this.collectionService\n                            .getCollectionSubcollections(\n                                RestConstants.ROOT,\n                                RestConstants.COLLECTIONSCOPE_TYPE_MEDIA_CENTER,\n                            )\n                            .subscribe((data) => {\n                                this.hasMediacenter = data.collections.length > 0;\n                            });\n                        this.initialize();\n                    } else {\n                        RestHelper.goToLogin(this.router, this.config);\n                    }\n                },\n                () => RestHelper.goToLogin(this.router, this.config),\n            );\n        });\n        // Navigate to parent collection when the current collection is deleted.\n        this.localEvents.nodesDeleted\n            .pipe(\n                takeUntil(this.destroyed),\n                filter((nodes) => nodes.some((node) => node.ref.id === this.collection.ref.id)),\n            )\n            .subscribe(() => this.navigate(this.parentCollectionId.id));\n    }\n\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n        this.tempStorage.set(\n            TemporaryStorageService.NODE_RENDER_PARAMETER_DATA_SOURCE,\n            this.collectionContentRef?.dataSourceReferences,\n        );\n    }\n\n    isMobile() {\n        return this.uiService.isMobile();\n    }\n\n    isMobileWidth() {\n        return window.innerWidth < UIConstants.MOBILE_WIDTH;\n    }\n\n    navigate(id = '', addToOther = '', feedback = false) {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            params.scope = this.tabSelected;\n            if (id && id !== '-root-') {\n                params.id = id;\n            }\n            if (feedback) {\n                params.feedback = feedback;\n            }\n            if (addToOther) {\n                params.addToOther = addToOther;\n            }\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                queryParams: params,\n            });\n        });\n    }\n\n    closeAddToOther() {\n        this.navigate(this.collection.ref.id);\n    }\n\n    selectTab(tab: string) {\n        if (this.tabSelected !== tab || this.getCollectionId() !== RestConstants.ROOT) {\n            this.tabSelected = tab;\n            this.parentCollectionId = new EduData.Reference(\n                RestConstants.HOME_REPOSITORY,\n                RestConstants.ROOT,\n            );\n            this.contentDetailObject = null;\n            this.navigate();\n        }\n    }\n\n    isRootLevelCollection(): boolean {\n        return this.isRootLevel;\n    }\n\n    isAllowedToEditCollection(): boolean {\n        if (this.isRootLevelCollection()) {\n            return !this.isGuest; //this.tabSelected === RestConstants.COLLECTIONSCOPE_MY\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n\n    feedbackAllowed(): boolean {\n        return (\n            !this.isGuest &&\n            RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_FEEDBACK)\n        );\n    }\n\n    isUserAllowedToEdit(collection: Node): boolean {\n        return RestHelper.isUserAllowedToEdit(collection, this.person);\n    }\n\n    pinCollection() {\n        this.addPinning = this.collection.ref.id;\n    }\n\n    getPrivacyScope(collection: EduData.Collection): string {\n        return collection.scope;\n        //  return RestHelper.getPrivacyScope(collection);\n    }\n\n    navigateToSearch() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'search'], {\n                queryParams: params,\n            });\n        });\n    }\n\n    isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.collection?.collection?.color) ===\n            PreferredColor.White\n        );\n    }\n\n    getScopeInfo() {\n        return this.nodeHelper.getCollectionScopeInfo(this.collection);\n    }\n\n    collectionEdit(): void {\n        if (this.isAllowedToEditCollection()) {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'edit',\n                    this.collection.ref.id,\n                ],\n                { queryParams: { mainnav: this.mainnav } },\n            );\n            return;\n        }\n    }\n\n    getScope() {\n        return this.tabSelected ? this.tabSelected : RestConstants.COLLECTIONSCOPE_ALL;\n    }\n\n    onCreateCollection() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'new',\n                    this.collection.ref.id,\n                ],\n                { queryParams: params },\n            );\n        });\n    }\n\n    onCollectionsClick(collection: Node): void {\n        // remember actual collection as breadcrumb\n        if (!this.isRootLevelCollection()) {\n            this.parentCollectionId = this.collection.ref;\n        }\n\n        // set thru router so that browser back button can work\n        this.navigate(collection.ref.id);\n    }\n\n    refreshAll() {\n        this.displayCollectionById(this.collection.ref.id);\n    }\n\n    async displayCollectionById(id: string) {\n        if (!!id) {\n            try {\n                this.collection = (\n                    await this.collectionService.getCollection(id).toPromise()\n                ).collection;\n            } catch (e) {\n                if (e.status === RestConstants.HTTP_FORBIDDEN) {\n                    const login = await this.connector.isLoggedIn().toPromise();\n                    if (login.statusCode === RestConstants.STATUS_CODE_OK) {\n                        this.toast.error(e);\n                    } else {\n                        RestHelper.goToLogin(this.router, this.config, null);\n                    }\n                }\n            }\n        } else {\n            this.setCollectionId(RestConstants.ROOT);\n        }\n        this.isLoading = false;\n        this.renderBreadcrumbs();\n        this.isRootLevel = !id;\n    }\n\n    closeDialog() {\n        this.dialogTitle = null;\n    }\n\n    showTabs() {\n        return this.isRootLevelCollection() && (!this.isGuest || this.hasEditorial);\n    }\n\n    hasNonIconPreview(): boolean {\n        const preview = this.collection?.preview;\n        return preview && !preview.isIcon;\n    }\n\n    private renderBreadcrumbs() {\n        this.breadcrumbsService.setNodePath([]);\n        if (this.collection.ref.id === RestConstants.ROOT) {\n            return;\n        }\n        this.nodeService\n            .getNodeParents(this.collection.ref.id, false)\n            .subscribe((data: EduData.NodeList) => {\n                const path = data.nodes.reverse();\n                if (path.length > 1) {\n                    this.parentCollectionId = new EduData.Reference(\n                        path[path.length - 2].ref.repo,\n                        path[path.length - 2].ref.id,\n                    );\n                }\n                this.breadcrumbsService.setNodePath(path);\n            });\n    }\n\n    private initialize() {\n        // load user profile\n        this.iamService.getCurrentUserAsync().then(\n            (iamUser) => {\n                // WIN\n\n                this.person = iamUser.person;\n\n                // set app to ready state\n                this.isReady = true;\n                // subscribe to parameters of url\n                this.route.queryParams.subscribe(async (params) => {\n                    const diffs = Helper.getDifferentKeys(this.params, params);\n                    if (Object.keys(diffs).length === 1 && diffs.viewType) {\n                        this.params = params;\n                        return;\n                    }\n                    this.params = params;\n                    if (params.scope) {\n                        this.tabSelected = params.scope;\n                    } else {\n                        this.tabSelected = this.isGuest\n                            ? RestConstants.COLLECTIONSCOPE_ALL\n                            : RestConstants.COLLECTIONSCOPE_MY;\n                    }\n                    this.reurl = params.reurl;\n\n                    if (params.mainnav) {\n                        this.mainnav = params.mainnav !== 'false';\n                    }\n\n                    // get id from route and validate input data\n                    const id = params.id;\n                    if (params.addToOther) {\n                        this.nodeService\n                            .getNodeMetadata(params.addToOther)\n                            .subscribe((data: EduData.NodeWrapper) => {\n                                this.addToOther = [data.node];\n                            });\n                    }\n                    await this.displayCollectionById(id);\n\n                    /*if (params.nodeId) {\n                        let node = params.nodeId.split('/');\n                        node = node[node.length - 1];\n                        this.collectionService\n                            .addNodeToCollection(id, node, null)\n                            .subscribe(\n                                () => this.navigate(id),\n                                (error: any) => {\n                                    this.handleError(error);\n                                    this.navigate(id);\n                                    //this.displayCollectionById(id)\n                                },\n                            );\n                    } else {*/\n                    // }\n                });\n            },\n            (error) => {\n                // FAIL\n                this.toast.error(error);\n                this.isReady = true;\n            },\n        );\n    }\n\n    private setCollectionId(id: string) {\n        this.collection = new Node();\n        this.collection.ref = { id } as NodeRef;\n        this.collection.aspects = [RestConstants.CCM_ASPECT_COLLECTION];\n    }\n\n    private getCollectionId() {\n        const c = this.collection;\n        return c != null && c.ref != null ? c.ref.id : null;\n    }\n\n    createAllowed = () => {\n        if (this.isGuest) {\n            return false;\n        }\n        if (this.isRootLevelCollection()) {\n            let allowed = this.connector.hasToolPermissionInstant(\n                RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS,\n            );\n            if (this.tabSelected === RestConstants.COLLECTIONSCOPE_MY) {\n                return allowed;\n            }\n            // for anything else, the user must be able to invite everyone\n            allowed =\n                allowed &&\n                this.connector.hasToolPermissionInstant(\n                    RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES,\n                );\n            if (this.tabSelected === RestConstants.COLLECTIONSCOPE_ORGA) {\n                allowed = false;\n            } else if (this.tabSelected === RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL) {\n                allowed = allowed && this.adminMediacenters?.length === 1;\n            } else if (this.tabSelected === RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL) {\n                allowed =\n                    allowed &&\n                    this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    );\n            }\n            return allowed;\n        } else {\n            return this.isAllowedToEditCollection();\n        }\n    };\n}\n\nexport interface SortInfo {\n    name: 'cm:name' | 'cm:modified' | 'ccm:collection_ordered_position';\n    ascending: boolean;\n    userModifyActive?: boolean;\n}\n","<es-tutorial\n  [element]=\"tutorialElement\"\n  [heading]=\"'COLLECTIONS.TUTORIAL_HEADING'\"\n  [description]=\"'COLLECTIONS.TUTORIAL_DESCRIPTION'\"\n  [showSkip]=\"false\"\n></es-tutorial>\n<mat-tab-group\n  role=\"navigation\"\n  [attr.aria-label]=\"'NAV.COLLECTIONS' | translate\"\n  mat-stretch-tabs\n  [color]=\"$any('dark')\"\n  [(selectedIndex)]=\"tabSelectedIndex\"\n  *ngIf=\"showTabs()\"\n>\n  <mat-tab *ngIf=\"!isGuest\" labelClass=\"mat-tab-my\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"person\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.MY' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"!isGuest\" labelClass=\"mat-tab-groups\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"group\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.EDU_GROUPS' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"hasEditorial\" labelClass=\"mat-tab-editorial\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"star\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.TYPE_EDITORIAL' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"hasMediacenter\" labelClass=\"mat-tab-media-center\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"business\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.TYPE_MEDIA_CENTER' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab labelClass=\"mat-tab-edu-all\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"language\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.EDU_ALL' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n</mat-tab-group>\n<div class=\"collections-header-group\">\n  <es-actionbar\n    *ngIf=\"collectionContentTemplateRef && !isRootLevelCollection()\"\n    #actionbarCollection\n    [numberOfAlwaysVisibleOptions]=\"1\"\n    [numberOfAlwaysVisibleOptionsMobile]=\"1\"\n    appearance=\"round\"\n    [style]=\"'flat'\"\n    [dropdownPosition]=\"'right'\"\n  ></es-actionbar>\n  <!-- collection header -->\n  <ng-container\n    [ngTemplateOutlet]=\"collectionContentTemplateRef ?? collectionContentTemplateRefDefault\"\n    [ngTemplateOutletContext]=\"{\n      $implicit: null,\n      collection: collection,\n      permissions: collectionContentRef?.permissions ?? null,\n      isLoading: isLoading,\n      tabSelected: tabSelected\n    }\"\n  ></ng-container>\n  <ng-template #collectionContentTemplateRefDefault> </ng-template>\n</div>\n\n<div cdkDropList [cdkDropListSortingDisabled]=\"true\">\n  <div\n    [class.collectionsContainerTabs]=\"showTabs()\"\n    [class.collectionsContainerNoSidebar]=\"isRootLevelCollection() || isLoading\"\n    class=\"collectionsContainer\"\n  >\n    <es-collection-info-bar\n      #infobar\n      *ngIf=\"!isLoading && !isRootLevelCollection() && collection\"\n      [collection]=\"collection\"\n      [permissions]=\"collectionContentRef?.permissions ?? null\"\n      (edit)=\"collectionEdit()\"\n    ></es-collection-info-bar>\n    <!-- <div *ngIf=\"isLoading\" class=\"collection-loading\"><es-spinner-small></es-spinner-small></div> -->\n    <div class=\"collections-right\">\n      <section\n        *ngIf=\"isLoading || !isReady\"\n        class=\"collections-loading-div\"\n        style=\"padding-top: 24px; text-align: center\"\n      >\n        <es-spinner></es-spinner>\n      </section>\n      <h1 *ngIf=\"isRootLevelCollection()\" esTitle class=\"cdk-visually-hidden\">\n        {{ 'COLLECTIONS.TITLE' | translate }}\n      </h1>\n      <a\n        *ngIf=\"!isLoading && isGuest\"\n        mat-button\n        color=\"primary\"\n        class=\"switchToSearch\"\n        title=\"{{ 'COLLECTIONS.TO_SEARCH' | translate }}\"\n        tabindex=\"0\"\n        (click)=\"navigateToSearch()\"\n        [routerLink]=\"['/' + ROUTER_PREFIX + 'search']\"\n      >\n        {{ 'COLLECTIONS.TO_SEARCH' | translate }}\n        <i esIcon=\"arrow_forward\"></i>\n      </a>\n      <ng-container *ngIf=\"collection\">\n        <div\n          role=\"navigation\"\n          [attr.aria-label]=\"'NAV.COLLECTIONS' | translate\"\n          class=\"breadcrumb-space\"\n          *ngIf=\"!isRootLevelCollection() && !isLoading\"\n        >\n          <es-breadcrumbs\n            class=\"collections-breadcrumb\"\n            [home]=\"'COLLECTIONS.TAB.' + tabSelected\"\n            [homeRouterLink]=\"{ routerLink: ['.'], queryParams: { scope: tabSelected } }\"\n            [invisibleDescription]=\"true\"\n            [canDropNodes]=\"collectionContentComponent.canDropOnCollectionBreadcrumbs\"\n            (onDrop)=\"collectionContentComponent.dropOnCollection($event.target, $event.source)\"\n          ></es-breadcrumbs>\n        </div>\n        <es-collection-content\n          #collectionContentComponent\n          [collection]=\"collection\"\n          [getInfobar]=\"getInfobar\"\n          [scope]=\"getScope()\"\n          [isRootLevel]=\"isRootLevelCollection()\"\n          [createAllowed]=\"createAllowed\"\n          [class.collections-master-div-notabs]=\"!showTabs()\"\n        >\n          <ng-template #empty>\n            <ng-container *ngIf=\"isRootLevelCollection()\">\n              <ng-container *ngIf=\"tabSelected === 'EDU_GROUPS'\">\n                {{ 'COLLECTIONS.EMPTY.SHARED' | translate }}\n              </ng-container>\n              <ng-container *ngIf=\"tabSelected === 'EDU_ALL'\">\n                {{ 'COLLECTIONS.EMPTY.PUBLIC' | translate }}\n              </ng-container>\n            </ng-container>\n            <ng-container *ngIf=\"!isRootLevelCollection()\">\n              {{ 'COLLECTIONS.EMPTY.SUBCOLLECTIONS' | translate }}\n            </ng-container>\n          </ng-template>\n        </es-collection-content>\n      </ng-container>\n    </div>\n  </div>\n  <es-footer [scope]=\"'collections'\"></es-footer>\n</div>\n<ng-template\n  #sortTool\n  let-columns=\"columns\"\n  let-sortInfo=\"sortInfo\"\n  let-callback=\"callback\"\n  let-toggleCallback=\"toggleCallback\"\n>\n  <mat-slide-toggle\n    *ngIf=\"sortInfo.name === 'ccm:collection_ordered_position'\"\n    [(ngModel)]=\"sortInfo.customActive\"\n    (ngModelChange)=\"toggleCallback.emit($event)\"\n  >\n    {{ 'COLLECTIONS.SORT_SLIDER' | translate }}\n  </mat-slide-toggle>\n  <button\n    *ngIf=\"sortDropdown.menu\"\n    [matMenuTriggerFor]=\"sortDropdown.menu\"\n    mat-button\n    color=\"primary\"\n  >\n    {{ 'NODE.' + sortInfo.name | translate }}\n    <i\n      *ngIf=\"sortInfo.name !== 'ccm:collection_ordered_position'\"\n      [esIcon]=\"'arrow_' + (sortInfo.ascending ? 'upward' : 'downward')\"\n    ></i>\n  </button>\n  <es-sort-dropdown\n    #sortDropdown\n    [columns]=\"columns\"\n    [sortBy]=\"sortInfo.name\"\n    [sortAscending]=\"sortInfo.ascending\"\n    (onSort)=\"callback.emit($event)\"\n  ></es-sort-dropdown>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { MdsModule } from '../../features/mds/mds.module';\nimport { SharedModule } from '../../shared/shared.module';\nimport { CollectionContentComponent } from './collection-content/collection-content.component';\nimport { CollectionInfoBarComponent } from './collection-info-bar/collection-info-bar.component';\nimport { CollectionNewComponent } from './collection-new/collection-new.component';\nimport { CollectionsPageRoutingModule } from './collections-page-routing.module';\nimport { CollectionsPageComponent } from './collections-page.component';\nimport { InfobarComponent } from './infobar/infobar.component';\nimport { CollectionProposalsComponent } from './collection-proposals/collection-proposals.component';\n\n@NgModule({\n    declarations: [\n        CollectionContentComponent,\n        CollectionInfoBarComponent,\n        CollectionNewComponent,\n        CollectionProposalsComponent,\n        CollectionsPageComponent,\n        InfobarComponent,\n    ],\n    imports: [SharedModule, MdsModule, CollectionsPageRoutingModule],\n})\nexport class CollectionsPageModule {}\n","import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { trigger } from '@angular/animations';\nimport { DialogButton } from '../../../core-module/core.module';\nimport { UIAnimation } from 'ngx-edu-sharing-ui';\n\n@Component({\n    selector: 'es-infobar',\n    templateUrl: 'infobar.component.html',\n    styleUrls: ['infobar.component.scss'],\n    animations: [\n        trigger('infobarBottom', UIAnimation.infobarBottom(UIAnimation.ANIMATION_TIME_SLOW)),\n    ],\n})\n/**\n * A Infobar (usually at the bottom) which features action buttons\n * As soon as the title is set, the infobar will be added to the dom and animated\n * Don't add it with *ngIf, otherwise it can't animate properly\n * Just add it to the component without constraints and set or remove the title value\n */\nexport class InfobarComponent {\n    /**\n     * Wether or not this bar can be closed using an \"x\" icon\n     * @type {boolean}\n     */\n    @Input() isCancelable = false;\n    /**\n     * Position, currently only 'bottom' is supported and default value\n     */\n    @Input() position = 'bottom';\n    /**\n     * The title, will be translated automatically\n     */\n    @Input() title: string;\n    /**\n     * The message, will be translated automatically\n     */\n    @Input() message: string;\n    /**\n     * Additional dynamic content for your language string, use an object, e.g.\n     * Language String: Hello {{ name }}\n     * And use messageParameters={name:'World'}\n     */\n    @Input() messageParameters: any;\n    /**\n     * Will be emitted when the users cancels the dialog\n     * @type {EventEmitter}\n     */\n    @Output() onCancel = new EventEmitter();\n    /** A list of buttons, see @DialogButton\n     * Also use the DialogButton.getYesNo() and others if applicable!\n     */\n    public _buttons: DialogButton[];\n    @Input() set buttons(buttons: DialogButton[]) {\n        if (!buttons) {\n            this._buttons = null;\n            return;\n        }\n        this._buttons = buttons.reverse();\n        setTimeout(() => {\n            if (this.buttonElements) this.buttonElements.nativeElement.focus();\n        }, 10);\n    }\n\n    @ViewChild('buttonElements') buttonElements: ElementRef;\n\n    public click(btn: DialogButton) {\n        btn.callback();\n    }\n    public cancel() {\n        this.onCancel.emit();\n    }\n}\n","<div class=\"infobar infobar-{{ position }}\" *ngIf=\"title\" [@infobarBottom]=\"title\">\n  <div class=\"infobar-message\">\n    <div class=\"title\">{{ title | translate }}</div>\n    <div class=\"message\">{{ message | translate : messageParameters }}</div>\n  </div>\n  <div class=\"infobar-buttons\" *ngIf=\"_buttons\">\n    <div *ngFor=\"let button of _buttons; let i = index\" #buttonElements>\n      <button\n        mat-raised-button\n        [color]=\"$any('white')\"\n        *ngIf=\"button.color === 'primary'\"\n        (click)=\"click(button)\"\n      >\n        {{ button.label | translate }}\n      </button>\n      <button\n        mat-button\n        [color]=\"$any('white')\"\n        *ngIf=\"button.color === 'standard'\"\n        (click)=\"click(button)\"\n      >\n        {{ button.label | translate }}\n      </button>\n    </div>\n  </div>\n  <div *ngIf=\"isCancelable\" class=\"infobar-cancel clickable\" (click)=\"cancel()\">\n    <i class=\"material-icons\">close</i>\n  </div>\n</div>\n","import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { Injectable } from '@angular/core';\nimport { DialogButton } from '../../../util/dialog-button';\nimport { GenericDialogButton } from '../../../features/dialogs/dialog-modules/generic-dialog/generic-dialog-data';\nimport { InfobarComponent } from './infobar.component';\n\n@Injectable({ providedIn: 'root' })\nexport class InfobarService {\n    overlayRef: OverlayRef | null;\n\n    constructor(private overlay: Overlay) {}\n\n    /**\n     * Shows an info bar with the given configuration.\n     *\n     * If there are any info bars visible, they are replaced by this one.\n     */\n    open<R extends string>({\n        title,\n        message,\n        buttons,\n    }: {\n        title: string;\n        message: string;\n        buttons: GenericDialogButton<R>[];\n    }): Promise<R | null> {\n        return new Promise((resolve) => {\n            if (this.overlayRef) {\n                this.overlayRef.dispose();\n            }\n            this.overlayRef = this.overlay.create();\n            const portal = new ComponentPortal(InfobarComponent);\n            const componentRef = this.overlayRef.attach(portal);\n            componentRef.instance.title = title;\n            componentRef.instance.message = message;\n            componentRef.instance.buttons = buttons.map(\n                (button) =>\n                    new DialogButton(button.label, button.config, () => {\n                        resolve(button.label);\n                        this.overlayRef.dispose();\n                    }),\n            );\n            componentRef.instance.isCancelable = true;\n            componentRef.instance.onCancel.subscribe(() => this.overlayRef.dispose());\n            componentRef.onDestroy(() => {\n                this.overlayRef = null;\n                resolve(null);\n            });\n        });\n    }\n\n    /**\n     * Closes the currently visible info bar, if any.\n     */\n    close(): void {\n        this.overlayRef?.dispose();\n    }\n}\n"],"names":["EventEmitter","InteractionType","ListItem","ListItemSort","NodeDataSource","NodeEntriesDisplayType","NodesRightMode","OptionItem","Scope","UIConstants","Subject","forkJoin","takeUntil","ConfigurationHelper","Helper","MdsHelper","RestConstants","RestHelper","UIHelper","ManagementEventType","i0","elementContainerStart","text","elementContainerEnd","advance","textInterpolate","pipeBind1","ctx_r7","scope","elementStart","template","CollectionContentComponent_ng_template_4_h2_1_ng_container_1_Template","CollectionContentComponent_ng_template_4_h2_1_ng_container_2_Template","elementEnd","property","ctx_r6","isRootLevel","CollectionContentComponent_ng_template_4_h2_1_Template","ctx_r1","isAllowedToEditCollection","dataSourceCollections","isEmpty","elementContainer","CollectionContentComponent_ng_template_6_div_0_ng_container_1_Template","ctx_r9","emptyRef","CollectionContentComponent_ng_template_6_div_0_Template","ctx_r3","createAllowed","textInterpolate1","CollectionContentComponent_div_8_div_1_Template","ctx_r4","isUserAllowedToEdit","collection","listener","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_button_9_Template_button_click_0_listener","$event","restoreView","_r25","element_r20","nextContext","element","ctx_r23","deleteReference","stopPropagation","resetView","preventDefault","element","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_button_9_Template","ctx_r21","canDelete","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_Template","ctx_r18","isDeleted","CollectionContentComponent_ng_container_9_section_2_div_10_div_4_Template","ctx_r19","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_displayTypeChange_4_listener","_r29","ctx_r28","referencesDisplayType","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_clickItem_4_listener","ctx_r30","onContentClick","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_sortChange_4_listener","ctx_r31","setReferenceSort","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_fetchData_4_listener","ctx_r32","loadMoreReferences","CollectionContentComponent_ng_container_9_section_2_ng_template_6_Template","templateRefExtractor","CollectionContentComponent_ng_container_9_section_2_ng_template_8_Template","CollectionContentComponent_ng_container_9_section_2_div_10_Template","classProp","ctx_r12","Table","dataSourceReferences","Emitter","CollectionsReferences","referencesColumns","pureFunction3","_c3","canDropOnRef","dropOnRef","pureFunction5","_c4","sortReferences","active","direction","customSortingInProgress","columns","isMobile","tmp_11_0","getData","length","sortCollections","pureFunction2","_c5","addMaterialSearchOptionItem","addMaterialBinaryOptionItem","pureFunction0","_c6","isLoading","CollectionContentComponent_ng_container_9_Template_es_collection_proposals_onContentClick_1_listener","_r34","ctx_r33","CollectionContentComponent_ng_container_9_section_2_Template","ctx_r5","CollectionContentComponent","_","DEFAULT_REQUEST","sortBy","CCM_PROP_COLLECTION_PINNED_STATUS","CCM_PROP_COLLECTION_PINNED_ORDER","CM_MODIFIED_DATE","sortAscending","constructor","authenticationService","bridge","collectionService","configurationService","dialogs","infobar","loadingScreen","mainNavService","mdsService","nodeHelper","nodeService","optionsService","route","router","toast","translation","uiService","Grid","destroyed$","ROUTER_PREFIX","interactionType","DefaultActionLink","clickItem","mainNavUpdateTrigger","sortCollectionColumns","CM_PROP_TITLE","CCM_PROP_COLLECTION_ORDERED_POSITION","createSubCollectionOptionItem","onCreateCollection","CM_PROP_C_CREATED","getCommonParameters","subscribe","params","addToCollection","ref","id","navigate","queryParams","getMainNav","topBar","createMenu","openUploadSelect","collectionsColumns","loadingTask","addLoadingTask","until","canDropOnCollectionBreadcrumbs","dropData","nodes","draggedNodes","target","accept","action","aspects","indexOf","CCM_ASPECT_COLLECTION","getNodesRight","ACCESS_WRITE","denyExplicit","hasOwnProperty","type","COLLECTIONTYPE_EDITORIAL","ACCESS_CC_PUBLISH","Effective","Local","canDropOnCollection","dragData","source","dropOnCollection","showProgressSpinner","mediatype","mode","error","closeProgressSpinner","moveNode","COLLECTIONHOME","refreshContent","handleError","map","toMove","push","getDialogs","onEvent","event","AddCollectionNodes","data","listReferences","addVirtualNodes","references","observeLoginInfo","pipe","login","isEnabled","toolPermissions","includes","TOOLPERMISSION_CREATE_ELEMENTS_FILES","TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS","ngOnDestroy","next","complete","ngOnInit","_this","_asyncToGenerator","mdsSets","getAvailableMds","HOME_REPOSITORY","set","getMetadataSet","metadataSet","toPromise","getColumns","clearComponents","actionbarReferences","registerMainNav","ngOnChanges","changes","currentValue","reset","name","orderCollections","properties","CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE","refMode","orderMode","refAscending","orderAscending","COLLECTION_ORDER_MODE_CUSTOM","setOptionsCollection","access","ACCESS_CHANGE_PERMISSIONS","getNodePermissions","permissions","localPermissions","concat","inheritedPermissions","isGuest","hasAccessPermission","PERMISSION_WRITE","status","DUPLICATE_NODE_RESPONSE","_this2","contentNode","CCM_TYPE_COLLECTION_PROPOSAL","clickElementEvent","originalId","dialogRef","openGenericDialog","title","message","buttons","isAllowedToDeleteNodes","label","config","color","afterClosed","response","deleteFromCollection","getNodeMetadata","node","emit","isAllowedToDeleteCollection","ACCESS_DELETE","PERMISSION_DELETE","callback","removeFromCollection","_this3","setMainNavConfig","currentScope","onCreate","addNodesToCollection","onConnectorCreated","patchMainNavConfig","create","allowed","allowBinary","parent","getSelection","clear","request","deepCopy","console","warn","count","COUNT_UNLIMITED","getCollectionSubcollections","repo","setData","collections","pagination","finishCollectionLoading","requestRefs","getReferencesRequest","getCollectionReferences","ALL","refs","sort","_this4","diff","getKeysWithDifferentValues","toggleReferencesOrder","amount","offset","editNodeProperty","CCM_PROP_COLLECTION_ORDER_MODE","instant","e","_this5","hasMore","appendData","loadMoreCollections","_this6","refreshBanner","setTimeout","initOptionsGenerator","actionbar","isDone","done","content","setCollectionSort","_this7","toggleCollectionsOrder","close","CollectionsCollection","activeObjects","initComponents","getInfobar","refreshComponents","_this8","open","log","changeCollectionsOrder","_this9","changeReferencesOrder","allowDuplicate","_this10","setOrder","getNodeIds","_this11","CCM_ASPECT_IO_REFERENCE","CCM_ASPECT_REMOTEREPOSITORY","_2","directiveInject","i1","AuthenticationService","i2","BridgeService","i3","RestCollectionService","ConfigService","i4","DialogsService","i5","InfobarService","i6","LoadingScreenService","i7","MainNavService","MdsService","i8","NodeHelperService","i9","RestNodeService","i10","OptionsHelperDataService","i11","ActivatedRoute","Router","i12","Toast","i13","TranslateService","i14","UIService","_3","selectors","contentQueries","CollectionContentComponent_ContentQueries","rf","ctx","dirIndex","CollectionContentComponent_Template_es_node_entries_wrapper_clickItem_3_listener","CollectionContentComponent_Template_es_node_entries_wrapper_fetchData_3_listener","CollectionContentComponent_Template_es_node_entries_wrapper_sortChange_3_listener","CollectionContentComponent_ng_template_4_Template","CollectionContentComponent_ng_template_6_Template","CollectionContentComponent_div_8_Template","CollectionContentComponent_ng_container_9_Template","SmallGrid","pureFunction1","_c7","tmp_8_0","ColorHelper","PreferredColor","CollectionInfoBarComponent_div_3_Template_div_click_2_listener","_r11","ctx_r10","edit","styleProp","ctx_r0","pipeBind2","_c2","sanitizeUrl","CollectionInfoBarComponent_div_4_img_4_Template","preview","url","CollectionInfoBarComponent_div_5_Template_div_click_0_listener","_r14","ctx_r13","textInterpolate2","childCollectionsCount","childReferencesCount","owner","authorFreetext","ctx_r8","permission_r18","authority","authorityType","group","user","CollectionInfoBarComponent_ng_container_28_div_5_ng_container_1_Template","ctx_r17","stats","total","CollectionInfoBarComponent_ng_container_28_div_5_Template","CollectionInfoBarComponent_ng_container_28_ng_container_6_Template","CollectionInfoBarComponent","getStats","isBrightColor","getPreferredColor","White","hasNonIconPreview","isIcon","getScopeInfo","getCollectionScopeInfo","NodeService","viewQuery","CollectionInfoBarComponent_Query","CollectionInfoBarComponent_div_3_Template","CollectionInfoBarComponent_div_4_Template","CollectionInfoBarComponent_div_5_Template","CollectionInfoBarComponent_div_12_Template","CollectionInfoBarComponent_div_13_Template","CollectionInfoBarComponent_span_18_Template","CollectionInfoBarComponent_span_19_Template","CollectionInfoBarComponent_es_mds_viewer_27_Template","CollectionInfoBarComponent_ng_container_28_Template","attribute","styleMap","icon","scopeName","DefaultGroups","EduData","DialogButton","FrameEventsService","LocalPermissions","Permission","TemporaryStorageService","AuthorityNamePipe","Observable","CollectionNewComponent_div_2_div_1_div_1_Template_div_click_0_listener","restoredCtx","_r12","i_r10","index","step_r9","$implicit","ctx_r11","currentStepPosition","newCollectionStep","STEP_ICONS","CollectionNewComponent_div_2_div_1_div_1_Template","ctx_r2","availableSteps","CollectionNewComponent_div_2_es_card_2_button_14_Template_button_click_0_listener","_r18","setCollectionType","CollectionNewComponent_div_2_es_card_2_button_15_Template_button_click_0_listener","_r20","CollectionNewComponent_div_2_es_card_2_div_16_button_1_Template_button_click_0_listener","_r23","ctx_r22","CollectionNewComponent_div_2_es_card_2_div_16_button_1_Template","ctx_r15","createEditorial","CollectionNewComponent_div_2_es_card_2_button_17_Template_button_click_0_listener","ctx_r24","CollectionNewComponent_div_2_es_card_2_Template_es_card_onCancel_0_listener","_r27","ctx_r26","newCollectionCancel","CollectionNewComponent_div_2_es_card_2_Template_button_click_3_listener","CollectionNewComponent_div_2_es_card_2_button_14_Template","CollectionNewComponent_div_2_es_card_2_button_15_Template","CollectionNewComponent_div_2_es_card_2_div_16_Template","CollectionNewComponent_div_2_es_card_2_button_17_Template","propertyInterpolate","canInvite","shareToAll","createMediacenter","CollectionNewComponent_div_2_es_card_3_div_9_Template_div_keyup_enter_0_listener","_r37","reference","click","CollectionNewComponent_div_2_es_card_3_div_9_Template_div_click_0_listener","currentCollection","CollectionNewComponent_div_2_es_card_3_div_10_Template_div_keyup_enter_0_listener","_r40","CollectionNewComponent_div_2_es_card_3_div_10_Template_div_click_0_listener","CollectionNewComponent_div_2_es_card_3_div_11_Template_div_keyup_enter_0_listener","_r43","CollectionNewComponent_div_2_es_card_3_div_11_Template_div_click_0_listener","imageData","CollectionNewComponent_div_2_es_card_3_ng_container_26_button_5_Template_button_click_0_listener","_r47","ctx_r46","switchToAuthorFreetext","CollectionNewComponent_div_2_es_card_3_ng_container_26_button_5_Template","authorFreetextAllowed","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template_input_ngModelChange_6_listener","_r50","ctx_r49","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template_button_click_8_listener","ctx_r51","cancelAuthorFreetext","ctx_r34","CollectionNewComponent_div_2_es_card_3_li_33_Template_li_click_0_listener","_r55","color_r52","ctx_r54","setColor","propertyInterpolate1","index_r53","ctx_r35","CollectionNewComponent_div_2_es_card_3_Template_es_card_onCancel_0_listener","_r57","ctx_r56","CollectionNewComponent_div_2_es_card_3_Template_input_change_5_listener","ctx_r58","imageDataChanged","CollectionNewComponent_div_2_es_card_3_div_9_Template","CollectionNewComponent_div_2_es_card_3_div_10_Template","CollectionNewComponent_div_2_es_card_3_div_11_Template","CollectionNewComponent_div_2_es_card_3_Template_input_ngModelChange_19_listener","ctx_r59","CollectionNewComponent_div_2_es_card_3_Template_textarea_ngModelChange_24_listener","ctx_r60","description","CollectionNewComponent_div_2_es_card_3_ng_container_26_Template","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowright_32_listener","ctx_r61","setColorByDirection","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowup_32_listener","ctx_r62","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowleft_32_listener","ctx_r63","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowdown_32_listener","ctx_r64","CollectionNewComponent_div_2_es_card_3_li_33_Template","imageOptions","COLORS","CollectionNewComponent_div_2_es_card_4_Template_es_card_onCancel_0_listener","_r67","ctx_r66","newCollectionType","toLowerCase","mdsSet","CollectionNewComponent_div_2_es_card_5_Template_es_card_onCancel_0_listener","_r73","ctx_r72","CollectionNewComponent_div_2_es_card_5_div_4_Template","CollectionNewComponent_div_2_es_card_5_Template_es_node_entries_wrapper_clickItem_5_listener","_r69","toggle","CollectionNewComponent_div_2_es_card_5_ng_template_7_Template","CollectionNewComponent_div_2_es_card_5_Template_mat_slide_toggle_ngModelChange_10_listener","ctx_r75","editorialPublic","editorialGroups","editorialColumns","_c9","_c8","CollectionNewComponent_div_2_es_card_6_Template_es_card_onCancel_0_listener","_r77","ctx_r76","CollectionNewComponent_div_2_es_card_6_Template_button_click_10_listener","ctx_r78","editPermissions","getShareStatus","CollectionNewComponent_div_2_div_1_Template","CollectionNewComponent_div_2_es_card_2_Template","CollectionNewComponent_div_2_es_card_3_Template","CollectionNewComponent_div_2_es_card_4_Template","CollectionNewComponent_div_2_es_card_5_Template","CollectionNewComponent_div_2_es_card_6_Template","STEP_NEW","STEP_GENERAL","STEP_METADATA","STEP_EDITORIAL_GROUPS","STEP_PERMISSIONS","CollectionNewComponent","handleKeyboardEvent","code","goBack","setCollection","observer","perm","metadataset","some","p","authorityName","AUTHORITY_EVERYONE","editId","rating","originalPermissions","getTypeForCollection","hasCustomScope","COLLECTIONSCOPE_CUSTOM_PUBLIC","COLLECTIONSCOPE_CUSTOM","EVENT_APPLY_NODE","updateImageOptions","fetch","then","res","blob","imageFile","info","imageWindow","connector","iamService","mediacenterService","eventService","platformLocation","temporaryStorage","zone","sanitizer","configLegacy","configService","translations","translationService","mainNav","DEFAULT_COLORS","mainnav","createCurriculum","AUTHORITY_DISPLAYNAME","STEP_SETTINGS","GENERAL","METADATA","PERMISSIONS","SETTINGS","EDITORIAL_GROUPS","destroyed","editorialGroupsSelected","addListener","waitForInit","isLoggedIn","getSets","sets","filterValidMds","metadatasets","statusCode","STATUS_CODE_OK","hasToolPermissionInstant","TOOLPERMISSION_INVITE","TOOLPERMISSION_INVITE_ALLAUTHORITIES","TOOLPERMISSION_COLLECTION_EDITORIAL","TOOLPERMISSION_COLLECTION_CURRICULUM","getMediacenters","mediacenters","filter","m","administrationAccess","mediacenter","TOOLPERMISSION_COLLECTION_CHANGE_OWNER","getCurrentUserAsync","person","setParent","JSON","parse","updateAvailableSteps","getCollection","ROOT","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE","searchGroups","GROUP_TYPE_EDITORIAL","CM_PROP_AUTHORITY_DISPLAYNAME","groups","additionalScope","perms","COLLECTIONSCOPE_MY","COLLECTIONSCOPE_ALL","saveCollection","updateCollection","navigateToCollectionId","handleNodeError","setPermissions","permissionsInfo","inherited","permission","editable","permissionsDummy","Node","iconURL","getThemeMimeIconSvg","isDirectory","openShareDialog","sendMessages","sendToApi","currentPermissions","result","isNewCollection","isEditCollection","parentId","rowLength","key","files","file","validType","startsWith","bypassSecurityTrustUrl","URL","createObjectURL","errorMessageContains","save","trim","COLLECTIONTYPE_MEDIA_CENTER","COLLECTIONTYPE_DEFAULT","save2","createCollection","saveImage","uploadCollectionImage","deleteCollectionImage","goToNextStep","getAvailableSteps","steps","isLastStep","pos","props","mds","getValues","loadMds","getEditoralGroups","organizationsRef","select","changed","change","selected","updateButtons","setCollectionGeneral","parentCollection","AddNodeAspects","CCM_ASPECT_LOMREPLICATION","CCM_ASPECT_CCLOM_GENERAL","editNodeMetadata","save3","save4","getEditorialGroupPermissions","copyAndCleanPermissions","setNodePermissions","notify","notifyMessage","COLLECTIONSCOPE_ORGA","pub","getAllAuthoritiesPermission","PERMISSION_CONSUMER","PERMISSION_COORDINATOR","list","window","history","back","add","pop","COLLECTION_ADD_NODES","deleteImage","imageFileRef","nativeElement","value","transform","authorFreetextInput","focus","openSearchWithReurl","reurlCreate","reurlTypes","Edit","Delete","RestConnectorService","RestIamService","RestMediacenterService","RestMdsService","PlatformLocation","NgZone","DomSanitizer","ConfigurationService","ApplicationRef","TranslationsService","CollectionNewComponent_Query","resolveDocument","CollectionNewComponent_es_global_progress_1_Template","CollectionNewComponent_div_2_Template","ActionbarComponent","CollectionProposalsComponent_section_0_Template_es_node_entries_wrapper_clickItem_6_listener","_r3","dataSourceCollectionProposals","CollectionsProposals","proposalColumns","CollectionProposalsComponent","optionsHelperService","CM_CREATOR","showLabel","refreshProposals","canEdit","getCollectionProposals","proposals","proposalCollection","listProposals","OptionsHelperService","CollectionProposalsComponent_Query","NgOnChangesFeature","decls","vars","consts","template","CollectionProposalsComponent_Template","CollectionProposalsComponent_section_0_Template","RouterModule","CollectionsPageComponent","routes","path","component","CollectionsPageRoutingModule","forChild","imports","exports","combineLatest","CollectionsPageComponent_mat_tab_group_1_mat_tab_2_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_3_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_4_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_5_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_Template_mat_tab_group_selectedIndexChange_0_listener","_r21","ctx_r20","tabSelectedIndex","CollectionsPageComponent_mat_tab_group_1_mat_tab_2_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_3_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_4_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_5_Template","CollectionsPageComponent_mat_tab_group_1_ng_template_7_Template","hasEditorial","hasMediacenter","CollectionsPageComponent_es_collection_info_bar_9_Template_es_collection_info_bar_edit_0_listener","collectionEdit","tmp_1_0","collectionContentRef","undefined","CollectionsPageComponent_a_13_Template_a_click_0_listener","navigateToSearch","CollectionsPageComponent_ng_container_14_div_1_Template_es_breadcrumbs_onDrop_2_listener","_r33","tabSelected","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_ng_container_1_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_ng_container_2_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_1_Template","isRootLevelCollection","CollectionsPageComponent_ng_container_14_div_1_Template","CollectionsPageComponent_ng_container_14_ng_template_4_Template","showTabs","getScope","CollectionsPageComponent_ng_template_16_mat_slide_toggle_0_Template_mat_slide_toggle_ngModelChange_0_listener","sortInfo_r39","sortInfo","customActive","toggleCallback_r41","toggleCallback","ascending","CollectionsPageComponent_ng_template_16_button_1_i_3_Template","_r44","menu","CollectionsPageComponent_ng_template_16_mat_slide_toggle_0_Template","CollectionsPageComponent_ng_template_16_button_1_Template","CollectionsPageComponent_ng_template_16_Template_es_sort_dropdown_onSort_2_listener","callback_r40","columns_r38","INDEX_MAPPING","COLLECTIONSCOPE_TYPE_EDITORIAL","COLLECTIONSCOPE_TYPE_MEDIA_CENTER","collectionShare","_collectionShare","refreshAll","selectTab","breadcrumbsService","localEvents","tempStorage","networkService","temporaryStorageService","SCOPES","dialogCancelable","isReady","collectionSortEmitter","collectionCustomSortEmitter","referenceSortEmitter","referenceCustomSortEmitter","contentDetailObject","parentCollectionId","Reference","adminMediacenters","getRepositories","isValidLogin","initialize","goToLogin","nodesDeleted","NODE_RENDER_PARAMETER_DATA_SOURCE","isMobileWidth","innerWidth","MOBILE_WIDTH","addToOther","feedback","closeAddToOther","tab","getCollectionId","feedbackAllowed","PERMISSION_FEEDBACK","pinCollection","addPinning","getPrivacyScope","onCollectionsClick","displayCollectionById","HTTP_FORBIDDEN","setCollectionId","renderBreadcrumbs","closeDialog","dialogTitle","setNodePath","getNodeParents","reverse","iamUser","_ref","diffs","getDifferentKeys","Object","keys","viewType","reurl","_x","apply","arguments","c","BreadcrumbsService","LocalEventsService","RestNetworkService","CollectionsPageComponent_ContentQueries","CollectionsPageComponent_Template","CollectionsPageComponent_mat_tab_group_1_Template","CollectionsPageComponent_es_actionbar_3_Template","CollectionsPageComponent_ng_template_5_Template","CollectionsPageComponent_es_collection_info_bar_9_Template","CollectionsPageComponent_section_11_Template","CollectionsPageComponent_h1_12_Template","CollectionsPageComponent_a_13_Template","CollectionsPageComponent_ng_container_14_Template","CollectionsPageComponent_ng_template_16_Template","tutorialElement","collectionContentTemplateRef","tmp_6_0","_r2","pureFunction4","tmp_7_0","MdsModule","SharedModule","InfobarComponent","CollectionsPageModule","declarations","trigger","UIAnimation","InfobarComponent_div_0_div_8_div_1_button_2_Template_button_click_0_listener","button_r4","InfobarComponent_div_0_div_8_div_1_button_3_Template_button_click_0_listener","_r15","InfobarComponent_div_0_div_8_div_1_button_2_Template","InfobarComponent_div_0_div_8_div_1_button_3_Template","InfobarComponent_div_0_div_8_div_1_Template","_buttons","InfobarComponent_div_0_div_9_Template_div_click_0_listener","cancel","InfobarComponent_div_0_div_8_Template","InfobarComponent_div_0_div_9_Template","classMapInterpolate1","position","messageParameters","isCancelable","onCancel","buttonElements","btn","InfobarComponent_Query","InfobarComponent_div_0_Template","infobarBottom","ANIMATION_TIME_SLOW","ComponentPortal","overlay","Promise","resolve","overlayRef","dispose","portal","componentRef","attach","instance","button","onDestroy","inject","Overlay","factory","fac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}