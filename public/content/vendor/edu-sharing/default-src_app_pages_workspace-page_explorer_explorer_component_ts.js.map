{"version":3,"file":"default-src_app_pages_workspace-page_explorer_explorer_component_ts.js","mappings":"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","sources":["./src/app/pages/workspace-page/explorer/explorer.component.ts","./src/app/pages/workspace-page/explorer/explorer.component.html","./src/app/pages/workspace-page/workspace-utils.ts"],"sourcesContent":["import {\n    AfterViewInit,\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {\n    ConfigurationService,\n    Node,\n    NodeList,\n    RestConnectorService,\n    RestConstants,\n    SearchRequestCriteria,\n    SessionStorageService,\n    UIService,\n} from '../../../core-module/core.module';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Toast } from '../../../services/toast';\nimport { Helper } from '../../../core-module/rest/helper';\nimport {\n    ActionbarComponent,\n    CustomOptions,\n    DropSource,\n    DropTarget,\n    FetchEvent,\n    InteractionType,\n    ListItem,\n    ListSortConfig,\n    LocalEventsService,\n    NodeClickEvent,\n    NodeDataSource,\n    NodeEntriesDataType,\n    NodeEntriesDisplayType,\n    NodeEntriesWrapperComponent,\n    NodeRoot,\n    Scope,\n    TemporaryStorageService,\n} from 'ngx-edu-sharing-ui';\nimport { canDropOnNode } from '../workspace-utils';\nimport { BehaviorSubject, combineLatest, Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    distinctUntilChanged,\n    switchMap,\n    takeUntil,\n    tap,\n} from 'rxjs/operators';\nimport {\n    DEFAULT,\n    HOME_REPOSITORY,\n    NodeService,\n    PROPERTY_FILTER_ALL,\n    SearchResults,\n    SearchService,\n} from 'ngx-edu-sharing-api';\n\n@Component({\n    selector: 'es-workspace-explorer',\n    templateUrl: 'explorer.component.html',\n    styleUrls: ['explorer.component.scss'],\n})\nexport class WorkspaceExplorerComponent implements OnDestroy, OnChanges, AfterViewInit {\n    public readonly SCOPES = Scope;\n    readonly InteractionType = InteractionType;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n\n    public static getColumns(\n        connector: RestConnectorService,\n        customColumns: ListItem[] = [],\n        configColumns: string[] = [],\n    ) {\n        let defaultColumns: ListItem[] = [];\n        defaultColumns.push(new ListItem('NODE', RestConstants.CM_NAME));\n        defaultColumns.push(new ListItem('NODE', RestConstants.CM_CREATOR));\n        defaultColumns.push(new ListItem('NODE', RestConstants.CM_MODIFIED_DATE));\n        if (connector.getCurrentLogin() ? connector.getCurrentLogin().isAdmin : false) {\n            defaultColumns.push(new ListItem('NODE', RestConstants.NODE_ID));\n\n            const repsource = new ListItem('NODE', RestConstants.CCM_PROP_REPLICATIONSOURCEID);\n            repsource.visible = false;\n            defaultColumns.push(repsource);\n        }\n        const title = new ListItem('NODE', RestConstants.LOM_PROP_TITLE);\n        title.visible = false;\n        const size = new ListItem('NODE', RestConstants.SIZE);\n        size.visible = false;\n        const created = new ListItem('NODE', RestConstants.CM_PROP_C_CREATED);\n        created.visible = false;\n        const mediatype = new ListItem('NODE', RestConstants.MEDIATYPE);\n        mediatype.visible = false;\n        const keywords = new ListItem('NODE', RestConstants.LOM_PROP_GENERAL_KEYWORD);\n        keywords.visible = false;\n        const dimensions = new ListItem('NODE', RestConstants.DIMENSIONS);\n        dimensions.visible = false;\n        const version = new ListItem('NODE', RestConstants.LOM_PROP_LIFECYCLE_VERSION);\n        version.visible = false;\n        const usage = new ListItem('NODE', RestConstants.VIRTUAL_PROP_USAGECOUNT);\n        usage.visible = false;\n        const license = new ListItem('NODE', RestConstants.CCM_PROP_LICENSE);\n        license.visible = false;\n        const wfStatus = new ListItem('NODE', RestConstants.CCM_PROP_WF_STATUS);\n        wfStatus.visible = false;\n        defaultColumns.push(title);\n        defaultColumns.push(size);\n        defaultColumns.push(created);\n        defaultColumns.push(mediatype);\n        defaultColumns.push(keywords);\n        defaultColumns.push(dimensions);\n        defaultColumns.push(version);\n        defaultColumns.push(usage);\n        defaultColumns.push(license);\n        defaultColumns.push(wfStatus);\n\n        if (Array.isArray(configColumns)) {\n            const configList: ListItem[] = [];\n            for (const col of defaultColumns) {\n                if (configColumns.indexOf(col.name) != -1) {\n                    col.visible = true;\n                    configList.push(col);\n                }\n            }\n            for (const col of defaultColumns) {\n                if (configColumns.indexOf(col.name) == -1) {\n                    col.visible = false;\n                    configList.push(col);\n                }\n            }\n            // sort as defined inside config\n            configList.sort((a, b) => {\n                let pos1 = configColumns.indexOf(a.name);\n                let pos2 = configColumns.indexOf(b.name);\n                if (pos1 === -1) pos1 = configColumns.length;\n                if (pos2 === -1) pos2 = configColumns.length;\n                return pos1 - pos2;\n            });\n            defaultColumns = configList;\n        }\n        if (Array.isArray(customColumns)) {\n            for (const column of defaultColumns) {\n                let add = true;\n                for (const column2 of customColumns) {\n                    if (column.name === column2.name) {\n                        add = false;\n                        break;\n                    }\n                }\n                if (add) {\n                    customColumns.push(column);\n                }\n            }\n            return customColumns;\n        }\n        return defaultColumns;\n    }\n\n    @ViewChild(NodeEntriesWrapperComponent) nodeEntries: NodeEntriesWrapperComponent<Node>;\n    @Input() customOptions: CustomOptions;\n    @Input() dataSource: NodeDataSource<Node>;\n    @Output() nodesChange = new EventEmitter<Node[]>();\n    sort: ListSortConfig = {\n        allowed: true,\n        active: RestConstants.CM_NAME,\n        direction: 'asc',\n        columns: [],\n    };\n\n    public columns: ListItem[] = [];\n    @Input() displayType = NodeEntriesDisplayType.Table;\n    @Output() refreshTree = new EventEmitter<void>();\n    @Output() displayTypeChange = new EventEmitter<NodeEntriesDisplayType>();\n    @Input() reorderDialog = false;\n    @Output() reorderDialogChange = new EventEmitter<boolean>();\n    @Input() preventKeyevents: boolean;\n    @Input() actionbar: ActionbarComponent;\n\n    totalCount: number;\n\n    public searchQuery$ = new BehaviorSubject<string>(null);\n    node$ = new BehaviorSubject<Node>(null);\n    load$ = new ReplaySubject<{ nodes: Observable<NodeList | SearchResults>; reset: boolean }>();\n    private lastRequestSearch: boolean;\n\n    _root: NodeRoot;\n    @Input() set root(root: NodeRoot) {\n        this._root = root;\n        this.storage\n            .get(SessionStorageService.KEY_WORKSPACE_SORT + root, null)\n            .subscribe((data) => {\n                if (data?.active != null) {\n                    this.sort.active = data.active;\n                    this.sort.direction = data.direction;\n                } else {\n                    this.sort.active = RestConstants.CM_NAME;\n                    this.sort.direction = 'asc';\n                }\n            });\n    }\n    @Input() set current(current: Node) {\n        this.setNode(current);\n    }\n    @Input() set searchQuery(query: any) {\n        this.setSearchQuery(query);\n    }\n    @Output() onOpenNode = new EventEmitter<NodeEntriesDataType>();\n    @Output() onViewNode = new EventEmitter();\n    @Output() onSelectionChanged = new EventEmitter();\n    @Output() onSelectNode = new EventEmitter<NodeEntriesDataType>();\n    @Output() onSearchGlobal = new EventEmitter();\n    @Output() onDrop = new EventEmitter<{ target: DropTarget; source: DropSource<Node> }>();\n    @Output() onReset = new EventEmitter();\n    private path: Node[];\n    private destroyed = new Subject<void>();\n    searchGlobal() {\n        this.onSearchGlobal.emit(this.searchQuery$.value);\n    }\n    public load(event: FetchEvent = null) {\n        if (this.node$.value == null && !this.searchQuery$.value) return;\n        if (this.dataSource.isLoading) {\n            // return;\n        }\n        if (this.searchQuery$.value) {\n            this.sort.columns = RestConstants.POSSIBLE_SORT_BY_FIELDS_SOLR;\n        } else {\n            this.sort.columns = RestConstants.POSSIBLE_SORT_BY_FIELDS;\n        }\n        if (!this.sort.columns.some((s) => s.name === this.sort.active)) {\n            this.sort.active = RestConstants.CM_NAME;\n            this.sort.direction = 'asc';\n            // set sorting will reinit everything\n            this.setSorting(this.sort);\n            return;\n        }\n        if (event?.reset) {\n            this.dataSource.reset();\n            this.nodeEntries.getSelection().clear();\n            this.onReset.emit();\n            if (event.offset === 0) {\n                this.nodeEntries.resetPagination();\n            }\n        } else if (this.dataSource.isFullyLoaded()) {\n            return;\n        }\n        this.dataSource.isLoading = true;\n        // ignore virtual (new) added/uploaded elements\n        const offset = event.offset || this.getRealNodeCount();\n        if (this.searchQuery$.value) {\n            const query = this.searchQuery$.value;\n            this.lastRequestSearch = true;\n            /*this.search.searchByProperties([RestConstants.NODE_ID,RestConstants.CM_PROP_TITLE,RestConstants.CM_NAME,RestConstants.LOM_PROP_DESCRIPTION,RestConstants.LOM_PROP_GENERAL_KEYWORD],\n              [query,query,query,query,query],[],RestConstants.COMBINE_MODE_OR,RestConstants.CONTENT_TYPE_FILES_AND_FOLDERS, request).subscribe((data : NodeList) => this.addNodes(data,true));*/\n            const criteria: SearchRequestCriteria[] = [];\n            criteria.push({ property: RestConstants.PRIMARY_SEARCH_CRITERIA, values: [query] });\n            if (this.node$.value) {\n                criteria.push({\n                    property: 'parent',\n                    values: [this.node$.value ? this.node$.value.ref.id : ''],\n                });\n            }\n            this.load$.next({\n                reset: event?.reset,\n                nodes: this.search.search({\n                    query: 'workspace',\n                    repository: HOME_REPOSITORY,\n                    metadataset: DEFAULT,\n                    contentType: (this.connector.getCurrentLogin() &&\n                    this.connector.getCurrentLogin().isAdmin\n                        ? RestConstants.CONTENT_TYPE_ALL\n                        : RestConstants.CONTENT_TYPE_FILES_AND_FOLDERS) as any,\n                    body: {\n                        criteria,\n                        resolveCollections: false,\n                        resolveUsernames: true,\n                    },\n                    skipCount: offset,\n                    propertyFilter: [PROPERTY_FILTER_ALL],\n                    sortProperties: [this.sort.active],\n                    sortAscending: [this.sort.direction === 'asc'],\n                    maxItems: event?.amount || RestConnectorService.DEFAULT_NUMBER_PER_REQUEST,\n                }),\n            });\n            // this.nodeApi.searchNodes(query,[],request).subscribe((data : NodeList) => this.addNodes(data,true));\n        } else {\n            this.lastRequestSearch = false;\n            this.load$.next({\n                reset: event?.reset,\n                nodes: this.nodeApi.getChildren(this.node$.value.ref.id, {\n                    skipCount: offset,\n                    maxItems: event?.amount || RestConnectorService.DEFAULT_NUMBER_PER_REQUEST,\n                    propertyFilter: [PROPERTY_FILTER_ALL],\n                }),\n            });\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed.next();\n        this.destroyed.complete();\n        this.temporaryStorage.set(\n            TemporaryStorageService.NODE_RENDER_PARAMETER_DATA_SOURCE,\n            this.dataSource,\n        );\n    }\n\n    async ngOnChanges(changes: SimpleChanges) {\n        if (changes.displayType) {\n            await this.initOptions();\n        }\n    }\n\n    private handleError(error: any) {\n        if (error.status == 404)\n            this.toast.error(null, 'WORKSPACE.TOAST.NOT_FOUND', { id: this.node$.value.ref.id });\n        else this.toast.error(error);\n\n        this.dataSource.isLoading = false;\n    }\n    private addNodes(data: NodeList) {\n        this.dataSource.isLoading = false;\n        if (data && data.nodes) {\n            this.dataSource.appendData(data.nodes);\n            this.dataSource.setPagination(data.pagination);\n        }\n    }\n    constructor(\n        private connector: RestConnectorService,\n        private translate: TranslateService,\n        private storage: SessionStorageService,\n        private temporaryStorage: TemporaryStorageService,\n        private config: ConfigurationService,\n        private search: SearchService,\n        private toast: Toast,\n        public ui: UIService,\n        private nodeApi: NodeService,\n        private localEvents: LocalEventsService,\n    ) {\n        // super(temporaryStorage,['_node','_nodes','sortBy','sortAscending','columns','totalCount','hasMoreToLoad']);\n        this.initColumns();\n        this.registerNodesDeleted();\n        combineLatest([this.node$, this.searchQuery$])\n            .pipe(\n                distinctUntilChanged((a, b) => {\n                    return Helper.objectEquals(a[0], b[0]) && a[1] === b[1];\n                }),\n                debounceTime(10),\n            )\n            .subscribe(async (value) => {\n                // FIXME: This goes back to the first page when reloading. `NodeEntriesWrapper`\n                // would restore the page via the `page` query parameter otherwise.\n                await this.load({\n                    offset: 0,\n                    reset: true,\n                });\n            });\n        this.load$\n            .pipe(\n                // map((o) => o.toPromise()),\n                // switchMap(result => result.toPromise())\n                tap(({ reset }) => {\n                    if (reset) {\n                        this.dataSource.reset();\n                    }\n                    this.dataSource.isLoading = true;\n                }),\n                switchMap(\n                    async ({ nodes }) =>\n                        await nodes\n                            .pipe(\n                                catchError((err) => {\n                                    this.handleError(err);\n                                    return of(null);\n                                }),\n                            )\n                            .toPromise(),\n                ),\n            )\n            .subscribe(async (data) => {\n                if (data) {\n                    this.addNodes(data);\n                }\n            });\n    }\n\n    async ngAfterViewInit() {\n        await this.initOptions();\n    }\n    public async setSorting(config: ListSortConfig) {\n        this.sort = config;\n        await this.storage.set(SessionStorageService.KEY_WORKSPACE_SORT + this._root, {\n            active: config.active,\n            direction: config.direction,\n        });\n        await this.load({ reset: true, offset: 0 });\n    }\n    public onSelection(event: Node[]) {\n        this.onSelectionChanged.emit(event);\n    }\n    /*\n    private addParentToPath(node : Node,path : string[]) {\n\n      path.splice(1,0,node.ref.id);\n      if (node.parent.id==path[0] || node.parent.id==null) {\n        this.onOpenNode.emit(node);\n        return;\n      }\n      this.nodeApi.getNodeMetadata(node.parent.id).subscribe((data: NodeWrapper)=> {\n        this.addParentToPath(data.node, path);\n      });\n\n    }\n     */\n    public doubleClick(node: Node) {\n        this.onOpenNode.emit(node);\n    }\n\n    private setNode(current: Node) {\n        this.searchQuery$.next(null);\n        if (!current) {\n            this.node$.next(null);\n            return;\n        }\n\n        if (this.dataSource?.isLoading) {\n            setTimeout(() => this.setNode(current), 10);\n            return;\n        }\n        if (Helper.objectEquals(this.node$.value, current)) return;\n        this.node$.next(current);\n        this.initOptions();\n    }\n\n    private setSearchQuery(query: any) {\n        setTimeout(() => {\n            if (query && query.query) {\n                this.searchQuery$.next(query.query);\n                this.node$.next(query.node);\n            } else {\n                this.searchQuery$.next(null);\n            }\n        });\n    }\n    canDrop = canDropOnNode;\n    drop = (target: DropTarget, source: DropSource<Node>) => {\n        this.onDrop.emit({\n            target,\n            source,\n        });\n    };\n\n    private getRealNodeCount() {\n        return this.dataSource?.getData().filter((n) => !n.virtual).length;\n    }\n\n    initColumns() {\n        this.config.get('workspaceColumns').subscribe((data: string[]) => {\n            this.storage.get('workspaceColumns').subscribe((columns: any[]) => {\n                this.columns = WorkspaceExplorerComponent.getColumns(this.connector, columns, data);\n            });\n        });\n    }\n\n    select(event: NodeClickEvent<NodeEntriesDataType>) {\n        if (\n            !(\n                this.nodeEntries.getSelection().selected.length === 1 &&\n                this.nodeEntries.getSelection().selected[0] === event.element\n            )\n        ) {\n            this.nodeEntries.getSelection().clear();\n        }\n        this.nodeEntries.getSelection().toggle(event.element as Node);\n    }\n\n    private async initOptions() {\n        await this.nodeEntries?.initOptionsGenerator({\n            actionbar: this.actionbar,\n            customOptions: this.customOptions,\n            parent: this.node$.value,\n        });\n    }\n\n    private registerNodesDeleted(): void {\n        this.localEvents.nodesDeleted.pipe(takeUntil(this.destroyed)).subscribe((nodes) => {\n            this.dataSource.removeData(nodes);\n            this.nodeEntries?.getSelection().clear();\n        });\n    }\n\n    saveColumns(columns: ListItem[]) {\n        this.storage.set('workspaceColumns', columns);\n    }\n\n    clickItem(event: NodeClickEvent<NodeEntriesDataType>) {\n        if (this.ui.isMobile()) {\n            this.onOpenNode.emit(event.element);\n        } else {\n            this.select(event);\n        }\n    }\n\n    syncTreeViewOnAdd(nodes: Node[]) {\n        if (nodes.filter((n) => n.virtual && n.isDirectory).length) {\n            this.refreshTree.emit();\n        }\n    }\n}\n","<es-node-entries-wrapper\n  [dataSource]=\"dataSource\"\n  [scope]=\"SCOPES.WorkspaceList\"\n  [columns]=\"columns\"\n  [configureColumns]=\"true\"\n  (columnsChange)=\"saveColumns($event)\"\n  [displayType]=\"displayType\"\n  [class.grid]=\"displayType !== NodeEntriesDisplayType.Table\"\n  (displayTypeChange)=\"displayTypeChange.emit($event)\"\n  [elementInteractionType]=\"InteractionType.Emitter\"\n  (fetchData)=\"load($event)\"\n  [sort]=\"sort\"\n  [dragDrop]=\"{\n    dragAllowed: true,\n    dropAllowed: canDrop,\n    dropped: drop\n  }\"\n  [primaryInstance]=\"true\"\n  [singleClickHint]=\"'static'\"\n  (sortChange)=\"setSorting($event)\"\n  (clickItem)=\"clickItem($event)\"\n  (dblClickItem)=\"onOpenNode.emit($event.element)\"\n  (virtualNodesAdded)=\"syncTreeViewOnAdd($event)\"\n>\n  <ng-template #empty>\n    <h5 class=\"noElementsInfo\" *ngIf=\"searchQuery$.value == null || searchQuery$.value === ''\">\n      {{ 'WORKSPACE.NO_NODES_IN_FOLDER' | translate }}\n    </h5>\n    <h5 class=\"noElementsInfo\" *ngIf=\"!(searchQuery$.value == null || searchQuery$.value === '')\">\n      <div *ngIf=\"node$.value\">\n        {{ 'WORKSPACE.NO_MATCHING_ITEMS_FOLDER' | translate : { name: node$.value.name } }}\n      </div>\n      <div *ngIf=\"node$.value\" class=\"clickable\" (click)=\"searchGlobal()\">\n        {{ 'WORKSPACE.SEARCH_GLOBAL' | translate }}\n      </div>\n      <div *ngIf=\"!node$.value\">{{ 'WORKSPACE.NO_MATCHING_ITEMS' | translate }}</div>\n    </h5>\n  </ng-template>\n</es-node-entries-wrapper>\n","import { Node, RestConstants } from '../../core-module/core.module';\nimport { CanDrop, DragData } from 'ngx-edu-sharing-ui';\n\nexport function canDropOnNode(dragData: DragData<Node>): CanDrop {\n    if (dragData.draggedNodes.includes(dragData.target)) {\n        // When the target is the exact same object as one of the dragged nodes, the user is\n        // hovering over a placeholder of a dragged node. They likely want to cancel the drag\n        // operation, so we don't print an error message.\n        return { accept: false, denyExplicit: false };\n    } else if (!dragData.target.isDirectory) {\n        return { accept: false, denyExplicit: false, denyReason: 'WORKSPACE.TARGET_NO_DIRECTORY' };\n    } else if (dragData.draggedNodes.some((node) => node.ref.id === dragData.target.ref.id)) {\n        return {\n            accept: false,\n            denyExplicit: false,\n            denyReason: 'WORKSPACE.SOURCE_TARGET_IDENTICAL',\n        };\n    } else if (dragData.draggedNodes.some((node) => node.parent?.id === dragData.target.ref.id)) {\n        return {\n            accept: false,\n            denyExplicit: false,\n            denyReason: 'WORKSPACE.SOURCE_TARGET_IDENTICAL',\n        };\n    } else if (!dragData.target.access.includes(RestConstants.ACCESS_WRITE)) {\n        return {\n            accept: false,\n            denyExplicit: true,\n            denyReason: 'WORKSPACE.TARGET_NO_WRITE_PERMISSIONS',\n        };\n    } else {\n        return canDragDrop(dragData);\n    }\n}\n\nexport function canDragDrop(dragData: DragData): CanDrop {\n    if (\n        dragData.action === 'move' &&\n        dragData.draggedNodes.some((node) => !node.access.includes(RestConstants.ACCESS_WRITE))\n    ) {\n        return {\n            accept: false,\n            denyExplicit: true,\n            denyReason: 'WORKSPACE.SOURCE_NO_WRITE_PERMISSIONS',\n        };\n    } else if (dragData.action === 'link') {\n        return {\n            accept: false,\n            denyExplicit: true,\n            denyReason: 'WORKSPACE.FEATURE_NOT_IMPLEMENTED',\n        };\n    } else {\n        return { accept: true };\n    }\n}\n"],"names":["EventEmitter","RestConnectorService","RestConstants","SessionStorageService","Helper","InteractionType","ListItem","NodeEntriesDisplayType","NodeEntriesWrapperComponent","Scope","TemporaryStorageService","canDropOnNode","BehaviorSubject","combineLatest","of","ReplaySubject","Subject","catchError","debounceTime","distinctUntilChanged","switchMap","takeUntil","tap","DEFAULT","HOME_REPOSITORY","PROPERTY_FILTER_ALL","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵpipeBind2","ɵɵpureFunction1","_c0","ctx_r4","node$","value","name","ɵɵlistener","WorkspaceExplorerComponent_ng_template_1_h5_1_div_2_Template_div_click_0_listener","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","searchGlobal","ɵɵtextInterpolate","ɵɵtemplate","WorkspaceExplorerComponent_ng_template_1_h5_1_div_1_Template","WorkspaceExplorerComponent_ng_template_1_h5_1_div_2_Template","WorkspaceExplorerComponent_ng_template_1_h5_1_div_3_Template","ɵɵproperty","ctx_r3","WorkspaceExplorerComponent_ng_template_1_h5_0_Template","WorkspaceExplorerComponent_ng_template_1_h5_1_Template","ctx_r1","searchQuery$","WorkspaceExplorerComponent","getColumns","connector","customColumns","configColumns","defaultColumns","push","CM_NAME","CM_CREATOR","CM_MODIFIED_DATE","getCurrentLogin","isAdmin","NODE_ID","repsource","CCM_PROP_REPLICATIONSOURCEID","visible","title","LOM_PROP_TITLE","size","SIZE","created","CM_PROP_C_CREATED","mediatype","MEDIATYPE","keywords","LOM_PROP_GENERAL_KEYWORD","dimensions","DIMENSIONS","version","LOM_PROP_LIFECYCLE_VERSION","usage","VIRTUAL_PROP_USAGECOUNT","license","CCM_PROP_LICENSE","wfStatus","CCM_PROP_WF_STATUS","Array","isArray","configList","col","indexOf","sort","a","b","pos1","pos2","length","column","add","column2","root","_root","storage","get","KEY_WORKSPACE_SORT","subscribe","data","active","direction","current","setNode","searchQuery","query","setSearchQuery","onSearchGlobal","emit","load","event","dataSource","isLoading","columns","POSSIBLE_SORT_BY_FIELDS_SOLR","POSSIBLE_SORT_BY_FIELDS","some","s","setSorting","reset","nodeEntries","getSelection","clear","onReset","offset","resetPagination","isFullyLoaded","getRealNodeCount","lastRequestSearch","criteria","property","PRIMARY_SEARCH_CRITERIA","values","ref","id","load$","next","nodes","search","repository","metadataset","contentType","CONTENT_TYPE_ALL","CONTENT_TYPE_FILES_AND_FOLDERS","body","resolveCollections","resolveUsernames","skipCount","propertyFilter","sortProperties","sortAscending","maxItems","amount","DEFAULT_NUMBER_PER_REQUEST","nodeApi","getChildren","ngOnDestroy","destroyed","complete","temporaryStorage","set","NODE_RENDER_PARAMETER_DATA_SOURCE","ngOnChanges","changes","_this","_asyncToGenerator","displayType","initOptions","handleError","error","status","toast","addNodes","appendData","setPagination","pagination","constructor","translate","config","ui","localEvents","_this2","SCOPES","nodesChange","allowed","Table","refreshTree","displayTypeChange","reorderDialog","reorderDialogChange","onOpenNode","onViewNode","onSelectionChanged","onSelectNode","onDrop","canDrop","drop","target","source","initColumns","registerNodesDeleted","pipe","objectEquals","_ref","_x","apply","arguments","_ref2","err","toPromise","_x2","_ref3","_x3","ngAfterViewInit","_this3","_this4","onSelection","doubleClick","node","setTimeout","getData","filter","n","virtual","select","selected","element","toggle","_this5","initOptionsGenerator","actionbar","customOptions","parent","nodesDeleted","removeData","saveColumns","clickItem","isMobile","syncTreeViewOnAdd","isDirectory","_","ɵɵdirectiveInject","i1","i2","TranslateService","i3","ConfigurationService","i4","SearchService","i5","Toast","UIService","NodeService","LocalEventsService","_2","selectors","viewQuery","WorkspaceExplorerComponent_Query","rf","ctx","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_columnsChange_0_listener","$event","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_displayTypeChange_0_listener","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_fetchData_0_listener","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_sortChange_0_listener","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_clickItem_0_listener","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_dblClickItem_0_listener","WorkspaceExplorerComponent_Template_es_node_entries_wrapper_virtualNodesAdded_0_listener","WorkspaceExplorerComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","ɵɵclassProp","WorkspaceList","Emitter","ɵɵpureFunction2","_c1","dragData","draggedNodes","includes","accept","denyExplicit","denyReason","access","ACCESS_WRITE","canDragDrop","action"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}