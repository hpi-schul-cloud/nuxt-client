{"version":3,"file":"src_app_features_dialogs_dialog-modules_share-dialog_share-dialog_module_ts.js","mappings":"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","sources":["./src/app/features/dialogs/dialog-modules/share-dialog/choose-type/choose-type.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/choose-type/choose-type.component.html","./src/app/features/dialogs/dialog-modules/share-dialog/choose-type/focusable-option.directive.ts","./src/app/features/dialogs/dialog-modules/share-dialog/permission/permission.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/permission/permission.component.html","./src/app/features/dialogs/dialog-modules/share-dialog/publish/node-author-name.pipe.ts","./src/app/features/dialogs/dialog-modules/share-dialog/publish/publish.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/publish/publish.component.html","./src/app/features/dialogs/dialog-modules/share-dialog/restricted-access/restricted-access.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/restricted-access/restricted-access.component.html","./src/app/features/dialogs/dialog-modules/share-dialog/share-dialog.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/share-dialog.component.html","./src/app/features/dialogs/dialog-modules/share-dialog/share-dialog.module.ts","./src/app/features/dialogs/dialog-modules/share-dialog/usage/usage.component.ts","./src/app/features/dialogs/dialog-modules/share-dialog/usage/usage.component.html"],"sourcesContent":["import { FocusKeyManager } from '@angular/cdk/a11y';\nimport { DOWN_ARROW, ESCAPE, UP_ARROW } from '@angular/cdk/keycodes';\nimport {\n    AfterViewInit,\n    Component,\n    EventEmitter,\n    HostListener,\n    Input,\n    OnDestroy,\n    Output,\n    QueryList,\n    ViewChild,\n    ViewChildren,\n} from '@angular/core';\nimport { MatSlideToggle, MatSlideToggleChange } from '@angular/material/slide-toggle';\nimport * as rxjs from 'rxjs';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { FocusableOptionDirective } from './focusable-option.directive';\n\n@Component({\n    selector: 'es-share-dialog-choose-type',\n    templateUrl: 'choose-type.component.html',\n    styleUrls: ['choose-type.component.scss'],\n})\nexport class ShareDialogChooseTypeComponent implements AfterViewInit, OnDestroy {\n    @ViewChildren(FocusableOptionDirective)\n    _menuItems: QueryList<FocusableOptionDirective>;\n    @ViewChild('slideToggle') _slideToggle: MatSlideToggle;\n\n    @Input() set selected(selected: string[]) {\n        this._selected = selected;\n        setTimeout(() => this._checkPublish(), 10);\n    }\n    @Input() isDirectory = false;\n    @Input() canPublish = true;\n    @Input('aria-label') ariaLabel: string;\n\n    @Output() onCancel = new EventEmitter();\n    @Output() onType = new EventEmitter();\n\n    readonly _options = [\n        {\n            id: 'Consumer',\n            label: 'WORKSPACE.SHARE.TYPE_VIEWER',\n            icon: 'remove_red_eye',\n            description: 'WORKSPACE.SHARE.TYPE_VIEWER_DESCRIPTION',\n        },\n        {\n            id: 'Collaborator',\n            label: 'WORKSPACE.SHARE.TYPE_COWORKER',\n            icon: 'edit',\n            description: 'WORKSPACE.SHARE.TYPE_COWORKER_DESCRIPTION',\n        },\n        {\n            id: 'Coordinator',\n            label: 'WORKSPACE.SHARE.TYPE_COORDINATOR',\n            icon: 'work',\n            description: 'WORKSPACE.SHARE.TYPE_COORDINATOR_DESCRIPTION',\n        },\n    ];\n\n    _publish: boolean;\n    _publishDisabled: boolean;\n\n    private _selected: string[];\n    private _keyManager: FocusKeyManager<FocusableOptionDirective>;\n    private _destroyed$ = new Subject<void>();\n\n    ngAfterViewInit() {\n        // angular 15 change\n        this._slideToggle._elementRef.nativeElement.setAttribute('role', 'menuitemcheckbox');\n        // this._slideToggle._inputElement.nativeElement.setAttribute('role', 'menuitemcheckbox');\n        this._keyManager = new FocusKeyManager(this._menuItems).withWrap();\n        this._keyManager.tabOut.pipe(takeUntil(this._destroyed$)).subscribe(() => this._cancel());\n        this._keyManager.setActiveItem(this._getActiveIndex());\n        // Update the key manager when an option is focused by other means by the user, e.g. via\n        // mouse.\n        rxjs.merge(...this._menuItems.map((item) => item.focused)).subscribe((item) =>\n            this._keyManager.updateActiveItem(item),\n        );\n    }\n\n    ngOnDestroy() {\n        this._destroyed$.next();\n        this._destroyed$.complete();\n    }\n\n    @HostListener('keydown', ['$event'])\n    _handleKeydown(event: KeyboardEvent) {\n        const keyCode = event.keyCode;\n        const manager = this._keyManager;\n        switch (keyCode) {\n            case ESCAPE:\n                event.preventDefault();\n                event.stopPropagation();\n                this._cancel();\n                break;\n            default:\n                if (keyCode === UP_ARROW || keyCode === DOWN_ARROW) {\n                    manager.setFocusOrigin('keyboard');\n                }\n                manager.onKeydown(event);\n                return;\n        }\n    }\n\n    _cancel() {\n        this.onCancel.emit();\n    }\n\n    _setType(type: string) {\n        for (const { id } of this._options) {\n            if (this._contains(id)) {\n                this._selected.splice(this._selected.indexOf(id), 1);\n            }\n        }\n        this._selected.push(type);\n        setTimeout(() => this._checkPublish(), 10);\n        this.onType.emit({ permissions: this._selected, wasMain: true });\n    }\n\n    _contains(type: string) {\n        return this._selected.indexOf(type) != -1;\n    }\n\n    private _checkPublish() {\n        this._publish = this._contains('CCPublish');\n        this._publishDisabled = this._contains('Coordinator');\n        if (this._contains('Coordinator')) {\n            this._publish = true;\n        }\n    }\n\n    _setPublish(event: MatSlideToggleChange) {\n        if (event.checked) {\n            if (this._contains('CCPublish')) return;\n            this._selected.push('CCPublish');\n        } else {\n            if (!this._contains('CCPublish')) return;\n            this._selected.splice(this._selected.indexOf('CCPublish'), 1);\n        }\n        this.onType.emit({ permissions: this._selected, wasMain: false });\n    }\n\n    private _getActiveIndex(): number {\n        return this._options.findIndex((option) => this._selected.includes(option.id));\n    }\n}\n","<div class=\"dialog\" (click)=\"_cancel()\"></div>\n<div\n  role=\"menu\"\n  class=\"more-open\"\n  cdkTrapFocus\n  [cdkTrapFocusAutoCapture]=\"true\"\n  id=\"es-share-dialog-choose-type-menu\"\n  [attr.aria-label]=\"ariaLabel\"\n>\n  <mat-option\n    *ngFor=\"let option of _options\"\n    esWorkspaceShareFocusableOption\n    role=\"menuitemradio\"\n    (click)=\"_setType(option.id)\"\n    [attr.aria-checked]=\"_contains(option.id)\"\n    [attr.aria-label]=\"option.label | translate\"\n    [attr.aria-description]=\"option.description | translate\"\n    [attr.cdkFocusInitial]=\"_contains(option.id) ? '' : null\"\n  >\n    <div><i [esIcon]=\"option.icon\"></i> {{ option.label | translate }}</div>\n    <i icon=\"check\" class=\"selected\" *ngIf=\"_contains(option.id)\"></i>\n    <p>{{ option.description | translate }}</p>\n  </mat-option>\n  <hr class=\"cdk-visually-hidden\" />\n  <div class=\"publish-toggle\" *ngIf=\"true\">\n    <!-- <div class=\"publish-toggle\" *ngIf=\"!isDirectory && canPublish\"> -->\n    <mat-slide-toggle\n      #slideToggle\n      esWorkspaceShareFocusableOption\n      [customFocusFunction]=\"slideToggle.focus.bind(slideToggle)\"\n      [ngModel]=\"_publish\"\n      [disabled]=\"_publishDisabled\"\n      (change)=\"_setPublish($event)\"\n      class=\"collection-item\"\n      title=\"{{ 'WORKSPACE.SHARE.PUBLISHER_TOOLTIP' | translate }}\"\n    >\n      <div class=\"toggle\">\n        <i class=\"material-icons\">public</i\n        ><span>{{ 'WORKSPACE.SHARE.PUBLISHER' | translate }}</span>\n      </div>\n    </mat-slide-toggle>\n  </div>\n</div>\n","import { FocusableOption } from '@angular/cdk/a11y';\nimport { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Directive({\n    selector: '[esWorkspaceShareFocusableOption]',\n})\nexport class FocusableOptionDirective implements FocusableOption, OnInit, OnDestroy {\n    @Input() disabled?: boolean;\n    @Input() customFocusFunction?: () => void;\n\n    readonly focused = new Subject<FocusableOptionDirective>();\n\n    private _onFocus = () => this.focused.next(this);\n\n    constructor(private _elementRef: ElementRef<HTMLElement>) {}\n\n    ngOnInit(): void {\n        this._elementRef.nativeElement.addEventListener('focus', this._onFocus);\n    }\n\n    ngOnDestroy(): void {\n        this._elementRef.nativeElement.removeEventListener('focus', this._onFocus);\n    }\n\n    focus() {\n        if (this.customFocusFunction) {\n            this.customFocusFunction();\n        } else {\n            this._elementRef.nativeElement.focus();\n        }\n    }\n}\n","import { Component, Input, EventEmitter, Output, ViewChild, ElementRef } from '@angular/core';\nimport { Permission } from '../../../../../core-module/core.module';\nimport { RestConstants } from '../../../../../core-module/core.module';\n\n@Component({\n    selector: 'es-share-dialog-permission',\n    templateUrl: 'permission.component.html',\n    styleUrls: ['permission.component.scss'],\n})\nexport class ShareDialogPermissionComponent {\n    public _permission: Permission;\n    public invalidPermission = false;\n    public isEveryone: boolean;\n    @Input() set permission(permission: Permission) {\n        this._permission = permission;\n        let coordinator = permission.permissions.indexOf(RestConstants.PERMISSION_COORDINATOR);\n        let collaborator = permission.permissions.indexOf(RestConstants.PERMISSION_COLLABORATOR);\n        if (coordinator != -1) {\n            let i = permission.permissions.indexOf(RestConstants.PERMISSION_COLLABORATOR);\n            if (i != -1) permission.permissions.splice(i, 1);\n        }\n        if (coordinator != -1 || collaborator != -1) {\n            let i = permission.permissions.indexOf(RestConstants.PERMISSION_CONSUMER);\n            if (i != -1) permission.permissions.splice(i, 1);\n        }\n        this.isEveryone = permission.authority.authorityName == RestConstants.AUTHORITY_EVERYONE;\n        let check = this._permission.permissions.slice();\n        if (check.indexOf(RestConstants.ACCESS_CC_PUBLISH) != -1) {\n            check.splice(check.indexOf(RestConstants.ACCESS_CC_PUBLISH), 1);\n        }\n        this.invalidPermission =\n            check.length != 1 ||\n            (check[0] != RestConstants.PERMISSION_OWNER &&\n                check[0] != RestConstants.PERMISSION_CONSUMER &&\n                check[0] != RestConstants.PERMISSION_COLLABORATOR &&\n                check[0] != RestConstants.PERMISSION_COORDINATOR);\n    }\n    @Input() inherit = false;\n    @Input() readOnly = true;\n    @Input() showDelete = true;\n    @Input() isDeleted = false;\n    @Input() isDirectory = false;\n    @Input() canPublish = true;\n    @Output() onRemove = new EventEmitter();\n    @Output() onType = new EventEmitter();\n\n    public showChooseType = false;\n\n    public remove() {\n        if (this.showDelete) this.onRemove.emit();\n    }\n    public chooseType() {\n        if (this.readOnly || this.isEveryone) return;\n        this.showChooseType = true;\n    }\n    changeType(type: any) {\n        this.onType.emit(type);\n        if (type.wasMain) this.showChooseType = false;\n    }\n}\n","<div class=\"group\">\n  <div class=\"deleted-info\" *ngIf=\"isDeleted\">\n    <div class=\"line\"><hr /></div>\n    <div class=\"info\">{{ 'WORKSPACE.SHARE.DELETED' | translate }}</div>\n    <div class=\"line\"><hr /></div>\n  </div>\n  <div class=\"container\">\n    <div class=\"icon\">\n      <es-user-avatar [user]=\"_permission\" size=\"xsmall\"></es-user-avatar>\n    </div>\n    <div class=\"permissionName\">\n      <span class=\"primary\">{{ _permission | permissionName }}</span>\n      <span class=\"secondary\">{{ _permission | permissionName : { field: 'secondary' } }}</span>\n    </div>\n    <div class=\"permission\" [class.readOnly]=\"readOnly\">\n      <div class=\"publish\">\n        <i\n          class=\"material-icons\"\n          *ngIf=\"\n            _permission.permissions.indexOf('Coordinator') > -1 ||\n            _permission.permissions.indexOf('CCPublish') > -1\n          \"\n          matTooltip=\"{{ 'WORKSPACE.SHARE.PUBLISHER' | translate }}\"\n          >public</i\n        >\n      </div>\n      <div\n        *ngIf=\"invalidPermission\"\n        title=\"{{\n          'WORKSPACE.SHARE.TYPE_UNKNOWN_DESCRIPTION'\n            | translate : { permissions: _permission.permissions.join(', ') }\n        }}\"\n      >\n        <div>\n          <i aria-hidden=\"true\" class=\"material-icons align\">help_outline</i>\n          <span>{{ 'WORKSPACE.SHARE.TYPE_UNKNOWN' | translate }}</span>\n          <div class=\"select\"></div>\n        </div>\n      </div>\n      <div *ngIf=\"!invalidPermission\" class=\"permission-type\">\n        <button\n          mat-button\n          [disabled]=\"readOnly\"\n          (click)=\"chooseType()\"\n          role=\"combobox\"\n          [attr.aria-label]=\"\n            'WORKSPACE.SHARE.TYPE_MENU_LABEL' | translate : { user: _permission | permissionName }\n          \"\n          aria-haspopup=\"true\"\n          [attr.aria-expanded]=\"showChooseType || null\"\n          [attr.aria-controls]=\"showChooseType ? 'es-share-dialog-choose-type-menu' : null\"\n        >\n          <ng-container *ngIf=\"_permission.permissions.indexOf('Owner') > -1\">\n            <i class=\"material-icons align\">home</i>\n            <span>{{ 'WORKSPACE.SHARE.GROUP_OWNER' | translate }}</span>\n          </ng-container>\n          <ng-container *ngIf=\"_permission.permissions.indexOf('Consumer') > -1\">\n            <i class=\"material-icons align\">remove_red_eye</i>\n            <span>{{ 'WORKSPACE.SHARE.TYPE_VIEWER' | translate }}</span>\n            <span *ngIf=\"!readOnly && !isEveryone\" class=\"select\"\n              ><i class=\"material-icons align\">keyboard_arrow_down</i></span\n            >\n          </ng-container>\n          <ng-container *ngIf=\"_permission.permissions.indexOf('Collaborator') > -1\">\n            <i class=\"material-icons align\">edit</i>\n            <span>{{ 'WORKSPACE.SHARE.TYPE_COWORKER' | translate }}</span>\n            <span *ngIf=\"!readOnly && !isEveryone\" class=\"select\"\n              ><i class=\"material-icons align\">keyboard_arrow_down</i></span\n            >\n          </ng-container>\n          <ng-container\n            *ngIf=\"\n              _permission.permissions.indexOf('Coordinator') > -1 ||\n              _permission.permissions.indexOf('All') > -1\n            \"\n          >\n            <i class=\"material-icons align\">work</i>\n            <span>{{ 'WORKSPACE.SHARE.TYPE_COORDINATOR' | translate }}</span>\n            <span *ngIf=\"!readOnly && !isEveryone\" class=\"select\"\n              ><i class=\"material-icons align\">keyboard_arrow_down</i></span\n            >\n          </ng-container>\n        </button>\n\n        <div *ngIf=\"_permission.permissions.length == 0\"></div>\n\n        <es-share-dialog-choose-type\n          *ngIf=\"showChooseType\"\n          class=\"typeAdd\"\n          [aria-label]=\"\n            'WORKSPACE.SHARE.TYPE_MENU_LABEL' | translate : { user: _permission | permissionName }\n          \"\n          [selected]=\"_permission.permissions\"\n          [isDirectory]=\"isDirectory\"\n          [canPublish]=\"canPublish\"\n          (onCancel)=\"showChooseType = false\"\n          (onType)=\"changeType($event)\"\n        ></es-share-dialog-choose-type>\n      </div>\n    </div>\n    <button\n      class=\"remove\"\n      mat-icon-button\n      (click)=\"remove()\"\n      *ngIf=\"showDelete\"\n      [disabled]=\"readOnly\"\n    >\n      <i *ngIf=\"!inherit && !isDeleted\" class=\"material-icons\">cancel</i>\n      <i *ngIf=\"!inherit && isDeleted\" class=\"material-icons\">undo</i>\n      <i\n        *ngIf=\"inherit\"\n        class=\"inherit\"\n        esIcon=\"edu-inherit\"\n        matTooltip=\"{{ 'WORKSPACE.SHARE.INHERIT_HINT' | translate }}\"\n      ></i>\n    </button>\n  </div>\n</div>\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RestConstants } from '../../../../../core-module/rest/rest-constants';\nimport { Node } from '../../../../../core-module/rest/data-object';\nimport { VCard } from 'ngx-edu-sharing-ui';\n\n/**\n * Format the version label and checking constants if required\n */\n@Pipe({ name: 'nodeAuthorName' })\nexport class NodeAuthorNamePipe implements PipeTransform {\n    transform(node: Node, args: any = null): string {\n        if (node.properties[RestConstants.CCM_PROP_AUTHOR_FREETEXT]?.[0]) {\n            return node.properties[RestConstants.CCM_PROP_AUTHOR_FREETEXT]?.[0];\n        } else if (node.properties[RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0]) {\n            return new VCard(\n                node.properties[RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0],\n            ).getDisplayName();\n        } else {\n            return this.translate.instant('MDS.AUTHOR_UNSET');\n        }\n    }\n    constructor(private translate: TranslateService) {}\n}\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NodeService } from 'ngx-edu-sharing-api';\nimport { Observable, Observer, Subject } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { BridgeService } from '../../../../../services/bridge.service';\nimport {\n    ConfigurationService,\n    DialogButton,\n    UIConstants,\n} from '../../../../../core-module/core.module';\nimport { Node, Permission } from '../../../../../core-module/rest/data-object';\nimport { Helper } from '../../../../../core-module/rest/helper';\nimport { RestConstants } from '../../../../../core-module/rest/rest-constants';\nimport { RestHelper } from '../../../../../core-module/rest/rest-helper';\nimport { RestConnectorService } from '../../../../../core-module/rest/services/rest-connector.service';\nimport { RestNodeService } from '../../../../../core-module/rest/services/rest-node.service';\nimport { NodeHelperService } from '../../../../../services/node-helper.service';\nimport { Toast } from '../../../../../services/toast';\nimport { UIHelper } from '../../../../../core-ui-module/ui-helper';\nimport { MainNavService } from '../../../../../main/navigation/main-nav.service';\nimport {\n    CompletionStatusEntry,\n    MdsEditorInstanceService,\n} from '../../../../mds/mds-editor/mds-editor-instance.service';\nimport { DialogsService } from '../../../dialogs.service';\nimport { OPEN_URL_MODE } from 'ngx-edu-sharing-ui';\nimport { YES_OR_NO } from '../../generic-dialog/generic-dialog-data';\n\nclass PublishedNode extends Node {\n    status?: 'new' | 'update' | null; // flag if this node is manually added later and didn't came from the repo\n}\n\n@Component({\n    selector: 'es-share-dialog-publish',\n    templateUrl: 'publish.component.html',\n    styleUrls: ['publish.component.scss'],\n    providers: [MdsEditorInstanceService],\n})\nexport class ShareDialogPublishComponent implements OnChanges, OnInit, OnDestroy {\n    @Input() node: Node;\n    @Input() permissions: Permission[];\n    @Input() inherited: boolean;\n    @Input() isAuthorEmpty: boolean;\n    @Input() isLicenseEmpty: boolean;\n    @Output() onDisableInherit = new EventEmitter<void>();\n    @Output() onInitCompleted = new EventEmitter<void>();\n    @ViewChild('shareModeCopyRef') shareModeCopyRef: any;\n    @ViewChild('shareModeDirectRef') shareModeDirectRef: any;\n    doiPermission: boolean;\n    initialState: {\n        copy: boolean;\n        direct: boolean;\n    };\n    shareModeCopy: boolean;\n    shareModeDirect: boolean;\n    publishCopyPermission: boolean;\n    doiActive: boolean;\n    doiDisabled: boolean;\n    isCopy: boolean;\n    handleMode: 'distinct' | 'update' = 'distinct';\n    republish: 'update' | 'new' | false = false;\n    private publishedVersions: Node[] = [];\n    allPublishedVersions: PublishedNode[];\n    mdsCompletion: CompletionStatusEntry;\n    private initHasStarted = false;\n    private destroyed = new Subject<void>();\n\n    constructor(\n        private bridge: BridgeService,\n        private config: ConfigurationService,\n        private connector: RestConnectorService,\n        private dialogs: DialogsService,\n        private legacyNodeService: RestNodeService,\n        private mdsService: MdsEditorInstanceService,\n        private nodeHelper: NodeHelperService,\n        private nodeService: NodeService,\n        private router: Router,\n        private toast: Toast,\n        private translate: TranslateService,\n    ) {\n        this.doiPermission = this.connector.hasToolPermissionInstant(\n            RestConstants.TOOLPERMISSION_HANDLESERVICE,\n        );\n        this.publishCopyPermission = this.connector.hasToolPermissionInstant(\n            RestConstants.TOOLPERMISSION_PUBLISH_COPY,\n        );\n    }\n\n    ngOnInit(): void {\n        this.mdsService\n            .observeCompletionStatus()\n            .pipe(\n                takeUntil(this.destroyed),\n                filter((completion) => completion !== null),\n            )\n            .subscribe((completion) => {\n                this.mdsCompletion = {\n                    completed:\n                        (completion.mandatory.completed || 0) +\n                        (completion.mandatoryForPublish.completed || 0),\n                    total:\n                        (completion.mandatory.total || 0) +\n                        (completion.mandatoryForPublish.total || 0),\n                };\n            });\n    }\n\n    async ngOnChanges(changes: SimpleChanges) {\n        if (this.node && this.permissions && !this.initHasStarted) {\n            this.initHasStarted = true;\n            // refresh already for providing initial state\n            this.refresh();\n            this.node = (\n                await this.legacyNodeService\n                    .getNodeMetadata(this.node.ref.id, [RestConstants.ALL])\n                    .toPromise()\n            ).node;\n            this.refresh();\n            this.onInitCompleted.emit();\n            this.onInitCompleted.complete();\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n\n    getLicense() {\n        return this.node.properties[RestConstants.CCM_PROP_LICENSE]?.[0];\n    }\n    getLicenseText() {\n        return this.translate.instant('LICENSE.NAMES.' + this.getLicense());\n    }\n\n    async openLicense() {\n        const dialogRef = await this.dialogs.openLicenseDialog({\n            kind: 'nodes',\n            nodes: [this.node],\n        });\n        dialogRef.afterClosed().subscribe((updatedNodes) => {\n            if (updatedNodes) {\n                // We used to fetch the node again, but we should be fine just taking the updated\n                // node from the dialog, right?\n                //\n                // this.node = (\n                //     await this.legacyNodeService\n                //         .getNodeMetadata(this.node.ref.id, [RestConstants.ALL])\n                //         .toPromise()\n                // ).node;\n                this.node = updatedNodes[0];\n                this.refresh();\n            }\n        });\n    }\n    async openMetadata() {\n        const dialogRef = await this.dialogs.openMdsEditorDialogForNodes({\n            nodes: [this.node],\n            immediatelyShowMissingRequiredWidgets: true,\n        });\n        dialogRef.afterClosed().subscribe((nodes) => {\n            if (nodes) {\n                this.node = nodes[0];\n                // this.node = (\n                //     await this.legacyNodeService\n                //         .getNodeMetadata(this.node.ref.id, [RestConstants.ALL])\n                //         .toPromise()\n                // ).node;\n                this.refresh();\n            }\n        });\n    }\n\n    private refresh() {\n        this.doiActive = this.nodeHelper.isDOIActive(this.node, this.permissions);\n        this.doiDisabled = this.doiActive;\n        const prop = this.node?.properties?.[RestConstants.CCM_PROP_PUBLISHED_MODE]?.[0];\n        if (prop === ShareMode.Copy) {\n            this.shareModeCopy = true;\n            this.isCopy = true;\n            this.legacyNodeService.getPublishedCopies(this.node.ref.id).subscribe(\n                (nodes) => {\n                    this.publishedVersions = nodes.nodes.reverse();\n                    this.updatePublishedVersions();\n                },\n                (error) => {\n                    this.toast.error(error);\n                },\n            );\n        }\n        if (prop !== ShareMode.Copy) {\n            this.republish = 'new';\n        }\n        // if GROUP_EVERYONE is not yet invited -> reset to off\n        this.shareModeDirect = this.permissions.some(\n            (p: Permission) => p.authority?.authorityName === RestConstants.AUTHORITY_EVERYONE,\n        );\n        this.initialState = {\n            copy: this.shareModeCopy,\n            direct: this.shareModeDirect,\n        };\n        this.mdsService.initWithNodes([this.node]);\n        this.updatePublishedVersions();\n    }\n\n    async updateShareMode(type: 'copy' | 'direct', force = false) {\n        if ((this.shareModeCopy || this.shareModeDirect) && !force) {\n            if (this.config.instant('publishingNotice', false)) {\n                const dialogRef = await this.dialogs.openGenericDialog({\n                    title: 'WORKSPACE.SHARE.PUBLISHING_WARNING_TITLE',\n                    message: 'WORKSPACE.SHARE.PUBLISHING_WARNING_MESSAGE',\n                    buttons: YES_OR_NO,\n                });\n                dialogRef.afterClosed().subscribe((response) => {\n                    if (response === 'YES') {\n                        void this.updateShareMode(type, true);\n                    } else {\n                        this.shareModeDirect = false;\n                        this.shareModeCopy = false;\n                    }\n                });\n                return;\n            }\n        }\n        if (this.shareModeCopy && this.doiPermission && type === 'copy') {\n            this.doiActive = true;\n        }\n        this.updatePublishedVersions();\n    }\n\n    updatePermissions(permissions: Permission[]) {\n        permissions = permissions.filter(\n            (p: Permission) => p.authority.authorityName !== RestConstants.AUTHORITY_EVERYONE,\n        );\n        if (this.shareModeDirect) {\n            const permission = RestHelper.getAllAuthoritiesPermission();\n            permission.permissions = [\n                RestConstants.ACCESS_CONSUMER,\n                RestConstants.ACCESS_CC_PUBLISH,\n            ];\n            permissions.push(permission);\n        }\n        return permissions;\n    }\n\n    save() {\n        return new Observable((observer: Observer<Node | void>) => {\n            if (\n                this.shareModeCopy &&\n                // republish and not yet published, or wasn't published before at all\n                ((this.republish === 'new' && !this.currentVersionPublished()) || !this.isCopy)\n            ) {\n                this.legacyNodeService\n                    .publishCopy(\n                        this.node.ref.id,\n                        this.doiPermission && !this.doiDisabled && this.doiActive\n                            ? this.handleMode\n                            : null,\n                    )\n                    .subscribe(\n                        ({ node }) => {\n                            observer.next(node);\n                            observer.complete();\n                        },\n                        (error) => {\n                            observer.error(error);\n                            observer.complete();\n                        },\n                    );\n            } else if (\n                this.shareModeCopy &&\n                // update most recent version\n                this.republish === 'update'\n            ) {\n                this.nodeService\n                    .copyMetadata(this.publishedVersions[0].ref.id, this.node.ref.id, {})\n                    .subscribe(\n                        ({ node }) => {\n                            observer.next(node);\n                            observer.complete();\n                        },\n                        (error) => {\n                            observer.error(error);\n                            observer.complete();\n                        },\n                    );\n            } else {\n                observer.next(null);\n                observer.complete();\n            }\n        });\n    }\n\n    openVersion(node: Node) {\n        const url =\n            this.connector.getAbsoluteEdusharingUrl() +\n            this.router.serializeUrl(\n                this.router.createUrlTree([UIConstants.ROUTER_PREFIX, 'render', node.ref.id]),\n            );\n        UIHelper.openUrl(url, this.bridge, OPEN_URL_MODE.Blank);\n    }\n\n    currentVersionPublished() {\n        return (\n            this.publishedVersions?.filter(\n                (p) =>\n                    p.properties[RestConstants.LOM_PROP_LIFECYCLE_VERSION]?.[0] ===\n                    this.node.properties[RestConstants.LOM_PROP_LIFECYCLE_VERSION]?.[0],\n            ).length !== 0\n        );\n    }\n\n    updatePublishedVersions() {\n        if ((!this.isCopy && this.shareModeCopy) || this.republish === 'new') {\n            if (this.node?.properties) {\n                const virtual = Helper.deepCopy(this.node);\n                virtual.properties[RestConstants.CCM_PROP_PUBLISHED_DATE + '_LONG'] = [\n                    new Date().getTime(),\n                ];\n                if (this.doiActive && !this.doiDisabled && this.doiPermission) {\n                    virtual.properties[RestConstants.CCM_PROP_PUBLISHED_HANDLE_ID] = [true];\n                }\n                virtual.status = 'new';\n                this.allPublishedVersions = [virtual].concat(this.publishedVersions);\n                this.handleMode = this.hasExactOneHandle() ? 'update' : 'distinct';\n            }\n        } else if (this.republish === 'update') {\n            this.allPublishedVersions = Helper.deepCopy(this.publishedVersions);\n            this.allPublishedVersions[0].status = 'update';\n        } else {\n            this.allPublishedVersions = this.publishedVersions;\n        }\n    }\n\n    getType() {\n        if (this.node?.isDirectory) {\n            return this.node.collection ? 'COLLECTION' : 'DIRECTORY';\n        } else {\n            return 'DOCUMENT';\n        }\n    }\n\n    copyAllowed() {\n        return this.publishCopyPermission && !this.node?.isDirectory;\n    }\n\n    setRepublish() {\n        this.doiActive = this.republish !== false && this.doiPermission;\n        this.updatePublishedVersions();\n    }\n\n    hasExactOneHandle() {\n        return (\n            new Set(\n                this.allPublishedVersions\n                    .filter(\n                        (v) =>\n                            !v.status && v.properties[RestConstants.CCM_PROP_PUBLISHED_HANDLE_ID],\n                    )\n                    .map((v) => v.properties[RestConstants.CCM_PROP_PUBLISHED_HANDLE_ID][0]),\n            ).size === 1\n        );\n    }\n    isLicenseMissing() {\n        return !this.getLicense() && this.isLicenseEmpty && !this.node.isDirectory;\n    }\n    isAuthorMissing() {\n        return this.isAuthorEmpty && !this.node.isDirectory;\n    }\n\n    canBePublished() {\n        // it either has all required metadata or is already published anyway\n        return (\n            this.mdsCompletion?.completed === this.mdsCompletion?.total ||\n            this.initialState.copy ||\n            this.initialState.direct\n        );\n    }\n}\nexport enum ShareMode {\n    Direct = 'direct',\n    Copy = 'copy',\n}\n","<div class=\"group-padding\">\n  <h4 class=\"mat-heading-4\">\n    <!--<i esIcon=\"public\"></i>-->\n    {{ 'WORKSPACE.SHARE.PUBLISH_' + getType() | translate }}\n  </h4>\n  <ng-container *ngIf=\"!node?.isDirectory\">\n    <es-info-message mode=\"info\" *ngIf=\"getLicense()\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.LICENSE_INFO' | translate : { license: getLicenseText() } }}\n      {{ 'WORKSPACE.SHARE.PUBLISH.LICENSE_AUTHOR' | translate }}: {{ node | nodeAuthorName }}\n      <ng-container *ngIf=\"shareModeCopy\">\n        <br /><br />\n        {{ 'WORKSPACE.SHARE.PUBLISH.LICENSE_INFO_COPY' | translate }}\n      </ng-container>\n      <div>\n        <button\n          mat-button\n          color=\"primary\"\n          (click)=\"openLicense()\"\n          esToolpermissionCheck\n          toolpermission=\"TOOLPERMISSION_LICENSE\"\n        >\n          <i esIcon=\"arrow_forward\"></i> {{ 'WORKSPACE.SHARE.PUBLISH.SET_LICENSE' | translate }}\n        </button>\n      </div>\n    </es-info-message>\n    <es-info-message mode=\"warning\" *ngIf=\"mdsCompletion?.completed !== mdsCompletion?.total\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.MISSING_METADATA' | translate : mdsCompletion }}\n      <div>\n        <button mat-button color=\"primary\" (click)=\"openMetadata()\">\n          <i esIcon=\"arrow_forward\"></i> {{ 'WORKSPACE.SHARE.PUBLISH.OPEN_METADATA' | translate }}\n        </button>\n      </div>\n    </es-info-message>\n    <es-info-message mode=\"error\" *ngIf=\"isLicenseMissing()\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.LICENSE_REQUIRED' | translate }}\n      <div>\n        <button\n          mat-button\n          color=\"primary\"\n          (click)=\"openLicense()\"\n          esToolpermissionCheck\n          toolpermission=\"TOOLPERMISSION_LICENSE\"\n        >\n          <i esIcon=\"arrow_forward\"></i> {{ 'WORKSPACE.SHARE.PUBLISH.SET_LICENSE' | translate }}\n        </button>\n      </div>\n    </es-info-message>\n    <es-info-message mode=\"error\" *ngIf=\"isAuthorMissing()\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.AUTHOR_REQUIRED' | translate }}\n    </es-info-message>\n    <es-info-message mode=\"warning\" *ngIf=\"!getLicense() && !isLicenseMissing()\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.NO_LICENSE' | translate }}\n      <div>\n        <button\n          mat-button\n          color=\"primary\"\n          (click)=\"openLicense()\"\n          esToolpermissionCheck\n          toolpermission=\"TOOLPERMISSION_LICENSE\"\n        >\n          <i esIcon=\"arrow_forward\"></i> {{ 'WORKSPACE.SHARE.PUBLISH.SET_LICENSE' | translate }}\n        </button>\n      </div>\n    </es-info-message>\n  </ng-container>\n  <es-info-message mode=\"warning\" *ngIf=\"inherited\">\n    {{ 'WORKSPACE.SHARE.PUBLISH.INHERITED' | translate }}\n    <div>\n      <button mat-button color=\"primary\" (click)=\"onDisableInherit.emit()\">\n        <i esIcon=\"arrow_forward\"></i> {{ 'WORKSPACE.SHARE.PUBLISH.DISABLE_INHERIT' | translate }}\n      </button>\n    </div>\n  </es-info-message>\n  <es-info-message mode=\"info\" *ngIf=\"isCopy\">\n    {{ 'WORKSPACE.SHARE.PUBLISH.COPY_ACTIVE' | translate }}\n  </es-info-message>\n  <div *ngIf=\"!inherited && canBePublished()\" class=\"share-type\">\n    <mat-checkbox\n      #shareModeDirectRef\n      [(ngModel)]=\"shareModeDirect\"\n      (ngModelChange)=\"updateShareMode('direct')\"\n      [disabled]=\"isLicenseMissing() || isAuthorMissing()\"\n      value=\"direct\"\n    >\n      <es-multi-line-label>\n        <ng-container slot=\"label\">\n          {{ 'WORKSPACE.SHARE.PUBLISH.MODE_DIRECT' | translate }}\n        </ng-container>\n        <span class=\"description\" slot=\"description\">\n          {{ 'WORKSPACE.SHARE.PUBLISH.MODE_DIRECT_INFO' | translate }}\n        </span>\n      </es-multi-line-label>\n    </mat-checkbox>\n    <mat-checkbox\n      #shareModeCopyRef\n      [(ngModel)]=\"shareModeCopy\"\n      (ngModelChange)=\"$event ? (doiActive = true) : null; updateShareMode('copy')\"\n      [disabled]=\"!copyAllowed() || isCopy || isLicenseMissing() || isAuthorMissing()\"\n    >\n      <es-multi-line-label>\n        <ng-container slot=\"label\">\n          {{ 'WORKSPACE.SHARE.PUBLISH.MODE_COPY' | translate }}\n        </ng-container>\n        <span class=\"description\" slot=\"description\">\n          {{ 'WORKSPACE.SHARE.PUBLISH.MODE_COPY_INFO' | translate }}\n        </span>\n      </es-multi-line-label>\n    </mat-checkbox>\n    <div class=\"published-versions-container\" *ngIf=\"shareModeCopy\">\n      <div class=\"published-versions\">\n        <div class=\"version-republish\">\n          <mat-radio-group\n            [(ngModel)]=\"republish\"\n            [disabled]=\"!copyAllowed()\"\n            (ngModelChange)=\"setRepublish()\"\n          >\n            <mat-radio-button [disabled]=\"!isCopy\" [value]=\"false\">\n              <es-multi-line-label>\n                <ng-container slot=\"label\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.NO_REPUBLISH' | translate }}\n                </ng-container>\n                <ng-container slot=\"description\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.NO_REPUBLISH_DESCRIPTION' | translate }}\n                </ng-container>\n              </es-multi-line-label>\n            </mat-radio-button>\n            <mat-radio-button [disabled]=\"currentVersionPublished()\" [value]=\"'new'\">\n              <es-multi-line-label>\n                <ng-container slot=\"label\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.REPUBLISH' | translate }}\n                </ng-container>\n                <ng-container slot=\"description\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.REPUBLISH_DESCRIPTION' | translate }}\n                </ng-container>\n              </es-multi-line-label>\n              <!--\n              <h5>\n                <span class=\"version-comment\">{{ node | versionComment }}</span>\n                <span class=\"version-number\">({{ node['properties']['cclom:version'][0] }})</span>\n              </h5>\n              -->\n            </mat-radio-button>\n            <mat-radio-button [disabled]=\"currentVersionPublished() || !isCopy\" [value]=\"'update'\">\n              <es-multi-line-label>\n                <ng-container slot=\"label\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.UPDATE_METADATA' | translate }}\n                </ng-container>\n                <ng-container slot=\"description\">\n                  {{ 'WORKSPACE.SHARE.PUBLISH.UPDATE_METADATA_DESCRIPTION' | translate }}\n                </ng-container>\n              </es-multi-line-label>\n            </mat-radio-button>\n          </mat-radio-group>\n          <es-info-message mode=\"info\" *ngIf=\"!publishCopyPermission\">\n            {{ 'WORKSPACE.SHARE.PUBLISH.NO_PUBLISH_COPY_PERMISSION' | translate }}\n          </es-info-message>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div\n  class=\"doi\"\n  *ngIf=\"\n    doiPermission && publishCopyPermission && !inherited && shareModeCopy && republish === 'new'\n  \"\n>\n  <mat-checkbox\n    [disabled]=\"doiDisabled\"\n    [(ngModel)]=\"doiActive\"\n    (ngModelChange)=\"updatePublishedVersions()\"\n    id=\"doi\"\n  >\n    <div class=\"strong label\">\n      {{ 'WORKSPACE.SHARE.DOI' | translate }}\n      <i esIcon=\"vpn_key\"></i>\n    </div>\n    <div class=\"label-secondary\">{{ 'WORKSPACE.SHARE.DOI_INFO' | translate }}</div>\n  </mat-checkbox>\n  <div *ngIf=\"doiActive\" class=\"handle-mode\">\n    <mat-radio-group [(ngModel)]=\"handleMode\">\n      <mat-radio-button value=\"distinct\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.SHARE.PUBLISH.DOI_DISTINCT' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            {{ 'WORKSPACE.SHARE.PUBLISH.DOI_DISTINCT_INFO' | translate }}\n          </ng-container>\n        </es-multi-line-label>\n      </mat-radio-button>\n      <mat-radio-button [disabled]=\"!hasExactOneHandle()\" value=\"update\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.SHARE.PUBLISH.DOI_UPDATE' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            {{ 'WORKSPACE.SHARE.PUBLISH.DOI_UPDATE_INFO' | translate }}\n          </ng-container>\n        </es-multi-line-label>\n        <!--\n        <h5>\n          <span class=\"version-comment\">{{ node | versionComment }}</span>\n          <span class=\"version-number\">({{ node['properties']['cclom:version'][0] }})</span>\n        </h5>\n        -->\n      </mat-radio-button>\n    </mat-radio-group>\n  </div>\n</div>\n<div class=\"published-versions-container\" *ngIf=\"shareModeCopy\">\n  <div class=\"published-versions\">\n    <h6 class=\"published-versions mat-heading-6\">\n      {{ 'WORKSPACE.SHARE.PUBLISH.VERSIONS_PUBLISHED' | translate }}\n    </h6>\n\n    <div class=\"no-versions\" *ngIf=\"!allPublishedVersions\">\n      <es-spinner-small></es-spinner-small>\n    </div>\n    <div\n      *ngFor=\"let v of allPublishedVersions\"\n      class=\"version\"\n      [class.version-virtual]=\"v.status === 'new'\"\n      [class.version-update]=\"v.status === 'update'\"\n    >\n      <div class=\"version-group\">\n        <div>\n          <div class=\"version-comment\">\n            <label>{{ 'WORKSPACE.SHARE.PUBLISH.VERSION_COMMENT' | translate }}</label>\n            {{ v | versionComment }}\n          </div>\n          <div class=\"version-number\">\n            <label>{{ 'WORKSPACE.SHARE.PUBLISH.VERSION_NUMBER' | translate }}</label>\n            {{ v['properties']['cclom:version'][0] }}\n          </div>\n        </div>\n        <div>\n          <div class=\"version-date\">\n            <label>{{ 'WORKSPACE.SHARE.PUBLISH.VERSION_DATE' | translate }}</label>\n            {{ v.properties['ccm:published_date_LONG'][0] | formatDate }}\n          </div>\n        </div>\n      </div>\n      <div class=\"version-handle\">\n        <i\n          esIcon=\"vpn_key\"\n          matTooltip=\"{{ 'WORKSPACE.SHARE.DOI' | translate }}\"\n          *ngIf=\"v.properties['ccm:published_handle_id']\"\n        ></i>\n      </div>\n      <div class=\"version-actions\">\n        <button\n          mat-button\n          color=\"primary\"\n          [disabled]=\"!!v.status\"\n          matTooltip=\"{{ 'WORKSPACE.SHARE.PUBLISH.OPEN_VERSION' | translate }}\"\n          (click)=\"openVersion(v)\"\n        >\n          <i esIcon=\"open_in_new\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { NodeService } from 'ngx-edu-sharing-api';\nimport { Node } from '../../../../../core-module/rest/data-object';\nimport { RestConstants } from '../../../../../core-module/rest/rest-constants';\n\n@Component({\n    selector: 'es-share-dialog-restricted-access',\n    templateUrl: 'restricted-access.component.html',\n    styleUrls: ['restricted-access.component.scss'],\n})\nexport class ShareDialogRestrictedAccessComponent implements OnInit, OnChanges {\n    constructor(private nodeService: NodeService) {}\n    ngOnChanges(changes: SimpleChanges): void {\n        this.restrictedAccess =\n            this.node.properties[RestConstants.CCM_PROP_RESTRICTED_ACCESS]?.[0] || false;\n        this.restrictedAccessPermissions = {};\n        const permissions =\n            this.node.properties[RestConstants.CCM_PROP_RESTRICTED_ACCESS_PERMISSIONS] || [];\n        this.RESTRICTED_ACCESS_PERMISSIONS.forEach((perm) => {\n            this.restrictedAccessPermissions[perm] = permissions.includes(perm);\n        });\n        // remove print option if not a pdf file\n        if (this.node.mediatype !== 'file-pdf') {\n            delete this.restrictedAccessPermissions['Print'];\n        }\n    }\n    readonly RESTRICTED_ACCESS_PERMISSIONS = ['ReadAll', 'DownloadContent', 'Print'];\n    @Input() node: Node;\n    restrictedAccess: boolean;\n    restrictedAccessPermissions: { [key in string]: boolean };\n    ngOnInit(): void {}\n\n    async save() {\n        const properties = {\n            [RestConstants.CCM_PROP_RESTRICTED_ACCESS]: [this.restrictedAccess + ''],\n            [RestConstants.CCM_PROP_RESTRICTED_ACCESS_PERMISSIONS]: Object.keys(\n                this.restrictedAccessPermissions,\n            ).filter((key) => this.restrictedAccessPermissions[key] === true),\n        };\n        this.node.properties = {\n            ...this.node.properties,\n            ...properties,\n        };\n        await this.nodeService.editNodeMetadata(this.node.ref.id, properties).toPromise();\n    }\n}\n","<div class=\"group-padding\">\n  <mat-checkbox [(ngModel)]=\"restrictedAccess\">\n    <es-multi-line-label>\n      <ng-container slot=\"label\">\n        {{ 'WORKSPACE.SHARE.RESTRICTED_ACCESS.PRIMARY' | translate }}\n      </ng-container>\n      <span class=\"description\" slot=\"description\">\n        {{ 'WORKSPACE.SHARE.RESTRICTED_ACCESS.SECONDARY' | translate }}\n      </span>\n    </es-multi-line-label>\n  </mat-checkbox>\n  <div class=\"additional-permissions\" *ngIf=\"restrictedAccess\">\n    <h5 class=\"mat-heading-5\">\n      {{ 'WORKSPACE.SHARE.RESTRICTED_ACCESS.ADDITIONAL_PERMISSIONS' | translate }}\n    </h5>\n    <es-info-message\n      mode=\"info\"\n      message=\"{{ 'WORKSPACE.SHARE.RESTRICTED_ACCESS.ADDITIONAL_PERMISSIONS_INFO' | translate }}\"\n    ></es-info-message>\n    <mat-checkbox\n      *ngFor=\"let permission of restrictedAccessPermissions | keyvalue\"\n      [(ngModel)]=\"restrictedAccessPermissions[permission.key]\"\n    >\n      {{ 'WORKSPACE.SHARE.RESTRICTED_ACCESS.PERMISSION.' + permission.key | translate }}\n    </mat-checkbox>\n  </div>\n</div>\n","import {\n    AfterViewInit,\n    ApplicationRef,\n    Component,\n    Inject,\n    OnInit,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { LocalEventsService, UIAnimation, UIConstants } from 'ngx-edu-sharing-ui';\nimport * as rxjs from 'rxjs';\nimport { forkJoin as observableForkJoin } from 'rxjs';\nimport {\n    CollectionUsage,\n    ConfigurationService,\n    DialogButton,\n    LocalPermissions,\n    LoginResult,\n    Node,\n    NodePermissions,\n    NodeShare,\n    NodeWrapper,\n    Permission,\n    RestCollectionService,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestNodeService,\n    RestUsageService,\n    Usage,\n    UsageList,\n} from '../../../../core-module/core.module';\nimport { Helper } from '../../../../core-module/rest/helper';\nimport { Toast } from '../../../../services/toast';\nimport { UIHelper } from '../../../../core-ui-module/ui-helper';\nimport { CARD_DIALOG_DATA, CardDialogConfig } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport { CardDialogUtilsService } from '../../card-dialog/card-dialog-utils.service';\nimport { DialogsService } from '../../dialogs.service';\nimport { ShareDialogPublishComponent } from './publish/publish.component';\nimport { ShareDialogData, ShareDialogResult } from './share-dialog-data';\nimport { trigger } from '@angular/animations';\nimport { AuthenticationService } from 'ngx-edu-sharing-api';\nimport { ShareDialogRestrictedAccessComponent } from './restricted-access/restricted-access.component';\n\n@Component({\n    selector: 'es-share-dialog',\n    templateUrl: './share-dialog.component.html',\n    styleUrls: ['./share-dialog.component.scss'],\n    animations: [trigger('overlay', UIAnimation.openOverlay())],\n})\nexport class ShareDialogComponent implements OnInit, AfterViewInit {\n    @ViewChild('publish') publishComponent: ShareDialogPublishComponent;\n    @ViewChild(ShareDialogRestrictedAccessComponent)\n    restrictedAccessComponent: ShareDialogRestrictedAccessComponent;\n    @ViewChild('inheritRef') inheritRef: any;\n    @ViewChild('state') stateRef: TemplateRef<HTMLElement>;\n    @ViewChild('shareLink') shareLinkRef: TemplateRef<HTMLElement>;\n    readonly RestConstants = RestConstants;\n    readonly ALL_PERMISSIONS = [\n        'All',\n        'Read',\n        'ReadPreview',\n        'ReadContent',\n        'DownloadContent',\n        'Print',\n        'ReadAll',\n        'Comment',\n        'Rate',\n        'Write',\n        'Delete',\n        'DeleteChildren',\n        'DeleteNode',\n        'AddChildren',\n        'Consumer',\n        'ConsumerMetadata',\n        'Editor',\n        'Contributor',\n        'Collaborator',\n        'Coordinator',\n        'ReadPermissions',\n        'ChangePermissions',\n        'CCPublish',\n        'Relation',\n        'Comment',\n        'Feedback',\n        'Deny',\n    ];\n    readonly PERMISSIONS_FORCES = [\n        ['Read', ['ConsumerMetadata']],\n        ['Read', ['Consumer']],\n        ['ReadPreview', ['ReadAll']],\n        ['ReadContent', ['ReadAll']],\n        ['Print', ['Consumer']],\n        ['DownloadContent', ['Consumer']],\n        ['ReadAll', ['Consumer']],\n        ['Comment', ['Consumer']],\n        ['Feedback', ['Consumer']],\n        ['Rate', ['Consumer']],\n        ['Write', ['Editor']],\n        ['DeleteChildren', ['Delete']],\n        ['DeleteNode', ['Delete']],\n        ['AddChildren', ['Contributor']],\n        ['Relation', ['Contributor']],\n        ['ReadPermissions', ['Contributor']],\n        ['Contributor', ['Collaborator']],\n    ];\n\n    initialState: string;\n    _tab = 0;\n    set tab(tab: number) {\n        this._tab = tab;\n        this.updateButtons();\n    }\n    get tab() {\n        return this._tab;\n    }\n    permissionsUser: Permission[];\n    permissionsGroup: Permission[];\n    newPermissions: Permission[] = [];\n    inheritAccessDenied = false;\n    bulkMode = 'extend';\n    bulkInvite = false;\n    owner: Permission;\n    publishEnabled: Permission;\n    linkEnabled: Permission;\n    linkDisabled: Permission;\n    link = false;\n    _nodes: Node[];\n    searchStr: string;\n    inheritAllowed = false;\n    isSharedScope = false;\n    globalSearch = false;\n    globalAllowed = false;\n    fuzzyAllowed = false;\n    showLink: boolean;\n    isAdmin: boolean;\n    publishPermission: boolean;\n    restrictedAccessPermission: boolean;\n    isSafe = false;\n    collectionColumns = UIHelper.getDefaultCollectionColumns();\n    collections: CollectionUsage[];\n    // store authorities marked for deletion\n    deletedPermissions: string[] = [];\n    deletedUsages: any[] = [];\n    usages: { [type: string]: Usage[] };\n\n    currentType = [RestConstants.ACCESS_CONSUMER, RestConstants.ACCESS_CC_PUBLISH];\n    inherited: boolean;\n    notifyUsers = true;\n    notifyMessage: string;\n    inherit: Permission[] = [];\n    permissions: Permission[] = null;\n    private originalPermissions: LocalPermissions[];\n    showChooseType = false;\n    private showChooseTypeList: Permission;\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: ShareDialogData,\n        private dialogRef: CardDialogRef<ShareDialogData, ShareDialogResult>,\n        private applicationRef: ApplicationRef,\n        private authenticationService: AuthenticationService,\n        private cardDialogUtils: CardDialogUtilsService,\n        private collectionService: RestCollectionService,\n        private config: ConfigurationService,\n        private connector: RestConnectorService,\n        private localEvents: LocalEventsService,\n        private dialogs: DialogsService,\n        private iam: RestIamService,\n        private nodeApi: RestNodeService,\n        private toast: Toast,\n        private translate: TranslateService,\n        private usageApi: RestUsageService,\n    ) {\n        //this.dataService=new SearchData(iam);\n\n        this.linkEnabled = new Permission();\n        this.linkEnabled.authority = {\n            authorityName: this.translate.instant('WORKSPACE.SHARE.LINK_ENABLED_INFO'),\n            authorityType: 'LINK',\n        };\n        this.linkEnabled.permissions = [RestConstants.PERMISSION_CONSUMER];\n        this.linkDisabled = new Permission();\n        this.linkDisabled.authority = {\n            authorityName: this.translate.instant('WORKSPACE.SHARE.LINK_DISABLED_INFO'),\n            authorityType: 'LINK',\n        };\n        this.linkDisabled.permissions = [];\n        this.publishEnabled = new Permission();\n        this.publishEnabled.authority = {\n            authorityName: this.translate.instant('WORKSPACE.SHARE.PUBLISH_ENABLED'),\n            authorityType: 'EVERYONE',\n        };\n        this.publishEnabled.permissions = [\n            RestConstants.PERMISSION_CONSUMER,\n            RestConstants.ACCESS_CC_PUBLISH,\n        ];\n\n        this.connector.isLoggedIn(false).subscribe((data: LoginResult) => {\n            this.isSafe = data.currentScope != null;\n            this.updateToolpermissions();\n        });\n        // Call in constructor to avoid changed-after-checked error when setting `isLoading` state.\n        this.initNodes();\n    }\n\n    ngOnInit(): void {\n        this.initButtons();\n    }\n\n    ngAfterViewInit(): void {\n        this.initCardRefs();\n    }\n\n    private initButtons(): void {\n        const buttons: DialogButton[] = [\n            new DialogButton('CANCEL', { color: 'standard' }, () => this.cancel()),\n            new DialogButton(\n                'SAVE', // Can be changed in `updateButtons`.\n                { color: 'primary' },\n                () => this.save(),\n            ),\n        ];\n        this.dialogRef.patchConfig({ buttons });\n    }\n\n    private initNodes() {\n        const isStringArray = (a: string[] | Node[]): a is string[] => typeof a[0] === 'string';\n        if (isStringArray(this.data.nodes)) {\n            this.dialogRef.patchState({ isLoading: true });\n            rxjs.forkJoin(\n                this.data.nodes.map((nodeId) =>\n                    this.nodeApi.getNodeMetadata(nodeId, [RestConstants.ALL]),\n                ),\n            ).subscribe((nodeWrappers) => {\n                this.dialogRef.patchState({ isLoading: false });\n                const nodes = nodeWrappers.map(({ node }) => node);\n                this.setNodes(nodes);\n            });\n        } else {\n            this.setNodes(this.data.nodes);\n        }\n    }\n\n    private initCardRefs(): void {\n        this.dialogRef.patchConfig({\n            customHeaderBarContent: this.shareLinkRef,\n            customBottomBarContent: this.stateRef,\n        });\n    }\n\n    isCollection() {\n        if (this._nodes == null) {\n            return true;\n        }\n        return this._nodes[0].aspects.indexOf(RestConstants.CCM_ASPECT_COLLECTION) !== -1;\n    }\n\n    async openShareLinkDialog(): Promise<void> {\n        const node = this._nodes[0];\n        const dialogRef = await this.dialogs.openShareLinkDialog({ node });\n        dialogRef.afterClosed().subscribe(() => this.updateNodeLink());\n    }\n\n    addSuggestion(data: any) {\n        this.addAuthority(data);\n    }\n\n    setNodes(nodes: Node[]) {\n        void this.cardDialogUtils\n            .configForNodes(nodes)\n            .then((config: Partial<CardDialogConfig<ShareDialogData>>) =>\n                this.dialogRef.patchConfig(config),\n            );\n        this._nodes = nodes;\n        this.initialize();\n    }\n\n    private initialize() {\n        const isDirectory = new Set(this._nodes.map((n) => n.isDirectory));\n        if (isDirectory.size !== 1) {\n            this.toast.error(null, 'WORKSPACE.SHARE.ERROR_INVALID_TYPE_COMBINATION');\n            // async to make sure the dialogRef is available\n            setTimeout(() => this.cancel());\n            return;\n        }\n        if (isDirectory.values().next()) {\n            this.currentType = [RestConstants.ACCESS_CONSUMER];\n        }\n        if (this.data.currentPermissions) {\n            this.originalPermissions = Helper.deepCopy(this.data.currentPermissions);\n            this.setPermissions(this.data.currentPermissions.permissions);\n            this.isInherited(this.data.currentPermissions.inherited);\n            this.showLink = false;\n        } else {\n            this.showLink = true;\n            this.updateNodeLink();\n            this.dialogRef.patchState({ isLoading: true });\n            observableForkJoin(\n                this._nodes.map((n) => this.nodeApi.getNodePermissions(n.ref.id)),\n            ).subscribe((permissions) => {\n                this.originalPermissions = Helper.deepCopy(\n                    permissions.map((p) => p.permissions.localPermissions),\n                );\n                if (permissions.length === 1 && permissions[0].permissions) {\n                    //this.originalPermissions=Helper.deepCopy(permissions[0].permissions.localPermissions);\n                    this.setPermissions(permissions[0].permissions.localPermissions.permissions);\n                    this.isInherited(permissions[0].permissions.localPermissions.inherited);\n                    setTimeout(() => this.setInitialState());\n                } else {\n                    this.setPermissions([]);\n                }\n                this.dialogRef.patchState({ isLoading: false });\n            });\n            this.reloadUsages();\n        }\n        if (this._nodes.length === 1 && this._nodes[0].parent && this._nodes[0].parent.id) {\n            this.nodeApi.getNodePermissions(this._nodes[0].parent.id).subscribe(\n                (data: NodePermissions) => {\n                    if (data.permissions) {\n                        this.inherit = data.permissions.inheritedPermissions;\n                        this.removePermissions(this.inherit, 'OWNER');\n                        this.inherit = this.inherit.filter(\n                            (p) =>\n                                p.authority.authorityName !==\n                                this.connector.getCurrentLogin()?.authorityName,\n                        );\n                        this.removePermissions(\n                            data.permissions.localPermissions.permissions,\n                            'OWNER',\n                        );\n                        this.inherit = UIHelper.mergePermissions(\n                            this.inherit,\n                            data.permissions.localPermissions.permissions,\n                        );\n                        // dealy on tick to let sub-components (share-publish) init\n                        this.initialState = this.getState();\n                    }\n                },\n                (error: any) => {\n                    this.inheritAccessDenied = true;\n                },\n            );\n            this.nodeApi.getNodeParents(this._nodes[0].ref.id).subscribe(\n                (data) => {\n                    //this.inheritAllowed = !this.isCollection() && data.nodes.length > 1;\n                    // changed in 4.1 to keep inherit state of collections\n                    this.inheritAllowed = data.scope === 'MY_FILES' || data.nodes.length > 1;\n                    this.isSharedScope = data.scope === 'SHARED_FILES';\n                    this.updateToolpermissions();\n                },\n                (error) => {\n                    // this can be caused if the node is somewhere at a location not fully visible to the user\n                    this.inheritAllowed = true;\n                    this.updateToolpermissions();\n                },\n            );\n            if (this._nodes[0].ref.id) {\n                this.nodeApi\n                    .getNodeMetadata(this._nodes[0].ref.id, [RestConstants.ALL])\n                    .subscribe((data: NodeWrapper) => {\n                        let authority = data.node.properties[RestConstants.CM_CREATOR][0];\n                        let user = data.node.createdBy;\n\n                        if (data.node.properties[RestConstants.CM_OWNER]) {\n                            authority = data.node.properties[RestConstants.CM_OWNER][0];\n                            user = data.node.owner;\n                        }\n                        this.owner = new Permission();\n                        this.owner.authority = {\n                            authorityName: authority,\n                            authorityType: 'USER',\n                        };\n                        (this.owner as any).user = user;\n                        this.iam.getUser(authority).subscribe(\n                            (apiUser) => {\n                                (this.owner as any).user = apiUser.person.profile;\n                                // force a refresh of the data for ui update\n                                this.owner = Helper.deepCopy(this.owner);\n                            },\n                            (error) => {\n                                // ignore, only relevant for the avatar of the owner\n                            },\n                        );\n                        this.owner.permissions = ['Owner'];\n                    });\n            }\n        }\n        this.connector.isLoggedIn(false).subscribe((data: LoginResult) => {\n            this.isAdmin = data.isAdmin;\n        });\n    }\n\n    isDeleted(p: Permission) {\n        return this.deletedPermissions.indexOf(p.authority.authorityName) !== -1;\n    }\n\n    cancel() {\n        this.dialogRef.close(null);\n    }\n\n    hasUsages() {\n        return this.usages && Object.keys(this.usages).length;\n    }\n\n    showHistory() {\n        const node = this._nodes[0];\n        void this.dialogs.openShareHistoryDialog({ node });\n    }\n\n    filterDisabledPermissions(permissions: Permission[]) {\n        let result: Permission[] = [];\n        if (!permissions) return result;\n        for (let p of permissions) {\n            if (this.deletedPermissions.indexOf(p.authority.authorityName) === -1) result.push(p);\n        }\n        return result;\n    }\n\n    setPermission(permission: Permission, name: string, status: any) {\n        if (status.checked) {\n            if (permission.permissions.indexOf(name) == -1) permission.permissions.push(name);\n        } else {\n            let index = permission.permissions.indexOf(name);\n            if (index != -1) {\n                permission.permissions.splice(index, 1);\n            }\n        }\n        this.applicationRef.tick();\n    }\n\n    isImplicitPermission(permission: Permission, name: string) {\n        //if(name==\"Consumer\") // this is the default permission, can't be removed\n        //  return true;\n        if (name != 'All' && permission.permissions.indexOf('All') != -1)\n            // coordinator implies all permissions\n            return true;\n        if (name != 'Coordinator' && permission.permissions.indexOf('Coordinator') != -1)\n            // coordinator implies all permissions\n            return true;\n        for (let array of this.PERMISSIONS_FORCES) {\n            if (array[0] != name) continue;\n            let list = array[1];\n            if (!list) return false;\n            let result = true;\n            for (let perm of list) {\n                if (perm == name) continue;\n                if (this.hasImplicitPermission(permission, perm)) continue;\n                result = false;\n                break;\n            }\n            if (result) return true;\n        }\n        return false;\n    }\n\n    hasImplicitPermission(permission: Permission, name: string) {\n        if (permission.permissions.indexOf(name) != -1) return true;\n        return this.isImplicitPermission(permission, name);\n    }\n\n    private updateNodeLink() {\n        this.nodeApi\n            .getNodeShares(this._nodes[0].ref.id, RestConstants.SHARE_LINK)\n            .subscribe((data: NodeShare[]) => {\n                this.link = data.length > 0 && data[0].expiryDate != 0;\n            });\n    }\n\n    reloadUsages() {\n        this.usageApi.getNodeUsagesCollection(this._nodes[0].ref.id).subscribe((collections) => {\n            this.collections = collections.filter((c) => c.collectionUsageType === 'ACTIVE');\n            this.usageApi.getNodeUsages(this._nodes[0].ref.id).subscribe((usages: UsageList) => {\n                const filteredUsages = usages.usages.filter(\n                    (u) => this.collections.filter((c) => c.nodeId === u.nodeId).length === 0,\n                );\n                this.usages = RestUsageService.getNodeUsagesByRepositoryType(filteredUsages);\n            });\n        });\n    }\n\n    openCollection(collection: Node) {\n        window.open(UIConstants.ROUTER_PREFIX + 'collections?id=' + collection.ref.id);\n    }\n\n    isStateModified() {\n        return this.initialState !== this.getState();\n    }\n\n    getState() {\n        if (this.getPublishActive() || this.getPublishInherit()) {\n            return 'PUBLIC';\n        }\n        const permissions = [...(this.permissions ?? []), ...(this.inherited ? this.inherit : [])];\n        for (const perm of permissions) {\n            if (\n                perm.authority.authorityName !== RestConstants.AUTHORITY_EVERYONE &&\n                perm.authority.authorityName !== this.connector.getCurrentLogin()?.authorityName\n            )\n                return 'SHARED';\n        }\n        return 'PRIVATE';\n    }\n\n    isBulk() {\n        return this._nodes && this._nodes.length > 1;\n    }\n\n    showShareLink() {\n        return (\n            !this.isCollection() &&\n            this.connector.hasToolPermissionInstant(RestConstants.TOOLPERMISSION_INVITE_LINK)\n        );\n    }\n\n    updateButtons() {\n        // const saveButton = this.buttons[1];\n        // saveButton.label = 'SAVE'; // this.tab == 0 ? 'WORKSPACE.BTN_INVITE' : 'APPLY';\n    }\n\n    chooseType() {\n        this.showChooseType = true;\n    }\n\n    private chooseTypeList(p: Permission) {\n        this.showChooseTypeList = p;\n    }\n\n    removePermission(p: Permission) {\n        if (this.isDeleted(p))\n            this.deletedPermissions.splice(\n                this.deletedPermissions.indexOf(p.authority.authorityName),\n                1,\n            );\n        else this.deletedPermissions.push(p.authority.authorityName);\n        /*\n    if(this.newPermissions.indexOf(p)!=-1)\n    this.newPermissions.splice(this.newPermissions.indexOf(p),1);\n  this.permissions.splice(this.permissions.indexOf(p),1);\n  this.setPermissions(this.permissions);\n  */\n    }\n\n    setType(type: any) {\n        this.currentType = type.permissions;\n        if (type.wasMain) this.showChooseType = false;\n        for (let permission of this.newPermissions) {\n            permission.permissions = Helper.deepCopy(this.currentType);\n        }\n    }\n\n    private contains(\n        permissions: Permission[],\n        permission: Permission,\n        comparePermissions: boolean,\n    ): boolean {\n        for (let p of permissions) {\n            if (p.authority.authorityName == permission.authority.authorityName) {\n                if (!comparePermissions) return true;\n                if (Helper.arrayEquals(p.permissions, permission.permissions)) return true;\n            }\n        }\n        return false;\n    }\n\n    private addAuthority(selected: any) {\n        if (selected == null) return;\n        let permission: any = new Permission();\n        permission.authority = {\n            authorityName: selected.authorityName,\n            authorityType: selected.authorityType,\n        };\n        if (selected.authorityType == 'USER') {\n            permission.user = selected.profile;\n        } else {\n            permission.group = selected.profile;\n        }\n        permission.permissions = this.currentType;\n        permission = Helper.deepCopy(permission);\n        if (this.deletedPermissions.indexOf(permission.authority.authorityName) != -1) {\n            this.deletedPermissions.splice(\n                this.deletedPermissions.indexOf(permission.authority.authorityName),\n                1,\n            );\n        } else if (!this.contains(this.permissions, permission, false)) {\n            this.newPermissions.push(permission);\n            this.permissions.push(permission);\n            this.setPermissions(this.permissions);\n        } else this.toast.error(null, 'WORKSPACE.PERMISSION_AUTHORITY_EXISTS');\n        this.searchStr = '';\n    }\n\n    isNewPermission(p: Permission) {\n        if (!this.originalPermissions?.length || !this.originalPermissions[0].permissions)\n            return true;\n        return !this.contains(this.originalPermissions[0].permissions, p, true);\n    }\n\n    async save() {\n        if (this.permissions != null) {\n            this.dialogRef.patchState({ isLoading: true });\n            let inherit = this.inherited && this.inheritAllowed && !this.isCollection();\n            const actions = this._nodes.map((n, i) => {\n                return async () => {\n                    let permissions: Permission[] = Helper.deepCopy(this.permissions);\n                    if (this.isBulk()) {\n                        if (this.bulkInvite) {\n                            const permission = RestHelper.getAllAuthoritiesPermission();\n                            permission.permissions = [\n                                RestConstants.ACCESS_CONSUMER,\n                                RestConstants.ACCESS_CC_PUBLISH,\n                            ];\n                            permissions.push(permission);\n                        }\n                        // keep inherit state of original node\n                        inherit = this.originalPermissions[i].inherited;\n                        if (this.bulkMode === 'extend') {\n                            permissions = UIHelper.mergePermissionsWithHighestPermission(\n                                this.originalPermissions[i].permissions,\n                                permissions,\n                            );\n                        } else {\n                            // we do nothing, because the original ones are getting deleted\n                        }\n                    }\n                    permissions = permissions.filter((p: Permission) => !this.isDeleted(p));\n                    // handle the invitation of group everyone\n                    if (this.publishComponent) {\n                        permissions = this.publishComponent.updatePermissions(permissions);\n                        try {\n                            await this.publishComponent.save().toPromise();\n                        } catch (error) {\n                            this.toast.error(error);\n                            this.dialogRef.patchState({ isLoading: false });\n                            return;\n                        }\n                    }\n                    if (this.restrictedAccessComponent) {\n                        try {\n                            if (this.data.sendToApi) {\n                                await this.restrictedAccessComponent.save();\n                            }\n                        } catch (error) {\n                            this.toast.error(error);\n                            this.dialogRef.patchState({ isLoading: false });\n                            return;\n                        }\n                    }\n                    await this.handlePermissionsPerNode(n, permissions, inherit);\n                };\n            });\n            observableForkJoin(actions.map((a) => a())).subscribe(\n                () => {\n                    if (!this.data.sendToApi) {\n                        return;\n                    }\n                    this.updateUsages(\n                        RestHelper.copyPermissions(Helper.deepCopy(this.permissions), inherit),\n                    );\n                },\n                (error: any) => {\n                    this.toast.error(error);\n                    this.dialogRef.patchState({ isLoading: false });\n                },\n            );\n        }\n    }\n    updateToolpermissions() {\n        this.connector\n            .hasToolPermission(\n                this.isSafe\n                    ? this.isSharedScope\n                        ? RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE\n                        : RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE\n                    : this.isSharedScope\n                    ? RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE\n                    : RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH,\n            )\n            .subscribe((has: boolean) => (this.globalAllowed = has));\n        this.authenticationService\n            .hasToolpermission(\n                this.isSafe\n                    ? this.isSharedScope\n                        ? RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE\n                        : RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE\n                    : this.isSharedScope\n                    ? RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE\n                    : RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH,\n            )\n            .then((has: boolean) => (this.globalAllowed = has));\n        this.authenticationService\n            .hasToolpermission(RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_FUZZY)\n            .then((has: boolean) => (this.fuzzyAllowed = has));\n        this.authenticationService\n            .hasToolpermission(RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES)\n            .then((has: boolean) => (this.publishPermission = has));\n        this.authenticationService\n            .hasToolpermission(RestConstants.TOOLPERMISSION_CONTROL_RESTRICTED_ACCESS)\n            .then((has: boolean) => (this.restrictedAccessPermission = has));\n    }\n    updatePermissionInfo() {\n        let type: string[];\n        for (let permission of this.newPermissions) {\n            if (type && !Helper.arrayEquals(type, permission.permissions)) {\n                this.currentType = [];\n                return;\n            }\n            type = permission.permissions;\n        }\n        if (type) this.currentType = type;\n    }\n\n    private removePermissions(permissions: Permission[], remove: string) {\n        for (let i = 0; i < remove.length; i++) {\n            if (permissions[i] && permissions[i].authority.authorityType == remove) {\n                permissions.splice(i, 1);\n                i--;\n            }\n        }\n    }\n\n    private setPermissions(permissions: Permission[]) {\n        if (permissions == null) {\n            permissions = [];\n        }\n        this.permissions = permissions;\n        this.permissionsUser = this.permissions.slice();\n        this.permissionsGroup = this.permissions.slice();\n        this.removePermissions(this.permissionsUser, RestConstants.AUTHORITY_TYPE_GROUP);\n        this.removePermissions(this.permissionsUser, RestConstants.AUTHORITY_TYPE_EVERYONE);\n        this.removePermissions(this.permissionsGroup, RestConstants.AUTHORITY_TYPE_USER);\n        // do not show GROUP_EVERYONE permission, is displayed in the share-publish dialog\n        this.removePermissions(this.permissionsGroup, RestConstants.AUTHORITY_TYPE_EVERYONE);\n    }\n    getPublishInherit() {\n        return (\n            this.inherited &&\n            this.getAuthorityPos(this.inherit, RestConstants.AUTHORITY_EVERYONE) !== -1\n        );\n    }\n    localPublish() {\n        return (\n            this.getAuthorityPos(this.permissions, RestConstants.AUTHORITY_EVERYONE) !== -1 &&\n            this.deletedPermissions?.indexOf(RestConstants.AUTHORITY_EVERYONE) === -1\n        );\n    }\n    getPublishActive() {\n        return (\n            this.getPublishInherit() ||\n            // this.localPublish() ||\n            this.publishComponent?.shareModeDirect ||\n            this.publishComponent?.shareModeCopy\n        );\n    }\n\n    private getAuthorityPos(permissions: Permission[], authority: string) {\n        let i = 0;\n        for (let permission of permissions) {\n            if (permission.authority.authorityName == authority) return i;\n            i++;\n        }\n        return -1;\n    }\n\n    private updateUsages(permissions: LocalPermissions, pos = 0, error = false) {\n        // skip for bulk mode\n        if (pos === this.deletedUsages.length || this.isBulk()) {\n            if (this.data.sendToApi) {\n                this.localEvents.nodesChanged.emit(this.data.nodes as Node[]);\n            }\n            this.dialogRef.close(this.getEmitObject(permissions));\n            if (!error) {\n                this.toast.toast('WORKSPACE.PERMISSIONS_UPDATED');\n            }\n            return;\n        }\n        let usage = this.deletedUsages[pos];\n        // collection\n        if (usage.collection) {\n            this.collectionService\n                .removeFromCollection(usage.resourceId, usage.collection.ref.id)\n                .subscribe(\n                    () => {\n                        this.updateUsages(permissions, pos + 1);\n                    },\n                    (error) => {\n                        this.toast.error(error);\n                        this.updateUsages(permissions, pos + 1, true);\n                    },\n                );\n        } else {\n            this.usageApi.deleteNodeUsage(this._nodes[0].ref.id, usage.nodeId).subscribe(\n                () => {\n                    this.updateUsages(permissions, pos + 1);\n                },\n                (error) => {\n                    this.toast.error(error);\n                    this.updateUsages(permissions, pos + 1, true);\n                },\n            );\n        }\n    }\n\n    private getEmitObject(localPermissions: LocalPermissions) {\n        return {\n            permissions: localPermissions,\n            notify: this.notifyUsers,\n            notifyMessage: this.notifyMessage,\n        };\n    }\n\n    private async handlePermissionsPerNode(\n        n: Node,\n        permissions: Permission[],\n        inherit: boolean,\n    ): Promise<void> {\n        const permissionsCopy = RestHelper.copyAndCleanPermissions(permissions, inherit);\n        if (!this.data.sendToApi) {\n            this.dialogRef.close(\n                this.getEmitObject(RestHelper.copyPermissions(permissions, inherit)),\n            );\n            return null;\n        }\n        await this.nodeApi\n            .setNodePermissions(\n                n.ref.id,\n                permissionsCopy,\n                this.notifyUsers && this.data.sendMessages,\n                this.notifyMessage,\n                false,\n            )\n            .toPromise();\n    }\n\n    setInitialState() {\n        this.initialState = this.getState();\n    }\n\n    getNewInvitedAuthorities() {\n        return this.filterDisabledPermissions(this.newPermissions).filter(\n            (p) => p.authority.authorityName !== RestConstants.AUTHORITY_EVERYONE,\n        );\n    }\n\n    onCheckInherit(event: any): void {\n        if (!event._checked) {\n            if (this.isLicenseMandatory() && !this.isLicenseEmpty()) {\n                if (this.isAuthorRequired() && this.isAuthorEmpty()) {\n                    this.toast.error(\n                        null,\n                        this.translate.instant('WORKSPACE.LICENSE.RELEASE_WITHOUT_AUTHOR'),\n                    );\n                } else {\n                    this.toast.error(\n                        null,\n                        this.translate.instant('WORKSPACE.SHARE.PUBLISH.LICENSE_REQUIRED'),\n                    );\n                }\n                event.preventDefaultEvent();\n            }\n        }\n    }\n\n    private isInherited(inherited: boolean) {\n        if (this.isLicenseMandatory() && !this.isLicenseEmpty()) {\n            if (this.isAuthorRequired() && this.isAuthorEmpty()) {\n                this.inherited = false;\n            } else {\n                this.inherited = inherited;\n            }\n        } else {\n            this.inherited = inherited;\n        }\n    }\n\n    /**\n     * Check if license is mandatory\n     * @return true | false | not exist return false\n     */\n    isLicenseMandatory() {\n        return this.config.instant('publish.licenseMandatory', false);\n    }\n    isAuthorMandatory() {\n        return this.config.instant('publish.authorMandatory', false);\n    }\n\n    /**\n     * Check if license is empty\n     * @return true | false | not exist return false\n     */\n    isLicenseEmpty() {\n        if (\n            this._nodes == null ||\n            !this._nodes[0].properties[RestConstants.CCM_PROP_LICENSE]?.[0]\n        ) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Check if author is required\n     * For CC_0 and PDM, Author is not required, and we can share also without author\n     * @return true | false | not exist return false\n     */\n    isAuthorRequired() {\n        if (!this.isAuthorMandatory()) {\n            return false;\n        }\n        if (this._nodes !== null) {\n            return (\n                !this._nodes[0].properties[RestConstants.CCM_PROP_LICENSE]?.includes('CC_0') &&\n                !this._nodes[0].properties[RestConstants.CCM_PROP_LICENSE]?.includes('PDM')\n            );\n        }\n        return false;\n    }\n\n    /**\n     * Check if Author is empty\n     * @return true | false | not exist return false\n     */\n    isAuthorEmpty() {\n        if (\n            this._nodes == null ||\n            !this._nodes[0].properties[RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR]?.[0]\n        ) {\n            return true;\n        }\n        return false;\n    }\n}\n","<ng-template #shareLink>\n  <button\n    *ngIf=\"!isCollection() && !isBulk() && showShareLink()\"\n    mat-raised-button\n    class=\"share-link-button\"\n    (click)=\"openShareLinkDialog()\"\n  >\n    <i esIcon=\"link\"></i>\n    {{ 'OPTIONS.SHARE_LINK' | translate }}\n  </button>\n</ng-template>\n\n<mat-tab-group mat-stretch-tabs [(selectedIndex)]=\"tab\">\n  <mat-tab class=\"tabContent tabContentInvite\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"group_add\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'WORKSPACE.TAB_INVITE' | translate }}</span>\n    </ng-template>\n    <div class=\"invite-group\">\n      <div class=\"group groupInvite\">\n        <es-authority-search-input\n          [globalSearchAllowed]=\"globalAllowed\"\n          (onChooseAuthority)=\"addSuggestion($event)\"\n        ></es-authority-search-input>\n        <div class=\"hintNoFuzzy\" *ngIf=\"globalSearch && !fuzzyAllowed\">\n          {{ 'WORKSPACE.SHARE.NO_FUZZY' | translate }}\n        </div>\n        <!-- <ng2-completer [(ngModel)]=\"searchStr\" [clearSelected]=\"true\" (selected)=\"addAuthority($event)\" [dataService]=\"dataService\" [minSearchLength]=\"2\" class=\"search\"></ng2-completer>-->\n        <!-- <input type=\"text\" id=\"inviteName\" /> -->\n      </div>\n\n      <div class=\"group groupToInvite\" *ngIf=\"getNewInvitedAuthorities().length\">\n        <mat-chip-set class=\"toInvite\">\n          <mat-chip\n            *ngFor=\"let permission of getNewInvitedAuthorities()\"\n            (removed)=\"removePermission(permission)\"\n          >\n            <div class=\"mat-chip-group\">\n              <span class=\"primary\">{{ permission | permissionName }}</span>\n              <span class=\"secondary\">{{\n                permission | permissionName : { field: 'secondary' }\n              }}</span>\n            </div>\n            <i matChipRemove esIcon=\"cancel\"></i>\n          </mat-chip>\n        </mat-chip-set>\n        <div class=\"typeButton\" *ngIf=\"getNewInvitedAuthorities().length\">\n          <button\n            mat-raised-button\n            (click)=\"chooseType()\"\n            role=\"combobox\"\n            [attr.aria-label]=\"'WORKSPACE.SHARE.TYPE_MENU_LABEL_NEW' | translate\"\n            aria-haspopup=\"true\"\n            [attr.aria-expanded]=\"showChooseType || null\"\n            [attr.aria-controls]=\"showChooseType ? 'es-share-dialog-choose-type-menu' : null\"\n          >\n            <ng-container *ngIf=\"currentType.length == 0\">\n              <i esIcon=\"help_outline\"></i>\n              <span>{{ 'WORKSPACE.SHARE.TYPE_UNKNOWN' | translate }}</span>\n              <i aria-hidden=\"true\" esIcon=\"keyboard_arrow_down\"></i\n            ></ng-container>\n            <ng-container *ngIf=\"currentType.indexOf('Consumer') > -1\">\n              <i esIcon=\"remove_red_eye\"></i>\n              <span>{{ 'WORKSPACE.SHARE.TYPE_VIEWER' | translate }}</span>\n              <i aria-hidden=\"true\" esIcon=\"keyboard_arrow_down\"></i\n            ></ng-container>\n            <ng-container *ngIf=\"currentType.indexOf('Collaborator') > -1\">\n              <i esIcon=\"edit\"></i> <span>{{ 'WORKSPACE.SHARE.TYPE_COWORKER' | translate }}</span>\n              <i aria-hidden=\"true\" esIcon=\"keyboard_arrow_down\"></i\n            ></ng-container>\n            <ng-container *ngIf=\"currentType.indexOf('Coordinator') > -1\">\n              <i esIcon=\"work\"></i>\n              <span>{{ 'WORKSPACE.SHARE.TYPE_COORDINATOR' | translate }}</span>\n              <i aria-hidden=\"true\" esIcon=\"keyboard_arrow_down\"></i\n            ></ng-container>\n          </button>\n\n          <!--<div class=\"share-type-mobile\">-->\n          <!--<p *ngIf=\"currentType.length==0\">{{'WORKSPACE.SHARE.TYPE_UNKNOWN' | translate}}</p>-->\n          <!--<p *ngIf=\"currentType.indexOf('Consumer')>-1\">{{'WORKSPACE.SHARE.TYPE_VIEWER' | translate}}</p>-->\n          <!--<p *ngIf=\"currentType.indexOf('Collaborator')>-1\">{{'WORKSPACE.SHARE.TYPE_COWORKER' | translate}}</p>-->\n          <!--<p *ngIf=\"currentType.indexOf('Coordinator')>-1\">{{'WORKSPACE.SHARE.TYPE_COORDINATOR' | translate}}</p>-->\n          <!--</div>-->\n        </div>\n\n        <es-share-dialog-choose-type\n          *ngIf=\"showChooseType\"\n          class=\"typeAdd\"\n          [aria-label]=\"'WORKSPACE.SHARE.TYPE_MENU_LABEL_NEW' | translate\"\n          [selected]=\"currentType\"\n          [isDirectory]=\"_nodes[0].isDirectory\"\n          [canPublish]=\"!isSafe\"\n          (onCancel)=\"showChooseType = false\"\n          (onType)=\"setType($event)\"\n        ></es-share-dialog-choose-type>\n      </div>\n\n      <div *ngIf=\"data.sendMessages && getNewInvitedAuthorities().length\" class=\"groupMessage\">\n        <mat-checkbox id=\"notify\" [(ngModel)]=\"notifyUsers\">\n          <div>{{ 'WORKSPACE.NOTIFY_TITLE' | translate }}</div>\n          <div class=\"notify-info\">{{ 'WORKSPACE.NOTIFY_INFO' | translate }}</div>\n        </mat-checkbox>\n        <mat-form-field *ngIf=\"notifyUsers\" [@overlay]=\"notifyUsers\" floatLabel=\"always\">\n          <mat-label>{{ 'WORKSPACE.SHARE.MESSAGE' | translate }}</mat-label>\n          <textarea\n            matInput\n            cdkTextareaAutosize\n            cdkAutosizeMinRows=\"3\"\n            cdkAutosizeMaxRows=\"5\"\n            id=\"message\"\n            name=\"message\"\n            [(ngModel)]=\"notifyMessage\"\n            placeholder=\"{{ 'WORKSPACE.SHARE.MESSAGE_PLACEHOLDER' | translate }}\"\n          ></textarea>\n        </mat-form-field>\n      </div>\n      <!--\n        <div [ngClass]=\"{'publish-grey': getNewInvitedAuthorities().length}\" class=\"publish\" *ngIf=\"!isSafe && _nodes[0].isDirectory\">\n          <div class=\"publishElements\">\n            <div *ngIf=\"!publishPermission && !getPublishInherit()\" class=\"publishInfo\">{{ 'WORKSPACE.SHARE.PUBLISH_NO_PERMISSION' | translate}}</div>\n            <div *ngIf=\"publishPermission || getPublishInherit()\" class=\"publish-labels\">\n              <label>{{ ('WORKSPACE.SHARE.PUBLISH_'+(isCollection() ? 'COLLECTION' : _nodes[0].isDirectory ? 'DIRECTORY' : 'DOCUMENT')) | translate}}</label>\n              <div *ngIf=\"getPublishInherit()\" class=\"publishInfo\">{{ 'WORKSPACE.SHARE.PUBLISH_INHERIT' | translate}}</div>\n              <div *ngIf=\"publishPermission && !getPublishInherit()\" class=\"publishInfo\"\n                   innerHTML=\"{{('WORKSPACE.SHARE.PUBLISH_ACTIVE_'+(isCollection() ? 'COLLECTION' : _nodes[0].isDirectory ? 'DIRECTORY' : 'DOCUMENT')) | translate}}\">\n              </div>\n            </div>\n            <div class=\"publish-config\">\n              <div *ngIf=\"getPublishActive()\" class=\"type\"><i class=\"material-icons align-icon\">remove_red_eye</i> <span class=\"uppercase\">{{'WORKSPACE.SHARE.TYPE_VIEWER' | translate}}</span></div>\n              <mat-slide-toggle [disabled]=\"!publishPermission || getPublishInherit()\" [ngModel]=\"getPublishActive()\" (ngModelChange)=\"setPublish($event)\"></mat-slide-toggle>\n            </div>\n          </div>\n        </div>\n        -->\n    </div>\n    <div class=\"bulk-config\" *ngIf=\"isBulk()\">\n      <mat-radio-group [(ngModel)]=\"bulkMode\">\n        <h4 class=\"mat-heading-4\">{{ 'WORKSPACE.SHARE.BULK_MODE.TITLE' | translate }}</h4>\n        <mat-radio-button value=\"extend\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.SHARE.BULK_MODE.EXTEND' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.SHARE.BULK_MODE.EXTEND_DESCRIPTION' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n        <mat-radio-button value=\"replace\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.SHARE.BULK_MODE.REPLACE' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.SHARE.BULK_MODE.REPLACE_DESCRIPTION' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n      </mat-radio-group>\n      <div class=\"publish-bulk\">\n        <mat-slide-toggle [(ngModel)]=\"bulkInvite\" [disabled]=\"!publishPermission\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.SHARE.PUBLISH.MODE_DIRECT' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.SHARE.PUBLISH.MODE_DIRECT_INFO_MULTIPLE' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-slide-toggle>\n      </div>\n    </div>\n  </mat-tab>\n  <mat-tab *ngIf=\"_nodes && _nodes.length === 1\" class=\"tabContent\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"group\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'WORKSPACE.TAB_INVITED' | translate }}</span>\n    </ng-template>\n    <div class=\"invited\">\n      <es-mat-link\n        *ngIf=\"_nodes && _nodes[0].ref.id\"\n        class=\"history uppercase\"\n        (click)=\"showHistory()\"\n        >{{ 'WORKSPACE.SHARE.SHOW_HISTORY' | translate }} <i esIcon=\"arrow_forward\"></i\n      ></es-mat-link>\n      <div class=\"groupName\" *ngIf=\"owner\">{{ 'WORKSPACE.SHARE.GROUP_OWNER' | translate }}</div>\n      <es-share-dialog-permission\n        class=\"groupEntry owner\"\n        *ngIf=\"owner\"\n        [permission]=\"owner\"\n        [isDirectory]=\"_nodes[0].isDirectory\"\n        [readOnly]=\"true\"\n        [showDelete]=\"false\"\n      ></es-share-dialog-permission>\n      <div *ngIf=\"inheritAllowed && !isCollection()\">\n        <div class=\"groupHeading\">\n          <div class=\"groupName\">{{ 'WORKSPACE.SHARE.GROUP_INHERIT' | translate }}</div>\n          <div class=\"inheritCheck\">\n            <mat-checkbox\n              #inheritRef\n              (click)=\"onCheckInherit(inheritRef)\"\n              [(ngModel)]=\"inherited\"\n              id=\"inherit\"\n              >{{ 'WORKSPACE.SHARE.INHERIT' | translate }}</mat-checkbox\n            >\n          </div>\n        </div>\n        <div\n          class=\"inherit\"\n          [class.crossed]=\"!inherited\"\n          *ngIf=\"inherited && inherit && inherit.length\"\n        >\n          <div *ngFor=\"let permission of inherit\" class=\"groupEntry\">\n            <es-share-dialog-permission\n              [permission]=\"permission\"\n              [isDirectory]=\"_nodes[0].isDirectory\"\n              [inherit]=\"true\"\n              [readOnly]=\"true\"\n            ></es-share-dialog-permission>\n          </div>\n        </div>\n        <div class=\"inheritDisabled\" *ngIf=\"!inherited\">\n          {{ 'WORKSPACE.INHERIT_DISABLED' | translate }}\n        </div>\n        <div class=\"inheritDisabled\" *ngIf=\"inherited && inheritAccessDenied\">\n          {{ 'WORKSPACE.INHERIT_ACCESS_DENIED' | translate }}\n        </div>\n        <div class=\"inheritEmpty\" *ngIf=\"inherited && !inherit.length && !inheritAccessDenied\">\n          {{ 'WORKSPACE.INHERIT_EMPTY' | translate }}\n        </div>\n      </div>\n      <div class=\"groupName\" *ngIf=\"permissionsGroup && permissionsGroup.length\">\n        {{ 'WORKSPACE.SHARE.GROUP_GROUPS' | translate }}\n      </div>\n      <div class=\"normal\">\n        <div *ngFor=\"let permission of permissionsGroup\">\n          <es-share-dialog-permission\n            class=\"groupEntry\"\n            [class.added]=\"isNewPermission(permission)\"\n            [permission]=\"permission\"\n            [readOnly]=\"!permission.editable && !isNewPermission(permission)\"\n            [showDelete]=\"permission.editable || isNewPermission(permission)\"\n            [isDeleted]=\"isDeleted(permission)\"\n            [isDirectory]=\"_nodes[0].isDirectory\"\n            [canPublish]=\"!isSafe\"\n            (onRemove)=\"removePermission(permission)\"\n            (onType)=\"permission.permissions = $event.permissions; updatePermissionInfo()\"\n          ></es-share-dialog-permission>\n        </div>\n      </div>\n      <div class=\"groupName\" *ngIf=\"permissionsUser && permissionsUser.length\">\n        {{ 'WORKSPACE.SHARE.GROUP_USERS' | translate }}\n      </div>\n      <div class=\"normal\">\n        <div *ngFor=\"let permission of permissionsUser\">\n          <es-share-dialog-permission\n            class=\"groupEntry\"\n            [class.added]=\"isNewPermission(permission)\"\n            [permission]=\"permission\"\n            [readOnly]=\"!permission.editable && !isNewPermission(permission)\"\n            [showDelete]=\"permission.editable || isNewPermission(permission)\"\n            [isDeleted]=\"isDeleted(permission)\"\n            [isDirectory]=\"_nodes[0].isDirectory\"\n            [canPublish]=\"!isSafe\"\n            (onRemove)=\"removePermission(permission)\"\n            (onType)=\"permission.permissions = $event.permissions; updatePermissionInfo()\"\n          ></es-share-dialog-permission>\n        </div>\n      </div>\n\n      <ng-container *ngIf=\"showLink && link\">\n        <div class=\"groupName\">{{ 'WORKSPACE.SHARE.LINK' | translate }}</div>\n        <es-mat-link class=\"manageLink uppercase\" (click)=\"openShareLinkDialog()\">{{\n          'WORKSPACE.SHARE.MANAGE_LINK' | translate\n        }}</es-mat-link>\n        <es-share-dialog-permission\n          class=\"groupEntry link\"\n          [permission]=\"linkEnabled\"\n          [isDirectory]=\"_nodes[0].isDirectory\"\n          [readOnly]=\"true\"\n          [showDelete]=\"false\"\n        ></es-share-dialog-permission>\n      </ng-container>\n      <ng-container\n        *ngIf=\"\n          !!publishComponent?.shareModeDirect ||\n          !!publishComponent?.shareModeCopy ||\n          !!publishComponent?.initialState?.direct ||\n          !!publishComponent?.initialState?.copy\n        \"\n      >\n        <div class=\"groupName\">{{ 'WORKSPACE.SHARE.PUBLISH_LABEL' | translate }}</div>\n        <es-mat-link\n          class=\"manageLink uppercase\"\n          *ngIf=\"publishPermission && !isBulk() && !isSafe\"\n          (click)=\"tab = 2\"\n        >\n          {{ 'WORKSPACE.SHARE.MANAGE_PUBLISH' | translate }}</es-mat-link\n        >\n        <es-share-dialog-permission\n          class=\"groupEntry link\"\n          [class.added]=\"\n            !publishComponent.initialState?.direct &&\n            !publishComponent.initialState?.copy &&\n            (publishComponent.shareModeDirect || publishComponent.shareModeCopy)\n          \"\n          [permission]=\"publishEnabled\"\n          [isDirectory]=\"_nodes[0].isDirectory\"\n          [readOnly]=\"true\"\n          [showDelete]=\"false\"\n          [isDeleted]=\"\n            (publishComponent.initialState?.direct || publishComponent.initialState?.copy) &&\n            !publishComponent.shareModeDirect &&\n            !publishComponent.shareModeCopy\n          \"\n        ></es-share-dialog-permission>\n      </ng-container>\n      <div class=\"groupName\" *ngIf=\"hasUsages()\">{{ 'WORKSPACE.SHARE.USAGES' | translate }}</div>\n      <div *ngIf=\"collections && collections.length\" class=\"usage\">\n        <es-share-dialog-usage\n          class=\"usageEntry\"\n          [name]=\"'COLLECTION'\"\n          [usages]=\"collections\"\n          [(deleteList)]=\"deletedUsages\"\n        ></es-share-dialog-usage>\n      </div>\n      <div *ngFor=\"let usage of usages | keyvalue\" class=\"usage\">\n        <es-share-dialog-usage\n          *ngIf=\"usage.key !== 'null'\"\n          class=\"usageEntry\"\n          [name]=\"usage.key\"\n          [usages]=\"usage.value\"\n          [(deleteList)]=\"deletedUsages\"\n        ></es-share-dialog-usage>\n      </div>\n\n      <!--\n        <es-share-dialog-permission *ngIf=\"showLink && !link\"\n                                    class=\"groupEntry link\"\n                                    [permission]=\"linkDisabled\"\n                                    [readOnly]=\"true\"\n                                    [showDelete]=\"false\"\n        ></es-share-dialog-permission>\n        -->\n    </div>\n  </mat-tab>\n  <mat-tab *ngIf=\"_nodes && publishPermission && !isBulk() && !isSafe\" class=\"tabContent\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"public\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'WORKSPACE.TAB_PUBLISH' | translate }}</span>\n    </ng-template>\n    <div class=\"publish-tab\">\n      <es-share-dialog-publish\n        #publish\n        [node]=\"_nodes[0]\"\n        [permissions]=\"permissions\"\n        [inherited]=\"getPublishInherit()\"\n        (onInitCompleted)=\"setInitialState()\"\n        [isAuthorEmpty]=\"isAuthorRequired() ? isAuthorEmpty() : false\"\n        [isLicenseEmpty]=\"isLicenseMandatory() ? isLicenseEmpty() : false\"\n        (onDisableInherit)=\"inherited = false\"\n      ></es-share-dialog-publish>\n    </div>\n  </mat-tab>\n  <mat-tab *ngIf=\"_nodes && restrictedAccessPermission && !isBulk() && !isSafe\" class=\"tabContent\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"lock\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'WORKSPACE.TAB_RESTRICTED_ACCESS' | translate }}</span>\n    </ng-template>\n    <div class=\"restricted-access-tab\">\n      <es-share-dialog-restricted-access [node]=\"_nodes[0]\"></es-share-dialog-restricted-access>\n    </div>\n  </mat-tab>\n  <mat-tab *ngIf=\"isAdmin && permissionsUser && permissionsGroup\" class=\"tabContent\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"settings\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'WORKSPACE.TAB_ADVANCED' | translate }}</span>\n    </ng-template>\n    <div class=\"advanced\">\n      <h4 class=\"mat-heading-4\" *ngIf=\"permissionsUser.length + permissionsGroup.length == 0\">\n        {{ 'WORKSPACE.SHARE.NO_PERMISSIONS' | translate }}\n      </h4>\n      <div *ngFor=\"let permission of permissionsGroup.concat(permissionsUser)\">\n        <div class=\"advancedAuthority\">\n          <i class=\"type material-icons\">{{\n            permission.authority.authorityType === 'USER' ? 'person' : 'group'\n          }}</i\n          >{{ permission | permissionName }}\n        </div>\n        <div *ngFor=\"let type of ALL_PERMISSIONS\" class=\"advancedPermission\">\n          <mat-checkbox\n            id=\"{{ permission.authority.authorityName + '_' + type }}\"\n            [checked]=\"hasImplicitPermission(permission, type)\"\n            [disabled]=\"isImplicitPermission(permission, type)\"\n            (change)=\"setPermission(permission, type, $event)\"\n          >\n            {{ type }}\n          </mat-checkbox>\n        </div>\n      </div>\n    </div>\n  </mat-tab>\n</mat-tab-group>\n\n<ng-template #state>\n  <div class=\"state\" *ngIf=\"initialState\">\n    <div\n      *ngIf=\"getState() === 'PRIVATE'\"\n      [class.state-changed]=\"isStateModified()\"\n      class=\"show-state\"\n    >\n      <i esIcon=\"lock\"></i><span> {{ 'WORKSPACE.SHARE.STATE.PRIVATE' | translate }}</span>\n    </div>\n    <div\n      *ngIf=\"getState() === 'SHARED'\"\n      [class.state-changed]=\"isStateModified()\"\n      class=\"show-state\"\n    >\n      <i esIcon=\"group\"></i><span> {{ 'WORKSPACE.SHARE.STATE.SHARED' | translate }}</span>\n    </div>\n    <div\n      *ngIf=\"getState() === 'PUBLIC'\"\n      [class.state-changed]=\"isStateModified()\"\n      class=\"show-state\"\n    >\n      <i class=\"material-icons\" style=\"color: #42ca8d\">public</i\n      ><span> {{ 'WORKSPACE.SHARE.STATE.PUBLIC' | translate }}</span>\n    </div>\n  </div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { ShareDialogChooseTypeComponent } from './choose-type/choose-type.component';\nimport { FocusableOptionDirective } from './choose-type/focusable-option.directive';\nimport { ShareDialogPermissionComponent } from './permission/permission.component';\nimport { NodeAuthorNamePipe } from './publish/node-author-name.pipe';\nimport { ShareDialogPublishComponent } from './publish/publish.component';\nimport { ShareDialogComponent } from './share-dialog.component';\nimport { ShareDialogUsageComponent } from './usage/usage.component';\nimport { ShareDialogRestrictedAccessComponent } from './restricted-access/restricted-access.component';\n\nexport { ShareDialogComponent };\n\n@NgModule({\n    declarations: [\n        FocusableOptionDirective,\n        NodeAuthorNamePipe,\n        ShareDialogChooseTypeComponent,\n        ShareDialogComponent,\n        ShareDialogPermissionComponent,\n        ShareDialogPublishComponent,\n        ShareDialogUsageComponent,\n        ShareDialogRestrictedAccessComponent,\n    ],\n    imports: [SharedModule],\n})\nexport class ShareDialogModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { UIAnimation } from 'ngx-edu-sharing-ui';\nimport { trigger } from '@angular/animations';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n    selector: 'es-share-dialog-usage',\n    templateUrl: 'usage.component.html',\n    styleUrls: ['usage.component.scss'],\n    animations: [trigger('cardAnimation', UIAnimation.cardAnimation())],\n})\nexport class ShareDialogUsageComponent {\n    static ICON_MAP: any = {\n        MOODLE: 'school',\n        COLLECTION: 'layers',\n    };\n    @Input() name: string;\n    @Input() usages: any[];\n    @Input() deleteList: any[];\n    @Output() deleteListChange = new EventEmitter();\n    @Input() showDelete = true;\n    @Output() onRemoveAll = new EventEmitter();\n    @Output() onRemove = new EventEmitter();\n    showAll = false;\n    isDeleted(usage: any) {\n        return this.deleteList.indexOf(usage) != -1;\n    }\n    getIcon() {\n        let map = ShareDialogUsageComponent.ICON_MAP[this.name.toUpperCase()];\n        if (map) return map;\n        return 'extension';\n    }\n    getName(usage: any) {\n        // may be a collection\n        if (usage.collection) return usage.collection.title;\n\n        let info = usage.usageXmlParams;\n        if (info && info.general.referencedInName != null) {\n            const typeStr =\n                'WORKSPACE.SHARE.USAGE_SUBTYPE.' + info.general.referencedInType.toUpperCase();\n            let type = this.translation.instant(typeStr);\n            if (type === typeStr) {\n                type = info.general.referencedInType;\n            }\n            return this.translation.instant('WORKSPACE.SHARE.USAGE_INFO', {\n                instance: info.general.referencedInInstance,\n                type,\n                name: info.general.referencedInName,\n            });\n        }\n        return usage.courseId;\n    }\n    public remove(usage: any) {\n        if (this.showDelete && usage.type != 'INDIRECT') {\n            if (this.isDeleted(usage)) this.deleteList.splice(this.deleteList.indexOf(usage), 1);\n            else this.deleteList.push(usage);\n            this.deleteListChange.emit(this.deleteList);\n        }\n    }\n    constructor(private translation: TranslateService) {}\n}\n","<div class=\"group\">\n  <div class=\"container\">\n    <div class=\"icon\">\n      <i class=\"type material-icons\">{{ getIcon() }}</i>\n    </div>\n    <div class=\"name\">\n      <span class=\"primary\"\n        >{{\n          'WORKSPACE.SHARE.USAGE_TYPE.' + name.toUpperCase() | translate : { fallback: name }\n        }}\n        ({{ usages.length }})</span\n      >\n      <i class=\"material-icons clickable toggle\" (click)=\"showAll = !showAll\">{{\n        showAll ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\n      }}</i>\n    </div>\n    <!--<div class=\"remove clickable\" tabindex=\"0\" (keyup.enter)=\"removeAll()\" (click)=\"removeAll()\" [class.opacity-invisible]=\"!showDelete\">\n            <i class=\"material-icons\">cancel</i>\n        </div>-->\n  </div>\n  <div class=\"all\" *ngIf=\"showAll\" [@cardAnimation]=\"showAll\">\n    <div class=\"single\" *ngFor=\"let usage of usages\">\n      <div class=\"deleted-info\" *ngIf=\"isDeleted(usage)\">\n        <div class=\"line\"><hr /></div>\n        <div class=\"info\">{{ 'WORKSPACE.SHARE.DELETED' | translate }}</div>\n        <div class=\"line\"><hr /></div>\n      </div>\n      <div>\n        <div class=\"name\">\n          <span class=\"primary\">{{ getName(usage) }}</span>\n        </div>\n        <div\n          class=\"remove\"\n          tabindex=\"0\"\n          (keyup.enter)=\"remove(usage)\"\n          (click)=\"remove(usage)\"\n          title=\"{{\n            (usage.type === 'INDIRECT' ? 'WORKSPACE.SHARE.USAGE_INDIRECT' : '') | translate\n          }}\"\n          [class.disabled]=\"usage.type === 'INDIRECT'\"\n          [class.opacity-invisible]=\"!showDelete\"\n        >\n          <i class=\"material-icons\" *ngIf=\"!isDeleted(usage)\">cancel</i>\n          <i class=\"material-icons\" *ngIf=\"isDeleted(usage)\">undo</i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"names":["FocusKeyManager","DOWN_ARROW","ESCAPE","UP_ARROW","EventEmitter","rxjs","Subject","takeUntil","FocusableOptionDirective","i0","element","elementStart","listener","ShareDialogChooseTypeComponent_mat_option_2_Template_mat_option_click_0_listener","restoredCtx","restoreView","_r5","option_r2","$implicit","ctx_r4","nextContext","resetView","_setType","id","text","elementEnd","template","ShareDialogChooseTypeComponent_mat_option_2_i_7_Template","attribute","ctx_r0","_contains","pipeBind1","label","description","advance","property","icon","textInterpolate1","textInterpolate","ShareDialogChooseTypeComponent_div_4_Template_mat_slide_toggle_change_1_listener","$event","_r8","ctx_r7","_setPublish","propertyInterpolate","_r6","focus","bind","ctx_r1","_publish","_publishDisabled","ShareDialogChooseTypeComponent","constructor","isDirectory","canPublish","onCancel","onType","_options","_destroyed$","selected","_selected","setTimeout","_checkPublish","ngAfterViewInit","_slideToggle","_elementRef","nativeElement","setAttribute","_keyManager","_menuItems","withWrap","tabOut","pipe","subscribe","_cancel","setActiveItem","_getActiveIndex","merge","map","item","focused","updateActiveItem","ngOnDestroy","next","complete","_handleKeydown","event","keyCode","manager","preventDefault","stopPropagation","setFocusOrigin","onKeydown","emit","type","splice","indexOf","push","permissions","wasMain","checked","findIndex","option","includes","_","_2","selectors","viewQuery","ShareDialogChooseTypeComponent_Query","rf","ctx","ShareDialogChooseTypeComponent_Template_div_click_0_listener","ShareDialogChooseTypeComponent_mat_option_2_Template","ShareDialogChooseTypeComponent_div_4_Template","ariaLabel","_onFocus","ngOnInit","addEventListener","removeEventListener","customFocusFunction","directiveInject","ElementRef","inputs","disabled","RestConstants","pipeBind2","pureFunction1","_c0","ctx_r2","_permission","join","elementContainerStart","elementContainerEnd","ShareDialogPermissionComponent_div_16_ng_container_5_span_6_Template","ctx_r6","readOnly","isEveryone","ShareDialogPermissionComponent_div_16_ng_container_6_span_6_Template","ShareDialogPermissionComponent_div_16_ng_container_7_span_6_Template","ctx_r8","ShareDialogPermissionComponent_div_16_es_share_dialog_choose_type_9_Template_es_share_dialog_choose_type_onCancel_0_listener","_r15","ctx_r14","showChooseType","ShareDialogPermissionComponent_div_16_es_share_dialog_choose_type_9_Template_es_share_dialog_choose_type_onType_0_listener","ctx_r16","changeType","_c1","ctx_r10","ShareDialogPermissionComponent_div_16_Template_button_click_1_listener","_r18","ctx_r17","chooseType","ShareDialogPermissionComponent_div_16_ng_container_4_Template","ShareDialogPermissionComponent_div_16_ng_container_5_Template","ShareDialogPermissionComponent_div_16_ng_container_6_Template","ShareDialogPermissionComponent_div_16_ng_container_7_Template","ShareDialogPermissionComponent_div_16_div_8_Template","ShareDialogPermissionComponent_div_16_es_share_dialog_choose_type_9_Template","ctx_r3","length","ShareDialogPermissionComponent_button_17_Template_button_click_0_listener","_r23","ctx_r22","remove","ShareDialogPermissionComponent_button_17_i_1_Template","ShareDialogPermissionComponent_button_17_i_2_Template","ShareDialogPermissionComponent_button_17_i_3_Template","inherit","isDeleted","ShareDialogPermissionComponent","invalidPermission","showDelete","onRemove","permission","coordinator","PERMISSION_COORDINATOR","collaborator","PERMISSION_COLLABORATOR","i","PERMISSION_CONSUMER","authority","authorityName","AUTHORITY_EVERYONE","check","slice","ACCESS_CC_PUBLISH","PERMISSION_OWNER","outputs","decls","vars","consts","template","ShareDialogPermissionComponent_Template","ShareDialogPermissionComponent_div_1_Template","ShareDialogPermissionComponent_i_14_Template","ShareDialogPermissionComponent_div_15_Template","ShareDialogPermissionComponent_div_16_Template","ShareDialogPermissionComponent_button_17_Template","pureFunction0","_c2","classProp","VCard","NodeAuthorNamePipe","transform","node","args","properties","CCM_PROP_AUTHOR_FREETEXT","CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR","getDisplayName","translate","instant","i1","TranslateService","pure","Observable","filter","UIConstants","Node","Helper","RestHelper","UIHelper","MdsEditorInstanceService","OPEN_URL_MODE","YES_OR_NO","ShareDialogPublishComponent_ng_container_4_es_info_message_1_ng_container_5_Template","ShareDialogPublishComponent_ng_container_4_es_info_message_1_Template_button_click_7_listener","_r13","ctx_r12","openLicense","textInterpolate3","getLicenseText","shareModeCopy","ShareDialogPublishComponent_ng_container_4_es_info_message_2_Template_button_click_4_listener","openMetadata","mdsCompletion","ShareDialogPublishComponent_ng_container_4_es_info_message_3_Template_button_click_4_listener","_r17","ShareDialogPublishComponent_ng_container_4_es_info_message_5_Template_button_click_4_listener","_r19","ctx_r18","ShareDialogPublishComponent_ng_container_4_es_info_message_1_Template","ShareDialogPublishComponent_ng_container_4_es_info_message_2_Template","ShareDialogPublishComponent_ng_container_4_es_info_message_3_Template","ShareDialogPublishComponent_ng_container_4_es_info_message_4_Template","ShareDialogPublishComponent_ng_container_4_es_info_message_5_Template","getLicense","completed","total","isLicenseMissing","isAuthorMissing","ShareDialogPublishComponent_es_info_message_5_Template_button_click_4_listener","_r21","ctx_r20","onDisableInherit","ShareDialogPublishComponent_div_7_div_19_Template_mat_radio_group_ngModelChange_3_listener","_r27","ctx_r26","republish","ctx_r28","setRepublish","ShareDialogPublishComponent_div_7_div_19_es_info_message_28_Template","ctx_r24","copyAllowed","isCopy","currentVersionPublished","publishCopyPermission","ShareDialogPublishComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener","_r30","ctx_r29","shareModeDirect","ctx_r31","updateShareMode","ShareDialogPublishComponent_div_7_Template_mat_checkbox_ngModelChange_10_listener","ctx_r32","ctx_r33","doiActive","ShareDialogPublishComponent_div_7_div_19_Template","ShareDialogPublishComponent_div_8_div_9_Template_mat_radio_group_ngModelChange_1_listener","_r36","ctx_r35","handleMode","ctx_r34","hasExactOneHandle","ShareDialogPublishComponent_div_8_Template_mat_checkbox_ngModelChange_1_listener","_r38","ctx_r37","ctx_r39","updatePublishedVersions","ShareDialogPublishComponent_div_8_div_9_Template","doiDisabled","ShareDialogPublishComponent_div_9_div_6_i_22_Template","ShareDialogPublishComponent_div_9_div_6_Template_button_click_24_listener","_r45","v_r42","ctx_r44","openVersion","status","ShareDialogPublishComponent_div_9_div_5_Template","ShareDialogPublishComponent_div_9_div_6_Template","ctx_r5","allPublishedVersions","PublishedNode","ShareDialogPublishComponent","bridge","config","connector","dialogs","legacyNodeService","mdsService","nodeHelper","nodeService","router","toast","onInitCompleted","publishedVersions","initHasStarted","destroyed","doiPermission","hasToolPermissionInstant","TOOLPERMISSION_HANDLESERVICE","TOOLPERMISSION_PUBLISH_COPY","observeCompletionStatus","completion","mandatory","mandatoryForPublish","ngOnChanges","changes","_this","_asyncToGenerator","refresh","getNodeMetadata","ref","ALL","toPromise","CCM_PROP_LICENSE","_this2","dialogRef","openLicenseDialog","kind","nodes","afterClosed","updatedNodes","_this3","openMdsEditorDialogForNodes","immediatelyShowMissingRequiredWidgets","isDOIActive","prop","CCM_PROP_PUBLISHED_MODE","ShareMode","Copy","getPublishedCopies","reverse","error","some","p","initialState","copy","direct","initWithNodes","force","_this4","openGenericDialog","title","message","buttons","response","updatePermissions","getAllAuthoritiesPermission","ACCESS_CONSUMER","save","observer","publishCopy","copyMetadata","url","getAbsoluteEdusharingUrl","serializeUrl","createUrlTree","ROUTER_PREFIX","openUrl","Blank","LOM_PROP_LIFECYCLE_VERSION","virtual","deepCopy","CCM_PROP_PUBLISHED_DATE","Date","getTime","CCM_PROP_PUBLISHED_HANDLE_ID","concat","getType","collection","Set","v","size","isLicenseEmpty","isAuthorEmpty","canBePublished","BridgeService","i2","ConfigurationService","i3","RestConnectorService","i4","DialogsService","i5","RestNodeService","i6","i7","NodeHelperService","i8","NodeService","i9","Router","i10","Toast","i11","ShareDialogPublishComponent_Query","NgOnChangesFeature","ShareDialogPublishComponent_Template","ShareDialogPublishComponent_ng_container_4_Template","ShareDialogPublishComponent_es_info_message_5_Template","ShareDialogPublishComponent_es_info_message_6_Template","ShareDialogPublishComponent_div_7_Template","ShareDialogPublishComponent_div_8_Template","ShareDialogPublishComponent_div_9_Template","inherited","ShareDialogRestrictedAccessComponent_div_9_mat_checkbox_6_Template_mat_checkbox_ngModelChange_0_listener","_r4","permission_r2","restrictedAccessPermissions","key","ShareDialogRestrictedAccessComponent_div_9_mat_checkbox_6_Template","ShareDialogRestrictedAccessComponent","RESTRICTED_ACCESS_PERMISSIONS","restrictedAccess","CCM_PROP_RESTRICTED_ACCESS","CCM_PROP_RESTRICTED_ACCESS_PERMISSIONS","forEach","perm","mediatype","Object","keys","editNodeMetadata","features","ShareDialogRestrictedAccessComponent_Template","ShareDialogRestrictedAccessComponent_Template_mat_checkbox_ngModelChange_1_listener","ShareDialogRestrictedAccessComponent_div_9_Template","UIAnimation","forkJoin","observableForkJoin","DialogButton","Permission","RestUsageService","CARD_DIALOG_DATA","trigger","ShareDialogComponent_ng_template_0_button_0_Template_button_click_0_listener","openShareLinkDialog","ShareDialogComponent_ng_template_0_button_0_Template","isCollection","isBulk","showShareLink","ShareDialogComponent_div_9_mat_chip_2_Template_mat_chip_removed_0_listener","permission_r19","removePermission","_c4","ShareDialogComponent_div_9_div_3_Template_button_click_1_listener","ShareDialogComponent_div_9_div_3_ng_container_3_Template","ShareDialogComponent_div_9_div_3_ng_container_4_Template","ShareDialogComponent_div_9_div_3_ng_container_5_Template","ShareDialogComponent_div_9_div_3_ng_container_6_Template","currentType","ShareDialogComponent_div_9_es_share_dialog_choose_type_4_Template_es_share_dialog_choose_type_onCancel_0_listener","_r29","ShareDialogComponent_div_9_es_share_dialog_choose_type_4_Template_es_share_dialog_choose_type_onType_0_listener","ctx_r30","setType","_nodes","isSafe","ShareDialogComponent_div_9_mat_chip_2_Template","ShareDialogComponent_div_9_div_3_Template","ShareDialogComponent_div_9_es_share_dialog_choose_type_4_Template","getNewInvitedAuthorities","ShareDialogComponent_div_10_mat_form_field_8_Template_textarea_ngModelChange_4_listener","_r33","notifyMessage","notifyUsers","ShareDialogComponent_div_10_Template_mat_checkbox_ngModelChange_1_listener","_r35","ShareDialogComponent_div_10_mat_form_field_8_Template","ShareDialogComponent_div_11_Template_mat_radio_group_ngModelChange_1_listener","_r37","ctx_r36","bulkMode","ShareDialogComponent_div_11_Template_mat_slide_toggle_ngModelChange_22_listener","ctx_r38","bulkInvite","publishPermission","ShareDialogComponent_mat_tab_12_es_mat_link_3_Template_es_mat_link_click_0_listener","_r54","ctx_r53","showHistory","ctx_r42","owner","permission_r61","ctx_r60","ShareDialogComponent_mat_tab_12_div_6_div_10_div_1_Template","ctx_r56","ShareDialogComponent_mat_tab_12_div_6_Template_mat_checkbox_click_6_listener","_r63","_r55","reference","ctx_r62","onCheckInherit","ShareDialogComponent_mat_tab_12_div_6_Template_mat_checkbox_ngModelChange_6_listener","ctx_r64","ShareDialogComponent_mat_tab_12_div_6_div_10_Template","ShareDialogComponent_mat_tab_12_div_6_div_11_Template","ShareDialogComponent_mat_tab_12_div_6_div_12_Template","ShareDialogComponent_mat_tab_12_div_6_div_13_Template","ctx_r43","inheritAccessDenied","ShareDialogComponent_mat_tab_12_div_9_Template_es_share_dialog_permission_onRemove_1_listener","_r67","permission_r65","ctx_r66","ShareDialogComponent_mat_tab_12_div_9_Template_es_share_dialog_permission_onType_1_listener","ctx_r68","updatePermissionInfo","ctx_r45","isNewPermission","editable","ShareDialogComponent_mat_tab_12_div_12_Template_es_share_dialog_permission_onRemove_1_listener","_r71","permission_r69","ctx_r70","ShareDialogComponent_mat_tab_12_div_12_Template_es_share_dialog_permission_onType_1_listener","ctx_r72","ctx_r47","ShareDialogComponent_mat_tab_12_ng_container_13_Template_es_mat_link_click_4_listener","_r74","ctx_r73","ctx_r48","linkEnabled","ShareDialogComponent_mat_tab_12_ng_container_14_es_mat_link_4_Template_es_mat_link_click_0_listener","_r77","ctx_r76","tab","ShareDialogComponent_mat_tab_12_ng_container_14_es_mat_link_4_Template","ctx_r49","publishComponent","publishEnabled","ShareDialogComponent_mat_tab_12_div_16_Template_es_share_dialog_usage_deleteListChange_1_listener","_r79","ctx_r78","deletedUsages","ctx_r51","collections","ShareDialogComponent_mat_tab_12_div_17_es_share_dialog_usage_1_Template_es_share_dialog_usage_deleteListChange_0_listener","_r83","ctx_r82","usage_r80","value","ctx_r81","ShareDialogComponent_mat_tab_12_div_17_es_share_dialog_usage_1_Template","ShareDialogComponent_mat_tab_12_ng_template_1_Template","ShareDialogComponent_mat_tab_12_es_mat_link_3_Template","ShareDialogComponent_mat_tab_12_div_4_Template","ShareDialogComponent_mat_tab_12_es_share_dialog_permission_5_Template","ShareDialogComponent_mat_tab_12_div_6_Template","ShareDialogComponent_mat_tab_12_div_7_Template","ShareDialogComponent_mat_tab_12_div_9_Template","ShareDialogComponent_mat_tab_12_div_10_Template","ShareDialogComponent_mat_tab_12_div_12_Template","ShareDialogComponent_mat_tab_12_ng_container_13_Template","ShareDialogComponent_mat_tab_12_ng_container_14_Template","ShareDialogComponent_mat_tab_12_div_15_Template","ShareDialogComponent_mat_tab_12_div_16_Template","ShareDialogComponent_mat_tab_12_div_17_Template","inheritAllowed","permissionsGroup","permissionsUser","showLink","link","hasUsages","usages","ShareDialogComponent_mat_tab_13_ng_template_1_Template","ShareDialogComponent_mat_tab_13_Template_es_share_dialog_publish_onInitCompleted_3_listener","_r88","ctx_r87","setInitialState","ShareDialogComponent_mat_tab_13_Template_es_share_dialog_publish_onDisableInherit_3_listener","ctx_r89","getPublishInherit","isAuthorRequired","isLicenseMandatory","ShareDialogComponent_mat_tab_14_ng_template_1_Template","ctx_r9","ShareDialogComponent_mat_tab_15_div_4_div_6_Template_mat_checkbox_change_1_listener","_r99","type_r96","permission_r94","ctx_r97","setPermission","ctx_r95","hasImplicitPermission","isImplicitPermission","ShareDialogComponent_mat_tab_15_div_4_div_6_Template","authorityType","ctx_r93","ALL_PERMISSIONS","ShareDialogComponent_mat_tab_15_ng_template_1_Template","ShareDialogComponent_mat_tab_15_h4_3_Template","ShareDialogComponent_mat_tab_15_div_4_Template","ctx_r102","isStateModified","ctx_r103","ctx_r104","ShareDialogComponent_ng_template_16_div_0_div_1_Template","ShareDialogComponent_ng_template_16_div_0_div_2_Template","ShareDialogComponent_ng_template_16_div_0_div_3_Template","ctx_r101","getState","ShareDialogComponent_ng_template_16_div_0_Template","ShareDialogComponent","_tab","updateButtons","data","applicationRef","authenticationService","cardDialogUtils","collectionService","localEvents","iam","nodeApi","usageApi","PERMISSIONS_FORCES","newPermissions","isSharedScope","globalSearch","globalAllowed","fuzzyAllowed","collectionColumns","getDefaultCollectionColumns","deletedPermissions","linkDisabled","isLoggedIn","currentScope","updateToolpermissions","initNodes","initButtons","initCardRefs","color","cancel","patchConfig","isStringArray","a","patchState","isLoading","nodeId","nodeWrappers","setNodes","customHeaderBarContent","shareLinkRef","customBottomBarContent","stateRef","aspects","CCM_ASPECT_COLLECTION","updateNodeLink","addSuggestion","addAuthority","configForNodes","then","initialize","n","values","currentPermissions","originalPermissions","setPermissions","isInherited","getNodePermissions","localPermissions","reloadUsages","parent","inheritedPermissions","removePermissions","getCurrentLogin","mergePermissions","getNodeParents","scope","CM_CREATOR","user","createdBy","CM_OWNER","getUser","apiUser","person","profile","isAdmin","close","openShareHistoryDialog","filterDisabledPermissions","result","name","index","tick","array","list","getNodeShares","SHARE_LINK","expiryDate","getNodeUsagesCollection","c","collectionUsageType","getNodeUsages","filteredUsages","u","getNodeUsagesByRepositoryType","openCollection","window","open","getPublishActive","TOOLPERMISSION_INVITE_LINK","chooseTypeList","showChooseTypeList","contains","comparePermissions","arrayEquals","group","searchStr","actions","mergePermissionsWithHighestPermission","restrictedAccessComponent","sendToApi","handlePermissionsPerNode","updateUsages","copyPermissions","hasToolPermission","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE_SAFE","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SAFE","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH","has","hasToolpermission","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_FUZZY","TOOLPERMISSION_INVITE_ALLAUTHORITIES","TOOLPERMISSION_CONTROL_RESTRICTED_ACCESS","restrictedAccessPermission","AUTHORITY_TYPE_GROUP","AUTHORITY_TYPE_EVERYONE","AUTHORITY_TYPE_USER","getAuthorityPos","localPublish","pos","nodesChanged","getEmitObject","usage","removeFromCollection","resourceId","deleteNodeUsage","notify","permissionsCopy","copyAndCleanPermissions","setNodePermissions","sendMessages","_checked","preventDefaultEvent","isAuthorMandatory","CardDialogRef","ApplicationRef","AuthenticationService","CardDialogUtilsService","RestCollectionService","LocalEventsService","RestIamService","ShareDialogComponent_Query","ShareDialogComponent_ng_template_0_Template","templateRefExtractor","ShareDialogComponent_Template_mat_tab_group_selectedIndexChange_2_listener","ShareDialogComponent_ng_template_4_Template","ShareDialogComponent_Template_es_authority_search_input_onChooseAuthority_7_listener","ShareDialogComponent_div_8_Template","ShareDialogComponent_div_9_Template","ShareDialogComponent_div_10_Template","ShareDialogComponent_div_11_Template","ShareDialogComponent_mat_tab_12_Template","ShareDialogComponent_mat_tab_13_Template","ShareDialogComponent_mat_tab_14_Template","ShareDialogComponent_mat_tab_15_Template","ShareDialogComponent_ng_template_16_Template","openOverlay","SharedModule","ShareDialogUsageComponent","ShareDialogModule","_3","declarations","imports","ShareDialogUsageComponent_div_11_div_1_div_1_Template","ShareDialogUsageComponent_div_11_div_1_Template_div_keyup_enter_6_listener","_r7","usage_r2","ShareDialogUsageComponent_div_11_div_1_Template_div_click_6_listener","ShareDialogUsageComponent_div_11_div_1_i_8_Template","ShareDialogUsageComponent_div_11_div_1_i_9_Template","getName","ShareDialogUsageComponent_div_11_div_1_Template","showAll","ICON_MAP","MOODLE","COLLECTION","deleteList","getIcon","toUpperCase","info","usageXmlParams","general","referencedInName","typeStr","referencedInType","translation","instance","referencedInInstance","courseId","deleteListChange","onRemoveAll","ShareDialogUsageComponent_Template","ShareDialogUsageComponent_Template_i_click_9_listener","ShareDialogUsageComponent_div_11_Template","textInterpolate2","cardAnimation"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}