{"version":3,"file":"src_app_pages_collections-page_collections-page_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYuB;AA6BK;AAC6C;AAC9B;AAQD;AACgB;AACO;AAEQ;AACN;AAMN;AAKc;;;;;;;;;;;;;;;;;;;;;;;;;IC5B7DoB,sEAAA,GAAkC;IAAAA,qDAAA,GAEhC;;IAAAA,oEAAA,EAAe;;;;IAFiBA,wDAAA,GAEhC;IAFgCA,gEAAA,CAAAA,0DAAA,4BAAAO,MAAA,CAAAC,KAAA,YAEhC;;;;;IACFR,sEAAA,GAAmC;IAAAA,qDAAA,GAEjC;;IAAAA,oEAAA,EAAe;;;IAFkBA,wDAAA,GAEjC;IAFiCA,gEAAA,CAAAA,0DAAA,2CAEjC;;;;;IATJA,6DAAA,YAGC;IACCA,yDAAA,IAAAW,qEAAA,0BAEiB;IACjBX,yDAAA,IAAAY,qEAAA,0BAEiB;IACnBZ,2DAAA,EAAK;;;;IANYA,wDAAA,GAAiB;IAAjBA,yDAAA,SAAAe,MAAA,CAAAC,WAAA,CAAiB;IAGjBhB,wDAAA,GAAkB;IAAlBA,yDAAA,UAAAe,MAAA,CAAAC,WAAA,CAAkB;;;;;IARrChB,6DAAA,aAA2B;IACzBA,yDAAA,IAAAiB,sDAAA,gBAUK;IACPjB,2DAAA,EAAM;;;;IATDA,wDAAA,GAAqE;IAArEA,yDAAA,SAAAkB,MAAA,CAAAC,yBAAA,OAAAD,MAAA,CAAAE,qBAAA,CAAAC,OAAA,GAAqE;;;;;IAgBxErB,iEAAA,GAA0D;;;;;IAJ5DA,6DAAA,cAGC;IACCA,yDAAA,IAAAuB,sEAAA,2BAA0D;IAC5DvB,2DAAA,EAAM;;;;IADWA,wDAAA,GAA0B;IAA1BA,yDAAA,qBAAAwB,MAAA,CAAAC,QAAA,CAA0B;;;;;IAJ3CzB,yDAAA,IAAA0B,uDAAA,kBAKM;;;;IAJH1B,yDAAA,UAAA2B,MAAA,CAAAC,aAAA,GAAsB;;;;;IAO7B5B,6DAAA,UAOC;IAEGA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;IACNA,6DAAA,cAA6D;IAEzDA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;;;IALNA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,6CACF;IAGIA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,kDACF;;;;;IAyDEA,6DAAA,cAA0C;IAEtCA,qDAAA,GACF;;IAAAA,2DAAA,EAAK;;;IADHA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,mCACF;;;;;;IASEA,6DAAA,iBAOC;IAJCA,yDAAA,mBAAA+B,kHAAAC,MAAA;MAAAhC,4DAAA,CAAAkC,IAAA;MAAA,MAAAC,WAAA,GAAAnC,4DAAA,IAAAqC,OAAA;MAAA,MAAAC,OAAA,GAAAtC,4DAAA;MACuBsC,OAAA,CAAAC,eAAA,CAAAJ,WAAA,CAAwB;MAAEH,MAAA,CAAAQ,eAAA,EAAwB;MAAA,OAAExC,0DAAA,CAAAgC,MAAA,CAAAU,cAAA,EAE7F;IAAA,EADmB;IAGD1C,qDAAA,GACF;;IAAAA,2DAAA,EAAS;;;IADPA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,+BACF;;;;;IAdJA,6DAAA,cAAqD;IAEjDA,wDAAA,YAAuB;IACvBA,6DAAA,cAAsB;IAAAA,qDAAA,GAAoC;;IAAAA,2DAAA,EAAM;IAChEA,6DAAA,cAAqB;IAAAA,qDAAA,GAAyC;;IAAAA,2DAAA,EAAM;IACpEA,yDAAA,IAAA4C,yFAAA,qBASS;IACX5C,2DAAA,EAAM;;;;;IAZkBA,wDAAA,GAAoC;IAApCA,gEAAA,CAAAA,0DAAA,2BAAoC;IACrCA,wDAAA,GAAyC;IAAzCA,gEAAA,CAAAA,0DAAA,gCAAyC;IAO3DA,wDAAA,GAAwB;IAAxBA,yDAAA,SAAA6C,OAAA,CAAAC,SAAA,CAAAX,WAAA,EAAwB;;;;;IAX/BnC,yDAAA,IAAA+C,gFAAA,mBAgBM;;;;;IAhBqB/C,yDAAA,SAAAgD,OAAA,CAAAC,SAAA,CAAAd,WAAA,EAAwB;;;;;IA0BrDnC,6DAAA,cAAgF;IAC9EA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;;;IADJA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,2CACF;;;;;IATFA,6DAAA,cAGC;IAEGA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;IACNA,yDAAA,IAAAkD,yEAAA,kBAEM;IACRlD,2DAAA,EAAM;;;;IALFA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,8CACF;IACyCA,wDAAA,GAAqC;IAArCA,yDAAA,SAAAmD,OAAA,CAAAC,mBAAA,CAAAD,OAAA,CAAAE,UAAA,EAAqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA/EpFrD,6DAAA,iBAA4D;IAC1DA,wDAAA,2BAIgB;IAChBA,6DAAA,cAKC;IAQGA,yDAAA,+BAAAsD,kHAAAtB,MAAA;MAAAhC,4DAAA,CAAAuD,IAAA;MAAA,MAAAC,OAAA,GAAAxD,4DAAA;MAAA,OAAAA,0DAAA,CAAAwD,OAAA,CAAAC,qBAAA,GAAAzB,MAAA;IAAA,EAAuC,uBAAA0B,0GAAA1B,MAAA;MAAAhC,4DAAA,CAAAuD,IAAA;MAAA,MAAAI,OAAA,GAAA3D,4DAAA;MAAA,OAiB1BA,0DAAA,CAAA2D,OAAA,CAAAC,cAAA,CAAA5B,MAAA,CAAsB;IAAA,EAjBI,wBAAA6B,2GAAA7B,MAAA;MAAAhC,4DAAA,CAAAuD,IAAA;MAAA,MAAAO,OAAA,GAAA9D,4DAAA;MAAA,OAkBzBA,0DAAA,CAAA8D,OAAA,CAAAC,gBAAA,CAAA/B,MAAA,CAAwB;IAAA,EAlBC,uBAAAgC,0GAAAhC,MAAA;MAAAhC,4DAAA,CAAAuD,IAAA;MAAA,MAAAU,OAAA,GAAAjE,4DAAA;MAAA,OAwB1BA,0DAAA,CAAAiE,OAAA,CAAAC,kBAAA,CAAAlC,MAAA,CAA0B;IAAA,EAxBA;IA0BvChC,yDAAA,IAAAmE,0EAAA,gCAAAnE,qEAAA,CAMc;IACdA,yDAAA,IAAAqE,0EAAA,iCAAArE,qEAAA,CAkBc;IAChBA,2DAAA,EAA0B;IAC1BA,yDAAA,KAAAsE,mEAAA,kBAUM;IACRtE,2DAAA,EAAM;;;;;IA/EJA,wDAAA,GAAkC;IAAlCA,yDAAA,mCAAkC;IAIlCA,wDAAA,GAA8E;IAA9EA,0DAAA,kBAAAwE,OAAA,CAAAf,qBAAA,KAAAe,OAAA,CAAAvF,sBAAA,CAAAwF,KAAA,CAA8E,kBAAAD,OAAA,CAAAE,oBAAA,CAAArD,OAAA,oBAAAmD,OAAA,CAAApB,mBAAA,CAAAoB,OAAA,CAAAnB,UAAA;IAM5ErD,wDAAA,GAAkD;IAAlDA,yDAAA,2BAAAwE,OAAA,CAAA3F,eAAA,CAAA8F,OAAA,CAAkD,eAAAH,OAAA,CAAAE,oBAAA,WAAAF,OAAA,CAAApF,KAAA,CAAAwF,qBAAA,sCAAAJ,OAAA,CAAAK,iBAAA,iBAAAL,OAAA,CAAAf,qBAAA,cAAAzD,8DAAA,KAAA+E,GAAA,EAAAP,OAAA,CAAArD,yBAAA,IAAAqD,OAAA,CAAAQ,YAAA,EAAAR,OAAA,CAAAS,SAAA,WAAAjF,8DAAA,KAAAmF,GAAA,EAAAX,OAAA,CAAAY,cAAA,CAAAC,MAAA,EAAAb,OAAA,CAAAY,cAAA,CAAAE,SAAA,EAAAd,OAAA,CAAAY,cAAA,CAAAG,uBAAA,EAAAf,OAAA,CAAAY,cAAA,CAAAI,OAAA,GAAAhB,OAAA,CAAAiB,QAAA,QAAAC,QAAA,GAAAlB,OAAA,CAAAE,oBAAA,CAAAiB,OAAA,qBAAAD,QAAA,CAAAE,MAAA,SAAApB,OAAA,CAAApB,mBAAA,CAAAoB,OAAA,CAAAnB,UAAA,OAAAmB,OAAA,CAAAqB,eAAA,kBAAArB,OAAA,CAAAqB,eAAA,CAAAN,uBAAA,qBAAAf,OAAA,CAAApB,mBAAA,CAAAoB,OAAA,CAAAnB,UAAA,IAAArD,8DAAA,KAAA+F,GAAA,EAAAvB,OAAA,CAAAwB,2BAAA,EAAAxB,OAAA,CAAAyB,2BAAA,IAAAjG,8DAAA,KAAAmG,GAAA;IA2DjDnG,wDAAA,GAAuE;IAAvEA,yDAAA,UAAAwE,OAAA,CAAAE,oBAAA,CAAA0B,SAAA,IAAA5B,OAAA,CAAAE,oBAAA,CAAArD,OAAA,GAAuE;;;;;;IA/EhFrB,sEAAA,GAAmC;IACjCA,6DAAA,kCAIC;IADCA,yDAAA,4BAAAqG,qGAAArE,MAAA;MAAAhC,4DAAA,CAAAsG,IAAA;MAAA,MAAAC,OAAA,GAAAvG,4DAAA;MAAA,OAAkBA,0DAAA,CAAAuG,OAAA,CAAA3C,cAAA,CAAA5B,MAAA,CAA4B;IAAA,EAAC;IAChDhC,2DAAA,EAA0B;IAC3BA,yDAAA,IAAAwG,4DAAA,wBAoFU;IACZxG,oEAAA,EAAe;;;;IAzFXA,wDAAA,GAAyB;IAAzBA,yDAAA,eAAAyG,MAAA,CAAApD,UAAA,CAAyB,YAAAoD,MAAA,CAAAtF,yBAAA;IAIanB,wDAAA,GAAkB;IAAlBA,yDAAA,UAAAyG,MAAA,CAAAzF,WAAA,CAAkB;;;;;;ADHxD,MAAO0F,0BAA0B;EAAA,QAAAC,CAAA,GACpB,KAAAC,eAAe,GAAG;IAC7BC,MAAM,EAAE,CACJjH,2EAAa,CAACkH,iCAAiC,EAC/ClH,2EAAa,CAACmH,gCAAgC,EAC9CnH,2EAAa,CAACoH,gBAAgB,CACjC;IACDC,aAAa,EAAE,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK;GACrC;EAqFDC,YACYC,qBAA4C,EAC5CC,MAAqB,EACrBC,iBAAwC,EACxCC,oBAAmC,EACnCC,OAAuB,EACvBC,OAAuB,EACvBC,aAAmC,EACnCC,cAA8B,EAC9BC,UAAsB,EACtBC,UAA6B,EAC7BC,WAA4B,EAC5BC,cAAwC,EACxCC,KAAqB,EACrBC,MAAc,EACdC,KAAY,EACZC,WAA6B,EAC7BC,SAAoB;IAhBpB,KAAAhB,qBAAqB,GAArBA,qBAAqB;IACrB,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,SAAS,GAATA,SAAS;IArGrB,KAAA1E,qBAAqB,GAAGxE,uEAAsB,CAACmJ,IAAI;IAClC,KAAAC,UAAU,GAAG,IAAI/I,0CAAO,EAAQ;IACxC,KAAAgJ,aAAa,GAAGjJ,4DAAW,CAACiJ,aAAa;IACzC,KAAArJ,sBAAsB,GAAGA,uEAAsB;IAC/C,KAAAJ,eAAe,GAAGA,gEAAe;IACjC,KAAAO,KAAK,GAAGA,sDAAK;IAGtB;;;IAGS,KAAAmJ,eAAe,GAAoB1J,gEAAe,CAAC2J,iBAAiB;IAUnE,KAAAC,SAAS,GAAG,IAAI7J,wDAAY,EAA8C;IAK5E,KAAA8J,oBAAoB,GAAG,IAAIpJ,0CAAO,EAAQ;IAClD,KAAAqJ,qBAAqB,GAAmB,CACpC,IAAI5J,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACgJ,aAAa,CAAC,EACrD,IAAI7J,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACoH,gBAAgB,CAAC,EACxD,IAAIjI,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACiJ,oCAAoC,EAAE,WAAW,CAAC,CAC5F;IACD,KAAAC,6BAA6B,GAAG,IAAI3J,2DAAU,CAAC,wBAAwB,EAAE,QAAQ,EAAE,MAC/E,IAAI,CAAC4J,kBAAkB,EAAE,CAC5B;IACD,KAAA3D,cAAc,GAAmB;MAC7BC,MAAM,EAAE,IAAI;MACZC,SAAS,EAAE,KAAK;MAChBE,OAAO,EAAE;MACL;MACA,IAAIzG,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACoH,gBAAgB,CAAC,EACxD,IAAIjI,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACoJ,iBAAiB,CAAC,EACzD,IAAIjK,6DAAY,CACZ,MAAM,EACNa,2EAAa,CAACiJ,oCAAoC,EAClD,WAAW,CACd;KAER;IACD,KAAAhD,eAAe,GAAmB;MAC9BR,MAAM,EAAE,IAAI;MACZC,SAAS,EAAE,KAAK;MAChBE,OAAO,EAAE,CACL,IAAIzG,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACgJ,aAAa,CAAC,EACrD,IAAI7J,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACoJ,iBAAiB,CAAC,EACzD,IAAIjK,6DAAY,CAAC,MAAM,EAAEa,2EAAa,CAACoH,gBAAgB,CAAC,EACxD,IAAIjI,6DAAY,CACZ,MAAM,EACNa,2EAAa,CAACiJ,oCAAoC,EAClD,WAAW,CACd;KAER;IACD,KAAA7C,2BAA2B,GAAG,IAAI7G,2DAAU,CAAC,uBAAuB,EAAE,MAAM,EAAE,MAAK;MAC/EW,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;QAC1DA,MAAM,CAACC,eAAe,GAAG,IAAI,CAAC/F,UAAU,CAACgG,GAAG,CAACC,EAAE;QAC/C,IAAI,CAACtB,MAAM,CAACuB,QAAQ,CAAC,CAAClK,4DAAW,CAACiJ,aAAa,GAAG,QAAQ,CAAC,EAAE;UACzDkB,WAAW,EAAEL;SAChB,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC;IACF,KAAAlD,2BAA2B,GAAG,IAAI9G,2DAAU,CAAC,oBAAoB,EAAE,cAAc,EAAE,MAAK;MACpF,IAAI,CAACuI,cAAc,CAAC+B,UAAU,EAAE,CAACC,MAAM,CAACC,UAAU,CAACC,gBAAgB,EAAE;IACzE,CAAC,CAAC;IACF,KAAAxI,qBAAqB,GAAG,IAAIpC,+DAAc,EAAQ;IAClD,KAAA0F,oBAAoB,GAAG,IAAI1F,+DAAc,EAAuB;IAChE,KAAA6K,kBAAkB,GAAe,EAAE;IACnC,KAAAhF,iBAAiB,GAAe,EAAE;IAC1B,KAAAiF,WAAW,GAAG,IAAI,CAACrC,aAAa,CAACsC,cAAc,CAAC;MAAEC,KAAK,EAAE,IAAI,CAAC3B;IAAU,CAAE,CAAC;IA6KnF,KAAA4B,8BAA8B,GAAIC,QAAiC,IAAa;MAC5E,MAAMC,KAAK,GAAGD,QAAQ,CAACE,YAAY;MACnC,MAAMC,MAAM,GAAGH,QAAQ,CAACG,MAAM;MAC9B,IAAIA,MAAM,KAAK,MAAM,EAAE;QACnB,MAAMC,MAAM,GACRJ,QAAQ,CAACK,MAAM,KAAK,MAAM,IAC1BJ,KAAK,CAAC,CAAC,CAAC,CAACK,OAAO,CAACC,OAAO,CAAC7K,2EAAa,CAAC8K,qBAAqB,CAAC,KAAK,CAAC,CAAC,IACpE,IAAI,CAAC9C,UAAU,CAAC+C,aAAa,CAACR,KAAK,EAAEvK,2EAAa,CAACgL,YAAY,CAAC;QACpE,OAAO;UACHN,MAAM;UACNO,YAAY,EAAE,CAACP;SAClB;;MAEL,IACIH,KAAK,CAAC,CAAC,CAAC,CAACd,GAAG,CAACC,EAAE,KAAMe,MAAe,CAAChB,GAAG,CAACC,EAAE,IAC1Ce,MAAe,CAAChB,GAAG,CAACC,EAAE,KAAK,IAAI,CAACjG,UAAU,CAACgG,GAAG,CAACC,EAAE,IACjDa,KAAK,CAAC,CAAC,CAAC,CAAC9G,UAAU,IAAI6G,QAAQ,CAACK,MAAM,KAAK,MAAO,EACrD;QACE,OAAO;UACHD,MAAM,EAAE;SACX;;MAEL;MACA,IAAIH,KAAK,CAAC,CAAC,CAAC,CAAC9G,UAAU,EAAEyH,cAAc,CAAC,uBAAuB,CAAC,EAAE;QAC9D,IACKX,KAAK,CAAC,CAAC,CAAC,CAAC9G,UAAU,CAAC0H,IAAI,KAAKnL,2EAAa,CAACoL,wBAAwB,IAC/DX,MAAe,CAAChH,UAAU,CAAC0H,IAAI,KAAKnL,2EAAa,CAACoL,wBAAwB,IAC9Eb,KAAK,CAAC,CAAC,CAAC,CAAC9G,UAAU,CAAC0H,IAAI,KAAKnL,2EAAa,CAACoL,wBAAwB,IAC/DX,MAAe,CAAChH,UAAU,CAAC0H,IAAI,KAAKnL,2EAAa,CAACoL,wBAAyB,EAClF;UACE,OAAO;YACHV,MAAM,EAAE;WACX;;;MAGT,IACKJ,QAAQ,CAACK,MAAM,KAAK,MAAM,IACvB,CAAC,IAAI,CAAC3C,UAAU,CAAC+C,aAAa,CAC1BR,KAAK,EACLvK,2EAAa,CAACqL,iBAAiB,EAC/B/L,+DAAc,CAACgM,SAAS,CAC3B,IACJhB,QAAQ,CAACK,MAAM,KAAK,MAAM,IACvB,CAAC,IAAI,CAAC3C,UAAU,CAAC+C,aAAa,CAC1BR,KAAK,EACLvK,2EAAa,CAACgL,YAAY,EAC1B1L,+DAAc,CAACiM,KAAK,CACtB,EACR;QACE,OAAO;UACHb,MAAM,EAAE;SACX;;MAGL,OAAO;QACHA,MAAM,EAAE,IAAI,CAAC1C,UAAU,CAAC+C,aAAa,CACjC,CAACN,MAAM,CAAC,EACRzK,2EAAa,CAACgL,YAAY,EAC1B1L,+DAAc,CAACiM,KAAK;OAE3B;IACL,CAAC;IAED,KAAAC,mBAAmB,GAAIlB,QAAwB,IAAa;MACxD,OAAO,IAAI,CAACD,8BAA8B,CAACC,QAAQ,CAAC;IACxD,CAAC;IAED,KAAAlF,YAAY,GAAIqG,QAAuC,IAAa;MAChE;MACA,OAAO;QACHf,MAAM,EAAE;OACX;IACL,CAAC;IAED,KAAArF,SAAS,GAAG,CAACoF,MAAY,EAAEiB,MAAuC,KAAI;MAClE;IACJ,CAAC;IACD,KAAAC,gBAAgB,GAAG,CAAClB,MAAqB,EAAEiB,MAAwB,KAAI;MACnE,IAAIA,MAAM,CAACjJ,OAAO,CAAC,CAAC,CAAC,KAAKgI,MAAM,EAAE;QAC9B;;MAEJ,IAAI,CAACpC,KAAK,CAACuD,mBAAmB,EAAE;MAChC,IAAIF,MAAM,CAACjJ,OAAO,CAAC,CAAC,CAAC,CAACoJ,SAAS,KAAK,YAAY,EAAE;QAC9C,IAAIH,MAAM,CAACI,IAAI,KAAK,MAAM,EAAE;UACxB,IAAI,CAACzD,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,mBAAmB,CAAC;UAC3C,IAAI,CAAC1D,KAAK,CAAC2D,oBAAoB,EAAE;UACjC;;QAEJ,IAAI,CAAC/D,WAAW,CACXgE,QAAQ,CACJxB,MAAe,EAAEhB,GAAG,EAAEC,EAAE,IAAI1J,2EAAa,CAACkM,cAAc,EACzDR,MAAM,CAACjJ,OAAO,CAAC,CAAC,CAAC,CAACgH,GAAG,CAACC,EAAE,CAC3B,CACAJ,SAAS,CACN,MAAK;UACD,IAAI,CAACjB,KAAK,CAAC2D,oBAAoB,EAAE;UACjC,IAAI,CAACG,cAAc,EAAE;QACzB,CAAC,EACAJ,KAAK,IAAI;UACN,IAAI,CAACK,WAAW,CAACL,KAAK,CAAC;UACvB,IAAI,CAAC1D,KAAK,CAAC2D,oBAAoB,EAAE;QACrC,CAAC,CACJ;OACR,MAAM;QACH,IAAIN,MAAM,CAACI,IAAI,KAAK,MAAM,EAAE;UACxB5L,+DAAQ,CAACsJ,eAAe,CACpB,IAAI,CAACxB,UAAU,EACf,IAAI,CAACP,iBAAiB,EACtB,IAAI,CAACW,MAAM,EACX,IAAI,CAACZ,MAAM,EACXiD,MAAc,EACdiB,MAAM,CAACjJ,OAAO,EACd,KAAK,EACJ8H,KAAK,IAAI;YACN,IAAI,CAAClC,KAAK,CAAC2D,oBAAoB,EAAE;YACjC,IAAI,CAACG,cAAc,EAAE;UACzB,CAAC,CACJ;SACJ,MAAM,IAAIT,MAAM,CAACI,IAAI,KAAK,MAAM,EAAE;UAC/BnM,+CAAQ,CACJ+L,MAAM,CAACjJ,OAAO,CAAC4J,GAAG,CAAEC,MAAM,IACtB,IAAI,CAACrE,WAAW,CAACgE,QAAQ,CACpBxB,MAAe,EAAEhB,GAAG,EAAEC,EAAE,IAAI1J,2EAAa,CAACkM,cAAc,EACzDI,MAAM,CAAC7C,GAAG,CAACC,EAAE,CAChB,CACJ,CACJ,CAACJ,SAAS,CACP,MAAK;YACD,IAAI,CAACjB,KAAK,CAAC2D,oBAAoB,EAAE;YACjC,IAAI,CAACG,cAAc,EAAE;UACzB,CAAC,EACAJ,KAAK,IAAI;YACN,IAAI,CAACK,WAAW,CAACL,KAAK,CAAC;YACvB,IAAI,CAAC1D,KAAK,CAAC2D,oBAAoB,EAAE;UACrC,CAAC,CACJ;SACJ,MAAM;UACH,IAAI,CAAC3D,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,mBAAmB,CAAC;;;IAGvD,CAAC;IAhSG,IAAI,CAAChD,qBAAqB,CAAC,IAAI,CAACA,qBAAqB,CAAC/C,MAAM,GAAG,CAAC,CAAC,CAAC8F,IAAI,GAAG,WAAW;IACpF;IACA;IACA;IACA;IACA,IAAI,CAAC7B,kBAAkB,CAACsC,IAAI,CAAC,IAAIrN,yDAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;IACjE,IAAI,CAAC+K,kBAAkB,CAACsC,IAAI,CAAC,IAAIrN,yDAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;IAChE,IAAI,CAAC+K,kBAAkB,CAACsC,IAAI,CAAC,IAAIrN,yDAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;IAEjE,IAAI,CAAC4I,cAAc,CAAC0E,UAAU,EAAE,CAACC,OAAO,CAACnD,SAAS,CAAEoD,KAAsB,IAAI;MAC1E,IAAIA,KAAK,CAACA,KAAK,KAAKvM,0GAAmB,CAACwM,kBAAkB,EAAE;QACxD,IAAID,KAAK,CAACE,IAAI,CAACnJ,UAAU,CAACgG,GAAG,CAACC,EAAE,KAAK,IAAI,CAACjG,UAAU,CAACgG,GAAG,CAACC,EAAE,EAAE;UACzD,IAAI,CAACmD,cAAc,CAACC,eAAe,CAACJ,KAAK,CAACE,IAAI,CAACG,UAAU,CAAC;;;IAGtE,CAAC,CAAC;IACF,IAAI,CAACxF,qBAAqB,CACrByF,gBAAgB,EAAE,CAClBC,IAAI,CAACrN,0DAAS,CAAC,IAAI,CAAC6I,UAAU,CAAC,CAAC,CAChCa,SAAS,CAAE4D,KAAK,IAAI;MACjB,IAAI,CAACA,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC7G,2BAA2B,CAAC8G,SAAS,GAAGD,KAAK,CAACE,eAAe,CAACC,QAAQ,CACvErN,2EAAa,CAACsN,oCAAoC,CACrD;MACD,IAAI,CAACpE,6BAA6B,CAACiE,SAAS,GAAGD,KAAK,CAACE,eAAe,CAACC,QAAQ,CACzErN,2EAAa,CAACuN,0CAA0C,CAC3D;IACL,CAAC,CAAC;EACV;EAEAC,WAAWA,CAAA;IACP,IAAI,CAAC/E,UAAU,CAACgF,IAAI,EAAE;IACtB,IAAI,CAAChF,UAAU,CAACiF,QAAQ,EAAE;EAC9B;EAEMC,QAAQA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,wLAAA;MACV,MAAMC,OAAO,SAASjO,yEAAmB,CAACkO,eAAe,CACrD/N,2EAAa,CAACgO,eAAe,EAC7BJ,KAAI,CAAC7F,UAAU,EACf6F,KAAI,CAAClG,oBAAoB,CAC5B;MACD,MAAMuG,GAAG,SAASL,KAAI,CAAC7F,UAAU,CAC5BmG,cAAc,CAAC;QAAEC,WAAW,EAAEL,OAAO,CAAC,CAAC,CAAC,CAACpE;MAAE,CAAE,CAAC,CAC9C0E,SAAS,EAAE;MAChBR,KAAI,CAAC3I,iBAAiB,GAAGlF,mEAAS,CAACsO,UAAU,CACzCT,KAAI,CAACtF,WAAW,EAChB2F,GAAG,EACH,sBAAsB,CACzB;MAEDL,KAAI,CAAC1F,cAAc,CAACoG,eAAe,CAACV,KAAI,CAACW,mBAAmB,CAAC;MAC7DX,KAAI,CAACY,eAAe,EAAE;MACtBZ,KAAI,CAAC9E,oBAAoB,CAAC2E,IAAI,EAAE;IAAC;EACrC;EAEAgB,WAAWA,CAACC,OAAsB;IAC9B,IAAIA,OAAO,CAACjL,UAAU,CAACkL,YAAY,EAAE;MACjC,IAAI,CAACnN,qBAAqB,CAACoN,KAAK,EAAE;MAClC,IAAI,CAAC9J,oBAAoB,CAAC8J,KAAK,EAAE;MAEjC,IAAI,CAAC1F,6BAA6B,CAAC2F,IAAI,GACnC,UAAU,IAAI,IAAI,CAACzN,WAAW,GAAG,gBAAgB,GAAG,oBAAoB,CAAC;MAC7E,IAAI,IAAI,CAACA,WAAW,EAAE;QAClB;QAEA;QACA,IAAI,CAAC6E,eAAe,CAACR,MAAM,GAAGzF,2EAAa,CAACoH,gBAAgB;QAC5D,IAAI,CAACnB,eAAe,CAACP,SAAS,GAAG,MAAM;QACvC;QACA;QACA;QACA;QACA;QACA,IAAI,CAACyG,cAAc,EAAE;OACxB,MAAM;QACH;QACA,IAAI,CAAC3K,qBAAqB,CAACgF,SAAS,GAAG,IAAI;QAC3C,IAAI,CAAC1B,oBAAoB,CAAC0B,SAAS,GAAG,IAAI;QAC1C;QACA,MAAMsI,gBAAgB,GAClB,IAAI,CAACrL,UAAU,CAACsL,UAAU,CACtB/O,2EAAa,CAACgP,4CAA4C,CAC7D;QACL,IAAI,CAAC/I,eAAe,CAACR,MAAM,GACvBqJ,gBAAgB,GAAG,CAAC,CAAC,IAAI9O,2EAAa,CAACoH,gBAAgB;QAE3D,IAAI,CAACnB,eAAe,CAACP,SAAS,GAC1BoJ,gBAAgB,GAAG,CAAC,CAAC,KAAK9O,2EAAa,CAACiJ,oCAAoC,GACtE,KAAK,GACL6F,gBAAgB,GAAG,CAAC,CAAC,KAAK,MAAM,GAChC,KAAK,GACL,MAAM;QAEhB,MAAMG,OAAO,GAAG,IAAI,CAACxL,UAAU,CAACA,UAAU,CAACyL,SAAS;QACpD,MAAMC,YAAY,GAAG,IAAI,CAAC1L,UAAU,CAACA,UAAU,CAAC2L,cAAc;QAC9D;QACA,IAAI,CAAC5J,cAAc,CAACC,MAAM,GAAI,CAACwJ,OAAO,KACtCjP,2EAAa,CAACqP,4BAA4B,GACpCrP,2EAAa,CAACiJ,oCAAoC,GAClDgG,OAAO,KAAKjP,2EAAa,CAACoH,gBAAwB;QACxD,IAAI,CAAC5B,cAAc,CAACE,SAAS,GACzB,IAAI,CAACF,cAAc,CAACC,MAAM,KAAKzF,2EAAa,CAACqP,4BAA4B,GACnE,KAAK,GACLF,YAAY,GACZ,KAAK,GACL,MAAM;QAChB,IAAI,CAACrG,oBAAoB,CAAC2E,IAAI,EAAE;QAChC,IAAI,CAACjM,qBAAqB,CAACgF,SAAS,GAAG,KAAK;QAC5C,IAAI,CAAC8I,oBAAoB,EAAE;QAC3B,IAAI,CAACnD,cAAc,EAAE;QACrB,IACI,IAAI,CAAC1I,UAAU,CAAC8L,MAAM,CAAC1E,OAAO,CAAC7K,2EAAa,CAACwP,yBAAyB,CAAC,KAAK,CAAC,CAAC,EAChF;UACE,IAAI,CAACvH,WAAW,CACXwH,kBAAkB,CAAC,IAAI,CAAChM,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CAC1CJ,SAAS,CAAEoG,WAAW,IAAI;YACvB,IAAI,CAACA,WAAW,GACZA,WAAW,CAACA,WAAW,CAACC,gBAAgB,CAACD,WAAW,CAACE,MAAM,CACvDF,WAAW,CAACA,WAAW,CAACG,oBAAoB,CAC/C;UACT,CAAC,CAAC;;;;EAItB;EAEArM,mBAAmBA,CAACC,UAAgB;IAChC,OAAOxD,qEAAU,CAACuD,mBAAmB,CAACC,UAAU,CAAC;EACrD;EAEAlC,yBAAyBA,CAAA;IACrB,IAAI,IAAI,CAACH,WAAW,EAAE;MAClB,OAAO,CAAC,IAAI,CAAC8L,KAAK,EAAE4C,OAAO,CAAC,CAAC;;;IAEjC,OAAO7P,qEAAU,CAAC8P,mBAAmB,CAAC,IAAI,CAACtM,UAAU,EAAEzD,2EAAa,CAACgQ,gBAAgB,CAAC;EAC1F;EACA7G,kBAAkBA,CAAA;IACdjJ,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;MAC1D,IAAI,CAACnB,MAAM,CAACuB,QAAQ,CAChB,CACIlK,4DAAW,CAACiJ,aAAa,GAAG,wBAAwB,EACpD,KAAK,EACL,IAAI,CAACjF,UAAU,CAACgG,GAAG,CAACC,EAAE,CACzB,EACD;QAAEE,WAAW,EAAEL;MAAM,CAAE,CAC1B;IACL,CAAC,CAAC;EACN;EA8IQ6C,WAAWA,CAACL,KAAU;IAC1B,IAAIA,KAAK,CAACkE,MAAM,KAAKjQ,2EAAa,CAACkQ,uBAAuB,EAAE;MACxD,IAAI,CAAC7H,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,+BAA+B,CAAC;KAC1D,MAAM;MACH,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;;EAE/B;EAEM/H,cAAcA,CAAC0I,KAAyD;IAAA,IAAAyD,MAAA;IAAA,OAAAtC,wLAAA;MAC1EsC,MAAI,CAACC,WAAW,GAAG1D,KAAK,CAACjK,OAAO;MAChC,IAAIiK,KAAK,CAACjK,OAAO,CAAC0I,IAAI,KAAKnL,2EAAa,CAACqQ,4BAA4B,EAAE;QACnEF,MAAI,CAACG,iBAAiB,CAAC5D,KAAK,CAAC;OAChC,MAAM,IAAKA,KAAK,CAACjK,OAA+B,CAAC8N,UAAU,IAAI,IAAI,EAAE;QAClE,MAAMC,SAAS,SAASL,MAAI,CAACxI,OAAO,CAAC8I,iBAAiB,CAAC;UACnDC,KAAK,EAAE,8BAA8B;UACrCC,OAAO,EAAE,mCAAmC;UAC5CC,OAAO,EAAE,CACL,IAAIT,MAAI,CAACU,sBAAsB,CAAC,CAACnE,KAAK,CAACjK,OAAO,CAAC,CAAC,GAC1C,CAAC;YAAEqO,KAAK,EAAE,oBAAoB;YAAEC,MAAM,EAAE;cAAEC,KAAK,EAAE;YAAmB;UAAE,CAAE,CAAC,GACzE,EAAE,CAAC,EACT;YAAEF,KAAK,EAAE,0BAA0B;YAAEC,MAAM,EAAE;cAAEC,KAAK,EAAE;YAAS;UAAE,CAAE;SAE1E,CAAC;QACFR,SAAS,CAACS,WAAW,EAAE,CAAC3H,SAAS,CAAE4H,QAAQ,IAAI;UAC3C,IAAIA,QAAQ,KAAK,oBAAoB,EAAE;YACnCf,MAAI,CAACgB,oBAAoB,EAAE;WAC9B,MAAM,IAAID,QAAQ,KAAK,0BAA0B,EAAE;YAChDf,MAAI,CAACG,iBAAiB,CAAC5D,KAAK,CAAC;;QAErC,CAAC,CAAC;OACL,MAAM;QACHyD,MAAI,CAACG,iBAAiB,CAAC5D,KAAK,CAAC;;IAChC;EACL;EAEQ4D,iBAAiBA,CAAC5D,KAAyD;IAC/E,IAAI,IAAI,CAAC/D,eAAe,KAAK1J,gEAAe,CAAC2J,iBAAiB,EAAE;MAC5D,IAAI,CAACX,WAAW,CACXmJ,eAAe,CAAC1E,KAAK,CAACjK,OAAO,CAACgH,GAAG,CAACC,EAAE,CAAC,CACrCJ,SAAS,CAAEsD,IAAiB,IAAI;QAC7B,IAAI,CAACwD,WAAW,GAAGxD,IAAI,CAACyE,IAAI;QAC5B,IAAI,CAACjJ,MAAM,CAACuB,QAAQ,CAAC,CACjBlK,4DAAW,CAACiJ,aAAa,GAAG,QAAQ,EACpCgE,KAAK,CAACjK,OAAO,CAACgH,GAAG,CAACC,EAAE,CACvB,CAAC;MACN,CAAC,CAAC;KACT,MAAM;MACH,IAAI,CAACb,SAAS,CAACyI,IAAI,CAAC5E,KAAK,CAAC;;EAElC;EAEQmE,sBAAsBA,CAACtG,KAAa;IACxC,OACI,IAAI,CAACgH,2BAA2B,EAAE,IAClC,IAAI,CAACvJ,UAAU,CAAC+C,aAAa,CAACR,KAAK,EAAEvK,2EAAa,CAACwR,aAAa,CAAC;EAEzE;EACAD,2BAA2BA,CAAA;IACvB,IAAI,IAAI,CAACnQ,WAAW,EAAE;MAClB,OAAO,KAAK;;IAEhB,OAAOnB,qEAAU,CAAC8P,mBAAmB,CAAC,IAAI,CAACtM,UAAU,EAAEzD,2EAAa,CAACyR,iBAAiB,CAAC;EAC3F;EAEQN,oBAAoBA,CAACO,QAAA,GAAqB,IAAI;IAClD,IAAI,CAACrJ,KAAK,CAACuD,mBAAmB,EAAE;IAChC,IAAI,CAACnE,iBAAiB,CACjBkK,oBAAoB,CAAC,IAAI,CAACvB,WAAW,CAAC3G,GAAG,CAACC,EAAE,EAAE,IAAI,CAACjG,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CACrEJ,SAAS,CACN,MAAK;MACD,IAAI,EAAE,UAAU,IAAI,IAAI,CAAC7F,UAAU,CAAC,EAAE;QAClC,IAAI,CAAC4E,KAAK,CAACA,KAAK,CAAC,qCAAqC,CAAC;;MAE3D,IAAI,CAACA,KAAK,CAAC2D,oBAAoB,EAAE;MACjC,IAAI,CAACG,cAAc,EAAE;MACrB,IAAIuF,QAAQ,EAAE;QACVA,QAAQ,EAAE;;IAElB,CAAC,EACA3F,KAAU,IAAI;MACX,IAAI,CAAC1D,KAAK,CAAC2D,oBAAoB,EAAE;MACjC,IAAI,CAAC3D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;IAC3B,CAAC,CACJ;EACT;EAEQyC,eAAeA,CAAA;IAAA,IAAAoD,MAAA;IACnB,IAAI,CAAC9J,cAAc,CAAC+J,gBAAgB,CAAC;MACjCnB,KAAK,EAAE,mBAAmB;MAC1BoB,YAAY,EAAE,aAAa;MAC3BC,QAAQ,EAAGxH,KAAK,IAAK,IAAI,CAACyH,oBAAoB,CAACzH,KAAK;KACvD,CAAC;IACF,IAAI,CAACzC,cAAc,CAACmK,kBAAkB,CACjChF,IAAI,CAACrN,0DAAS,CAAC,IAAI,CAAC6I,UAAU,CAAC,CAAC,CAChCa,SAAS,CAAE+H,IAAI,IAAK,IAAI,CAACW,oBAAoB,CAAC,CAACX,IAAI,CAAC,CAAC,CAAC;IAC3D,IAAI,CAACvI,oBAAoB,CAACmE,IAAI,CAACrN,0DAAS,CAAC,IAAI,CAAC6I,UAAU,CAAC,CAAC,CAACa,SAAS,eAAAuE,wLAAA,CAAC,aAAW;MAC5E+D,MAAI,CAAC9J,cAAc,CAACoK,kBAAkB,CAAC;QACnCC,MAAM,EAAE;UACJC,OAAO,EAAER,MAAI,CAAC5P,aAAa,EAAE;UAC7BqQ,WAAW,EAAE,CAACT,MAAI,CAACxQ,WAAW,WAAWwQ,MAAI,CAACrQ,yBAAyB,EAAE,CAAC;UAC1E+Q,MAAM,EAAEV,MAAI,CAACnO,UAAU,IAAI;;OAElC,CAAC;IACN,CAAC,EAAC;EACN;EAEQ0I,cAAcA,CAAA;IAClB,IAAI,CAAC3K,qBAAqB,CAACoN,KAAK,EAAE;IAClC,IAAI,CAAC9J,oBAAoB,CAAC8J,KAAK,EAAE;IACjC,IAAI,CAAC/B,cAAc,EAAE0F,YAAY,EAAE,CAACC,KAAK,EAAE;IAC3C,IAAI,CAAChR,qBAAqB,CAACgF,SAAS,GAAG,IAAI;IAC3C,IAAI,CAAC1B,oBAAoB,CAAC0B,SAAS,GAAG,IAAI;IAE1C;IACA,MAAMiM,OAAO,GAAkB3S,4DAAM,CAAC4S,QAAQ,CAAC5L,0BAA0B,CAACE,eAAe,CAAC;IAC1F,IAAI,IAAI,CAACf,eAAe,EAAER,MAAM,EAAE;MAC9BgN,OAAO,CAACxL,MAAM,GAAG,CAAC,IAAI,CAAChB,eAAe,CAACR,MAAM,CAAC;MAE9CgN,OAAO,CAACpL,aAAa,GAAG,CAAC,IAAI,CAACpB,eAAe,CAACP,SAAS,KAAK,KAAK,CAAC;KACrE,MAAM;MACHiN,OAAO,CAACC,IAAI,CAAC,iDAAiD,CAAC;;IAEnE;IACA,IAAI,CAAC,IAAI,CAACxR,WAAW,EAAE;MACnBqR,OAAO,CAACI,KAAK,GAAG7S,2EAAa,CAAC8S,eAAe;KAChD,MAAM;MACH;MACAL,OAAO,CAACxL,MAAM,GAAG,CACbjH,2EAAa,CAACkH,iCAAiC,EAC/ClH,2EAAa,CAACmH,gCAAgC,EAC9C,GAAGsL,OAAO,CAACxL,MAAM,CACpB;MACDwL,OAAO,CAACpL,aAAa,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,GAAGoL,OAAO,CAACpL,aAAa,CAAC;;IAEnE,IAAI,CAACI,iBAAiB,CACjBsL,2BAA2B,CACxB,IAAI,CAACtP,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB,IAAI,CAAC9I,KAAK,EACV,EAAE,EACF6R,OAAO,EACP,IAAI,CAAChP,UAAU,CAACgG,GAAG,CAACuJ,IAAI,CAC3B,CACA1J,SAAS,CACL7F,UAAU,IAAI;MACX;MACA,IAAI,CAACjC,qBAAqB,CAACyR,OAAO,CAC9BxP,UAAU,CAACyP,WAAW,EACtBzP,UAAU,CAAC0P,UAAU,CACxB;MACD,IAAI,CAAC3R,qBAAqB,CAACgF,SAAS,GAAG,KAAK;MAC5C,IAAI,IAAI,CAACpF,WAAW,EAAE;QAClB,IAAI,CAACgS,uBAAuB,EAAE;QAC9B;;MAEJ,MAAMC,WAAW,GAAG,IAAI,CAACC,oBAAoB,EAAE;MAC/CD,WAAW,CAACR,KAAK,GAAG,IAAI;MACxB,IAAI,CAACpL,iBAAiB,CACjB8L,uBAAuB,CACpB,IAAI,CAAC9P,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB,CAAC1J,2EAAa,CAACwT,GAAG,CAAC,EACnBH,WAAW,EACX,IAAI,CAAC5P,UAAU,CAACgG,GAAG,CAACuJ,IAAI,CAC3B,CACA1J,SAAS,CAAEmK,IAAI,IAAI;QAChB,IAAI,CAAC3O,oBAAoB,CAACmO,OAAO,CAACQ,IAAI,CAAC1G,UAAU,EAAE0G,IAAI,CAACN,UAAU,CAAC;QACnE,IAAI,CAACrO,oBAAoB,CAAC0B,SAAS,GAAG,KAAK;QAC3C,IAAI,CAAC4M,uBAAuB,EAAE;MAClC,CAAC,CAAC;IACV,CAAC,EACArH,KAAU,IAAI;MACX,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;IAC3B,CAAC,CACJ;EACT;EAEAlG,QAAQA,CAAA;IACJ,OAAO,IAAI,CAAC0C,SAAS,CAAC1C,QAAQ,EAAE;EACpC;EACM1B,gBAAgBA,CAACuP,IAAoB;IAAA,IAAAC,MAAA;IAAA,OAAA9F,wLAAA;MACvC,MAAM+F,IAAI,GAAG9T,4DAAM,CAAC+T,0BAA0B,CAACF,MAAI,CAACnO,cAAc,EAAEkO,IAAI,CAAC;MACzEC,MAAI,CAACnO,cAAc,GAAGkO,IAAI;MAC1B;MACA,IAAIE,IAAI,CAACvG,QAAQ,CAAC,QAAQ,CAAC,EAAE;QACzBsG,MAAI,CAACnO,cAAc,CAACG,uBAAuB,GACvCgO,MAAI,CAACnO,cAAc,CAACC,MAAM,KAAKzF,2EAAa,CAACiJ,oCAAoC;;MAEzF0K,MAAI,CAACG,qBAAqB,EAAE;MAC5B,IAAIH,MAAI,CAACnO,cAAc,CAACG,uBAAuB,EAAE;QAC7C,MAAMgO,MAAI,CAACrP,kBAAkB,CAAC;UAC1BsK,KAAK,EAAE,IAAI;UACXmF,MAAM,EAAE/T,2EAAa,CAAC8S,eAAe;UACrCkB,MAAM,EAAE;SACX,CAAC;;MAEN,IAAIJ,IAAI,CAACvG,QAAQ,CAAC,yBAAyB,CAAC,IAAIqG,IAAI,CAAC/N,uBAAuB,EAAE;QAC1E;;MAGJ,IAAI;QACA,MAAMgO,MAAI,CAAC1L,WAAW,CACjBgM,gBAAgB,CACbN,MAAI,CAAClQ,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB1J,2EAAa,CAACkU,8BAA8B,EAC5C,CAACR,IAAI,CAACjO,MAAM,EAAE,CAACiO,IAAI,CAAChO,SAAS,KAAK,KAAK,IAAI,EAAE,CAAC,CACjD,CACA0I,SAAS,EAAE;QAChB,IAAIsF,IAAI,CAACjO,MAAM,KAAKzF,2EAAa,CAACiJ,oCAAoC,EAAE;UACpE0K,MAAI,CAACtL,KAAK,CAACA,KAAK,CAAC,mCAAmC,EAAE;YAClD8C,IAAI,EAAEwI,MAAI,CAACrL,WAAW,CAAC6L,OAAO,CAAC,OAAO,GAAGT,IAAI,CAACjO,MAAM;WACvD,CAAC;;OAET,CAAC,OAAO2O,CAAC,EAAE;QACRT,MAAI,CAACtL,KAAK,CAAC0D,KAAK,CAACqI,CAAC,CAAC;;MAEvBT,MAAI,CAACxH,cAAc,EAAE;IAAC;EAC1B;EAEQmH,oBAAoBA,CAAA;IACxB,OAAO;MACHrM,MAAM,EAAE,CAAC,IAAI,CAACzB,cAAc,CAACC,MAAM,CAAC;MACpC4B,aAAa,EAAE,CAAC,IAAI,CAAC7B,cAAc,CAACE,SAAS,KAAK,KAAK;KAC1D;EACL;EAEMpB,kBAAkBA,CAACoI,KAAiB;IAAA,IAAA2H,MAAA;IAAA,OAAAxG,wLAAA;MACtC,IAAI,QAAQwG,MAAI,CAACvP,oBAAoB,CAACwP,OAAO,EAAE,CAAC,IAAID,MAAI,CAACvP,oBAAoB,CAAC0B,SAAS,EAAE;QACrF;;MAEJ,MAAMiM,OAAO,GAAG4B,MAAI,CAACf,oBAAoB,EAAE;MAC3Cb,OAAO,CAACuB,MAAM,GAAGtH,KAAK,CAACsH,MAAM,IAAI,OAAOK,MAAI,CAACvP,oBAAoB,CAACiB,OAAO,EAAE,EAAEC,MAAM;MACnF,IAAI0G,KAAK,CAACqH,MAAM,IAAI,IAAI,EAAE;QACtBtB,OAAO,CAACI,KAAK,GAAGnG,KAAK,CAACqH,MAAM;;MAEhC,IAAIrH,KAAK,CAACkC,KAAK,EAAE;QACbyF,MAAI,CAACvP,oBAAoB,CAAC8J,KAAK,EAAE;;MAErCyF,MAAI,CAACvP,oBAAoB,CAAC0B,SAAS,GAAG,IAAI;MAC1C6N,MAAI,CAAC5M,iBAAiB,CACjB8L,uBAAuB,CACpBc,MAAI,CAAC5Q,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB,CAAC1J,2EAAa,CAACwT,GAAG,CAAC,EACnBf,OAAO,EACP4B,MAAI,CAAC5Q,UAAU,CAACgG,GAAG,CAACuJ,IAAI,CAC3B,CACA1J,SAAS,CAAEmK,IAAI,IAAI;QAChBY,MAAI,CAACvP,oBAAoB,CAACyP,UAAU,CAACd,IAAI,CAAC1G,UAAU,CAAC;QACrDsH,MAAI,CAACvP,oBAAoB,CAAC0B,SAAS,GAAG,KAAK;MAC/C,CAAC,CAAC;IAAC;EACX;EAEMgO,mBAAmBA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAA5G,wLAAA;MACrB,IAAI,QAAQ4G,MAAI,CAACjT,qBAAqB,CAAC8S,OAAO,EAAE,CAAC,IAAIG,MAAI,CAACjT,qBAAqB,CAACgF,SAAS,EAAE;QACvF;;MAEJ,MAAMiM,OAAO,GAAQ3S,4DAAM,CAAC4S,QAAQ,CAAC5L,0BAA0B,CAACE,eAAe,CAAC;MAChFyL,OAAO,CAACuB,MAAM,GAAG,OAAOS,MAAI,CAACjT,qBAAqB,CAACuE,OAAO,EAAE,EAAEC,MAAM;MACpEyO,MAAI,CAACjT,qBAAqB,CAACgF,SAAS,GAAG,IAAI;MAC3CiO,MAAI,CAAChN,iBAAiB,CACjBsL,2BAA2B,CACxB0B,MAAI,CAAChR,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB+K,MAAI,CAAC7T,KAAK,EACV,EAAE,EACF6R,OAAO,EACPgC,MAAI,CAAChR,UAAU,CAACgG,GAAG,CAACuJ,IAAI,CAC3B,CACA1J,SAAS,CAAEmK,IAAI,IAAI;QAChBgB,MAAI,CAACjT,qBAAqB,CAAC+S,UAAU,CAACd,IAAI,CAACP,WAAW,CAAC;QACvDuB,MAAI,CAACjT,qBAAqB,CAACgF,SAAS,GAAG,KAAK;MAChD,CAAC,CAAC;IAAC;EACX;EAEQ4M,uBAAuBA,CAAC1B,QAAqB;IACjD,IAAI,CAAC5J,cAAc,CAAC+B,UAAU,EAAE,EAAE6K,aAAa,EAAE;IAEjD;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIhD,QAAQ,EAAE;MACVA,QAAQ,EAAE;;IAEdiD,UAAU,CAAC,MAAK;MACZ,IAAI,CAACrF,oBAAoB,EAAE;MAC3B,IAAI,CAACzC,cAAc,EAAE+H,oBAAoB,CAAC;QACtCC,SAAS,EAAE,IAAI,CAACtG,mBAAmB;QACnC+D,MAAM,EAAE,IAAI,CAAC7O;OAChB,CAAC;MACF,IAAI,CAAC,IAAI,CAACyG,WAAW,CAAC4K,MAAM,EAAE;QAC1B,IAAI,CAAC5K,WAAW,CAAC6K,IAAI,EAAE;;IAE/B,CAAC,CAAC;EACN;EAEApS,eAAeA,CAACqS,OAAmD;IAC/D,IAAI,CAAC5E,WAAW,GAAG4E,OAAO;IAC1B,IAAI,CAAC7D,oBAAoB,EAAE;EAC/B;EAEM8D,iBAAiBA,CAACvB,IAAoB;IAAA,IAAAwB,MAAA;IAAA,OAAArH,wLAAA;MACxCqH,MAAI,CAACjP,eAAe,GAAGyN,IAAI;MAC3B,IAAI;QACA,MAAMwB,MAAI,CAACjN,WAAW,CACjBgM,gBAAgB,CACbiB,MAAI,CAACzR,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtB1J,2EAAa,CAACgP,4CAA4C,EAC1D,CAACkG,MAAI,CAACjP,eAAe,CAACR,MAAM,EAAE,CAACyP,MAAI,CAACjP,eAAe,CAACP,SAAS,KAAK,KAAK,IAAI,EAAE,CAAC,CACjF,CACA0I,SAAS,EAAE;OACnB,CAAC,OAAOgG,CAAC,EAAE;QACRc,MAAI,CAAC7M,KAAK,CAAC0D,KAAK,CAACqI,CAAC,CAAC;;MAEvBc,MAAI,CAAC/I,cAAc,EAAE;MACrB,IAAIuH,IAAI,CAACjO,MAAM,KAAKzF,2EAAa,CAACiJ,oCAAoC,EAAE;QACpEiM,MAAI,CAAC7M,KAAK,CAACA,KAAK,CAAC,mCAAmC,EAAE;UAClD8C,IAAI,EAAE+J,MAAI,CAAC5M,WAAW,CAAC6L,OAAO,CAAC,OAAO,GAAGT,IAAI,CAACjO,MAAM;SACvD,CAAC;;MAEN,IAAIyP,MAAI,CAACjP,eAAe,CAACR,MAAM,KAAKzF,2EAAa,CAACiJ,oCAAoC,EAAE;QACpF,KAAKiM,MAAI,CAACC,sBAAsB,EAAE;OACrC,MAAM;QACHD,MAAI,CAACtN,OAAO,CAACwN,KAAK,EAAE;;IACvB;EACL;EAEQ9F,oBAAoBA,CAAA;IACxB,IAAI,CAACpH,cAAc,CAAC+K,OAAO,CAAC;MACxBrS,KAAK,EAAEpB,sDAAK,CAAC6V,qBAAqB;MAClCC,aAAa,EAAE,CAAC,IAAI,CAAC7R,UAAU;KAClC,CAAC;IACF,IAAI,CAACyE,cAAc,CAACqN,cAAc,CAAC,IAAI,CAACC,UAAU,EAAE,EAAEX,SAAS,EAAE,IAAI,CAAChI,cAAc,CAAC;IACrF,IAAI,CAAC3E,cAAc,CAACuN,iBAAiB,EAAE;EAC3C;EAEMN,sBAAsBA,CAAA;IAAA,IAAAO,MAAA;IAAA,OAAA7H,wLAAA;MACxB,IAAI6H,MAAI,CAACzP,eAAe,CAACN,uBAAuB,EAAE;QAC9C,MAAMuL,QAAQ,SAASwE,MAAI,CAAC9N,OAAO,CAAC+N,IAAI,CAAC;UACrCjF,KAAK,EAAE,+BAA+B;UACtCC,OAAO,EAAE,oCAAoC;UAC7CC,OAAO,EAAE,CAAC;YAAEE,KAAK,EAAE,MAAM;YAAEC,MAAM,EAAE;cAAEC,KAAK,EAAE;YAAS;UAAE,CAAE;SAC5D,CAAC;QACF2B,OAAO,CAACiD,GAAG,CAAC,UAAU,EAAE1E,QAAQ,CAAC;QACjC,IAAIA,QAAQ,KAAK,MAAM,EAAE;UACrB,OAAOwE,MAAI,CAACG,sBAAsB,EAAE;SACvC,MAAM;UACHH,MAAI,CAACzP,eAAe,CAACN,uBAAuB,GAAG,KAAK;;OAE3D,MAAM;QACH+P,MAAI,CAAC9N,OAAO,CAACwN,KAAK,EAAE;;MAExBM,MAAI,CAACvJ,cAAc,EAAE;IAAC;EAC1B;EAEM2H,qBAAqBA,CAAA;IAAA,IAAAgC,MAAA;IAAA,OAAAjI,wLAAA;MACvB,IAAIiI,MAAI,CAACtQ,cAAc,CAACG,uBAAuB,EAAE;QAC7C,MAAMuL,QAAQ,SAAS4E,MAAI,CAAClO,OAAO,CAAC+N,IAAI,CAAC;UACrCjF,KAAK,EAAE,4BAA4B;UACnCC,OAAO,EAAE,iCAAiC;UAC1CC,OAAO,EAAE,CAAC;YAAEE,KAAK,EAAE,MAAM;YAAEC,MAAM,EAAE;cAAEC,KAAK,EAAE;YAAS;UAAE,CAAE;SAC5D,CAAC;QACF8E,MAAI,CAACtQ,cAAc,CAACG,uBAAuB,GAAG,KAAK;QACnD,IAAIuL,QAAQ,KAAK,MAAM,EAAE;UACrB,KAAK4E,MAAI,CAACC,qBAAqB,EAAE;UACjCD,MAAI,CAACjJ,cAAc,CAAC0F,YAAY,EAAE,CAACC,KAAK,EAAE;SAC7C,MAAM;UACHsD,MAAI,CAAC3J,cAAc,EAAE;;OAE5B,MAAM;QACH2J,MAAI,CAAClO,OAAO,CAACwN,KAAK,EAAE;;IACvB;EACL;EAEApD,oBAAoBA,CAACzH,KAAa,EAAEyL,cAAA,GAAqC,KAAK;IAC1E,IAAI,CAAC3N,KAAK,CAACuD,mBAAmB,EAAE;IAChC1L,+DAAQ,CAACsJ,eAAe,CACpB,IAAI,CAACxB,UAAU,EACf,IAAI,CAACP,iBAAiB,EACtB,IAAI,CAACW,MAAM,EACX,IAAI,CAACZ,MAAM,EACX,IAAI,CAAC/D,UAAU,EACf8G,KAAK,EACL,KAAK,EACL,MAAK;MACD,IAAI,CAAC4B,cAAc,EAAE;MACrB,IAAI,CAAC9D,KAAK,CAAC2D,oBAAoB,EAAE;IACrC,CAAC,EACDgK,cAAc,CACjB;EACL;EAEcD,qBAAqBA,CAAA;IAAA,IAAAE,OAAA;IAAA,OAAApI,wLAAA;MAC/BoI,OAAI,CAAC5N,KAAK,CAACuD,mBAAmB,EAAE;MAChCqK,OAAI,CAACxO,iBAAiB,CACjByO,QAAQ,CACLD,OAAI,CAACxS,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtBzJ,qEAAU,CAACkW,UAAU,OAAOF,OAAI,CAACnR,oBAAoB,CAACiB,OAAO,EAAE,CAAC,CACnE,CACAuD,SAAS,CACN,MAAK;QACD2M,OAAI,CAAC5N,KAAK,CAACA,KAAK,CAAC,qCAAqC,CAAC;QACvD4N,OAAI,CAAC5N,KAAK,CAAC2D,oBAAoB,EAAE;MACrC,CAAC,EACAD,KAAU,IAAI;QACXkK,OAAI,CAAC5N,KAAK,CAAC2D,oBAAoB,EAAE;QACjCiK,OAAI,CAAC5N,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;MAC3B,CAAC,CACJ;IAAC;EACV;EAEc8J,sBAAsBA,CAAA;IAAA,IAAAO,OAAA;IAAA,OAAAvI,wLAAA;MAChCuI,OAAI,CAAC/N,KAAK,CAACuD,mBAAmB,EAAE;MAChCwK,OAAI,CAAC3O,iBAAiB,CACjByO,QAAQ,CACLE,OAAI,CAAC3S,UAAU,CAACgG,GAAG,CAACC,EAAE,EACtBzJ,qEAAU,CAACkW,UAAU,OAAOC,OAAI,CAAC5U,qBAAqB,CAACuE,OAAO,EAAE,CAAC,CACpE,CACAuD,SAAS,CACN,MAAK;QACD8M,OAAI,CAACnQ,eAAe,CAACN,uBAAuB,GAAG,KAAK;QACpDyQ,OAAI,CAAC/N,KAAK,CAACA,KAAK,CAAC,qCAAqC,CAAC;QACvD+N,OAAI,CAAC/N,KAAK,CAAC2D,oBAAoB,EAAE;MACrC,CAAC,EACAD,KAAU,IAAI;QACXqK,OAAI,CAAC/N,KAAK,CAAC2D,oBAAoB,EAAE;QACjCoK,OAAI,CAAC/N,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;MAC3B,CAAC,CACJ;IAAC;EACV;EAEA7I,SAASA,CAACmO,IAAiC;IACvC,OAAOpR,qEAAU,CAAC8P,mBAAmB,CAACsB,IAAI,EAAE,QAAQ,CAAC;EACzD;EAEAhO,SAASA,CAACgO,IAAyB;IAC/B,OACIA,IAAI,CAACzG,OAAO,CAACyC,QAAQ,CAACrN,2EAAa,CAACqW,uBAAuB,CAAC,IAC5D,CAAChF,IAAI,CAACzG,OAAO,CAACyC,QAAQ,CAACrN,2EAAa,CAACsW,2BAA2B,CAAC,IACjE,CAACjF,IAAI,CAACd,UAAU;EAExB;EAAC,QAAAgG,EAAA;qBAj1BQzP,0BAA0B,EAAA1G,gEAAA,CAAAqW,uEAAA,GAAArW,gEAAA,CAAAuW,mEAAA,GAAAvW,gEAAA,CAAAyW,qGAAA,GAAAzW,gEAAA,CAAAqW,+DAAA,GAAArW,gEAAA,CAAA4W,8EAAA,GAAA5W,gEAAA,CAAA8W,qEAAA,GAAA9W,gEAAA,CAAAgX,8FAAA,GAAAhX,gEAAA,CAAAkX,8EAAA,GAAAlX,gEAAA,CAAAqW,4DAAA,GAAArW,gEAAA,CAAAqX,6EAAA,GAAArX,gEAAA,CAAAuX,0FAAA,GAAAvX,gEAAA,CAAAyX,yEAAA,GAAAzX,gEAAA,CAAA2X,4DAAA,GAAA3X,gEAAA,CAAA2X,oDAAA,GAAA3X,gEAAA,CAAA8X,mDAAA,GAAA9X,gEAAA,CAAAgY,kEAAA,GAAAhY,gEAAA,CAAAkY,6EAAA;EAAA;EAAA,QAAAE,EAAA;UAA1B1R,0BAA0B;IAAA2R,SAAA;IAAAC,cAAA,WAAAC,0CAAAC,EAAA,EAAAC,GAAA,EAAAC,QAAA;MAAA,IAAAF,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC/EvCxY,6DAAA,aAA4E;QAWpEA,yDAAA,uBAAA2Y,iFAAA3W,MAAA;UAAA,OAAayW,GAAA,CAAAhQ,SAAA,CAAAyI,IAAA,CAAAlP,MAAA,CAAsB;QAAA,EAAC,uBAAA4W,iFAAA;UAAA,OACvBH,GAAA,CAAArE,mBAAA,EAAqB;QAAA,EADE,wBAAAyE,kFAAA7W,MAAA;UAAA,OAoBtByW,GAAA,CAAA5D,iBAAA,CAAA7S,MAAA,CAAyB;QAAA,EApBH;QAsBpChC,yDAAA,IAAA8Y,iDAAA,gCAAA9Y,qEAAA,CAcc;QACdA,yDAAA,IAAA+Y,iDAAA,gCAAA/Y,qEAAA,CAOc;QAChBA,2DAAA,EAA0B;QAC1BA,yDAAA,IAAAgZ,yCAAA,iBAgBM;QACRhZ,2DAAA,EAAM;QAERA,yDAAA,IAAAiZ,kDAAA,0BA2Fe;QACjBjZ,2DAAA,EAAM;;;;QApKAA,wDAAA,GAAuD;QAAvDA,0DAAA,kBAAAyY,GAAA,CAAArX,qBAAA,CAAAC,OAAA,GAAuD,iBAAAoX,GAAA,CAAArV,mBAAA,CAAAqV,GAAA,CAAApV,UAAA;QAIrDrD,wDAAA,GAAoC;QAApCA,yDAAA,eAAAyY,GAAA,CAAArX,qBAAA,CAAoC,2BAAAqX,GAAA,CAAAlQ,eAAA,aAAAkQ,GAAA,CAAA5O,kBAAA,iBAAA4O,GAAA,CAAAxZ,sBAAA,CAAAia,SAAA,mBAAAT,GAAA,CAAA7W,aAAA,KAAA5B,8DAAA,KAAAoZ,GAAA,EAAAX,GAAA,CAAA3P,6BAAA,IAAA9I,8DAAA,KAAAmG,GAAA,eAAAnG,8DAAA,KAAA+E,GAAA,EAAA0T,GAAA,CAAAtX,yBAAA,IAAAsX,GAAA,CAAArN,mBAAA,EAAAqN,GAAA,CAAAlN,gBAAA,WAAAvL,8DAAA,KAAAmF,GAAA,EAAAsT,GAAA,CAAA5S,eAAA,CAAAR,MAAA,EAAAoT,GAAA,CAAA5S,eAAA,CAAAP,SAAA,EAAAmT,GAAA,CAAA5S,eAAA,CAAAN,uBAAA,EAAAkT,GAAA,CAAA5S,eAAA,CAAAL,OAAA,GAAAiT,GAAA,CAAAhT,QAAA,QAAA4T,OAAA,GAAAZ,GAAA,CAAArX,qBAAA,CAAAuE,OAAA,qBAAA0T,OAAA,CAAAzT,MAAA,SAAA6S,GAAA,CAAArV,mBAAA,CAAAqV,GAAA,CAAApV,UAAA,OAAAoV,GAAA,CAAArT,cAAA,kBAAAqT,GAAA,CAAArT,cAAA,CAAAG,uBAAA;QAkDnCvF,wDAAA,GAMT;QANSA,yDAAA,UAAAyY,GAAA,CAAAzX,WAAA,IAAAyX,GAAA,CAAArX,qBAAA,CAAAC,OAAA,OAAAoX,GAAA,CAAArX,qBAAA,CAAAgF,SAAA,IAAAqS,GAAA,CAAArV,mBAAA,CAAAqV,GAAA,CAAApV,UAAA,EAMT;QAYiBrD,wDAAA,GAAkB;QAAlBA,yDAAA,UAAAyY,GAAA,CAAAzX,WAAA,CAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEZ;AAE4C;AACM;AAGY;;;;;;;;;;;;;;;;ICFjFhB,4DAAA,cAGC;IAKKA,wDAAA,mBAAAwZ,+DAAA;MAAAxZ,2DAAA,CAAAyZ,IAAA;MAAA,MAAAC,OAAA,GAAA1Z,2DAAA;MAAA,OAASA,yDAAA,CAAA0Z,OAAA,CAAAC,IAAA,CAAAzI,IAAA,EAAW;IAAA,EAAC;IAErBlR,uDAAA,YAAuB;IACzBA,0DAAA,EAAM;;;;IAJJA,uDAAA,GAAiE;IAAjEA,yDAAA,WAAA6Z,MAAA,CAAA1Y,yBAAA,wBAAiE;;;;;;;;;;;;IAcrEnB,uDAAA,cAKE;;;;;;IAHAA,wDAAA,QAAAA,yDAAA,OAAAA,yDAAA,OAAA+Z,OAAA,CAAA1W,UAAA,EAAArD,6DAAA,IAAAga,GAAA,KAAAha,2DAAA,CAAwF;;;;;IAR5FA,4DAAA,cAAmE;IACjEA,uDAAA,cAIE;;;IACFA,wDAAA,IAAAka,+CAAA,kBAKE;IACJla,0DAAA,EAAM;;;;IARFA,uDAAA,GAAwF;IAAxFA,wDAAA,QAAAA,yDAAA,OAAAA,yDAAA,OAAAkB,MAAA,CAAAmC,UAAA,EAAArD,6DAAA,IAAAga,GAAA,KAAAha,2DAAA,CAAwF;IAGvFA,uDAAA,GAA8B;IAA9BA,wDAAA,SAAAkB,MAAA,CAAAmC,UAAA,kBAAAnC,MAAA,CAAAmC,UAAA,CAAA8W,OAAA,kBAAAjZ,MAAA,CAAAmC,UAAA,CAAA8W,OAAA,CAAAC,GAAA,CAA8B;;;;;;IAQnCpa,4DAAA,cAKC;IAHCA,wDAAA,mBAAAqa,+DAAA;MAAAra,2DAAA,CAAAsa,IAAA;MAAA,MAAAC,OAAA,GAAAva,2DAAA;MAAA,OAASA,yDAAA,CAAAua,OAAA,CAAAZ,IAAA,CAAAzI,IAAA,EAAW;IAAA,EAAC;IAGtBlR,0DAAA,EAAM;;;;;IAwBPA,4DAAA,cAGC;IACCA,oDAAA,GAEF;;IAAAA,0DAAA,EAAM;;;;IAFJA,uDAAA,GAEF;IAFEA,gEAAA,MAAAya,MAAA,CAAApX,UAAA,CAAAA,UAAA,CAAAqX,qBAAA,OAAA1a,yDAAA,gDAEF;;;;;IACAA,4DAAA,cAGC;IACCA,oDAAA,GAEF;;IAAAA,0DAAA,EAAM;;;;IAFJA,uDAAA,GAEF;IAFEA,gEAAA,MAAAyG,MAAA,CAAApD,UAAA,CAAAA,UAAA,CAAAsX,oBAAA,OAAA3a,yDAAA,4CAEF;;;;;IASEA,4DAAA,WAAsD;IAAAA,oDAAA,GAEpD;;IAAAA,0DAAA,EAAO;;;;IAF6CA,uDAAA,GAEpD;IAFoDA,+DAAA,CAAAA,yDAAA,OAAAe,MAAA,CAAAsC,UAAA,CAAAuX,KAAA,EAEpD;;;;;IACF5a,4DAAA,WAAqD;IAAAA,oDAAA,GAEnD;IAAAA,0DAAA,EAAO;;;;IAF4CA,uDAAA,GAEnD;IAFmDA,+DAAA,CAAAO,MAAA,CAAA8C,UAAA,CAAAA,UAAA,CAAAwX,cAAA,CAEnD;;;;;IAaF7a,uDAAA,4BAMiB;;;;IAFfA,wDAAA,SAAA8a,MAAA,CAAAzX,UAAA,CAAAsL,UAAA,CAA8B;;;;;IAW5B3O,qEAAA,GAAwE;IACtEA,uDAAA,yBAAmE;IACnEA,4DAAA,WAAM;IAAAA,oDAAA,GAGJ;;IAAAA,0DAAA,EAAO;IACXA,mEAAA,EAAe;;;;IALGA,uDAAA,GAAmB;IAAnBA,wDAAA,SAAA+a,cAAA,CAAmB;IAC7B/a,uDAAA,GAGJ;IAHIA,+DAAA,CAAAA,yDAAA,OAAA+a,cAAA,CAAAC,SAAA,CAAAC,aAAA,eAAAF,cAAA,CAAAG,KAAA,GAAAH,cAAA,CAAAI,IAAA,EAGJ;;;;;IANNnb,4DAAA,UAA4C;IAC1CA,wDAAA,IAAAob,wEAAA,2BAMe;IACjBpb,0DAAA,EAAM;;;;IAPWA,uDAAA,GAAuD;IAAvDA,wDAAA,SAAA+a,cAAA,CAAAC,SAAA,CAAAC,aAAA,gBAAuD;;;;;IAS1Ejb,qEAAA,GAA4B;IAC1BA,4DAAA,aAAoD;IAClDA,oDAAA,GACF;;IAAAA,0DAAA,EAAK;IACLA,4DAAA,cAAiD;IAC/CA,oDAAA,GACF;IAAAA,0DAAA,EAAM;IACRA,mEAAA,EAAe;;;;IALXA,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,uCACF;IAEEA,uDAAA,GACF;IADEA,gEAAA,MAAAgD,OAAA,CAAAqY,KAAA,CAAAC,KAAA,yBACF;;;;;IArBJtb,qEAAA,GAA6F;IAC3FA,4DAAA,aAAoD;IAClDA,oDAAA,GACF;;IAAAA,0DAAA,EAAK;IACLA,4DAAA,cAAuD;IACrDA,wDAAA,IAAAub,yDAAA,kBAQM;IACRvb,0DAAA,EAAM;IACNA,wDAAA,IAAAwb,kEAAA,2BAOe;IACjBxb,mEAAA,EAAe;;;;IArBXA,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,uCACF;IAE8BA,uDAAA,GAAc;IAAdA,wDAAA,YAAAwB,MAAA,CAAA8N,WAAA,CAAc;IAU7BtP,uDAAA,GAAW;IAAXA,wDAAA,SAAAwB,MAAA,CAAA6Z,KAAA,CAAW;;;ADjH1B,MAAOI,0BAA0B;EAQnCvU,YAAoBU,UAA6B,EAAUC,WAAwB;IAA/D,KAAAD,UAAU,GAAVA,UAAU;IAA6B,KAAAC,WAAW,GAAXA,WAAW;IAH5D,KAAA8R,IAAI,GAAG,IAAI/a,uDAAY,EAAQ;EAG6C;EAEhFyP,WAAWA,CAACC,OAAsB;IAAA,IAAAd,KAAA;IAAA,OAAAC,wLAAA;MACpC,IAAIa,OAAO,CAACjL,UAAU,EAAEkL,YAAY,EAAE;QAClC,IAAIf,KAAI,CAACnK,UAAU,CAAC8L,MAAM,CAAClC,QAAQ,CAACrN,2EAAa,CAACwP,yBAAyB,CAAC,EAAE;UAC1E5B,KAAI,CAAC6N,KAAK,SAAS7N,KAAI,CAAC3F,WAAW,CAAC6T,QAAQ,CAAClO,KAAI,CAACnK,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CAAC0E,SAAS,EAAE;;;IAEvF;EACL;EAEA2N,aAAaA,CAAA;IACT,OACIrC,2DAAW,CAACsC,iBAAiB,CAAC,IAAI,CAACvY,UAAU,EAAEA,UAAU,EAAEuN,KAAK,CAAC,KACjE2I,8DAAc,CAACsC,KAAK;EAE5B;EAEAC,iBAAiBA,CAAA;IACb,MAAM3B,OAAO,GAAG,IAAI,CAAC9W,UAAU,EAAE8W,OAAO;IACxC,OAAOA,OAAO,IAAI,CAACA,OAAO,CAAC4B,MAAM;EACrC;EAEA5a,yBAAyBA,CAAA;IACrB,OAAOtB,qEAAU,CAAC8P,mBAAmB,CAAC,IAAI,CAACtM,UAAU,EAAEzD,2EAAa,CAACgQ,gBAAgB,CAAC;EAC1F;EAEAoM,YAAYA,CAAA;IACR,OAAO,IAAI,CAACpU,UAAU,CAACqU,sBAAsB,CAAC,IAAI,CAAC5Y,UAAU,CAAC;EAClE;EAAC,QAAAsD,CAAA;qBApCQ8U,0BAA0B,EAAAzb,+DAAA,CAAAqW,4EAAA,GAAArW,+DAAA,CAAAuW,6DAAA;EAAA;EAAA,QAAAJ,EAAA;UAA1BsF,0BAA0B;IAAApD,SAAA;IAAA8D,SAAA,WAAAC,iCAAA5D,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;;;;;;QCtBvCxY,4DAAA,aAMC;;QACCA,4DAAA,aAIC;QACCA,wDAAA,IAAAqc,yCAAA,iBAaM;QAENrc,wDAAA,IAAAsc,yCAAA,iBAYM;QAGNtc,wDAAA,IAAAuc,yCAAA,iBAKO;QACTvc,0DAAA,EAAM;QACNA,4DAAA,aAGC;QAEGA,uDAAA,yBAOgB;QAClBA,0DAAA,EAAM;QACNA,4DAAA,aAIC;QACCA,oDAAA,IACF;QAAAA,0DAAA,EAAK;QAELA,wDAAA,KAAAwc,0CAAA,kBAMM;QACNxc,wDAAA,KAAAyc,0CAAA,kBAMM;QAENzc,4DAAA,eAA6C;QAC3CA,uDAAA,aAIK;;QACLA,oDAAA,gBACA;QAAAA,wDAAA,KAAA0c,2CAAA,mBAES;QACT1c,wDAAA,KAAA2c,2CAAA,mBAES;QACX3c,0DAAA,EAAM;QAENA,4DAAA,eAA6C;QAC3CA,uDAAA,aAIK;;QACLA,oDAAA,IACF;;QAAAA,0DAAA,EAAM;QACNA,uDAAA,eAA2D;QAC3DA,4DAAA,eAAkC;QAChCA,wDAAA,KAAA4c,oDAAA,4BAMiB;QACnB5c,0DAAA,EAAM;QAENA,wDAAA,KAAA6c,mDAAA,2BAuBe;QACjB7c,0DAAA,EAAM;;;QA3INA,yDAAA,qBAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,CAAAuN,KAAA,CAAwD;QADxD5Q,yDAAA,eAAAyY,GAAA,CAAAkD,aAAA,GAAoC;QAFpC3b,yDAAA,eAAAA,yDAAA,+BAAqD;QAOnDA,uDAAA,GAA6D;QAA7DA,yDAAA,oCAAAyY,GAAA,CAAAqD,iBAAA,GAA6D;QAI1D9b,uDAAA,GAA0B;QAA1BA,wDAAA,UAAAyY,GAAA,CAAAqD,iBAAA,GAA0B;QAcvB9b,uDAAA,GAAyB;QAAzBA,wDAAA,SAAAyY,GAAA,CAAAqD,iBAAA,GAAyB;QAgB5B9b,uDAAA,GAAiC;QAAjCA,wDAAA,SAAAyY,GAAA,CAAAtX,yBAAA,GAAiC;QAQpCnB,uDAAA,GAA4D;QAA5DA,yDAAA,uCAAAyY,GAAA,CAAAkD,aAAA,GAA4D;QAQxD3b,uDAAA,GAAgB;QAAhBA,wDAAA,QAAgB;QAHhBA,wDAAA,mCAAkC;QAYpCA,uDAAA,GACF;QADEA,gEAAA,MAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAiN,KAAA,MACF;QAGGtQ,uDAAA,GAAmD;QAAnDA,wDAAA,SAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,CAAAqX,qBAAA,CAAmD;QAOnD1a,uDAAA,GAAkD;QAAlDA,wDAAA,SAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,CAAAsX,oBAAA,CAAkD;QAWjD3a,uDAAA,GAAsD;QAAtDA,wDAAA,YAAAA,yDAAA,uCAAsD;QAGjDA,uDAAA,GAA6C;QAA7CA,wDAAA,WAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,CAAAwX,cAAA,EAA6C;QAG7C7a,uDAAA,GAA4C;QAA5CA,wDAAA,SAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAA,UAAA,CAAAwX,cAAA,CAA4C;QAOjD7a,uDAAA,GAA8B;QAA9BA,wDAAA,WAAAyY,GAAA,CAAAuD,YAAA,GAAAgB,IAAA,CAA8B,YAAAhd,yDAAA;QAIhCA,uDAAA,GACF;QADEA,gEAAA,YAAAA,yDAAA,+BAAAyY,GAAA,CAAAuD,YAAA,GAAAiB,SAAA,OACF;QAKKjd,uDAAA,GAA4B;QAA5BA,wDAAA,SAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAAsL,UAAA,CAA4B;QAOlB3O,uDAAA,GAA4E;QAA5EA,wDAAA,UAAAyY,GAAA,CAAApV,UAAA,kBAAAoV,GAAA,CAAApV,UAAA,CAAA8L,MAAA,kBAAAsJ,GAAA,CAAApV,UAAA,CAAA8L,MAAA,CAAA1E,OAAA,iCAAAgO,GAAA,CAAAnJ,WAAA,CAA4E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9FnE;AAEgC;AAwBlB;AAKmB;AACiB;AAGnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICvDzCtP,wDAAA,yBAA2D;;;;;;IAIvDA,6DAAA,cAKC;IAHCA,yDAAA,mBAAA2d,uEAAA;MAAA,MAAAC,WAAA,GAAA5d,4DAAA,CAAA6d,IAAA;MAAA,MAAAC,KAAA,GAAAF,WAAA,CAAAG,KAAA;MAAA,MAAAC,OAAA,GAAAJ,WAAA,CAAAK,SAAA;MAAA,MAAAzZ,OAAA,GAAAxE,4DAAA;MAAA,OAASA,0DAAA,CAAA8d,KAAA,GAAItZ,OAAA,CAAA0Z,mBAAA,EAAqB,GAAA1Z,OAAA,CAAA2Z,iBAAA,GAAAH,OAAA,GAAgC,IAAI;IAAA,EAAC;IAIvEhe,wDAAA,cAA0B;IAE1BA,6DAAA,cAAmB;IAAAA,qDAAA,GAA4C;;IAAAA,2DAAA,EAAM;IACrEA,wDAAA,cAA8B;IAChCA,2DAAA,EAAM;;;;;;IAPJA,0DAAA,YAAAge,OAAA,KAAAlD,MAAA,CAAAqD,iBAAA,CAA4C,aAAAL,KAAA,GAAAhD,MAAA,CAAAoD,mBAAA;IAIzCle,wDAAA,GAA2B;IAA3BA,yDAAA,WAAA8a,MAAA,CAAAsD,UAAA,CAAAJ,OAAA,EAA2B;IACXhe,wDAAA,GAA4C;IAA5CA,gEAAA,CAAAA,0DAAA,6BAAAge,OAAA,EAA4C;;;;;IATnEhe,6DAAA,cAAmE;IACjEA,yDAAA,IAAAqe,iDAAA,kBAUM;IACNre,6DAAA,cAAoB;IAClBA,wDAAA,cAA0B;IAC1BA,6DAAA,cAAmB;IAAAA,qDAAA,GAAyC;;IAAAA,2DAAA,EAAM;;;;IAZjDA,wDAAA,GAAmB;IAAnBA,yDAAA,YAAAse,MAAA,CAAAC,cAAA,CAAmB;IAYjBve,wDAAA,GAAyC;IAAzCA,gEAAA,CAAAA,0DAAA,gCAAyC;;;;;;IA4B5DA,6DAAA,iBAKC;IADCA,yDAAA,mBAAAwe,kFAAA;MAAAxe,4DAAA,CAAAye,IAAA;MAAA,MAAAzb,OAAA,GAAAhD,4DAAA;MAAA,OAASA,0DAAA,CAAAgD,OAAA,CAAA0b,iBAAA,CAAkB,QAAQ,CAAC;IAAA,EAAC;IAErC1e,6DAAA,cAAsB;IAAAA,wDAAA,YAA6C;IAAAA,2DAAA,EAAM;IACzEA,6DAAA,cAAqB;IACAA,qDAAA,GAA6C;;IAAAA,2DAAA,EAAM;IACtEA,6DAAA,cAAyB;IAAAA,qDAAA,GAAyD;;IAAAA,2DAAA,EAAM;IAE1FA,wDAAA,aAAkD;IACpDA,2DAAA,EAAS;;;IAJcA,wDAAA,GAA6C;IAA7CA,gEAAA,CAAAA,0DAAA,oCAA6C;IACvCA,wDAAA,GAAyD;IAAzDA,gEAAA,CAAAA,0DAAA,gDAAyD;;;;;;IAItFA,6DAAA,iBAKC;IADCA,yDAAA,mBAAA2e,kFAAA;MAAA3e,4DAAA,CAAA4e,IAAA;MAAA,MAAAC,OAAA,GAAA7e,4DAAA;MAAA,OAASA,0DAAA,CAAA6e,OAAA,CAAAH,iBAAA,CAAkB,SAAS,CAAC;IAAA,EAAC;IAEtC1e,6DAAA,cAAsB;IAAAA,wDAAA,YAA8C;IAAAA,2DAAA,EAAM;IAC1EA,6DAAA,cAAqB;IACAA,qDAAA,GAA6C;;IAAAA,2DAAA,EAAM;IACtEA,6DAAA,cAAyB;IAAAA,qDAAA,GAAyD;;IAAAA,2DAAA,EAAM;IAE1FA,wDAAA,aAAkD;IACpDA,2DAAA,EAAS;;;IAJcA,wDAAA,GAA6C;IAA7CA,gEAAA,CAAAA,0DAAA,oCAA6C;IACvCA,wDAAA,GAAyD;IAAzDA,gEAAA,CAAAA,0DAAA,gDAAyD;;;;;;IAKpFA,6DAAA,iBAKC;IADCA,yDAAA,mBAAA8e,wFAAA;MAAA9e,4DAAA,CAAA+e,IAAA;MAAA,MAAAzc,OAAA,GAAAtC,4DAAA;MAAA,OAASA,0DAAA,CAAAsC,OAAA,CAAAoc,iBAAA,CAAkB,WAAW,CAAC;IAAA,EAAC;IAExC1e,6DAAA,cAAsB;IAAAA,wDAAA,YAA4C;IAAAA,2DAAA,EAAM;IACxEA,6DAAA,cAAqB;IACAA,qDAAA,GAAgD;;IAAAA,2DAAA,EAAM;IACzEA,6DAAA,cAAyB;IACvBA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;IAERA,wDAAA,aAAkD;IACpDA,2DAAA,EAAS;;;IANcA,wDAAA,GAAgD;IAAhDA,gEAAA,CAAAA,0DAAA,uCAAgD;IAEjEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wDACF;;;;;IAZNA,6DAAA,cAAyD;IACvDA,yDAAA,IAAAgf,+DAAA,sBAcS;IAURhf,2DAAA,EAAM;;;;IArBJA,wDAAA,GAAqB;IAArBA,yDAAA,SAAAif,OAAA,CAAAC,eAAA,CAAqB;;;;;;IAsB1Blf,6DAAA,iBAKC;IADCA,yDAAA,mBAAAmf,kFAAA;MAAAnf,4DAAA,CAAAof,IAAA;MAAA,MAAAC,OAAA,GAAArf,4DAAA;MAAA,OAASA,0DAAA,CAAAqf,OAAA,CAAAX,iBAAA,CAAkB,cAAc,CAAC;IAAA,EAAC;IAE3C1e,6DAAA,cAAsB;IAAAA,wDAAA,YAAgD;IAAAA,2DAAA,EAAM;IAC5EA,6DAAA,cAAqB;IACAA,qDAAA,GAAmD;;IAAAA,2DAAA,EAAM;IAC5EA,6DAAA,cAAyB;IACvBA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;IAERA,wDAAA,aAAkD;IACpDA,2DAAA,EAAS;;;IANcA,wDAAA,GAAmD;IAAnDA,gEAAA,CAAAA,0DAAA,0CAAmD;IAEpEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,2DACF;;;;;;IAxFRA,6DAAA,kBAQC;IADCA,yDAAA,sBAAAsf,4EAAA;MAAAtf,4DAAA,CAAAuf,IAAA;MAAA,MAAAC,OAAA,GAAAxf,4DAAA;MAAA,OAAYA,0DAAA,CAAAwf,OAAA,CAAAC,mBAAA,EAAqB;IAAA,EAAC;;IAElCzf,6DAAA,cAA+C;IAI3CA,yDAAA,mBAAA0f,wEAAA;MAAA1f,4DAAA,CAAAuf,IAAA;MAAA,MAAAI,OAAA,GAAA3f,4DAAA;MAAA,OAASA,0DAAA,CAAA2f,OAAA,CAAAjB,iBAAA,CAAkB,IAAI,CAAC;IAAA,EAAC;IAGjC1e,6DAAA,cAAsB;IAAAA,wDAAA,YAA4C;IAAAA,2DAAA,EAAM;IACxEA,6DAAA,cAAqB;IACAA,qDAAA,GAA8C;;IAAAA,2DAAA,EAAM;IACvEA,6DAAA,eAAyB;IACvBA,qDAAA,IACF;;IAAAA,2DAAA,EAAM;IAERA,wDAAA,aAAkD;IACpDA,2DAAA,EAAS;IACTA,yDAAA,KAAA4f,yDAAA,sBAYS;IACT5f,yDAAA,KAAA6f,yDAAA,sBAYS;IACT7f,yDAAA,KAAA8f,sDAAA,kBAyBS;IACT9f,yDAAA,KAAA+f,yDAAA,sBAcS;IACX/f,2DAAA,EAAM;;;;IAtFNA,oEAAA,UAAAA,0DAAA,kCAAmD;IAY1BA,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;IAE/DA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wDACF;IAODA,wDAAA,GAAe;IAAfA,yDAAA,SAAA2B,MAAA,CAAAse,SAAA,CAAe;IAafjgB,wDAAA,GAA6B;IAA7BA,yDAAA,SAAA2B,MAAA,CAAAue,UAAA,IAAAve,MAAA,CAAAse,SAAA,CAA6B;IAUZjgB,wDAAA,GAAmC;IAAnCA,yDAAA,SAAA2B,MAAA,CAAAud,eAAA,IAAAvd,MAAA,CAAAue,UAAA,CAAmC;IA6BpDlgB,wDAAA,GAAuB;IAAvBA,yDAAA,SAAA2B,MAAA,CAAAwe,iBAAA,CAAuB;;;;;;IAgDxBngB,6DAAA,cAKC;IAHCA,yDAAA,yBAAAogB,iFAAA;MAAApgB,4DAAA,CAAAqgB,IAAA;MAAArgB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OAAeA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EAAC,mBAAAC,2EAAA;MAAAzgB,4DAAA,CAAAqgB,IAAA;MAAArgB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OACnBA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EADO;IAI5BxgB,wDAAA,cAAuC;IACvCA,6DAAA,cAGC;IACCA,wDAAA,YAAuB;IACzBA,2DAAA,EAAM;;;;IAHJA,wDAAA,GAA6D;IAA7DA,0DAAA,qBAAA8D,OAAA,CAAA4c,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,CAA6D;;;;;;;;;;;;;IAMjE5Q,6DAAA,cAKC;IAHCA,yDAAA,yBAAA2gB,kFAAA;MAAA3gB,4DAAA,CAAA4gB,IAAA;MAAA5gB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OAAeA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EAAC,mBAAAK,4EAAA;MAAA7gB,4DAAA,CAAA4gB,IAAA;MAAA5gB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OACnBA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EADO;IAI5BxgB,wDAAA,cAOE;;;IACFA,wDAAA,cAOE;;;IACJA,2DAAA,EAAM;;;;IAdFA,wDAAA,GAIC;IAJDA,yDAAA,QAAAA,0DAAA,OAAAA,0DAAA,OAAAiE,OAAA,CAAAyc,iBAAA,EAAA1gB,8DAAA,KAAAmF,GAAA,KAAAnF,4DAAA,CAIC;IAGDA,wDAAA,GAIC;IAJDA,yDAAA,QAAAA,0DAAA,OAAAA,0DAAA,OAAAiE,OAAA,CAAAyc,iBAAA,EAAA1gB,8DAAA,KAAAmF,GAAA,KAAAnF,4DAAA,CAIC;;;;;;IAKLA,6DAAA,cAKC;IAFCA,yDAAA,yBAAA8gB,kFAAA;MAAA9gB,4DAAA,CAAA+gB,IAAA;MAAA/gB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OAAeA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EAAC,mBAAAQ,4EAAA;MAAAhhB,4DAAA,CAAA+gB,IAAA;MAAA/gB,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OACnBA,0DAAA,CAAAsgB,IAAA,CAAAE,KAAA,EAAY;IAAA,EADO;IAG5BxgB,6DAAA,cAAkC;IAChCA,wDAAA,cAA+C;IAEjDA,2DAAA,EAAM;;;;IAFCA,wDAAA,GAAiB;IAAjBA,yDAAA,QAAAuG,OAAA,CAAA0a,SAAA,EAAAjhB,4DAAA,CAAiB;IACjBA,wDAAA,GAAiB;IAAjBA,yDAAA,QAAAuG,OAAA,CAAA0a,SAAA,EAAAjhB,4DAAA,CAAiB;;;;;;;;;;;IAwCtBA,6DAAA,iBAOC;IADCA,yDAAA,mBAAAkhB,iGAAA;MAAAlhB,4DAAA,CAAAmhB,IAAA;MAAA,MAAAC,OAAA,GAAAphB,4DAAA;MAAA,OAASA,0DAAA,CAAAohB,OAAA,CAAAC,sBAAA,EAAwB;IAAA,EAAC;;;IAElCrhB,wDAAA,YAAqB;IACvBA,2DAAA,EAAS;;;IANPA,0DAAA,eAAAA,0DAAA,eAAAA,8DAAA,IAAA+F,GAAA,EAAA/F,0DAAA,4CAEC;;;;;IARLA,sEAAA,GAAsC;IACpCA,wDAAA,YAAuB;IACvBA,6DAAA,WAAM;IAAAA,qDAAA,GAA0B;;IAAAA,2DAAA,EAAO;IACvCA,yDAAA,IAAAshB,wEAAA,qBASS;IACXthB,oEAAA,EAAe;;;;IAXPA,wDAAA,GAA0B;IAA1BA,gEAAA,CAAAA,0DAAA,OAAAuhB,OAAA,CAAApG,IAAA,EAA0B;IAE7Bnb,wDAAA,GAA2B;IAA3BA,yDAAA,SAAAuhB,OAAA,CAAAC,qBAAA,CAA2B;;;;;;IAUhCxhB,sEAAA,GAAqC;IACnCA,wDAAA,YAAuB;IACvBA,6DAAA,yBAGC;IAEGA,qDAAA,GACF;;IAAAA,2DAAA,EAAY;IACZA,6DAAA,oBAKE;IADAA,yDAAA,2BAAAyhB,+FAAAzf,MAAA;MAAAhC,4DAAA,CAAA0hB,IAAA;MAAA,MAAAC,OAAA,GAAA3hB,4DAAA;MAAA,OAAaA,0DAAA,CAAA2hB,OAAA,CAAAjB,iBAAA,CAAArd,UAAA,CAAAwX,cAAA,GAAA7Y,MAAA,CACzB;IAAA,EADqE;IAJ3DhC,2DAAA,EAKE;IAEJA,6DAAA,iBAKC;IADCA,yDAAA,mBAAA4hB,wFAAA;MAAA5hB,4DAAA,CAAA0hB,IAAA;MAAA,MAAAG,OAAA,GAAA7hB,4DAAA;MAAA,OAASA,0DAAA,CAAA6hB,OAAA,CAAAC,oBAAA,EAAsB;IAAA,EAAC;;IAEhC9hB,wDAAA,aAAsB;IACxBA,2DAAA,EAAS;IACXA,oEAAA,EAAe;;;;IApBXA,wDAAA,GAAgD;IAAhDA,0DAAA,2BAAA+hB,OAAA,CAAApG,aAAA,GAAgD;IAG9C3b,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,+CACF;IAIEA,wDAAA,GAAmC;IAAnCA,yDAAA,cAAA+hB,OAAA,CAAAP,qBAAA,CAAmC,YAAAO,OAAA,CAAArB,iBAAA,CAAArd,UAAA,CAAAwX,cAAA;IAMrC7a,wDAAA,GAAwC;IAAxCA,0DAAA,eAAAA,0DAAA,iBAAwC;;;;;;;;;;;;;;;;IA+B1CA,6DAAA,aASC;IADCA,yDAAA,mBAAAgiB,0EAAA;MAAA,MAAApE,WAAA,GAAA5d,4DAAA,CAAAiiB,IAAA;MAAA,MAAAC,SAAA,GAAAtE,WAAA,CAAAK,SAAA;MAAA,MAAAkE,OAAA,GAAAniB,4DAAA;MAAA,OAASA,0DAAA,CAAAmiB,OAAA,CAAAC,QAAA,CAAAF,SAAA,CAAe;IAAA,EAAC;IAEzBliB,6DAAA,eAAkC;IAChCA,qDAAA,GACF;;IAAAA,2DAAA,EAAO;;;;;;IALPA,0DAAA,qBAAAkiB,SAAA,CAAgC;IANhCliB,qEAAA,8CAAAsiB,SAAA,KAAmD;IAInDtiB,yDAAA,YAAAA,8DAAA,IAAAmG,GAAA,EAAAoc,OAAA,CAAA7B,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,KAAAsR,SAAA,EAA8E;IAC9EliB,0DAAA,kBAAAuiB,OAAA,CAAA7B,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,KAAAsR,SAAA,CAAmE;IAKjEliB,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,mCAAAA,8DAAA,KAAAoZ,GAAA,EAAAkJ,SAAA,YACF;;;;;;IAjMZtiB,6DAAA,kBAUC;IANCA,yDAAA,sBAAAwiB,4EAAA;MAAAxiB,4DAAA,CAAAyiB,IAAA;MAAA,MAAAC,OAAA,GAAA1iB,4DAAA;MAAA,OAAYA,0DAAA,CAAA0iB,OAAA,CAAAjD,mBAAA,EAAqB;IAAA,EAAC;;IAOlCzf,6DAAA,cAAgC;IAQxBA,yDAAA,oBAAA2iB,wEAAA3gB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAG,OAAA,GAAA5iB,4DAAA;MAAA,OAAUA,0DAAA,CAAA4iB,OAAA,CAAAC,gBAAA,CAAA7gB,MAAA,CAAwB;IAAA,EAAC;IALrChC,2DAAA,EAOE;IAEJA,6DAAA,cAAyB;IACvBA,wDAAA,uBAKgB;IAClBA,2DAAA,EAAM;IAINA,yDAAA,IAAA8iB,qDAAA,kBAaM;IAEN9iB,yDAAA,KAAA+iB,sDAAA,mBAsBM;IAEN/iB,yDAAA,KAAAgjB,sDAAA,kBAUM;IACRhjB,2DAAA,EAAM;IAENA,6DAAA,eAIC;IACCA,wDAAA,eAAqC;IACrCA,6DAAA,eAAiD;IAKlCA,qDAAA,IAAkD;;IAAAA,2DAAA,EAAY;IAGzEA,6DAAA,iBAOE;IAJAA,yDAAA,2BAAAijB,gFAAAjhB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAS,OAAA,GAAAljB,4DAAA;MAAA,OAAaA,0DAAA,CAAAkjB,OAAA,CAAAxC,iBAAA,CAAApQ,KAAA,GAAAtO,MAAA,CACvB;IAAA,EAD+C;IAHvChC,2DAAA,EAOE;IAEJA,6DAAA,sBAGC;IACYA,qDAAA,IAAwD;;IAAAA,2DAAA,EAAY;IAC/EA,6DAAA,oBAA0E;IAAvDA,yDAAA,2BAAAmjB,mFAAAnhB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAW,OAAA,GAAApjB,4DAAA;MAAA,OAAaA,0DAAA,CAAAojB,OAAA,CAAA1C,iBAAA,CAAArd,UAAA,CAAAggB,WAAA,GAAArhB,MAAA,CAAgD;IAAA,EAAP;IAAChC,2DAAA,EAAW;IAGzFA,6DAAA,eAAkC;IAChCA,yDAAA,KAAAsjB,+DAAA,0BAae;IACftjB,yDAAA,KAAAujB,+DAAA,4BAwBe;IACjBvjB,2DAAA,EAAM;IAENA,6DAAA,eAAkD;IAE9CA,qDAAA,IACF;;IAAAA,2DAAA,EAAM;IACNA,6DAAA,cAiBC;IAVCA,yDAAA,gCAAAwjB,kFAAAxhB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAgB,OAAA,GAAAzjB,4DAAA;MAAA,OAAsBA,0DAAA,CAAAyjB,OAAA,CAAAC,mBAAA,CAAA1hB,MAAA,CAA2B;IAAA,EAAC,6BAAA2hB,+EAAA3hB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAmB,OAAA,GAAA5jB,4DAAA;MAAA,OAC/BA,0DAAA,CAAA4jB,OAAA,CAAAF,mBAAA,CAAA1hB,MAAA,CAA2B;IAAA,EADI,+BAAA6hB,iFAAA7hB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAqB,OAAA,GAAA9jB,4DAAA;MAAA,OAE7BA,0DAAA,CAAA8jB,OAAA,CAAAJ,mBAAA,CAAA1hB,MAAA,CAA2B;IAAA,EAFE,+BAAA+hB,iFAAA/hB,MAAA;MAAAhC,4DAAA,CAAAyiB,IAAA;MAAA,MAAAuB,OAAA,GAAAhkB,4DAAA;MAAA,OAG7BA,0DAAA,CAAAgkB,OAAA,CAAAN,mBAAA,CAAA1hB,MAAA,CAA2B;IAAA,EAHE;IAWlDhC,yDAAA,KAAAikB,qDAAA,kBAaK;IACPjkB,2DAAA,EAAK;;;;IA9LXA,oEAAA,UAAAA,0DAAA,iCAAiD;IAHjDA,yDAAA,YAAAya,MAAA,CAAAjK,OAAA,CAAmB,mCAAAiK,MAAA,CAAAiG,iBAAA,CAAApQ,KAAA;IAuBXtQ,wDAAA,GAAwB;IAAxBA,yDAAA,YAAAya,MAAA,CAAAyJ,YAAA,CAAwB;IAUzBlkB,wDAAA,GAAqF;IAArFA,yDAAA,UAAAya,MAAA,CAAAwG,SAAA,MAAAxG,MAAA,CAAAiG,iBAAA,CAAAvG,OAAA,KAAAM,MAAA,CAAAiG,iBAAA,CAAAvG,OAAA,CAAA4B,MAAA,EAAqF;IAerF/b,wDAAA,GAAkF;IAAlFA,yDAAA,UAAAya,MAAA,CAAAwG,SAAA,IAAAxG,MAAA,CAAAiG,iBAAA,CAAAvG,OAAA,KAAAM,MAAA,CAAAiG,iBAAA,CAAAvG,OAAA,CAAA4B,MAAA,CAAkF;IAwBlF/b,wDAAA,GAAe;IAAfA,yDAAA,SAAAya,MAAA,CAAAwG,SAAA,CAAe;IAclBjhB,wDAAA,GAA6D;IAA7DA,0DAAA,qBAAAya,MAAA,CAAAiG,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,CAA6D;IAC7D5Q,0DAAA,eAAAya,MAAA,CAAAkB,aAAA,GAAoC;IAKhC3b,wDAAA,GAAgD;IAAhDA,0DAAA,2BAAAya,MAAA,CAAAkB,aAAA,GAAgD,wBAAAlB,MAAA,CAAAkB,aAAA;IAGrC3b,wDAAA,GAAkD;IAAlDA,gEAAA,CAAAA,0DAAA,2CAAkD;IAM3DA,wDAAA,GAAqC;IAArCA,yDAAA,YAAAya,MAAA,CAAAiG,iBAAA,CAAApQ,KAAA,CAAqC;IAOvCtQ,wDAAA,GAAgD;IAAhDA,0DAAA,2BAAAya,MAAA,CAAAkB,aAAA,GAAgD,wBAAAlB,MAAA,CAAAkB,aAAA;IAGrC3b,wDAAA,GAAwD;IAAxDA,gEAAA,CAAAA,0DAAA,iDAAwD;IAChDA,wDAAA,GAAsD;IAAtDA,yDAAA,YAAAya,MAAA,CAAAiG,iBAAA,CAAArd,UAAA,CAAAggB,WAAA,CAAsD;IAI5DrjB,wDAAA,GAAqB;IAArBA,yDAAA,UAAAya,MAAA,CAAAI,cAAA,CAAqB;IAcrB7a,wDAAA,GAAoB;IAApBA,yDAAA,SAAAya,MAAA,CAAAI,cAAA,CAAoB;IA6BjC7a,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wCACF;IAYEA,wDAAA,GAKC;IALDA,0DAAA,0BAAAya,MAAA,CAAA0J,MAAA,CAAA1Z,OAAA,CAAAgQ,MAAA,CAAAiG,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,mDAAA6J,MAAA,CAAA0J,MAAA,CAAA1Z,OAAA,CAAAgQ,MAAA,CAAAiG,iBAAA,CAAArd,UAAA,CAAAuN,KAAA,SAKC;IAImB5Q,wDAAA,GAAW;IAAXA,yDAAA,YAAAya,MAAA,CAAA0J,MAAA,CAAW;;;;;;IAiBzCnkB,6DAAA,kBAWC;IANCA,yDAAA,sBAAAokB,4EAAA;MAAApkB,4DAAA,CAAAqkB,IAAA;MAAA,MAAAC,OAAA,GAAAtkB,4DAAA;MAAA,OAAYA,0DAAA,CAAAskB,OAAA,CAAA7E,mBAAA,EAAqB;IAAA,EAAC;;IAOlCzf,6DAAA,cAA0B;IACxBA,wDAAA,oCAOyB;IAC3BA,2DAAA,EAAM;;;;IAnBNA,oEAAA,UAAAA,0DAAA,oCAAqD;IACrDA,yDAAA,aAAAyG,MAAA,CAAAia,iBAAA,CAAApQ,KAAA,CAAoC,kCAAA7J,MAAA,CAAA+J,OAAA;IAYhCxQ,wDAAA,GAA2D;IAA3DA,yDAAA,4BAAAyG,MAAA,CAAA8d,iBAAA,CAAAC,WAAA,GAA2D,UAAA/d,MAAA,CAAAge,MAAA,2DAAAhe,MAAA,CAAAkI,UAAA;;;;;IAsB3D3O,6DAAA,cAA8C;IACxCA,qDAAA,GAA+C;;IAAAA,2DAAA,EAAK;IACxDA,6DAAA,SAAI;IAAAA,qDAAA,GAAuE;;IAAAA,2DAAA,EAAK;;;IAD5EA,wDAAA,GAA+C;IAA/CA,gEAAA,CAAAA,0DAAA,sCAA+C;IAC/CA,wDAAA,GAAuE;IAAvEA,gEAAA,CAAAA,0DAAA,8DAAuE;;;;;IAiBzEA,6DAAA,cAAsB;IAAAA,qDAAA,GAAmD;;IAAAA,2DAAA,EAAM;;;IAAzDA,wDAAA,GAAmD;IAAnDA,gEAAA,CAAAA,0DAAA,0CAAmD;;;;;;;;;;;;;;;;;IAjCnFA,6DAAA,kBAWC;IANCA,yDAAA,sBAAA0kB,4EAAA;MAAA1kB,4DAAA,CAAA2kB,IAAA;MAAA,MAAAC,OAAA,GAAA5kB,4DAAA;MAAA,OAAYA,0DAAA,CAAA4kB,OAAA,CAAAnF,mBAAA,EAAqB;IAAA,EAAC;;IAOlCzf,6DAAA,cAA6B;IAEzBA,yDAAA,IAAA6kB,qDAAA,kBAGM;IACN7kB,6DAAA,sCAaC;IADCA,yDAAA,uBAAA8kB,6FAAA9iB,MAAA;MAAAhC,4DAAA,CAAA2kB,IAAA;MAAA,MAAAI,IAAA,GAAA/kB,0DAAA;MAAA,OAAaA,0DAAA,CAAA+kB,IAAA,CAAA5S,YAAA,EAA4B,CAAA6S,MAAA,CAAAhjB,MAAA,CAAAK,OAAA,CAAuB;IAAA,EAAC;IAEjErC,yDAAA,IAAAilB,6DAAA,iCAAAjlB,qEAAA,CAEc;IAChBA,2DAAA,EAA0B;IAE5BA,6DAAA,cAA8B;IACVA,yDAAA,2BAAAklB,2FAAAljB,MAAA;MAAAhC,4DAAA,CAAA2kB,IAAA;MAAA,MAAAQ,OAAA,GAAAnlB,4DAAA;MAAA,OAAAA,0DAAA,CAAAmlB,OAAA,CAAAC,eAAA,GAAApjB,MAAA;IAAA,EAA6B;IAC7ChC,6DAAA,2BAAqB;IACnBA,sEAAA,QAA2B;IACzBA,qDAAA,IACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,QAAiC;IAC/BA,qDAAA,IACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;;;;IA5C5BA,oEAAA,UAAAA,0DAAA,6CAA6D;IAC7DA,yDAAA,aAAAe,MAAA,CAAA2f,iBAAA,CAAApQ,KAAA,CAAoC,kCAAAvP,MAAA,CAAAyP,OAAA;IAWLxQ,wDAAA,GAAiB;IAAjBA,yDAAA,UAAAe,MAAA,CAAAmf,UAAA,CAAiB;IAM1ClgB,wDAAA,GAA8B;IAA9BA,yDAAA,eAAAe,MAAA,CAAAskB,eAAA,CAA8B,gBAAAtkB,MAAA,CAAA9B,sBAAA,CAAAwF,KAAA,aAAA1D,MAAA,CAAAukB,gBAAA,UAAAtlB,8DAAA,KAAAulB,GAAA,EAAAvlB,8DAAA,KAAAwlB,GAAA,8BAAAzkB,MAAA,CAAAlC,eAAA,CAAA8F,OAAA;IAkBd3E,wDAAA,GAA6B;IAA7BA,yDAAA,YAAAe,MAAA,CAAAqkB,eAAA,CAA6B;IAGzCplB,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,8CACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,mDACF;;;;;;IAMVA,6DAAA,kBAWC;IANCA,yDAAA,sBAAAylB,4EAAA;MAAAzlB,4DAAA,CAAA0lB,IAAA;MAAA,MAAAC,OAAA,GAAA3lB,4DAAA;MAAA,OAAYA,0DAAA,CAAA2lB,OAAA,CAAAlG,mBAAA,EAAqB;IAAA,EAAC;;IAOlCzf,6DAAA,cAA0B;IACLA,qDAAA,GAAwD;;IAAAA,2DAAA,EAAM;IACjFA,6DAAA,cAAyB;IAAAA,qDAAA,GAA4D;;IAAAA,2DAAA,EAAM;IAC3FA,6DAAA,cAA8C;IAClBA,yDAAA,mBAAA4lB,yEAAA;MAAA5lB,4DAAA,CAAA0lB,IAAA;MAAA,MAAAG,OAAA,GAAA7lB,4DAAA;MAAA,OAASA,0DAAA,CAAA6lB,OAAA,CAAAC,eAAA,EAAiB;IAAA,EAAC;IACnD9lB,wDAAA,aAA2B;IAAAA,qDAAA,IAC7B;;IAAAA,2DAAA,EAAS;IAEXA,6DAAA,eAAoB;IAClBA,qDAAA,IACF;;IAAAA,2DAAA,EAAM;;;;IApBRA,oEAAA,UAAAA,0DAAA,uCAAwD;IAExDA,yDAAA,sBAAqB,YAAAO,MAAA,CAAAiQ,OAAA,cAAAjQ,MAAA,CAAAmgB,iBAAA,CAAApQ,KAAA;IASAtQ,wDAAA,GAAwD;IAAxDA,gEAAA,CAAAA,0DAAA,gDAAwD;IAClDA,wDAAA,GAA4D;IAA5DA,gEAAA,CAAAA,0DAAA,oDAA4D;IAGtDA,wDAAA,GAC7B;IAD6BA,iEAAA,KAAAA,0DAAA,yDAC7B;IAGAA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,6CAAAO,MAAA,CAAAwlB,cAAA,SACF;;;;;IAxZN/lB,6DAAA,aAAgD;IAC9CA,yDAAA,IAAAgmB,2CAAA,iBAgBM;IACNhmB,yDAAA,IAAAimB,+CAAA,uBA6FU;IACVjmB,yDAAA,IAAAkmB,+CAAA,uBAuMU;IACVlmB,yDAAA,IAAAmmB,+CAAA,sBAsBU;IACVnmB,yDAAA,IAAAomB,+CAAA,uBAkDU;IACVpmB,yDAAA,IAAAqmB,+CAAA,uBAwBU;IACZrmB,2DAAA,EAAM;;;;IA1ZyBA,wDAAA,GAAoC;IAApCA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAolB,QAAA,CAAoC;IAkB9DtmB,wDAAA,GAAoC;IAApCA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAolB,QAAA,CAAoC;IA8FpCtmB,wDAAA,GAAwC;IAAxCA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAqlB,YAAA,CAAwC;IAwMxCvmB,wDAAA,GAAyC;IAAzCA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAslB,aAAA,CAAyC;IAuBzCxmB,wDAAA,GAAiD;IAAjDA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAulB,qBAAA,CAAiD;IAmDjDzmB,wDAAA,GAA4C;IAA5CA,yDAAA,SAAAkB,MAAA,CAAAid,iBAAA,KAAAjd,MAAA,CAAAwlB,gBAAA,CAA4C;;;ADnUnD;AAMM,MAAOC,sBAAsB;EA2E/BC,mBAAmBA,CAACta,KAAoB;IACpC,IAAIA,KAAK,CAACua,IAAI,IAAI,QAAQ,EAAE;MACxBva,KAAK,CAAC5J,cAAc,EAAE;MACtB4J,KAAK,CAAC9J,eAAe,EAAE;MACvB,IAAI,CAACskB,MAAM,EAAE;MACb;;EAER;EACAC,aAAaA,CAAC1jB,UAAwB;IAClC,OAAO,IAAIqa,6CAAU,CAAQsJ,QAAQ,IAAI;MACrC,MAAM1d,EAAE,GAAGjG,UAAU,CAACgG,GAAG,CAACC,EAAE;MAC5B,IAAI,CAACzB,WAAW,CAACwH,kBAAkB,CAAC/F,EAAE,CAAC,CAACJ,SAAS,CAAE+d,IAA6B,IAAI;QAChF,IAAI,CAACxC,MAAM,GAAGphB,UAAU,CAAC6jB,WAAW;QACpC,IAAI,CAACjH,SAAS,GACV,IAAI,CAACA,SAAS,IACdpgB,gEAAU,CAAC8P,mBAAmB,CAC1BtM,UAAU,EACVzD,mEAAa,CAACwP,yBAAyB,CAC1C;QACL,IAAI,CAACgW,eAAe,GAAG6B,IAAI,CAAC3X,WAAW,CAACC,gBAAgB,EAAED,WAAW,EAAE6X,IAAI,CACtEC,CAAa,IACVA,CAAC,CAACpM,SAAS,EAAEqM,aAAa,KAAKznB,mEAAa,CAAC0nB,kBAAkB,CACtE;QACD,IAAI,CAACC,MAAM,GAAGje,EAAE;QAChB,IAAI,CAACoX,iBAAiB,GAAGrd,UAAU;QACnC;QACA,IAAI,CAACqd,iBAAiB,CAAC8G,MAAM,GAAG,IAAI;QACpC,IAAI,CAAC3M,cAAc,GAAG,IAAI,CAAC6F,iBAAiB,CAACrd,UAAU,CAACwX,cAAc,IAAI,IAAI;QAC9E,IAAI,CAAC4M,mBAAmB,GAAGR,IAAI,CAAC3X,WAAW,CAACC,gBAAgB;QAC5D,IAAI,CAACZ,UAAU,GAAGtL,UAAU,CAACsL,UAAU;QACvC,IAAI,CAAC4V,iBAAiB,GAAG,IAAI,CAACmD,oBAAoB,CAAC,IAAI,CAAChH,iBAAiB,CAAC;QAC1E,IAAI,CAACiH,cAAc,GAAG,KAAK;QAC3B,IAAI,CAACxJ,iBAAiB,GAAG,IAAI,CAACoI,YAAY;QAC1C,IACI,IAAI,CAAC7F,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,KACvCZ,mEAAa,CAACgoB,6BAA6B,EAC7C;UACE,IAAI,CAAClH,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,GAAGZ,mEAAa,CAACioB,sBAAsB;;QAElFb,QAAQ,CAAC3Z,IAAI,EAAE;QACf2Z,QAAQ,CAAC1Z,QAAQ,EAAE;MACvB,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEAjB,OAAOA,CAACC,KAAa,EAAEE,IAAU;IAC7B,IAAIF,KAAK,KAAK+Q,wEAAkB,CAACyK,gBAAgB,EAAE;MAC/C,MAAM7G,SAAS,GAAGzU,IAAI,CAAC2N,OAAO,EAAE3N,IAAI;MACpC,IAAIyU,SAAS,EAAE;QACX,IAAI,CAACA,SAAS,GAAG,IAAI,CAAC8G,SAAS,CAACC,sBAAsB,CAAC/G,SAAS,CAAC;QACjE,IAAI,CAACgH,kBAAkB,EAAE;QACzBC,KAAK,CAACjH,SAAS,CAAC,CACXkH,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEE,IAAI,IAAI;UACX,IAAI,CAACC,SAAS,GAAGD,IAAY;QACjC,CAAC,CAAC;QACN,IAAI,CAAChf,GAAG,CAACkf,IAAI,EAAE;OAClB,MAAM;QACHhW,OAAO,CAACiW,IAAI,CAAChc,IAAI,CAAC;QAClB,IAAI,CAACvE,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,qCAAqC,CAAC;;MAEjE,IAAI,CAAC8c,WAAW,EAAEzT,KAAK,EAAE;;EAEjC;EAEA9N,YACYG,iBAAwC,EACxCQ,WAA4B,EAC5B6gB,SAA+B,EAC/B9gB,UAA6B,EAC7BO,SAAoB,EACpBwgB,UAA0B,EAC1BC,kBAA0C,EAC1C7gB,KAAqB,EACrBJ,UAA0B,EAC1BkhB,YAAgC,EAChC7gB,MAAc,EACd8gB,gBAAkC,EAClC7gB,KAAY,EACZb,MAAqB,EACrB2hB,gBAAyC,EACzCC,IAAY,EACZjB,SAAuB,EACvBkB,YAAkC,EAClCC,aAA4B,EAC5B7f,GAAmB,EACnB8f,YAAiC,EACjCC,kBAAoC,EACpC3hB,aAAmC,EACnC4hB,OAAuB,EACvB9hB,OAAuB;IAxBvB,KAAAF,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAQ,WAAW,GAAXA,WAAW;IACX,KAAA6gB,SAAS,GAATA,SAAS;IACT,KAAA9gB,UAAU,GAAVA,UAAU;IACV,KAAAO,SAAS,GAATA,SAAS;IACT,KAAAwgB,UAAU,GAAVA,UAAU;IACV,KAAAC,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAA7gB,KAAK,GAALA,KAAK;IACL,KAAAJ,UAAU,GAAVA,UAAU;IACV,KAAAkhB,YAAY,GAAZA,YAAY;IACZ,KAAA7gB,MAAM,GAANA,MAAM;IACN,KAAA8gB,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAA7gB,KAAK,GAALA,KAAK;IACL,KAAAb,MAAM,GAANA,MAAM;IACN,KAAA2hB,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAAC,IAAI,GAAJA,IAAI;IACJ,KAAAjB,SAAS,GAATA,SAAS;IACT,KAAAkB,YAAY,GAAZA,YAAY;IACZ,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAA7f,GAAG,GAAHA,GAAG;IACH,KAAA8f,YAAY,GAAZA,YAAY;IACZ,KAAAC,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAA3hB,aAAa,GAAbA,aAAa;IACb,KAAA4hB,OAAO,GAAPA,OAAO;IACP,KAAA9hB,OAAO,GAAPA,OAAO;IAlKV,KAAA1I,eAAe,GAAGA,gEAAe;IACjC,KAAAI,sBAAsB,GAAGA,uEAAsB;IAGjD,KAAAqqB,cAAc,GAAa,CAC9B,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACZ;IACM,KAAAljB,SAAS,GAAG,IAAI;IAGhB,KAAAuI,UAAU,GAAW,EAAE;IAEvB,KAAA4a,OAAO,GAAG,IAAI;IACrB,KAAAja,WAAW,GAAqB,IAAI;IAG7B,KAAA4P,eAAe,GAAG,KAAK;IACvB,KAAAsK,gBAAgB,GAAG,KAAK;IACxB,KAAArJ,iBAAiB,GAAG,KAAK;IAIzB,KAAAkF,eAAe,GAAG,IAAIrmB,+DAAc,EAAS;IAC7C,KAAAomB,eAAe,GAAG,IAAI;IACtB,KAAAE,gBAAgB,GAAe,CAClC,IAAIxmB,yDAAQ,CAAC,OAAO,EAAEc,mEAAa,CAAC6pB,qBAAqB,CAAC,CAC7D;IACD,KAAAxI,SAAS,GAAqB,IAAI;IAC1B,KAAAqH,SAAS,GAAS,IAAI;IACrB,KAAAhC,QAAQ,GAAG,KAAK;IAChB,KAAAC,YAAY,GAAG,SAAS;IACxB,KAAAC,aAAa,GAAG,UAAU;IAC1B,KAAAE,gBAAgB,GAAG,aAAa;IACjC,KAAAgD,aAAa,GAAG,UAAU;IACzB,KAAAjD,qBAAqB,GAAG,kBAAkB;IACnD,KAAArI,UAAU,GAAgC;MACtCuL,OAAO,EAAE,MAAM;MACfC,QAAQ,EAAE,cAAc;MACxBC,WAAW,EAAE,WAAW;MACxBC,QAAQ,EAAE,UAAU;MACpBC,gBAAgB,EAAE;KACrB;IACM,KAAA5L,iBAAiB,GAAS,IAAI,CAACmI,QAAQ;IAKtC,KAAA0D,SAAS,GAAG,IAAI1qB,0CAAO,EAAQ;IAC/B,KAAAwK,WAAW,GAAG,IAAI,CAACrC,aAAa,CAACsC,cAAc,CAAC;MAAEC,KAAK,EAAE,IAAI,CAACggB;IAAS,CAAE,CAAC;IAKlF,KAAAnP,cAAc,GAAG,KAAK;IACtB,KAAA2G,qBAAqB,GAAG,KAAK;IAI7B,KAAAyI,uBAAuB,GAAY,EAAE;IA+FjC,IAAI,CAACpB,YAAY,CAACqB,WAAW,CAAC,IAAI,EAAE,IAAI,CAACF,SAAS,CAAC;IACnD,IAAI,CAACb,YAAY,CAACgB,WAAW,EAAE,CAACjhB,SAAS,CAAC,MAAK;MAC3C,IAAI,CAACwf,SAAS,CAAC0B,UAAU,EAAE,CAAClhB,SAAS,CAAEsD,IAAI,IAAI;QAC3C,IAAI,CAAC7E,UAAU,CAAC0iB,OAAO,EAAE,CAACnhB,SAAS,CAAEwE,OAAO,IAAI;UAC5C,MAAM4c,IAAI,GAAG7qB,yEAAmB,CAAC8qB,cAAc,CAC3C3qB,mEAAa,CAACgO,eAAe,EAC7BF,OAAO,CAAC8c,YAAY,EACpB,IAAI,CAACtB,aAAa,CACrB;UACD,IAAI,CAACzE,MAAM,GAAG6F,IAAI,CAAC,CAAC,CAAC,EAAEhhB,EAAE;UAEzB,IAAI,CAAC6a,MAAM,GAAG,IAAI,CAAC8E,YAAY,CAAClV,OAAO,CACnC,oBAAoB,EACpB,IAAI,CAACuV,cAAc,CACtB;UACD,IAAI9c,IAAI,CAACie,UAAU,IAAI7qB,mEAAa,CAAC8qB,cAAc,EAAE;YACjD,IAAI,CAACziB,KAAK,CAAC0D,KAAK,CACZ;cAAE4E,OAAO,EAAE,iCAAiC;cAAE/D;YAAI,CAAE,EACpD,sBAAsB,CACzB;YACD1M,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;cAC1D,IAAI,CAACnB,MAAM,CAACuB,QAAQ,CAAC,CAAClK,4DAAW,CAACiJ,aAAa,GAAG,aAAa,CAAC,EAAE;gBAC9DkB,WAAW,EAAEL;eAChB,CAAC;YACN,CAAC,CAAC;YACF;;UAEJ,IAAI,CAAC8W,SAAS,GAAG,IAAI,CAACyI,SAAS,CAACiC,wBAAwB,CACpD/qB,mEAAa,CAACgrB,qBAAqB,CACtC;UACD,IAAI,CAAC1K,UAAU,GAAG,IAAI,CAACwI,SAAS,CAACiC,wBAAwB,CACrD/qB,mEAAa,CAACirB,oCAAoC,CACrD;UACD,IAAI,CAAC3L,eAAe,GAAG,IAAI,CAACwJ,SAAS,CAACiC,wBAAwB,CAC1D/qB,mEAAa,CAACkrB,mCAAmC,CACpD;UACD,IAAI,CAACtB,gBAAgB,GAAG,IAAI,CAACd,SAAS,CAACiC,wBAAwB,CAC3D/qB,mEAAa,CAACmrB,oCAAoC,CACrD;UACD,IAAI,CAACnC,kBAAkB,CAACoC,eAAe,EAAE,CAAC9hB,SAAS,CAAE+hB,YAAY,IAAI;YACjE,IAAI,CAAC9K,iBAAiB,GAClB8K,YAAY,CAACC,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,oBAAoB,CAAC,CAACxlB,MAAM,KAAK,CAAC,IAC/D,IAAI,CAAC8iB,SAAS,CAACiC,wBAAwB,CACnC/qB,mEAAa,CAACgrB,qBAAqB,CACtC;YACL,IAAI,IAAI,CAACzK,iBAAiB,EAAE,IAAI,CAACkL,WAAW,GAAGJ,YAAY,CAAC,CAAC,CAAC;UAClE,CAAC,CAAC;UACF,IAAI,CAACzJ,qBAAqB,GAAG,IAAI,CAACkH,SAAS,CAACiC,wBAAwB,CAChE/qB,mEAAa,CAAC0rB,sCAAsC,CACvD;UAED,IAAI,CAAC3C,UAAU,CACV4C,mBAAmB,EAAE,CACrBpD,IAAI,CAAEhN,IAAa,IAAM,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACqQ,MAAO,CAAC;UACvD,IAAI,CAACzjB,KAAK,CAACyB,WAAW,CAACN,SAAS,CAAEM,WAAW,IAAI;YAC7C,IAAI,CAAC+f,OAAO,GAAG/f,WAAW,CAAC+f,OAAO,KAAK,OAAO;YAC9C,IAAI,CAACxhB,KAAK,CAACoB,MAAM,CAACD,SAAS,CAAEC,MAAM,IAAI;cACnC;cACA,IAAIuC,IAAI,GAAGvC,MAAM,CAAC,MAAM,CAAC;cACzB,IAAIG,EAAE,GAAGH,MAAM,CAAC,IAAI,CAAC;cACrB,IAAIK,WAAW,CAACnG,UAAU,EAAE;gBACxB,IAAI,CAACooB,SAAS,CAACniB,EAAE,EAAE,IAAI,CAAC;gBACxB,IAAI,CAACyd,aAAa,CAAC2E,IAAI,CAACC,KAAK,CAACniB,WAAW,CAACnG,UAAU,CAAC,CAAC,CAAC6F,SAAS,CAC5D,MAAK;kBACD,IAAI,CAAC0iB,oBAAoB,EAAE;kBAC3B,IAAI,CAACxlB,SAAS,GAAG,KAAK;kBACtB,IAAI,CAAC,IAAI,CAAC0D,WAAW,CAAC4K,MAAM,EAAE;oBAC1B,IAAI,CAAC5K,WAAW,CAAC6K,IAAI,EAAE;;gBAE/B,CAAC,CACJ;eACJ,MAAM,IAAIjJ,IAAI,IAAI,MAAM,EAAE;gBACvB,IAAI,CAACrE,iBAAiB,CAACwkB,aAAa,CAACviB,EAAE,CAAC,CAACJ,SAAS,CAAEsD,IAAI,IAAI;kBACxD,IAAI,CAAC3E,WAAW,CACXmJ,eAAe,CAAC1H,EAAE,EAAE,CAAC1J,mEAAa,CAACwT,GAAG,CAAC,CAAC,CACxClK,SAAS,CAAE+H,IAAyB,IAAI;oBACrC,IAAI,CAAC8V,aAAa,CAAC9V,IAAI,CAACA,IAAI,CAAC,CAAC/H,SAAS,CAAC,MAAK;sBACzC,IAAI,CAAC0iB,oBAAoB,EAAE;sBAC3B,IAAI,CAAC3D,kBAAkB,EAAE;sBACzB,IAAI,CAAC7hB,SAAS,GAAG,KAAK;sBACtB,IAAI,CAAC,IAAI,CAAC0D,WAAW,CAAC4K,MAAM,EAAE;wBAC1B,IAAI,CAAC5K,WAAW,CAAC6K,IAAI,EAAE;;oBAE/B,CAAC,CAAC;kBACN,CAAC,CAAC;gBACV,CAAC,CAAC;eACL,MAAM;gBACH,IAAIrL,EAAE,IAAI1J,mEAAa,CAACksB,IAAI,EAAE;kBAC1B,IAAI,CAACL,SAAS,CAACniB,EAAE,EAAE,IAAI,CAAC;kBACxB;;gBAEJ,IAAI,CAACjC,iBAAiB,CAACwkB,aAAa,CAACviB,EAAE,CAAC,CAACJ,SAAS,CAC7CsD,IAA+B,IAAI;kBAChC,IAAI,CAACif,SAAS,CAACniB,EAAE,EAAEkD,IAAI,CAACnJ,UAAU,CAAC;gBACvC,CAAC,EACAsI,KAAU,IAAI;kBACX,IAAI,CAAC8f,SAAS,CAACniB,EAAE,EAAE,IAAI,CAAC;gBAC5B,CAAC,CACJ;;YAET,CAAC,CAAC;UACN,CAAC,CAAC;UACF,IACI,IAAI,CAACof,SAAS,CAACiC,wBAAwB,CACnC/qB,mEAAa,CAACmsB,sCAAsC,CACvD,IACD,IAAI,CAACrD,SAAS,CAACiC,wBAAwB,CACnC/qB,mEAAa,CAACosB,4CAA4C,CAC7D,EACH;YACE,IAAI,CAAC3G,eAAe,CAACjf,SAAS,GAAG,IAAI;YACrC,IAAI,CAACuiB,UAAU,CACVsD,YAAY,CAAC,GAAG,EAAE,IAAI,EAAErsB,mEAAa,CAACssB,oBAAoB,EAAE,EAAE,EAAE;cAC7DzZ,KAAK,EAAE7S,mEAAa,CAAC8S,eAAe;cACpC7L,MAAM,EAAE,CAACjH,mEAAa,CAACusB,6BAA6B,CAAC;cACrDllB,aAAa,EAAE,CAAC,IAAI;aACvB,CAAC,CACDiC,SAAS,CAAEsD,IAAe,IAAI;cAC3B,IAAI,CAAC6Y,eAAe,CAACxS,OAAO,CACxBrG,IAAI,CAAC4f,MAAiB,EACtB5f,IAAI,CAACuG,UAAU,CAClB;cACD,IAAI,CAACsS,eAAe,CAACjf,SAAS,GAAG,KAAK;YAC1C,CAAC,CAAC;;QAEd,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEAmH,QAAQA,CAAA;IACJ,IAAI,CAAC8b,OAAO,CAAC5X,gBAAgB,CAAC;MAC1BnB,KAAK,EAAE,mBAAmB;MAC1BoB,YAAY,EAAE,aAAa;MAC3B2a,eAAe,EAAE;KACpB,CAAC;EACN;EAEAjf,WAAWA,CAAA;IACP,IAAI,CAAC4c,SAAS,CAAC3c,IAAI,EAAE;IACrB,IAAI,CAAC2c,SAAS,CAAC1c,QAAQ,EAAE;EAC7B;EAEAyY,cAAcA,CAAA;IACV,IAAI,IAAI,CAACzW,WAAW,IAAI,IAAI,CAACmY,mBAAmB,EAAE;MAC9C,IAAI6E,KAAK,GAAG,IAAI,CAAChd,WAAW,IAAI,IAAI,CAACmY,mBAAmB;MACxD,IAAI1c,IAAI,GAAGnL,mEAAa,CAAC2sB,kBAAkB;MAC3C,IAAID,KAAK,IAAIA,KAAK,CAAChd,WAAW,EAAE;QAC5B,KAAK,IAAI2X,IAAI,IAAIqF,KAAK,CAAChd,WAAW,EAAE;UAChC,IAAI2X,IAAI,CAACjM,SAAS,CAACqM,aAAa,IAAI,IAAI,CAAClM,IAAI,CAACkM,aAAa,EAAE;YACzDtc,IAAI,GAAGnL,mEAAa,CAACioB,sBAAsB;;UAE/C,IAAIZ,IAAI,CAACjM,SAAS,CAACqM,aAAa,IAAIznB,mEAAa,CAAC0nB,kBAAkB,EAAE;YAClEvc,IAAI,GAAGnL,mEAAa,CAAC4sB,mBAAmB;YACxC;;;;MAIZ,OAAOzhB,IAAI;KACd,MAAM;MACH,OAAOnL,mEAAa,CAAC2sB,kBAAkB;;EAE/C;EACQE,cAAcA,CAAA;IAClB,IAAI,CAACplB,iBAAiB,CAACqlB,gBAAgB,CAAC,IAAI,CAAChM,iBAAiB,CAAC,CAACxX,SAAS,CACrE,MAAK;MACD,IAAI,CAACyjB,sBAAsB,CAAC,IAAI,CAACjM,iBAAiB,CAACrX,GAAG,CAACC,EAAE,CAAC;IAC9D,CAAC,EACAqC,KAAU,IAAI;MACX,IAAI,CAAC/D,UAAU,CAACglB,eAAe,CAAC,IAAI,CAAClM,iBAAiB,CAACpQ,KAAK,EAAE3E,KAAK,CAAC;MACpE;IACJ,CAAC,CACJ;EACL;;EACQkhB,cAAcA,CAACvd,WAA8B;IACjD,IAAIA,WAAW,EAAE;MACb,IAAI,CAACwd,eAAe,GAAGxd,WAAW;MAClC,IAAI,CAACA,WAAW,GAAGA,WAAW,CAACA,WAAW;MAC1C,IAAI,CAACA,WAAW,CAACyd,SAAS,GAAG,KAAK;MAClC,IAAI,IAAI,CAACzd,WAAW,CAACA,WAAW,IAAI,IAAI,CAACA,WAAW,CAACA,WAAW,CAAC1J,MAAM,EAAE;QACrE,IAAI,CAAC8a,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,GAAGZ,mEAAa,CAACioB,sBAAsB;QAC9E,KAAK,IAAImF,UAAU,IAAI,IAAI,CAAC1d,WAAW,CAACA,WAAW,EAAE;UACjD,IAAI,CAAC0d,UAAU,CAACliB,cAAc,CAAC,UAAU,CAAC,EAAE;YACxCkiB,UAAU,CAACC,QAAQ,GAAG,IAAI;;;;;EAK9C;EACMnH,eAAeA,CAAA;IAAA,IAAAtY,KAAA;IAAA,OAAAC,wLAAA;MACjB,IAAID,KAAI,CAAC8B,WAAW,IAAI,IAAI,IAAI,CAAC9B,KAAI,CAAC+Z,MAAM,EAAE;QAC1C/Z,KAAI,CAAC8B,WAAW,GAAG,IAAIgO,sEAAgB,EAAE;;MAE7C,IAAInT,KAAwB;MAC5B,IAAIqD,KAAI,CAAC+Z,MAAM,EAAE;QACbpd,KAAK,GAAG,CAACqD,KAAI,CAAC+Z,MAAM,CAAC;OACxB,MAAM;QACH,MAAM2F,gBAAgB,GAAG,IAAI/P,0DAAY,EAAE;QAC3C+P,gBAAgB,CAAC5c,KAAK,GAAG9C,KAAI,CAACkT,iBAAiB,CAACpQ,KAAK;QACrD4c,gBAAgB,CAACE,OAAO,GAAG5f,KAAI,CAACkb,SAAS,CAAC2E,mBAAmB,CAAC,gBAAgB,CAAC;QAC/EH,gBAAgB,CAAC7jB,GAAG,GAAG,EAAa;QACpC6jB,gBAAgB,CAAC1iB,OAAO,GAAG,CAAC5K,mEAAa,CAAC8K,qBAAqB,CAAC;QAChEwiB,gBAAgB,CAACve,UAAU,GAAG,EAAE;QAChCue,gBAAgB,CAACI,WAAW,GAAG,IAAI;QACnCnjB,KAAK,GAAG,CAAC+iB,gBAAgB,CAAC;;MAE9B,MAAM9c,SAAS,SAAS5C,KAAI,CAACjG,OAAO,CAACgmB,eAAe,CAAC;QACjDpjB,KAAK;QACLqjB,YAAY,EAAE,IAAI;QAClBC,SAAS,EAAE,KAAK;QAChBC,kBAAkB,EAAElgB,KAAI,CAAC8B;OAC5B,CAAC;MACFc,SAAS,CAACS,WAAW,EAAE,CAAC3H,SAAS,CAAEykB,MAAM,IAAKngB,KAAI,CAACqf,cAAc,CAACc,MAAM,CAAC,CAAC;IAAC;EAC/E;EACAC,eAAeA,CAAA;IACX,OAAO,IAAI,CAACrG,MAAM,IAAI,IAAI;EAC9B;EAEAsG,gBAAgBA,CAAA;IACZ,OAAO,CAAC,IAAI,CAACD,eAAe,EAAE;EAClC;EAEAnO,mBAAmBA,CAAA;IACf,IAAInW,EAAE,GAAG,IAAI,CAACwkB,QAAQ;IACtB,IAAIxkB,EAAE,IAAI,IAAI,EAAEA,EAAE,GAAG,IAAI,CAACie,MAAM;IAChC,IAAI,CAACoF,sBAAsB,CAACrjB,EAAE,CAAC;EACnC;EAEA8Y,QAAQA,CAACxR,KAAa;IAClB,IAAI,CAAC8P,iBAAiB,CAACrd,UAAU,CAACuN,KAAK,GAAGA,KAAK;EACnD;EAEA8S,mBAAmBA,CAACpX,KAAY;IAC5B,MAAMyhB,SAAS,GAAG,CAAC;IACnB,IAAIhQ,KAAK,GAAG,IAAI,CAACoG,MAAM,CAAC1Z,OAAO,CAAC,IAAI,CAACiW,iBAAiB,CAACrd,UAAU,CAACuN,KAAK,CAAC;IACxE,QAAStE,KAAuB,CAAC0hB,GAAG;MAChC,KAAK,SAAS;QACVjQ,KAAK,IAAIgQ,SAAS;QAClB;MACJ,KAAK,WAAW;QACZhQ,KAAK,IAAIgQ,SAAS;QAClB;MACJ,KAAK,WAAW;QACZhQ,KAAK,IAAI,CAAC;QACV;MACJ,KAAK,YAAY;QACbA,KAAK,IAAI,CAAC;QACV;;IAER,IAAIA,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAG,IAAI,CAACoG,MAAM,CAACve,MAAM,EAAE;MAC1C,IAAI,CAACwc,QAAQ,CAAC,IAAI,CAAC+B,MAAM,CAACpG,KAAK,CAAC,CAAC;MACjCzR,KAAK,CAAC5J,cAAc,EAAE;;EAE9B;EAEAmgB,gBAAgBA,CAACvW,KAAU;IACvB;IACA,IAAI2hB,KAAK,GAAG3hB,KAAK,CAACjC,MAAM,CAAC4jB,KAAK;IAC9B,IAAI,OAAOA,KAAK,IAAI,WAAW,EAAE;MAC7B;;IAEJ,IAAIA,KAAK,CAACroB,MAAM,IAAI,CAAC,EAAE;MACnB;;IAGJ;IACA,IAAIsoB,IAAI,GAASD,KAAK,CAAC,CAAC,CAAC;IAEzB;IACA,IAAIE,SAAS,GAAG,KAAK;IACrB,IAAID,IAAI,CAACnjB,IAAI,CAACqjB,UAAU,CAAC,OAAO,CAAC,EAAED,SAAS,GAAG,IAAI;IACnD;IACA;IACA,IAAI,CAACA,SAAS,EAAE;MACZ;;IAGJ;IACA,IAAI,CAAC7F,SAAS,GAAG4F,IAAI;IACrB,IAAI,CAACjN,SAAS,GAAG,IAAI,CAAC8G,SAAS,CAACC,sBAAsB,CAACqG,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CAAC;IACjF,IAAI,CAACjG,kBAAkB,EAAE;EAC7B;EACAjc,WAAWA,CAACL,KAAU;IAClB,IAAIA,KAAK,CAACkE,MAAM,IAAIjQ,mEAAa,CAACkQ,uBAAuB,EAAE;MACvD,IAAI,CAAC7H,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,kCAAkC,CAAC;MAC1D;;IAEJ,IAAI9L,gEAAU,CAAC0uB,oBAAoB,CAAC5iB,KAAK,EAAE,wBAAwB,CAAC,EAAE;MAClE,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,gCAAgC,CAAC;MACxD;;IAEJ,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;EAC3B;EACA6iB,IAAIA,CAAA;IACA;IACA,IAAI,CAAC,IAAI,CAAC9N,iBAAiB,CAACrd,UAAU,CAACggB,WAAW,EAC9C,IAAI,CAAC3C,iBAAiB,CAACrd,UAAU,CAACggB,WAAW,GAAG,EAAE;IACtD,IAAI,CAAC3C,iBAAiB,CAACpQ,KAAK,GAAG,IAAI,CAACoQ,iBAAiB,CAACpQ,KAAK,CAACme,IAAI,EAAE;IAClE,IAAI,CAAC/N,iBAAiB,CAACrd,UAAU,CAACggB,WAAW,GACzC,IAAI,CAAC3C,iBAAiB,CAACrd,UAAU,CAACggB,WAAW,CAACoL,IAAI,EAAE;IACxD,IACI,IAAI,CAAClK,iBAAiB,KAAK3kB,mEAAa,CAACoL,wBAAwB,IACjE,IAAI,CAACuZ,iBAAiB,KAAK3kB,mEAAa,CAAC8uB,2BAA2B,EACtE;MACE,IAAI,CAAChO,iBAAiB,CAACrd,UAAU,CAAC0H,IAAI,GAAG,IAAI,CAACwZ,iBAAiB;KAClE,MAAM;MACH,IAAI,CAAC7D,iBAAiB,CAACrd,UAAU,CAAC0H,IAAI,GAAGnL,mEAAa,CAAC+uB,sBAAsB;;IAEjF,IAAI,IAAI,CAACd,gBAAgB,EAAE,EAAE;MACzB;;;MAIA,IAAI,CAACznB,SAAS,GAAG,IAAI;MACrB,IAAI,CAACiB,iBAAiB,CAACqlB,gBAAgB,CAAC,IAAI,CAAChM,iBAAiB,CAAC,CAACxX,SAAS,CACrE,MAAK;QACD,IAAI,CAAC0lB,KAAK,CAAC,IAAI,CAAClO,iBAAiB,CAAC;MACtC,CAAC,EACA/U,KAAK,IAAI;QACN,IAAI,CAACvF,SAAS,GAAG,KAAK;QACtB,IAAI,CAAC4F,WAAW,CAACL,KAAK,CAAC;MAC3B,CAAC,CACJ;KACJ,MAAM;MACH;;;MAGA,IAAI,CAACvF,SAAS,GAAG,IAAI;MACrB,IAAI,CAACiB,iBAAiB,CACjBwnB,gBAAgB,CAAC,IAAI,CAACnO,iBAAiB,EAAE,IAAI,CAACoN,QAAQ,CAAC,CACvD5kB,SAAS,CACL7F,UAAqC,IAAI;QACtC,IAAI,CAACurB,KAAK,CAACvrB,UAAU,CAACA,UAAU,CAAC;MACrC,CAAC,EACAsI,KAAU,IAAI;QACX,IAAI,CAACvF,SAAS,GAAG,KAAK;QACtB,IAAI,CAAC4F,WAAW,CAACL,KAAK,CAAC;MAC3B,CAAC,CACJ;;EAEb;EACQmjB,SAASA,CAACzrB,UAAwB;IACtC,IAAI,IAAI,CAAC4d,SAAS,IAAI,IAAI,EAAE;MACxB,IAAI,CAAC5Z,iBAAiB,CACjB0nB,qBAAqB,CAAC1rB,UAAU,CAACgG,GAAG,CAACC,EAAE,EAAE,IAAI,CAACgf,SAAS,EAAE,WAAW,CAAC,CACrEpf,SAAS,CACN,MAAK;QACD,IAAI,CAACyjB,sBAAsB,CAACtpB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;MAClD,CAAC,EACAqC,KAAK,IAAI;QACN,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,qCAAqC,CAAC;QAC7D,IAAI,CAACghB,sBAAsB,CAACtpB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;MAClD,CAAC,CACJ;KACR,MAAM,IAAIjG,UAAU,CAAC8W,OAAO,IAAI,IAAI,EAAE;MACnC,IAAI,CAAC9S,iBAAiB,CAAC2nB,qBAAqB,CAAC3rB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CAACJ,SAAS,CAAC,MAAK;QAC3E,IAAI,CAACyjB,sBAAsB,CAACtpB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;MAClD,CAAC,CAAC;KACL,MAAM;MACH,IAAI,CAACqjB,sBAAsB,CAACtpB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;;EAEtD;EACAoV,iBAAiBA,CAAC3T,IAAY;IAC1B,IAAI,CAACwZ,iBAAiB,GAAGxZ,IAAI;IAC7B,IAAIA,IAAI,KAAKnL,mEAAa,CAAC2sB,kBAAkB,EAAE;MAC3C,IAAI,CAAC7L,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,GAAGZ,mEAAa,CAAC2sB,kBAAkB;;IAE9E,IAAIxhB,IAAI,KAAKnL,mEAAa,CAAC4sB,mBAAmB,EAAE;MAC5C,IAAI,CAAC9L,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,GAAGZ,mEAAa,CAAC4sB,mBAAmB;;IAE/E,IACIzhB,IAAI,KAAKnL,mEAAa,CAACioB,sBAAsB,IAC7C9c,IAAI,KAAKnL,mEAAa,CAACoL,wBAAwB,EACjD;MACE,IAAI,CAAC0V,iBAAiB,CAACrd,UAAU,CAAC7C,KAAK,GAAGZ,mEAAa,CAACioB,sBAAsB;;IAElF,IAAI9c,IAAI,KAAKnL,mEAAa,CAAC8uB,2BAA2B,EAAE;MACpD,IAAI,CAACrN,sBAAsB,EAAE;;IAEjC,IAAI,CAACuK,oBAAoB,EAAE;IAC3B,IAAI,CAACqD,YAAY,EAAE;EACvB;EACOC,iBAAiBA,CAAA;IACpB,IAAIC,KAAK,GAAW,EAAE;IACtBA,KAAK,CAAChjB,IAAI,CAAC,IAAI,CAACoa,YAAY,CAAC;IAC7B,IACI,IAAI,CAAChC,iBAAiB,IAAI3kB,mEAAa,CAACoL,wBAAwB,IAChE,IAAI,CAACuZ,iBAAiB,IAAI3kB,mEAAa,CAAC8uB,2BAA2B,EACrE;MACES,KAAK,CAAChjB,IAAI,CAAC,IAAI,CAACqa,aAAa,CAAC;;IAElC,IAAI,IAAI,CAACjC,iBAAiB,IAAI3kB,mEAAa,CAACioB,sBAAsB,IAAI,IAAI,CAAC5H,SAAS,EAAE;MAClFkP,KAAK,CAAChjB,IAAI,CAAC,IAAI,CAACua,gBAAgB,CAAC;;IAErC,IAAI,IAAI,CAACnC,iBAAiB,IAAI3kB,mEAAa,CAACoL,wBAAwB,EAAE;MAClE;IAAA;IAEJ,IAAI,IAAI,CAACuZ,iBAAiB,IAAI3kB,mEAAa,CAACoL,wBAAwB,IAAI,IAAI,CAACiV,SAAS,EAAE;MACpFkP,KAAK,CAAChjB,IAAI,CAAC,IAAI,CAACsa,qBAAqB,CAAC;;IAE1C,OAAO0I,KAAK;EAChB;EACOC,UAAUA,CAAA;IACb,IAAIC,GAAG,GAAG,IAAI,CAACnR,mBAAmB,EAAE;IACpC,OAAOmR,GAAG,IAAI,IAAI,CAAC9Q,cAAc,CAAC3Y,MAAM,GAAG,CAAC;EAChD;EACaqpB,YAAYA,CAAA;IAAA,IAAAlf,MAAA;IAAA,OAAAtC,wLAAA;MACrB,IAAIsC,MAAI,CAACoO,iBAAiB,IAAIpO,MAAI,CAACwW,YAAY,EAAE;QAC7C,IAAI,CAACxW,MAAI,CAAC2Q,iBAAiB,CAACpQ,KAAK,EAAE;UAC/BP,MAAI,CAAC9H,KAAK,CAAC0D,KAAK,CAAC,IAAI,EAAE,wBAAwB,CAAC;UAChD;;;MAGR,IAAIoE,MAAI,CAACoO,iBAAiB,IAAIpO,MAAI,CAACyW,aAAa,EAAE;QAC9C,MAAM8I,KAAK,SAASvf,MAAI,CAACwf,GAAG,CAACC,SAAS,EAAE;QACxC,IAAIF,KAAK,IAAI,IAAI,EAAE;UACf;;QAEJvf,MAAI,CAACpB,UAAU,GAAG2gB,KAAK;;MAE3B,IAAIvf,MAAI,CAACqf,UAAU,EAAE,EAAE;QACnBrf,MAAI,CAACye,IAAI,EAAE;OACd,MAAM;QACH,MAAMa,GAAG,GAAGtf,MAAI,CAACmO,mBAAmB,EAAE;QACtCnO,MAAI,CAACoO,iBAAiB,GAAGpO,MAAI,CAACwO,cAAc,CAAC8Q,GAAG,GAAG,CAAC,CAAC;QACrD;QACA9a,UAAU,CAAC,MAAK;UACZxE,MAAI,CAACwf,GAAG,EAAEE,OAAO,CAAC,IAAI,CAAC;QAC3B,CAAC,CAAC;QACF,IAAI1f,MAAI,CAACoO,iBAAiB,IAAIpO,MAAI,CAAC0W,qBAAqB,EAAE;UACtDlS,UAAU,CAAC,MAAK;YACZxE,MAAI,CAACka,uBAAuB,GAAGla,MAAI,CAAC2f,iBAAiB,CACjD3f,MAAI,CAAC0X,mBAAmB,CAACnY,WAAW,CACvC;YACDS,MAAI,CAAC4f,gBAAgB,CAACxd,YAAY,EAAE,CAACyd,MAAM,CAAC,GAAG7f,MAAI,CAACka,uBAAuB,CAAC;YAC5Ela,MAAI,CAAC4f,gBAAgB,CAChBxd,YAAY,EAAE,CACd0d,OAAO,CAAC3mB,SAAS,CACb4mB,MAAM,IAAM/f,MAAI,CAACka,uBAAuB,GAAG6F,MAAM,CAACxkB,MAAM,CAACykB,QAAS,CACtE;UACT,CAAC,CAAC;;;MAGVhgB,MAAI,CAACigB,aAAa,EAAE;IAAC;EACzB;EACAC,oBAAoBA,CAAA,GAAI;EACxB/R,mBAAmBA,CAAA;IACf,OAAO,IAAI,CAACK,cAAc,CAAC9T,OAAO,CAAC,IAAI,CAAC0T,iBAAiB,CAAC;EAC9D;EACM2I,MAAMA,CAAA;IAAA,IAAAtV,MAAA;IAAA,OAAA/D,wLAAA;MACR,IAAI+D,MAAI,CAAC2M,iBAAiB,IAAI3M,MAAI,CAACgV,aAAa,EAAE;QAC9C,MAAM8I,KAAK,SAAS9d,MAAI,CAAC+d,GAAG,CAACC,SAAS,EAAE;QACxC,IAAIF,KAAK,IAAI,IAAI,EAAE;UACf9d,MAAI,CAAC7C,UAAU,GAAG2gB,KAAK;;;MAG/B,IAAID,GAAG,GAAG7d,MAAI,CAAC0M,mBAAmB,EAAE;MACpC,IAAImR,GAAG,IAAI,CAAC,CAAC,EAAE;QACX7d,MAAI,CAACmb,sBAAsB,CAACnb,MAAI,CAACsc,QAAQ,CAAC;OAC7C,MAAM,IAAIuB,GAAG,IAAI,CAAC,EAAE;QACjB,IAAI7d,MAAI,CAAC+V,MAAM,EAAE;UACb/V,MAAI,CAACmb,sBAAsB,CAACnb,MAAI,CAAC+V,MAAM,CAAC;SAC3C,MAAM,IACH/V,MAAI,CAAC0e,gBAAgB,IACrB1e,MAAI,CAAC0e,gBAAgB,CAAC7sB,UAAU,CAAC0H,IAAI,KAAKnL,mEAAa,CAACoL,wBAAwB,EAClF;UACEwG,MAAI,CAACmb,sBAAsB,CAACnb,MAAI,CAACsc,QAAQ,CAAC;SAC7C,MAAM;UACHtc,MAAI,CAAC2M,iBAAiB,GAAG3M,MAAI,CAAC8U,QAAQ;;OAE7C,MAAM;QACH9U,MAAI,CAAC2M,iBAAiB,GAAG3M,MAAI,CAAC+M,cAAc,CAAC8Q,GAAG,GAAG,CAAC,CAAC;QACrD;QACA9a,UAAU,CAAC,MAAK;UACZ/C,MAAI,CAAC+d,GAAG,EAAEE,OAAO,CAAC,IAAI,CAAC;QAC3B,CAAC,CAAC;;MAENje,MAAI,CAACwe,aAAa,EAAE;IAAC;EACzB;EACArD,sBAAsBA,CAACrjB,EAAU;IAC7B,IAAI,CAAClD,SAAS,GAAG,KAAK;IACtBtG,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;MAC1D,IAAIG,EAAE,KAAK1J,mEAAa,CAACksB,IAAI,EAAE;QAC3B3iB,MAAM,CAACG,EAAE,GAAGA,EAAE;;MAElB,IAAI,CAACtB,MAAM,CAACuB,QAAQ,CAAC,CAAClK,4DAAW,CAACiJ,aAAa,GAAG,aAAa,CAAC,EAAE;QAC9DkB,WAAW,EAAEL;OAChB,CAAC;IACN,CAAC,CAAC;EACN;EACQylB,KAAKA,CAACvrB,UAAwB;IAClC,IACI,IAAI,CAACkhB,iBAAiB,KAAK3kB,mEAAa,CAACoL,wBAAwB,IACjE,IAAI,CAACuZ,iBAAiB,KAAK3kB,mEAAa,CAAC8uB,2BAA2B,EACtE;MACE,IAAI,CAAC7mB,WAAW,CACXsoB,cAAc,CAAC9sB,UAAU,CAACgG,GAAG,CAACC,EAAE,EAAE,CAC/B1J,mEAAa,CAACwwB,yBAAyB,EACvCxwB,mEAAa,CAACywB,wBAAwB,CACzC,CAAC,CACDnnB,SAAS,CAAC,MAAK;QACZ,IAAI,CAACrB,WAAW,CACXyoB,gBAAgB,CAACjtB,UAAU,CAACgG,GAAG,CAACC,EAAE,EAAE,IAAI,CAACqF,UAAU,CAAC,CACpDzF,SAAS,CAAC,MAAK;UACZ,IAAI,CAACqnB,KAAK,CAACltB,UAAU,CAAC;QAC1B,CAAC,CAAC;MACV,CAAC,CAAC;KACT,MAAM;MACH,IAAI,CAACktB,KAAK,CAACltB,UAAU,CAAC;;EAE9B;EACOsY,aAAaA,CAAA;IAChB,OACIrC,4DAAW,CAACsC,iBAAiB,CAAC,IAAI,CAAC8E,iBAAiB,CAACrd,UAAU,CAACuN,KAAK,CAAC,KACtE2I,+DAAc,CAACsC,KAAK;EAE5B;EACQ0U,KAAKA,CAACltB,UAAwB;IAClC,IAAI,IAAI,CAACkhB,iBAAiB,IAAI3kB,mEAAa,CAACssB,oBAAoB,EAAE;MAC9D;MACA,IAAI,CAAC,IAAI,CAACjM,SAAS,EAAE;QACjB,IAAI,CAACuQ,KAAK,CAACntB,UAAU,CAAC;QACtB;;MAEJ,IAAI,CAACiM,WAAW,GAAG,IAAI,CAACmhB,4BAA4B,EAAE;;IAE1D,IACI,CAAC,IAAI,CAAClM,iBAAiB,IAAI3kB,mEAAa,CAACioB,sBAAsB,IAC3D,IAAI,CAACtD,iBAAiB,IAAI3kB,mEAAa,CAACssB,oBAAoB,KAChE,IAAI,CAAC5c,WAAW,IAChB,IAAI,CAACA,WAAW,CAACA,WAAW,EAC9B;MACE,IAAI,IAAI,CAACmY,mBAAmB,IAAI,IAAI,CAACA,mBAAmB,CAACsF,SAAS,EAAE;MAEpE,IAAIzd,WAAW,GAAGzP,gEAAU,CAAC6wB,uBAAuB,CAChD,IAAI,CAACphB,WAAW,CAACA,WAAW,EAC5B,IAAI,CAACmY,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,CAACsF,SAAS,GAAG,KAAK,CACxE;MACD,IAAI,CAACllB,WAAW,CACX8oB,kBAAkB,CACfttB,UAAU,CAACgG,GAAG,CAACC,EAAE,EACjBgG,WAAW,EACX,IAAI,CAACwd,eAAe,GAAG,IAAI,CAACA,eAAe,CAAC8D,MAAM,GAAG,KAAK,EAC1D,IAAI,CAAC9D,eAAe,GAAG,IAAI,CAACA,eAAe,CAAC+D,aAAa,GAAG,IAAI,CACnE,CACA3nB,SAAS,CACN,MAAK;QACD,IAAI,CAACsnB,KAAK,CAACntB,UAAU,CAAC;MAC1B,CAAC,EACAsI,KAAK,IAAI;QACN,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;QACvB,IAAI,CAACvF,SAAS,GAAG,KAAK;MAC1B,CAAC,CACJ;KACR,MAAM;MACH,IAAI,CAACoqB,KAAK,CAACntB,UAAU,CAAC;;EAE9B;EAEQqkB,oBAAoBA,CAACrkB,UAAwB;IACjD,IACIA,UAAU,CAACA,UAAU,CAAC0H,IAAI,KAAKnL,mEAAa,CAACoL,wBAAwB,IACrE3H,UAAU,CAACA,UAAU,CAAC0H,IAAI,KAAKnL,mEAAa,CAAC8uB,2BAA2B,EAC1E;MACE,OAAOrrB,UAAU,CAACA,UAAU,CAAC0H,IAAI;;IAErC,IAAI1H,UAAU,CAACA,UAAU,CAAC7C,KAAK,KAAKZ,mEAAa,CAAC2sB,kBAAkB,IAAI,CAAC,IAAI,CAACtM,SAAS,EAAE;MACrF,OAAOrgB,mEAAa,CAAC2sB,kBAAkB;;IAE3C,IACIlpB,UAAU,CAACA,UAAU,CAAC7C,KAAK,KAAKZ,mEAAa,CAAC2sB,kBAAkB,IAChElpB,UAAU,CAACA,UAAU,CAAC7C,KAAK,KAAKZ,mEAAa,CAACkxB,oBAAoB,IAClEztB,UAAU,CAACA,UAAU,CAAC7C,KAAK,KAAKZ,mEAAa,CAAC4sB,mBAAmB,IACjEnpB,UAAU,CAACA,UAAU,CAAC7C,KAAK,KAAKZ,mEAAa,CAACgoB,6BAA6B,EAC7E;MACE,OAAOhoB,mEAAa,CAACioB,sBAAsB;;IAE/C,OAAOxkB,UAAU,CAACA,UAAU,CAAC7C,KAAK;EACtC;EAEQorB,oBAAoBA,CAAA;IACxB,IAAI,CAACrN,cAAc,GAAG,IAAI,CAAC2Q,iBAAiB,EAAE;IAC9C,IAAI,CAACc,aAAa,EAAE;EACxB;EAEQS,4BAA4BA,CAAA;IAChC,MAAMnhB,WAAW,GAAG,IAAIgO,sEAAgB,EAAE;IAC1ChO,WAAW,CAACA,WAAW,GAAG,EAAE;IAC5B,IAAI,IAAI,CAAC8V,eAAe,EAAE;MACtB,MAAM2L,GAAG,GAAGlxB,gEAAU,CAACmxB,2BAA2B,EAAE;MACpDD,GAAG,CAACzhB,WAAW,GAAG,CAAC1P,mEAAa,CAACqxB,mBAAmB,CAAC;MACrD3hB,WAAW,CAACA,WAAW,CAACnD,IAAI,CAAC4kB,GAAG,CAAC;;IAErC,KAAK,MAAM7V,KAAK,IAAI,IAAI,CAAC+O,uBAAuB,EAAE;MAC9C,MAAMhD,IAAI,GAAG,IAAI1J,gEAAU,EAAE;MAC7B0J,IAAI,CAACjM,SAAS,GAAG;QACbqM,aAAa,EAAEnM,KAAK,CAACmM,aAAa;QAClCpM,aAAa,EAAEC,KAAK,CAACD;OACxB;MACDgM,IAAI,CAAC3X,WAAW,GAAG,CAAC1P,mEAAa,CAACsxB,sBAAsB,CAAC;MACzD5hB,WAAW,CAACA,WAAW,CAACnD,IAAI,CAAC8a,IAAI,CAAC;;IAEtC,OAAO3X,WAAW;EACtB;EAEQogB,iBAAiBA,CAACpgB,WAAyB;IAC/C,IAAI6hB,IAAI,GAAY,EAAE;IACtB,KAAK,IAAIlK,IAAI,IAAI3X,WAAW,EAAE;MAC1B,KAAK,IAAI4L,KAAK,IAAI,IAAI,CAACmK,eAAe,CAAC1f,OAAO,EAAE,EAAE;QAC9C,IAAIuV,KAAK,CAACmM,aAAa,IAAIJ,IAAI,CAACjM,SAAS,CAACqM,aAAa,EAAE;UACrD8J,IAAI,CAAChlB,IAAI,CAAC+O,KAAK,CAAC;;;;IAI5B,OAAOiW,IAAI;EACf;EAEQ1F,SAASA,CAACniB,EAAU,EAAE4I,MAAoB;IAC9C,IAAI,CAAC4b,QAAQ,GAAGxkB,EAAE;IAClB,IAAI,CAAC4mB,gBAAgB,GAAGhe,MAAM;IAC9B,IAAI,CAACwO,iBAAiB,GAAG,IAAIvD,0DAAY,EAAE;IAC3C,IAAI,CAACuD,iBAAiB,CAACpQ,KAAK,GAAG,EAAE;IACjC,IAAI,CAACoQ,iBAAiB,CAACrd,UAAU,GAAG;MAChCggB,WAAW,EAAE,EAAE;MACfzS,KAAK,EAAE,IAAI,CAACuT,MAAM,CAAC,CAAC;KAChB;IACR,IACI,IAAI,CAAC+L,gBAAgB,IACrB,IAAI,CAACA,gBAAgB,CAAC7sB,UAAU,CAAC0H,IAAI,KAAKnL,mEAAa,CAACoL,wBAAwB,EAClF;MACE,IAAI,CAAC,IAAI,CAACkU,eAAe,IAAI,CAAC,IAAI,CAACgB,UAAU,EAAE;QAC3C,IAAI,CAACjY,KAAK,CAAC0D,KAAK,CACZ,IAAI,CAACuT,eAAe,GACdtf,mEAAa,CAACirB,oCAAoC,GAClDjrB,mEAAa,CAACkrB,mCAAmC,EACvD,sBAAsB,CACzB;QACDsG,MAAM,CAACC,OAAO,CAACC,IAAI,EAAE;QACrB,IAAI,CAAClrB,SAAS,GAAG,KAAK;QACtB;;MAEJ,IAAI,CAACsY,iBAAiB,CAAC9e,mEAAa,CAACoL,wBAAwB,CAAC;;IAElE,IAAI,CAAC4gB,oBAAoB,EAAE;IAC3B,IAAI,CAAC3D,kBAAkB,EAAE;IACzB,IAAI,CAAC7hB,SAAS,GAAG,KAAK;IACtB,IAAI,CAAC,IAAI,CAAC0D,WAAW,CAAC4K,MAAM,EAAE;MAC1B,IAAI,CAAC5K,WAAW,CAAC6K,IAAI,EAAE;;EAE/B;EAEQ6b,KAAKA,CAACntB,UAAwB;IAClC;IACA,MAAMkuB,GAAG,GACL,IAAI,CAACxI,gBAAgB,CAACyI,GAAG,CAAChU,6EAAuB,CAACiU,oBAAoB,CAAC;IAC3E,IAAI,CAACF,GAAG,EAAE;MACN,IAAI,CAACzC,SAAS,CAACzrB,UAAU,CAAC;MAC1B;;IAEJvD,+DAAQ,CAACsJ,eAAe,CACpB,IAAI,CAACxB,UAAU,EACf,IAAI,CAACP,iBAAiB,EACtB,IAAI,CAACW,MAAM,EACX,IAAI,CAACZ,MAAM,EACX/D,UAAU,EACVkuB,GAAG,CAACpnB,KAAK,EACT,KAAK,EACJwC,UAAU,IAAI;MACX,IAAI,CAACmiB,SAAS,CAACzrB,UAAU,CAAC;MAC1BkuB,GAAG,CAACjgB,QAAQ,EAAEJ,IAAI,CAAC;QAAE7N,UAAU;QAAEsJ;MAAU,CAAE,CAAC;MAC9C;IACJ,CAAC,CACJ;EACL;EAEA+kB,WAAWA,CAAA;IACP,IAAI,CAACzQ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACqH,SAAS,GAAG,IAAI;IACrB,IAAI,CAACqJ,YAAY,CAACC,aAAa,CAACC,KAAK,GAAG,IAAI;IAC5C,IAAI,CAACnR,iBAAiB,CAACvG,OAAO,GAAG,IAAI;IACrC,IAAI,CAAC8N,kBAAkB,EAAE;EAC7B;EAEQ+H,aAAaA,CAAA;IACjB;;;;;;IAOA,IAAI,CAACxf,OAAO,GAAG,CACX,IAAI4M,kEAAY,CAAC,MAAM,EAAE;MAAExM,KAAK,EAAE;IAAU,CAAE,EAAE,MAAM,IAAI,CAACkW,MAAM,EAAE,CAAC,EACpE,IAAI1J,kEAAY,CAAC,IAAI,CAACgS,UAAU,EAAE,GAAG,MAAM,GAAG,MAAM,EAAE;MAAExe,KAAK,EAAE;IAAS,CAAE,EAAE,MACxE,IAAI,CAACqe,YAAY,EAAE,CACtB,CACJ;EACL;EAEA5N,sBAAsBA,CAAA;IAClB,IAAI,CAACG,qBAAqB,GAAG,IAAI,CAACkH,SAAS,CAACiC,wBAAwB,CAChE/qB,mEAAa,CAAC0rB,sCAAsC,CACvD;IACD,IAAI,CAACzQ,cAAc,GAAG,IAAI;IAC1B,IAAI,CAAC6F,iBAAiB,CAACrd,UAAU,CAACwX,cAAc,GAAG,IAAI4C,gFAAiB,CACpE,IAAI,CAAC2L,kBAAkB,CAC1B,CAAC0I,SAAS,CACP,IAAI,CAACvN,iBAAiB,KAAK3kB,mEAAa,CAAC8uB,2BAA2B,IAChE,IAAI,CAAChO,iBAAiB,CAACrd,UAAU,CAAC0H,IAAI,KAAKnL,mEAAa,CAAC8uB,2BAA2B,GAClF,IAAI,CAACrD,WAAW,GAChB,IAAI,CAAClQ,IAAI,EACf,IAAI,CACP;IACD5G,UAAU,CAAC,MAAK;MACZ,IAAI,CAACwd,mBAAmB,CAACH,aAAa,CAACI,KAAK,EAAE;IAClD,CAAC,CAAC;EACN;EAEAlQ,oBAAoBA,CAAA;IAChB,IAAI,CAACjH,cAAc,GAAG,KAAK;IAC3B,IAAI,CAAC6F,iBAAiB,CAACrd,UAAU,CAACwX,cAAc,GAAG,IAAI;EAC3D;EAEAoN,kBAAkBA,CAAA;IACd,IAAI,CAAC/D,YAAY,GAAG,CAChB,IAAI/kB,2DAAU,CAAC,8BAA8B,EAAE,QAAQ,EAAE,MAAK;MAC1D,IAAI,CAACspB,WAAW,GAAG3oB,+DAAQ,CAACmyB,mBAAmB,CAC3C,IAAI,CAACnJ,gBAAgB,EACrB,IAAI,CAAC9gB,MAAM,EACX,QAAQ,EACR;QAAEwB,WAAW,EAAE;UAAE0oB,WAAW,EAAE,KAAK;UAAEC,UAAU,EAAE,CAAC,OAAO;QAAC;MAAE,CAAE,CACvD;MACX;;;;;;;;IAQJ,CAAC,CAAC,EACF,IAAIhzB,2DAAU,CAAC,8BAA8B,EAAE,aAAa,EAAE,MAC1D,IAAI,CAACwyB,YAAY,CAACC,aAAa,CAACpR,KAAK,EAAE,CAC1C,CACJ;IACD,IAAI,CAAC0D,YAAY,CAAC,CAAC,CAAC,CAAChJ,KAAK,GAAGgC,8DAAa,CAACkV,IAAI;IAC/C,IAAI,CAAClO,YAAY,CAAC,CAAC,CAAC,CAAChJ,KAAK,GAAGgC,8DAAa,CAACkV,IAAI;IAC/C,IACI,IAAI,CAACnR,SAAS,IACb,IAAI,CAACP,iBAAiB,CAACvG,OAAO,IAAI,CAAC,IAAI,CAACuG,iBAAiB,CAACvG,OAAO,CAAC4B,MAAO,EAC5E;MACE,IAAI,CAACmI,YAAY,CAAC/X,IAAI,CAClB,IAAIhN,2DAAU,CAAC,8BAA8B,EAAE,QAAQ,EAAE,MAAM,IAAI,CAACuyB,WAAW,EAAE,CAAC,CACrF;MACD,IAAI,CAACxN,YAAY,CAAC,CAAC,CAAC,CAAChJ,KAAK,GAAGgC,8DAAa,CAACmV,MAAM;;EAEzD;EAAC,QAAA1rB,CAAA;qBA35BQggB,sBAAsB,EAAA3mB,gEAAA,CAAAqW,2EAAA,GAAArW,gEAAA,CAAAqW,qEAAA,GAAArW,gEAAA,CAAAqW,0EAAA,GAAArW,gEAAA,CAAAuW,4EAAA,GAAAvW,gEAAA,CAAAqW,+DAAA,GAAArW,gEAAA,CAAAqW,oEAAA,GAAArW,gEAAA,CAAAqW,4EAAA,GAAArW,gEAAA,CAAAyW,4DAAA,GAAAzW,gEAAA,CAAAqW,oEAAA,GAAArW,gEAAA,CAAAqW,wEAAA,GAAArW,gEAAA,CAAAyW,oDAAA,GAAAzW,gEAAA,CAAA4W,8DAAA,GAAA5W,gEAAA,CAAA8W,kDAAA,GAAA9W,gEAAA,CAAAgX,mEAAA,GAAAhX,gEAAA,CAAAqW,6EAAA,GAAArW,gEAAA,CAAAA,kDAAA,GAAAA,gEAAA,CAAAkX,oEAAA,GAAAlX,gEAAA,CAAAqW,0EAAA,GAAArW,gEAAA,CAAAqX,+DAAA,GAAArX,gEAAA,CAAAA,0DAAA,GAAAA,gEAAA,CAAAuX,oEAAA,GAAAvX,gEAAA,CAAAyX,kEAAA,GAAAzX,gEAAA,CAAA2X,6FAAA,GAAA3X,gEAAA,CAAA8X,6EAAA,GAAA9X,gEAAA,CAAAgY,6EAAA;EAAA;EAAA,QAAA7B,EAAA;UAAtBwQ,sBAAsB;IAAAtO,SAAA;IAAA8D,SAAA,WAAA6W,6BAAAxa,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;iBAAtBC,GAAA,CAAAmO,mBAAA,CAAA5kB,MAAA,CAA2B;QAAA,UAAAhC,gEAAA;;;;;;;;QC9ExCA,6DAAA,aAKC;QACCA,yDAAA,IAAAkzB,oDAAA,gCAA2D;QAE3DlzB,yDAAA,IAAAmzB,qCAAA,iBA2ZM;QACRnzB,2DAAA,EAAM;;;QAhaJA,0DAAA,mCAAAyY,GAAA,CAAA8Q,OAAA,CAAgD;QAE3BvpB,wDAAA,GAAe;QAAfA,yDAAA,SAAAyY,GAAA,CAAArS,SAAA,CAAe;QAE9BpG,wDAAA,GAAgB;QAAhBA,yDAAA,UAAAyY,GAAA,CAAArS,SAAA,CAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAD;AAYK;AAC6C;AAKE;;;;;;;;;;;IC1B3EpG,4DAAA,iBAAyF;IAGnFA,oDAAA,GACF;;IAAAA,0DAAA,EAAK;IACLA,uDAAA,mBAA6B;IAC/BA,0DAAA,EAAM;IAENA,4DAAA,oCAUC;IAFCA,wDAAA,uBAAAqzB,6FAAArxB,MAAA;MAAAhC,2DAAA,CAAAszB,GAAA;MAAA,MAAAhV,MAAA,GAAAte,2DAAA;MAAA,OAAaA,yDAAA,CAAAse,MAAA,CAAA1a,cAAA,CAAAsN,IAAA,CAAAlP,MAAA,CAAAK,OAAA,CAAmC;IAAA,EAAC;IAElDrC,0DAAA,EAA0B;;;;IAfvBA,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,2CACF;IAKAA,uDAAA,GAA4D;IAA5DA,wDAAA,2BAAA6Z,MAAA,CAAAhb,eAAA,CAAA2J,iBAAA,CAA4D,eAAAqR,MAAA,CAAA0Z,6BAAA,WAAA1Z,MAAA,CAAAza,KAAA,CAAAo0B,oBAAA,iBAAA3Z,MAAA,CAAA5a,sBAAA,CAAAmJ,IAAA,aAAAyR,MAAA,CAAA4Z,eAAA;;;AD0B1D,MAAOC,4BAA4B;EAkBrCxsB,YACYG,iBAAwC,EACxCK,cAA8B,EAC9BisB,oBAA0C;IAF1C,KAAAtsB,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAK,cAAc,GAAdA,cAAc;IACd,KAAAisB,oBAAoB,GAApBA,oBAAoB;IApBvB,KAAA10B,sBAAsB,GAAGA,sEAAsB;IAC/C,KAAAJ,eAAe,GAAGA,+DAAe;IACjC,KAAAO,KAAK,GAAGA,qDAAK;IACtB,KAAAq0B,eAAe,GAAG,CACd,IAAI30B,wDAAQ,CAAC,MAAM,EAAEc,2EAAa,CAACgJ,aAAa,CAAC,EACjD,IAAI9J,wDAAQ,CAAC,eAAe,EAAEc,2EAAa,CAACg0B,UAAU,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAE,CAAC,EAC7E,IAAI/0B,wDAAQ,CAAC,eAAe,EAAEc,2EAAa,CAACoJ,iBAAiB,EAAE;MAAE6qB,SAAS,EAAE;IAAK,CAAE,CAAC,CACvF;IAGD,KAAAN,6BAA6B,GAAG,IAAIv0B,8DAAc,EAAgB;IAKxD,KAAA4E,cAAc,GAAG,IAAIhF,uDAAY,EAAgB;IAOvD,IAAI,CAAC8I,cAAc,CAAC0E,UAAU,EAAE,CAACC,OAAO,CAACnD,SAAS,CAAEoD,KAAsB,IAAI;MAC1E,IAAIA,KAAK,CAACA,KAAK,KAAKvM,0GAAmB,CAACwM,kBAAkB,EAAE;QACxD,IAAI,CAACunB,gBAAgB,EAAE;;IAE/B,CAAC,CAAC;EACN;EACQA,gBAAgBA,CAAA;IACpB,IAAI,CAACP,6BAA6B,CAAC/kB,KAAK,EAAE;IAC1C,IAAI,CAAC+kB,6BAA6B,CAACntB,SAAS,GAAG,IAAI;IACnD,IAAI,IAAI,CAAC2tB,OAAO,EAAE;MACd,IAAI,CAAC1sB,iBAAiB,CACjB2sB,sBAAsB,CAAC,IAAI,CAAC3wB,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CAC9CJ,SAAS,CAAE+qB,SAAS,IAAI;QACrBA,SAAS,CAAC9pB,KAAK,GAAG8pB,SAAS,CAAC9pB,KAAK,CAAC8B,GAAG,CAAEmb,CAAC,IAAI;UACxCA,CAAC,CAAC8M,kBAAkB,GAAG,IAAI,CAAC7wB,UAAU;UACtC,OAAO+jB,CAAC;QACZ,CAAC,CAAC;QACF,IAAI,CAACmM,6BAA6B,CAAC1gB,OAAO,CACtCohB,SAAS,CAAC9pB,KAAK,EACf8pB,SAAS,CAAClhB,UAAU,CACvB;QACD,IAAI,CAACwgB,6BAA6B,CAACntB,SAAS,GAAG,KAAK;QACpDmO,UAAU,CAAC,MAAK;UACZ,IAAI,CAAC4f,aAAa,EAAE3f,oBAAoB,CAAC;YACrCC,SAAS,EAAE,IAAI,CAACA;WACnB,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;;EAEd;EAEApG,WAAWA,CAACC,OAAsB;IAC9B,IAAIA,OAAO,CAACjL,UAAU,EAAEkL,YAAY,KAAK,IAAI,IAAID,OAAO,CAACylB,OAAO,EAAExlB,YAAY,KAAK,IAAI,EAAE;MACrF,IAAI,CAACulB,gBAAgB,EAAE;;EAE/B;EAAC,QAAAntB,CAAA;qBA1DQ+sB,4BAA4B,EAAA1zB,+DAAA,CAAAqW,qGAAA,GAAArW,+DAAA,CAAAuW,6EAAA,GAAAvW,+DAAA,CAAAyW,oEAAA;EAAA;EAAA,QAAAN,EAAA;UAA5Bud,4BAA4B;IAAArb,SAAA;IAAA8D,SAAA,WAAAkY,mCAAA7b,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;kEAU1B4a,kEAAkB;;;;;;;;;;;;;;;gFAZlB,CAAC1b,wEAAwB,CAAC,GAAA1X,kEAAA;IAAAu0B,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,sCAAAnc,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCjCzCxY,wDAAA,IAAA40B,+CAAA,qBAmBU;;;QAnBA50B,wDAAA,WAAAyY,GAAA,CAAA8a,6BAAA,kBAAA9a,GAAA,CAAA8a,6BAAA,CAAAlyB,OAAA,IAA+C;;;;;;;;;;;;;;;;;;;;;;;;ACCF;AAC4B;AACX;;;AAExE,MAAM0zB,MAAM,GAAW,CACnB;EACIC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEH,iFAAwBA;CACtC,EACD;EACIE,IAAI,EAAE,sBAAsB;EAC5BC,SAAS,EAAEtO,4FAAsBA;CACpC,CACJ;AAMK,MAAOuO,4BAA4B;EAAA,QAAAvuB,CAAA;qBAA5BuuB,4BAA4B;EAAA;EAAA,QAAA/e,EAAA;UAA5B+e;EAA4B;EAAA,QAAA9c,EAAA;cAH3Byc,yDAAY,CAACM,QAAQ,CAACJ,MAAM,CAAC,EAC7BF,yDAAY;EAAA;;;sHAEbK,4BAA4B;IAAAE,OAAA,GAAA/e,yDAAA;IAAAgf,OAAA,GAF3BR,yDAAY;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVH;AAYK;AACkB;AACK;AACM;AAiBlB;AACgB;AACG;;;;;;;;;;;;;;;;;;;;;;;;;;;IC1BpD70B,wDAAA,YAAwC;IACxCA,6DAAA,eAAwB;IAAAA,qDAAA,GAAsC;;IAAAA,2DAAA,EAAO;;;IAA7CA,wDAAA,GAAsC;IAAtCA,gEAAA,CAAAA,0DAAA,6BAAsC;;;;;IAHlEA,6DAAA,kBAAkD;IAChDA,yDAAA,IAAAu1B,yEAAA,0BAGc;IAChBv1B,2DAAA,EAAU;;;;;IAGNA,wDAAA,YAAuC;IACvCA,6DAAA,eAAwB;IAAAA,qDAAA,GAA8C;;IAAAA,2DAAA,EAAO;;;IAArDA,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;;;;;IAH1EA,6DAAA,kBAAsD;IACpDA,yDAAA,IAAAw1B,yEAAA,0BAGc;IAChBx1B,2DAAA,EAAU;;;;;IAGNA,wDAAA,YAAsC;IACtCA,6DAAA,eAAwB;IAAAA,qDAAA,GAAkD;;IAAAA,2DAAA,EAAO;;;IAAzDA,wDAAA,GAAkD;IAAlDA,gEAAA,CAAAA,0DAAA,yCAAkD;;;;;IAH9EA,6DAAA,kBAA6D;IAC3DA,yDAAA,IAAAy1B,yEAAA,0BAGc;IAChBz1B,2DAAA,EAAU;;;;;IAGNA,wDAAA,YAA0C;IAC1CA,6DAAA,eAAwB;IAAAA,qDAAA,GAAqD;;IAAAA,2DAAA,EAAO;;;IAA5DA,wDAAA,GAAqD;IAArDA,gEAAA,CAAAA,0DAAA,4CAAqD;;;;;IAHjFA,6DAAA,kBAAkE;IAChEA,yDAAA,IAAA01B,yEAAA,0BAGc;IAChB11B,2DAAA,EAAU;;;;;IAGNA,wDAAA,YAA0C;IAC1CA,6DAAA,eAAwB;IAAAA,qDAAA,GAA2C;;IAAAA,2DAAA,EAAO;;;IAAlDA,wDAAA,GAA2C;IAA3CA,gEAAA,CAAAA,0DAAA,kCAA2C;;;;;;IAnCzEA,6DAAA,wBAOC;IAFCA,yDAAA,iCAAA21B,+FAAA3zB,MAAA;MAAAhC,4DAAA,CAAA41B,IAAA;MAAA,MAAA/yB,OAAA,GAAA7C,4DAAA;MAAA,OAAAA,0DAAA,CAAA6C,OAAA,CAAAgzB,gBAAA,GAAA7zB,MAAA;IAAA,EAAoC;;IAGpChC,yDAAA,IAAA81B,2DAAA,sBAKU;IACV91B,yDAAA,IAAA+1B,2DAAA,sBAKU;IACV/1B,yDAAA,IAAAg2B,2DAAA,sBAKU;IACVh2B,yDAAA,IAAAi2B,2DAAA,sBAKU;IACVj2B,6DAAA,kBAAsC;IACpCA,yDAAA,IAAAk2B,+DAAA,0BAGc;IAChBl2B,2DAAA,EAAU;;;;IAjCVA,yDAAA,iBAAsB,kBAAA6Z,MAAA,CAAAgc,gBAAA;IAFtB71B,0DAAA,eAAAA,0DAAA,0BAAiD;IAMvCA,wDAAA,GAAc;IAAdA,yDAAA,UAAA6Z,MAAA,CAAAnK,OAAA,CAAc;IAMd1P,wDAAA,GAAc;IAAdA,yDAAA,UAAA6Z,MAAA,CAAAnK,OAAA,CAAc;IAMd1P,wDAAA,GAAkB;IAAlBA,yDAAA,SAAA6Z,MAAA,CAAAsc,YAAA,CAAkB;IAMlBn2B,wDAAA,GAAoB;IAApBA,yDAAA,SAAA6Z,MAAA,CAAAuc,cAAA,CAAoB;;;;;IAc9Bp2B,wDAAA,2BAQgB;;;IAFdA,yDAAA,QAAgB;IAHhBA,yDAAA,mCAAkC;;;;;;;IA0BlCA,6DAAA,qCAMC;IADCA,yDAAA,kBAAAq2B,kGAAA;MAAAr2B,4DAAA,CAAAof,IAAA;MAAA,MAAAC,OAAA,GAAArf,4DAAA;MAAA,OAAQA,0DAAA,CAAAqf,OAAA,CAAAiX,cAAA,EAAgB;IAAA,EAAC;IAC1Bt2B,2DAAA,EAAyB;;;;;IAHxBA,yDAAA,eAAAya,MAAA,CAAApX,UAAA,CAAyB,iBAAAkzB,OAAA,GAAA9b,MAAA,CAAA+b,oBAAA,kBAAA/b,MAAA,CAAA+b,oBAAA,CAAAlnB,WAAA,cAAAinB,OAAA,KAAAE,SAAA,GAAAF,OAAA;;;;;IAMzBv2B,6DAAA,kBAIC;IACCA,wDAAA,iBAAyB;IAC3BA,2DAAA,EAAU;;;;;IACVA,6DAAA,aAAwE;IACtEA,qDAAA,GACF;;IAAAA,2DAAA,EAAK;;;IADHA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,iCACF;;;;;;;;;IACAA,6DAAA,YASC;IAFCA,yDAAA,mBAAA02B,0DAAA;MAAA12B,4DAAA,CAAAuf,IAAA;MAAA,MAAAC,OAAA,GAAAxf,4DAAA;MAAA,OAASA,0DAAA,CAAAwf,OAAA,CAAAmX,gBAAA,EAAkB;IAAA,EAAC;;IAG5B32B,qDAAA,GACA;;IAAAA,wDAAA,YAA8B;IAChCA,2DAAA,EAAI;;;;IAPFA,oEAAA,UAAAA,0DAAA,gCAAiD;IAGjDA,yDAAA,eAAAA,8DAAA,IAAA+E,GAAA,QAAAxE,MAAA,CAAA+H,aAAA,aAA+C;IAE/CtI,wDAAA,GACA;IADAA,iEAAA,MAAAA,0DAAA,qCACA;;;;;;;;;;;;;;;;;;;;IAGAA,6DAAA,cAKC;;IACCA,6DAAA,yBAOC;IADCA,yDAAA,oBAAA42B,yFAAA50B,MAAA;MAAAhC,4DAAA,CAAAsG,IAAA;MAAAtG,4DAAA;MAAA,MAAAsgB,IAAA,GAAAtgB,0DAAA;MAAA,OAAUA,0DAAA,CAAAsgB,IAAA,CAAA/U,gBAAA,CAAAvJ,MAAA,CAAAqI,MAAA,EAAArI,MAAA,CAAAsJ,MAAA,CAAyE;IAAA,EAAC;IACrFtL,2DAAA,EAAiB;;;;;;IAXlBA,0DAAA,eAAAA,0DAAA,0BAAiD;IAM/CA,wDAAA,GAAyC;IAAzCA,yDAAA,8BAAA2f,OAAA,CAAAkX,WAAA,CAAyC,mBAAA72B,8DAAA,KAAAmG,GAAA,EAAAnG,8DAAA,IAAAmF,GAAA,GAAAnF,8DAAA,IAAA+F,GAAA,EAAA4Z,OAAA,CAAAkX,WAAA,kDAAAvW,IAAA,CAAArW,8BAAA;;;;;IAkBvCjK,sEAAA,GAAmD;IACjDA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;;;IADbA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wCACF;;;;;IACAA,sEAAA,GAAgD;IAC9CA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;;;IADbA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wCACF;;;;;IANFA,sEAAA,GAA8C;IAC5CA,yDAAA,IAAA82B,6FAAA,2BAEe;IACf92B,yDAAA,IAAA+2B,6FAAA,2BAEe;IACjB/2B,oEAAA,EAAe;;;;IANEA,wDAAA,GAAkC;IAAlCA,yDAAA,SAAA+hB,OAAA,CAAA8U,WAAA,kBAAkC;IAGlC72B,wDAAA,GAA+B;IAA/BA,yDAAA,SAAA+hB,OAAA,CAAA8U,WAAA,eAA+B;;;;;IAIhD72B,sEAAA,GAA+C;IAC7CA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;;;IADbA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,gDACF;;;;;IAVAA,yDAAA,IAAAg3B,8EAAA,2BAOe;IACfh3B,yDAAA,IAAAi3B,8EAAA,2BAEe;;;;IAVAj3B,yDAAA,SAAAiE,OAAA,CAAAizB,qBAAA,GAA6B;IAQ7Bl3B,wDAAA,GAA8B;IAA9BA,yDAAA,UAAAiE,OAAA,CAAAizB,qBAAA,GAA8B;;;;;IAlCnDl3B,sEAAA,GAAiC;IAC/BA,yDAAA,IAAAm3B,uDAAA,mBAcM;IACNn3B,6DAAA,oCAQC;IACCA,yDAAA,IAAAo3B,+DAAA,iCAAAp3B,qEAAA,CAYc;IAChBA,2DAAA,EAAwB;IAC1BA,oEAAA,EAAe;;;;IAlCVA,wDAAA,GAA4C;IAA5CA,yDAAA,UAAA8a,MAAA,CAAAoc,qBAAA,OAAApc,MAAA,CAAA1U,SAAA,CAA4C;IAkB7CpG,wDAAA,GAAmD;IAAnDA,0DAAA,mCAAA8a,MAAA,CAAAuc,QAAA,GAAmD;IALnDr3B,yDAAA,eAAA8a,MAAA,CAAAzX,UAAA,CAAyB,eAAAyX,MAAA,CAAA1F,UAAA,WAAA0F,MAAA,CAAAwc,QAAA,mBAAAxc,MAAA,CAAAoc,qBAAA,qBAAApc,MAAA,CAAAlZ,aAAA;;;;;;IAiCjC5B,6DAAA,2BAIC;IAFCA,yDAAA,2BAAAu3B,8GAAAv1B,MAAA;MAAAhC,4DAAA,CAAAmhB,IAAA;MAAA,MAAAqW,YAAA,GAAAx3B,4DAAA,GAAAy3B,QAAA;MAAA,OAAaz3B,0DAAA,CAAAw3B,YAAA,CAAAE,YAAA,GAAA11B,MAAA,CACX;IAAA,EADiC,2BAAAu1B,8GAAAv1B,MAAA;MAAAhC,4DAAA,CAAAmhB,IAAA;MAAA,MAAAwW,kBAAA,GAAA33B,4DAAA,GAAA43B,cAAA;MAAA,OAClB53B,0DAAA,CAAA23B,kBAAA,CAAAzmB,IAAA,CAAAlP,MAAA,CAA2B;IAAA,EADT;IAGnChC,qDAAA,GACF;;IAAAA,2DAAA,EAAmB;;;;IAJjBA,yDAAA,YAAAw3B,YAAA,CAAAE,YAAA,CAAmC;IAGnC13B,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,uCACF;;;;;IAQEA,wDAAA,YAGK;;;;IADHA,yDAAA,uBAAAw3B,YAAA,CAAAK,SAAA,0BAAkE;;;;;IATtE73B,6DAAA,iBAKC;IACCA,qDAAA,GACA;;IAAAA,yDAAA,IAAA83B,6DAAA,gBAGK;IACP93B,2DAAA,EAAS;;;;;IATPA,yDAAA,sBAAA+3B,IAAA,CAAAC,IAAA,CAAuC;IAIvCh4B,wDAAA,GACA;IADAA,iEAAA,MAAAA,0DAAA,iBAAAw3B,YAAA,CAAA/oB,IAAA,OACA;IACGzO,wDAAA,GAAyD;IAAzDA,yDAAA,SAAAw3B,YAAA,CAAA/oB,IAAA,uCAAyD;;;;;;IAf9DzO,yDAAA,IAAAi4B,mEAAA,+BAMmB;IACnBj4B,yDAAA,IAAAk4B,yDAAA,qBAWS;IACTl4B,6DAAA,+BAMC;IADCA,yDAAA,oBAAAm4B,oFAAAn2B,MAAA;MAAA,MAAA4b,WAAA,GAAA5d,4DAAA,CAAAiiB,IAAA;MAAA,MAAAmW,YAAA,GAAAxa,WAAA,CAAAtM,QAAA;MAAA,OAAUtR,0DAAA,CAAAo4B,YAAA,CAAAlnB,IAAA,CAAAlP,MAAA,CAAqB;IAAA,EAAC;IACjChC,2DAAA,EAAmB;;;;;;IAxBjBA,yDAAA,SAAAw3B,YAAA,CAAA/oB,IAAA,uCAAyD;IAOzDzO,wDAAA,GAAuB;IAAvBA,yDAAA,SAAA+3B,IAAA,CAAAC,IAAA,CAAuB;IAaxBh4B,wDAAA,GAAmB;IAAnBA,yDAAA,YAAAq4B,WAAA,CAAmB,WAAAb,YAAA,CAAA/oB,IAAA,mBAAA+oB,YAAA,CAAAK,SAAA;;;;;;;;;;;;ADlIvB;AAQM,MAAO/C,wBAAwB;EAAA,QAAAnuB,CAAA,GAC1B,KAAA2xB,aAAa,GAAG,CACnB14B,mEAAa,CAAC2sB,kBAAkB,EAChC3sB,mEAAa,CAACkxB,oBAAoB,EAClClxB,mEAAa,CAAC24B,8BAA8B,EAC5C34B,mEAAa,CAAC44B,iCAAiC,EAC/C54B,mEAAa,CAAC4sB,mBAAmB,CACpC;EAgCD,IAAIiM,eAAeA,CAACA,eAAuB;IACvC,IAAI,CAACC,gBAAgB,GAAGD,eAA8B;IACtD,IAAI,CAACE,UAAU,EAAE;EACrB;EAEA,IAAIF,eAAeA,CAAA;IACf,OAAO,IAAI,CAACC,gBAAiC;EACjD;EAEA,IAAI7C,gBAAgBA,CAACxG,GAAW;IAC5B,IAAI,IAAI,CAAC3f,OAAO,EAAE;MACd2f,GAAG,IAAI,CAAC,CAAC,CAAC;;;IAEd,IAAI,CAAC,IAAI,CAAC8G,YAAY,IAAI9G,GAAG,GAAG,CAAC,EAAE;MAC/BA,GAAG,EAAE,CAAC,CAAC;;;IAEX,IAAI,CAAC,IAAI,CAAC+G,cAAc,IAAI/G,GAAG,GAAG,CAAC,EAAE;MACjCA,GAAG,EAAE,CAAC,CAAC;;;IAEX,IAAI,CAACuJ,SAAS,CAAC9D,wBAAwB,CAACwD,aAAa,CAACjJ,GAAG,CAAC,CAAC;EAC/D;EAEA,IAAIwG,gBAAgBA,CAAA;IAChB,IAAIxG,GAAG,GAAGyF,wBAAwB,CAACwD,aAAa,CAAC7tB,OAAO,CAAC,IAAI,CAACosB,WAAW,CAAC;IAC1E,IAAI,IAAI,CAACnnB,OAAO,EAAE;MACd2f,GAAG,IAAI,CAAC;;IAEZ,IAAI,CAAC,IAAI,CAAC8G,YAAY,IAAI9G,GAAG,GAAG,CAAC,EAAE;MAC/BA,GAAG,EAAE;;IAET,IAAI,CAAC,IAAI,CAAC+G,cAAc,IAAI/G,GAAG,GAAG,CAAC,EAAE;MACjCA,GAAG,EAAE;;IAET,OAAOA,GAAG;EACd;EAeA;EACAnoB,YACY2xB,kBAAsC,EACtCxxB,iBAAwC,EACxCsJ,MAA4B,EAC5B+X,SAA+B,EAC/BC,UAA0B,EAC1BmQ,WAA+B,EAC/BlQ,kBAA0C,EAC1ChhB,UAA6B,EAC7BC,WAA4B,EAC5BE,KAAqB,EACrBC,MAAc,EACd+wB,WAAoC,EACpCjxB,cAAwC,EACxCkxB,cAAkC,EAClCC,uBAAgD,EAChDhxB,KAAY,EACZkhB,YAAiC,EACjChhB,SAAoB;IAjBpB,KAAA0wB,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAAxxB,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAsJ,MAAM,GAANA,MAAM;IACN,KAAA+X,SAAS,GAATA,SAAS;IACT,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAmQ,WAAW,GAAXA,WAAW;IACX,KAAAlQ,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAAhhB,UAAU,GAAVA,UAAU;IACV,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAE,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAA+wB,WAAW,GAAXA,WAAW;IACX,KAAAjxB,cAAc,GAAdA,cAAc;IACd,KAAAkxB,cAAc,GAAdA,cAAc;IACd,KAAAC,uBAAuB,GAAvBA,uBAAuB;IACvB,KAAAhxB,KAAK,GAALA,KAAK;IACL,KAAAkhB,YAAY,GAAZA,YAAY;IACZ,KAAAhhB,SAAS,GAATA,SAAS;IAnGZ,KAAA+wB,MAAM,GAAG95B,sDAAK;IACd,KAAAH,sBAAsB,GAAGA,uEAAsB;IAC/C,KAAAqJ,aAAa,GAAGjJ,4DAAW,CAACiJ,aAAa;IACzC,KAAA8M,UAAU,GAAG,MAAM,IAAI,CAAC5N,OAAO;IAOxC,KAAA2xB,gBAAgB,GAAG,KAAK;IAGxB,KAAAtC,WAAW,GAAWj3B,mEAAa,CAAC2sB,kBAAkB;IACtD,KAAAnmB,SAAS,GAAG,IAAI;IAChB,KAAAgzB,OAAO,GAAG,KAAK;IAEf,KAAAC,qBAAqB,GAAG,IAAIz6B,wDAAY,EAAa;IACrD,KAAA06B,2BAA2B,GAAG,IAAI16B,wDAAY,EAAW;IACzD,KAAA26B,oBAAoB,GAAG,IAAI36B,wDAAY,EAAa;IACpD,KAAA46B,0BAA0B,GAAG,IAAI56B,wDAAY,EAAW;IACxD,KAAA2qB,OAAO,GAAG,IAAI;IACd,KAAA7Z,OAAO,GAAG,IAAI;IA4CN,KAAA+pB,mBAAmB,GAAQ,IAAI;IACvC;IACQ,KAAAC,kBAAkB,GAAsB,IAAIvc,+DAAiB,CACjEvd,mEAAa,CAACgO,eAAe,EAC7BhO,mEAAa,CAACksB,IAAI,CACrB;IAED,KAAAqK,YAAY,GAAG,KAAK;IACpB,KAAAC,cAAc,GAAG,KAAK;IAId,KAAApM,SAAS,GAAG,IAAI1qB,0CAAO,EAAQ;IA8VvC,KAAAsC,aAAa,GAAG,MAAK;MACjB,IAAI,IAAI,CAAC8N,OAAO,EAAE;QACd,OAAO,KAAK;;MAEhB,IAAI,IAAI,CAACwnB,qBAAqB,EAAE,EAAE;QAC9B,IAAIllB,OAAO,GAAG,IAAI,CAAC0W,SAAS,CAACiC,wBAAwB,CACjD/qB,mEAAa,CAACuN,0CAA0C,CAC3D;QACD,IAAI,IAAI,CAAC0pB,WAAW,KAAKj3B,mEAAa,CAAC2sB,kBAAkB,EAAE;UACvD,OAAOva,OAAO;;QAElB;QACAA,OAAO,GACHA,OAAO,IACP,IAAI,CAAC0W,SAAS,CAACiC,wBAAwB,CACnC/qB,mEAAa,CAACirB,oCAAoC,CACrD;QACL,IAAI,IAAI,CAACgM,WAAW,KAAKj3B,mEAAa,CAACkxB,oBAAoB,EAAE;UACzD9e,OAAO,GAAG,KAAK;SAClB,MAAM,IAAI,IAAI,CAAC6kB,WAAW,KAAKj3B,mEAAa,CAAC24B,8BAA8B,EAAE;UAC1EvmB,OAAO,GAAGA,OAAO,IAAI,IAAI,CAAC4nB,iBAAiB,EAAEh0B,MAAM,KAAK,CAAC;SAC5D,MAAM,IAAI,IAAI,CAACixB,WAAW,KAAKj3B,mEAAa,CAAC24B,8BAA8B,EAAE;UAC1EvmB,OAAO,GACHA,OAAO,IACP,IAAI,CAAC0W,SAAS,CAACiC,wBAAwB,CACnC/qB,mEAAa,CAACkrB,mCAAmC,CACpD;;QAET,OAAO9Y,OAAO;OACjB,MAAM;QACH,OAAO,IAAI,CAAC7Q,yBAAyB,EAAE;;IAE/C,CAAC;IAvWG,IAAI,CAACgoB,YAAY,CAACgB,WAAW,EAAE,CAACjhB,SAAS,CAAC,MAAK;MAC3CosB,oDAAa,CAAC,CACV,IAAI,CAAC5M,SAAS,CAAC0B,UAAU,EAAE;MAC3B;MACA,IAAI,CAAC4O,cAAc,CAACa,eAAe,EAAE,CACxC,CAAC,CAAC3wB,SAAS,CACR,CAAC,CAACsD,IAAI,CAAC,KAAI;QACP,IAAIA,IAAI,CAACstB,YAAY,IAAIttB,IAAI,CAACkF,YAAY,IAAI,IAAI,EAAE;UAChD,IAAI,CAAChC,OAAO,GAAGlD,IAAI,CAACkD,OAAO;UAC3B,IAAI,CAACkZ,kBAAkB,CAACoC,eAAe,EAAE,CAAC9hB,SAAS,CAAE+hB,YAAY,IAAI;YACjE,IAAI,CAAC2O,iBAAiB,GAAG3O,YAAY,CAACC,MAAM,CACvCC,CAAC,IAAKA,CAAC,CAACC,oBAAoB,CAChC;UACL,CAAC,CAAC;UACF,IAAI,CAAC/jB,iBAAiB,CACjBsL,2BAA2B,CACxB/S,mEAAa,CAACksB,IAAI,EAClBlsB,mEAAa,CAAC24B,8BAA8B,CAC/C,CACArvB,SAAS,CAAEsD,IAAI,IAAI;YAChB,IAAI,CAAC2pB,YAAY,GAAG3pB,IAAI,CAACsG,WAAW,CAAClN,MAAM,GAAG,CAAC;UACnD,CAAC,CAAC;UACN,IAAI,CAACyB,iBAAiB,CACjBsL,2BAA2B,CACxB/S,mEAAa,CAACksB,IAAI,EAClBlsB,mEAAa,CAAC44B,iCAAiC,CAClD,CACAtvB,SAAS,CAAEsD,IAAI,IAAI;YAChB,IAAI,CAAC4pB,cAAc,GAAG5pB,IAAI,CAACsG,WAAW,CAAClN,MAAM,GAAG,CAAC;UACrD,CAAC,CAAC;UACN,IAAI,CAACm0B,UAAU,EAAE;SACpB,MAAM;UACHl6B,gEAAU,CAACm6B,SAAS,CAAC,IAAI,CAAChyB,MAAM,EAAE,IAAI,CAAC2I,MAAM,CAAC;;MAEtD,CAAC,EACD,MAAM9Q,gEAAU,CAACm6B,SAAS,CAAC,IAAI,CAAChyB,MAAM,EAAE,IAAI,CAAC2I,MAAM,CAAC,CACvD;IACL,CAAC,CAAC;IACF;IACA,IAAI,CAACmoB,WAAW,CAACmB,YAAY,CACxBptB,IAAI,CACDrN,0DAAS,CAAC,IAAI,CAACwqB,SAAS,CAAC,EACzBkB,uDAAM,CAAE/gB,KAAK,IAAKA,KAAK,CAACgd,IAAI,CAAElW,IAAI,IAAKA,IAAI,CAAC5H,GAAG,CAACC,EAAE,KAAK,IAAI,CAACjG,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC,CAAC,CAClF,CACAJ,SAAS,CAAC,MAAM,IAAI,CAACK,QAAQ,CAAC,IAAI,CAACmwB,kBAAkB,CAACpwB,EAAE,CAAC,CAAC;EACnE;EAEA8D,WAAWA,CAAA;IACP,IAAI,CAAC4c,SAAS,CAAC3c,IAAI,EAAE;IACrB,IAAI,CAAC2c,SAAS,CAAC1c,QAAQ,EAAE;IACzB,IAAI,CAACyrB,WAAW,CAAClrB,GAAG,CAChB2P,6EAAuB,CAAC0c,iCAAiC,EACzD,IAAI,CAAC1D,oBAAoB,EAAE9xB,oBAAoB,CAClD;EACL;EAEAe,QAAQA,CAAA;IACJ,OAAO,IAAI,CAAC0C,SAAS,CAAC1C,QAAQ,EAAE;EACpC;EAEA00B,aAAaA,CAAA;IACT,OAAO/I,MAAM,CAACgJ,UAAU,GAAG/6B,4DAAW,CAACg7B,YAAY;EACvD;EAEA9wB,QAAQA,CAACD,EAAE,GAAG,EAAE,EAAEgxB,UAAU,GAAG,EAAE,EAAEC,QAAQ,GAAG,KAAK;IAC/Cz6B,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;MAC1DA,MAAM,CAAC3I,KAAK,GAAG,IAAI,CAACq2B,WAAW;MAC/B,IAAIvtB,EAAE,IAAIA,EAAE,KAAK,QAAQ,EAAE;QACvBH,MAAM,CAACG,EAAE,GAAGA,EAAE;;MAElB,IAAIixB,QAAQ,EAAE;QACVpxB,MAAM,CAACoxB,QAAQ,GAAGA,QAAQ;;MAE9B,IAAID,UAAU,EAAE;QACZnxB,MAAM,CAACmxB,UAAU,GAAGA,UAAU;;MAElC,IAAI,CAACtyB,MAAM,CAACuB,QAAQ,CAAC,CAAClK,4DAAW,CAACiJ,aAAa,GAAG,aAAa,CAAC,EAAE;QAC9DkB,WAAW,EAAEL;OAChB,CAAC;IACN,CAAC,CAAC;EACN;EAEAqxB,eAAeA,CAAA;IACX,IAAI,CAACjxB,QAAQ,CAAC,IAAI,CAAClG,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;EACzC;EAEAsvB,SAASA,CAAC6B,GAAW;IACjB,IAAI,IAAI,CAAC5D,WAAW,KAAK4D,GAAG,IAAI,IAAI,CAACC,eAAe,EAAE,KAAK96B,mEAAa,CAACksB,IAAI,EAAE;MAC3E,IAAI,CAAC+K,WAAW,GAAG4D,GAAG;MACtB,IAAI,CAACf,kBAAkB,GAAG,IAAIvc,+DAAiB,CAC3Cvd,mEAAa,CAACgO,eAAe,EAC7BhO,mEAAa,CAACksB,IAAI,CACrB;MACD,IAAI,CAAC2N,mBAAmB,GAAG,IAAI;MAC/B,IAAI,CAAClwB,QAAQ,EAAE;;EAEvB;EAEA2tB,qBAAqBA,CAAA;IACjB,OAAO,IAAI,CAACl2B,WAAW;EAC3B;EAEAG,yBAAyBA,CAAA;IACrB,IAAI,IAAI,CAAC+1B,qBAAqB,EAAE,EAAE;MAC9B,OAAO,CAAC,IAAI,CAACxnB,OAAO,CAAC,CAAC;;;IAE1B,OAAO7P,gEAAU,CAAC8P,mBAAmB,CAAC,IAAI,CAACtM,UAAU,EAAEzD,mEAAa,CAACgQ,gBAAgB,CAAC;EAC1F;EAEA+qB,eAAeA,CAAA;IACX,OACI,CAAC,IAAI,CAACjrB,OAAO,IACb7P,gEAAU,CAAC8P,mBAAmB,CAAC,IAAI,CAACtM,UAAU,EAAEzD,mEAAa,CAACg7B,mBAAmB,CAAC;EAE1F;EAEAx3B,mBAAmBA,CAACC,UAAgB;IAChC,OAAOxD,gEAAU,CAACuD,mBAAmB,CAACC,UAAU,EAAE,IAAI,CAACmoB,MAAM,CAAC;EAClE;EAEAqP,aAAaA,CAAA;IACT,IAAI,CAACC,UAAU,GAAG,IAAI,CAACz3B,UAAU,CAACgG,GAAG,CAACC,EAAE;EAC5C;EAEAyxB,eAAeA,CAAC13B,UAA8B;IAC1C,OAAOA,UAAU,CAAC7C,KAAK;IACvB;EACJ;;EAEAm2B,gBAAgBA,CAAA;IACZ72B,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;MAC1D,IAAI,CAACnB,MAAM,CAACuB,QAAQ,CAAC,CAAClK,4DAAW,CAACiJ,aAAa,GAAG,QAAQ,CAAC,EAAE;QACzDkB,WAAW,EAAEL;OAChB,CAAC;IACN,CAAC,CAAC;EACN;EAEAwS,aAAaA,CAAA;IACT,OACIrC,4DAAW,CAACsC,iBAAiB,CAAC,IAAI,CAACvY,UAAU,EAAEA,UAAU,EAAEuN,KAAK,CAAC,KACjE2I,+DAAc,CAACsC,KAAK;EAE5B;EAEAG,YAAYA,CAAA;IACR,OAAO,IAAI,CAACpU,UAAU,CAACqU,sBAAsB,CAAC,IAAI,CAAC5Y,UAAU,CAAC;EAClE;EAEAizB,cAAcA,CAAA;IACV,IAAI,IAAI,CAACn1B,yBAAyB,EAAE,EAAE;MAClC,IAAI,CAAC6G,MAAM,CAACuB,QAAQ,CAChB,CACIlK,4DAAW,CAACiJ,aAAa,GAAG,wBAAwB,EACpD,MAAM,EACN,IAAI,CAACjF,UAAU,CAACgG,GAAG,CAACC,EAAE,CACzB,EACD;QAAEE,WAAW,EAAE;UAAE+f,OAAO,EAAE,IAAI,CAACA;QAAO;MAAE,CAAE,CAC7C;MACD;;EAER;EAEA+N,QAAQA,CAAA;IACJ,OAAO,IAAI,CAACT,WAAW,GAAG,IAAI,CAACA,WAAW,GAAGj3B,mEAAa,CAAC4sB,mBAAmB;EAClF;EAEAzjB,kBAAkBA,CAAA;IACdjJ,+DAAQ,CAACmJ,mBAAmB,CAAC,IAAI,CAAClB,KAAK,CAAC,CAACmB,SAAS,CAAEC,MAAM,IAAI;MAC1D,IAAI,CAACnB,MAAM,CAACuB,QAAQ,CAChB,CACIlK,4DAAW,CAACiJ,aAAa,GAAG,wBAAwB,EACpD,KAAK,EACL,IAAI,CAACjF,UAAU,CAACgG,GAAG,CAACC,EAAE,CACzB,EACD;QAAEE,WAAW,EAAEL;MAAM,CAAE,CAC1B;IACL,CAAC,CAAC;EACN;EAEA6xB,kBAAkBA,CAAC33B,UAAgB;IAC/B;IACA,IAAI,CAAC,IAAI,CAAC6zB,qBAAqB,EAAE,EAAE;MAC/B,IAAI,CAACwC,kBAAkB,GAAG,IAAI,CAACr2B,UAAU,CAACgG,GAAG;;IAGjD;IACA,IAAI,CAACE,QAAQ,CAAClG,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;EACpC;EAEAqvB,UAAUA,CAAA;IACN,IAAI,CAACsC,qBAAqB,CAAC,IAAI,CAAC53B,UAAU,CAACgG,GAAG,CAACC,EAAE,CAAC;EACtD;EAEM2xB,qBAAqBA,CAAC3xB,EAAU;IAAA,IAAAkE,KAAA;IAAA,OAAAC,wLAAA;MAClC,IAAI,CAAC,CAACnE,EAAE,EAAE;QACN,IAAI;UACAkE,KAAI,CAACnK,UAAU,GAAG,OACRmK,KAAI,CAACnG,iBAAiB,CAACwkB,aAAa,CAACviB,EAAE,CAAC,CAAC0E,SAAS,EAAE,EAC5D3K,UAAU;SACf,CAAC,OAAO2Q,CAAC,EAAE;UACR,IAAIA,CAAC,CAACnE,MAAM,KAAKjQ,mEAAa,CAACs7B,cAAc,EAAE;YAC3C,MAAMpuB,KAAK,SAASU,KAAI,CAACkb,SAAS,CAAC0B,UAAU,EAAE,CAACpc,SAAS,EAAE;YAC3D,IAAIlB,KAAK,CAAC2d,UAAU,KAAK7qB,mEAAa,CAAC8qB,cAAc,EAAE;cACnDld,KAAI,CAACvF,KAAK,CAAC0D,KAAK,CAACqI,CAAC,CAAC;aACtB,MAAM;cACHnU,gEAAU,CAACm6B,SAAS,CAACxsB,KAAI,CAACxF,MAAM,EAAEwF,KAAI,CAACmD,MAAM,EAAE,IAAI,CAAC;;;;OAInE,MAAM;QACHnD,KAAI,CAAC2tB,eAAe,CAACv7B,mEAAa,CAACksB,IAAI,CAAC;;MAE5Cte,KAAI,CAACpH,SAAS,GAAG,KAAK;MACtBoH,KAAI,CAAC4tB,iBAAiB,EAAE;MACxB5tB,KAAI,CAACxM,WAAW,GAAG,CAACsI,EAAE;IAAC;EAC3B;EAEA+xB,WAAWA,CAAA;IACP,IAAI,CAACC,WAAW,GAAG,IAAI;EAC3B;EAEAjE,QAAQA,CAAA;IACJ,OAAO,IAAI,CAACH,qBAAqB,EAAE,KAAK,CAAC,IAAI,CAACxnB,OAAO,IAAI,IAAI,CAACymB,YAAY,CAAC;EAC/E;EAEAra,iBAAiBA,CAAA;IACb,MAAM3B,OAAO,GAAG,IAAI,CAAC9W,UAAU,EAAE8W,OAAO;IACxC,OAAOA,OAAO,IAAI,CAACA,OAAO,CAAC4B,MAAM;EACrC;EAEQqf,iBAAiBA,CAAA;IACrB,IAAI,CAACvC,kBAAkB,CAAC0C,WAAW,CAAC,EAAE,CAAC;IACvC,IAAI,IAAI,CAACl4B,UAAU,CAACgG,GAAG,CAACC,EAAE,KAAK1J,mEAAa,CAACksB,IAAI,EAAE;MAC/C;;IAEJ,IAAI,CAACjkB,WAAW,CACX2zB,cAAc,CAAC,IAAI,CAACn4B,UAAU,CAACgG,GAAG,CAACC,EAAE,EAAE,KAAK,CAAC,CAC7CJ,SAAS,CAAEsD,IAAsB,IAAI;MAClC,MAAMwoB,IAAI,GAAGxoB,IAAI,CAACrC,KAAK,CAACsxB,OAAO,EAAE;MACjC,IAAIzG,IAAI,CAACpvB,MAAM,GAAG,CAAC,EAAE;QACjB,IAAI,CAAC8zB,kBAAkB,GAAG,IAAIvc,+DAAiB,CAC3C6X,IAAI,CAACA,IAAI,CAACpvB,MAAM,GAAG,CAAC,CAAC,CAACyD,GAAG,CAACuJ,IAAI,EAC9BoiB,IAAI,CAACA,IAAI,CAACpvB,MAAM,GAAG,CAAC,CAAC,CAACyD,GAAG,CAACC,EAAE,CAC/B;;MAEL,IAAI,CAACuvB,kBAAkB,CAAC0C,WAAW,CAACvG,IAAI,CAAC;IAC7C,CAAC,CAAC;EACV;EAEQ+E,UAAUA,CAAA;IAAA,IAAAhqB,MAAA;IACd;IACA,IAAI,CAAC4Y,UAAU,CAAC4C,mBAAmB,EAAE,CAACpD,IAAI,CACrCuT,OAAO,IAAI;MACR;MAEA,IAAI,CAAClQ,MAAM,GAAGkQ,OAAO,CAAClQ,MAAM;MAE5B;MACA,IAAI,CAAC4N,OAAO,GAAG,IAAI;MACnB;MACA,IAAI,CAACrxB,KAAK,CAACyB,WAAW,CAACN,SAAS;QAAA,IAAAyyB,IAAA,GAAAluB,wLAAA,CAAC,WAAOtE,MAAM,EAAI;UAC9C,MAAMyyB,KAAK,GAAGl8B,4DAAM,CAACm8B,gBAAgB,CAAC9rB,MAAI,CAAC5G,MAAM,EAAEA,MAAM,CAAC;UAC1D,IAAI2yB,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,CAACh2B,MAAM,KAAK,CAAC,IAAIg2B,KAAK,CAACI,QAAQ,EAAE;YACnDjsB,MAAI,CAAC5G,MAAM,GAAGA,MAAM;YACpB;;UAEJ4G,MAAI,CAAC5G,MAAM,GAAGA,MAAM;UACpB,IAAIA,MAAM,CAAC3I,KAAK,EAAE;YACduP,MAAI,CAAC8mB,WAAW,GAAG1tB,MAAM,CAAC3I,KAAK;WAClC,MAAM;YACHuP,MAAI,CAAC8mB,WAAW,GAAG9mB,MAAI,CAACL,OAAO,GACzB9P,mEAAa,CAAC4sB,mBAAmB,GACjC5sB,mEAAa,CAAC2sB,kBAAkB;;UAE1Cxc,MAAI,CAACksB,KAAK,GAAG9yB,MAAM,CAAC8yB,KAAK;UAEzB,IAAI9yB,MAAM,CAACogB,OAAO,EAAE;YAChBxZ,MAAI,CAACwZ,OAAO,GAAGpgB,MAAM,CAACogB,OAAO,KAAK,OAAO;;UAG7C;UACA,MAAMjgB,EAAE,GAAGH,MAAM,CAACG,EAAE;UACpB,IAAIH,MAAM,CAACmxB,UAAU,EAAE;YACnBvqB,MAAI,CAAClI,WAAW,CACXmJ,eAAe,CAAC7H,MAAM,CAACmxB,UAAU,CAAC,CAClCpxB,SAAS,CAAEsD,IAAyB,IAAI;cACrCuD,MAAI,CAACuqB,UAAU,GAAG,CAAC9tB,IAAI,CAACyE,IAAI,CAAC;YACjC,CAAC,CAAC;;UAEV,MAAMlB,MAAI,CAACkrB,qBAAqB,CAAC3xB,EAAE,CAAC;UAEpC;;;;;;;;;;;;;;UAcA;QACJ,CAAC;QAAA,iBAAA4yB,EAAA;UAAA,OAAAP,IAAA,CAAAQ,KAAA,OAAAC,SAAA;QAAA;MAAA,IAAC;IACN,CAAC,EACAzwB,KAAK,IAAI;MACN;MACA,IAAI,CAAC1D,KAAK,CAAC0D,KAAK,CAACA,KAAK,CAAC;MACvB,IAAI,CAACytB,OAAO,GAAG,IAAI;IACvB,CAAC,CACJ;EACL;EAEQ+B,eAAeA,CAAC7xB,EAAU;IAC9B,IAAI,CAACjG,UAAU,GAAG,IAAI8pB,0DAAI,EAAE;IAC5B,IAAI,CAAC9pB,UAAU,CAACgG,GAAG,GAAG;MAAEC;IAAE,CAAa;IACvC,IAAI,CAACjG,UAAU,CAACmH,OAAO,GAAG,CAAC5K,mEAAa,CAAC8K,qBAAqB,CAAC;EACnE;EAEQgwB,eAAeA,CAAA;IACnB,MAAM2B,CAAC,GAAG,IAAI,CAACh5B,UAAU;IACzB,OAAOg5B,CAAC,IAAI,IAAI,IAAIA,CAAC,CAAChzB,GAAG,IAAI,IAAI,GAAGgzB,CAAC,CAAChzB,GAAG,CAACC,EAAE,GAAG,IAAI;EACvD;EAAC,QAAA6M,EAAA;qBAlbQ2e,wBAAwB,EAAA90B,gEAAA,CAAAqW,kGAAA,GAAArW,gEAAA,CAAAuW,2EAAA,GAAAvW,gEAAA,CAAAuW,0EAAA,GAAAvW,gEAAA,CAAAuW,0EAAA,GAAAvW,gEAAA,CAAAuW,oEAAA,GAAAvW,gEAAA,CAAAyW,mEAAA,GAAAzW,gEAAA,CAAAuW,4EAAA,GAAAvW,gEAAA,CAAA4W,4EAAA,GAAA5W,gEAAA,CAAAuW,qEAAA,GAAAvW,gEAAA,CAAA8W,4DAAA,GAAA9W,gEAAA,CAAA8W,oDAAA,GAAA9W,gEAAA,CAAAuW,6EAAA,GAAAvW,gEAAA,CAAAyW,yEAAA,GAAAzW,gEAAA,CAAAuW,wEAAA,GAAAvW,gEAAA,CAAAuW,6EAAA,GAAAvW,gEAAA,CAAAgX,kDAAA,GAAAhX,gEAAA,CAAAyW,oEAAA,GAAAzW,gEAAA,CAAAuW,+DAAA;EAAA;EAAA,QAAA6B,EAAA;UAAxB0c,wBAAwB;IAAAzc,SAAA;IAAAC,cAAA,WAAAmkB,wCAAAjkB,EAAA,EAAAC,GAAA,EAAAC,QAAA;MAAA,IAAAF,EAAA;;;;;;;;;;;;;;;;;;;iFAFtB,CAACd,yEAAwB,CAAC;IAAA6c,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAgI,kCAAAlkB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCvDzCxY,wDAAA,qBAKe;QACfA,yDAAA,IAAA28B,iDAAA,2BAsCgB;QAChB38B,6DAAA,aAAsC;QACpCA,yDAAA,IAAA48B,gDAAA,0BAQgB;QAEhB58B,iEAAA,MASgB;QAChBA,yDAAA,IAAA68B,+CAAA,gCAAA78B,qEAAA,CAAiE;QACnEA,2DAAA,EAAM;QAENA,6DAAA,aAAqD;QAMjDA,yDAAA,IAAA88B,0DAAA,oCAM0B;QAE1B98B,6DAAA,cAA+B;QAC7BA,yDAAA,KAAA+8B,4CAAA,sBAMU;QACV/8B,yDAAA,KAAAg9B,uCAAA,iBAEK;QACLh9B,yDAAA,KAAAi9B,sCAAA,gBAYI;QACJj9B,yDAAA,KAAAk9B,iDAAA,2BAuCe;QACjBl9B,2DAAA,EAAM;QAERA,wDAAA,qBAA+C;QACjDA,2DAAA,EAAM;QACNA,yDAAA,KAAAm9B,gDAAA,iCAAAn9B,qEAAA,CAiCc;;;;;;QAvLZA,yDAAA,YAAAyY,GAAA,CAAA2kB,eAAA,CAA2B;QAW1Bp9B,wDAAA,GAAgB;QAAhBA,yDAAA,SAAAyY,GAAA,CAAA4e,QAAA,GAAgB;QAmCdr3B,wDAAA,GAA8D;QAA9DA,yDAAA,SAAAyY,GAAA,CAAA4kB,4BAAA,KAAA5kB,GAAA,CAAAye,qBAAA,GAA8D;QAU/Dl3B,wDAAA,GAAwF;QAAxFA,yDAAA,sBAAAs9B,OAAA,GAAA7kB,GAAA,CAAA4kB,4BAAA,cAAAC,OAAA,KAAA7G,SAAA,GAAA6G,OAAA,GAAAC,GAAA,CAAwF,4BAAAv9B,8DAAA,KAAAoZ,GAAA,EAAAX,GAAA,CAAApV,UAAA,GAAAo6B,OAAA,GAAAhlB,GAAA,CAAA+d,oBAAA,kBAAA/d,GAAA,CAAA+d,oBAAA,CAAAlnB,WAAA,cAAAmuB,OAAA,KAAAhH,SAAA,GAAAgH,OAAA,SAAAhlB,GAAA,CAAArS,SAAA,EAAAqS,GAAA,CAAAoe,WAAA;QAY3E72B,wDAAA,GAAmC;QAAnCA,yDAAA,oCAAmC;QAEhDA,wDAAA,GAA6C;QAA7CA,0DAAA,6BAAAyY,GAAA,CAAA4e,QAAA,GAA6C,kCAAA5e,GAAA,CAAAye,qBAAA,MAAAze,GAAA,CAAArS,SAAA;QAM1CpG,wDAAA,GAA0D;QAA1DA,yDAAA,UAAAyY,GAAA,CAAArS,SAAA,KAAAqS,GAAA,CAAAye,qBAAA,MAAAze,GAAA,CAAApV,UAAA,CAA0D;QAQxDrD,wDAAA,GAA2B;QAA3BA,yDAAA,SAAAyY,GAAA,CAAArS,SAAA,KAAAqS,GAAA,CAAA2gB,OAAA,CAA2B;QAMzBp5B,wDAAA,GAA6B;QAA7BA,yDAAA,SAAAyY,GAAA,CAAAye,qBAAA,GAA6B;QAI/Bl3B,wDAAA,GAA2B;QAA3BA,yDAAA,UAAAyY,GAAA,CAAArS,SAAA,IAAAqS,GAAA,CAAA/I,OAAA,CAA2B;QAYf1P,wDAAA,GAAgB;QAAhBA,yDAAA,SAAAyY,GAAA,CAAApV,UAAA,CAAgB;QA0CxBrD,wDAAA,GAAuB;QAAvBA,yDAAA,wBAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpJsB;AACA;AACqC;AACE;AACd;AACF;AACT;AACT;AACsC;;AAc/F,MAAO69B,qBAAqB;EAAA,QAAAl3B,CAAA;qBAArBk3B,qBAAqB;EAAA;EAAA,QAAA1nB,EAAA;UAArB0nB;EAAqB;EAAA,QAAAzlB,EAAA;cAHpBulB,+DAAY,EAAED,+DAAS,EAAExI,0FAA4B;EAAA;;;sHAGtD2I,qBAAqB;IAAAC,YAAA,GAV1Bp3B,wGAA0B,EAC1B+U,0GAA0B,EAC1BkL,4FAAsB,EACtB+M,8GAA4B,EAC5BoB,iFAAwB,EACxB8I,wEAAgB;IAAAxI,OAAA,GAEVuI,+DAAY,EAAED,+DAAS,EAAExI,0FAA4B;IAAAG,OAAA,GACrD5Z,0GAA0B,EAAE/U,wGAA0B;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACrB0B;AAChD;AAEG;;;;;;;;;;ICI3C1G,4DAAA,iBAKC;IADCA,wDAAA,mBAAAi+B,6EAAA;MAAAj+B,2DAAA,CAAAyZ,IAAA;MAAA,MAAAykB,SAAA,GAAAl+B,2DAAA,GAAAie,SAAA;MAAA,MAAAzc,MAAA,GAAAxB,2DAAA;MAAA,OAASA,yDAAA,CAAAwB,MAAA,CAAAgf,KAAA,CAAA0d,SAAA,CAAa;IAAA,EAAC;IAEvBl+B,oDAAA,GACF;;IAAAA,0DAAA,EAAS;;;;IALPA,wDAAA,kBAAuB;IAIvBA,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,OAAAk+B,SAAA,CAAAxtB,KAAA,OACF;;;;;;IACA1Q,4DAAA,iBAKC;IADCA,wDAAA,mBAAAm+B,6EAAA;MAAAn+B,2DAAA,CAAAo+B,IAAA;MAAA,MAAAF,SAAA,GAAAl+B,2DAAA,GAAAie,SAAA;MAAA,MAAA1D,OAAA,GAAAva,2DAAA;MAAA,OAASA,yDAAA,CAAAua,OAAA,CAAAiG,KAAA,CAAA0d,SAAA,CAAa;IAAA,EAAC;IAEvBl+B,oDAAA,GACF;;IAAAA,0DAAA,EAAS;;;;IALPA,wDAAA,kBAAuB;IAIvBA,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,OAAAk+B,SAAA,CAAAxtB,KAAA,OACF;;;;;IAhBF1Q,4DAAA,mBAAoE;IAClEA,wDAAA,IAAAq+B,oDAAA,oBAOS;IACTr+B,wDAAA,IAAAs+B,oDAAA,qBAOS;IACXt+B,0DAAA,EAAM;;;;IAbDA,uDAAA,GAAgC;IAAhCA,wDAAA,SAAAk+B,SAAA,CAAAttB,KAAA,eAAgC;IAQhC5Q,uDAAA,GAAiC;IAAjCA,wDAAA,SAAAk+B,SAAA,CAAAttB,KAAA,gBAAiC;;;;;IAbxC5Q,4DAAA,aAA8C;IAC5CA,wDAAA,IAAAu+B,2CAAA,iBAiBM;IACRv+B,0DAAA,EAAM;;;;IAlBoBA,uDAAA,GAAa;IAAbA,wDAAA,YAAAkB,MAAA,CAAAs9B,QAAA,CAAa;;;;;;IAmBvCx+B,4DAAA,cAA8E;IAAnBA,wDAAA,mBAAAy+B,2DAAA;MAAAz+B,2DAAA,CAAAye,IAAA;MAAA,MAAAzb,OAAA,GAAAhD,2DAAA;MAAA,OAASA,yDAAA,CAAAgD,OAAA,CAAA07B,MAAA,EAAQ;IAAA,EAAC;IAC3E1+B,4DAAA,YAA0B;IAAAA,oDAAA,YAAK;IAAAA,0DAAA,EAAI;;;;;IA1BvCA,4DAAA,UAAmF;IAE5DA,oDAAA,GAAuB;;IAAAA,0DAAA,EAAM;IAChDA,4DAAA,aAAqB;IAAAA,oDAAA,GAA6C;;IAAAA,0DAAA,EAAM;IAE1EA,wDAAA,IAAA2+B,qCAAA,iBAmBM;IACN3+B,wDAAA,IAAA4+B,qCAAA,iBAEM;IACR5+B,0DAAA,EAAM;;;;IA5BDA,oEAAA,qBAAA6Z,MAAA,CAAAilB,QAAA,KAAsC;IAAe9+B,wDAAA,mBAAA6Z,MAAA,CAAAvJ,KAAA,CAAwB;IAE3DtQ,uDAAA,GAAuB;IAAvBA,+DAAA,CAAAA,yDAAA,OAAA6Z,MAAA,CAAAvJ,KAAA,EAAuB;IACrBtQ,uDAAA,GAA6C;IAA7CA,+DAAA,CAAAA,yDAAA,QAAA6Z,MAAA,CAAAtJ,OAAA,EAAAsJ,MAAA,CAAAklB,iBAAA,EAA6C;IAEtC/+B,uDAAA,GAAc;IAAdA,wDAAA,SAAA6Z,MAAA,CAAA2kB,QAAA,CAAc;IAoBtCx+B,uDAAA,GAAkB;IAAlBA,wDAAA,SAAA6Z,MAAA,CAAAmlB,YAAA,CAAkB;;;ADZ1B;;;;;;AAMM,MAAOpB,gBAAgB;EAd7B12B,YAAA;IAeI;;;;IAIS,KAAA83B,YAAY,GAAG,KAAK;IAC7B;;;IAGS,KAAAF,QAAQ,GAAG,QAAQ;IAe5B;;;;IAIU,KAAAG,QAAQ,GAAG,IAAIrgC,uDAAY,EAAE;;EAKvC,IAAa4R,OAAOA,CAACA,OAAuB;IACxC,IAAI,CAACA,OAAO,EAAE;MACV,IAAI,CAACguB,QAAQ,GAAG,IAAI;MACpB;;IAEJ,IAAI,CAACA,QAAQ,GAAGhuB,OAAO,CAACirB,OAAO,EAAE;IACjClnB,UAAU,CAAC,MAAK;MACZ,IAAI,IAAI,CAAC2qB,cAAc,EAAE,IAAI,CAACA,cAAc,CAACtN,aAAa,CAACI,KAAK,EAAE;IACtE,CAAC,EAAE,EAAE,CAAC;EACV;EAIOxR,KAAKA,CAAC2e,GAAiB;IAC1BA,GAAG,CAAC7tB,QAAQ,EAAE;EAClB;EACOotB,MAAMA,CAAA;IACT,IAAI,CAACO,QAAQ,CAAC/tB,IAAI,EAAE;EACxB;EAAC,QAAAvK,CAAA;qBAnDQi3B,gBAAgB;EAAA;EAAA,QAAAznB,EAAA;UAAhBynB,gBAAgB;IAAAvlB,SAAA;IAAA8D,SAAA,WAAAijB,uBAAA5mB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;;;;;;;QCnB7BxY,wDAAA,IAAAq/B,+BAAA,mBA4BM;;;QA5BuCr/B,wDAAA,SAAAyY,GAAA,CAAAnI,KAAA,CAAW;;;;;;iBDSxC,CACRytB,4DAAO,CAAC,eAAe,EAAEC,2DAAW,CAACsB,aAAa,CAACtB,2DAAW,CAACuB,mBAAmB,CAAC,CAAC;IACvF;EAAA;;;;;;;;;;;;;;;;;;;;AEViD;AAEK;AAEJ;;;AAGjD,MAAOxoB,cAAc;EAGvB7P,YAAoBu4B,OAAgB;IAAhB,KAAAA,OAAO,GAAPA,OAAO;EAAY;EAEvC;;;;;EAKAlqB,IAAIA,CAAmB;IACnBjF,KAAK;IACLC,OAAO;IACPC;EAAO,CAKV;IACG,OAAO,IAAIkvB,OAAO,CAAEC,OAAO,IAAI;MAC3B,IAAI,IAAI,CAACC,UAAU,EAAE;QACjB,IAAI,CAACA,UAAU,CAACC,OAAO,EAAE;;MAE7B,IAAI,CAACD,UAAU,GAAG,IAAI,CAACH,OAAO,CAAC1tB,MAAM,EAAE;MACvC,MAAM+tB,MAAM,GAAG,IAAIN,gEAAe,CAAC5B,gEAAgB,CAAC;MACpD,MAAMmC,YAAY,GAAG,IAAI,CAACH,UAAU,CAACI,MAAM,CAACF,MAAM,CAAC;MACnDC,YAAY,CAACE,QAAQ,CAAC3vB,KAAK,GAAGA,KAAK;MACnCyvB,YAAY,CAACE,QAAQ,CAAC1vB,OAAO,GAAGA,OAAO;MACvCwvB,YAAY,CAACE,QAAQ,CAACzvB,OAAO,GAAGA,OAAO,CAACvE,GAAG,CACtCi0B,MAAM,IACH,IAAI9iB,6DAAY,CAAC8iB,MAAM,CAACxvB,KAAK,EAAEwvB,MAAM,CAACvvB,MAAM,EAAE,MAAK;QAC/CgvB,OAAO,CAACO,MAAM,CAACxvB,KAAK,CAAC;QACrB,IAAI,CAACkvB,UAAU,CAACC,OAAO,EAAE;MAC7B,CAAC,CAAC,CACT;MACDE,YAAY,CAACE,QAAQ,CAACjB,YAAY,GAAG,IAAI;MACzCe,YAAY,CAACE,QAAQ,CAAChB,QAAQ,CAAC/1B,SAAS,CAAC,MAAM,IAAI,CAAC02B,UAAU,CAACC,OAAO,EAAE,CAAC;MACzEE,YAAY,CAACI,SAAS,CAAC,MAAK;QACxB,IAAI,CAACP,UAAU,GAAG,IAAI;QACtBD,OAAO,CAAC,IAAI,CAAC;MACjB,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA;;;EAGA3qB,KAAKA,CAAA;IACD,IAAI,CAAC4qB,UAAU,EAAEC,OAAO,EAAE;EAC9B;EAAC,QAAAl5B,CAAA;qBAjDQoQ,cAAc,EAAA/W,sDAAA,CAAAqW,yDAAA;EAAA;EAAA,QAAAF,EAAA;WAAdY,cAAc;IAAAupB,OAAA,EAAdvpB,cAAc,CAAAwpB,IAAA;IAAAC,UAAA,EADD;EAAM","sources":["./src/app/pages/collections-page/collection-content/collection-content.component.ts","./src/app/pages/collections-page/collection-content/collection-content.component.html","./src/app/pages/collections-page/collection-info-bar/collection-info-bar.component.ts","./src/app/pages/collections-page/collection-info-bar/collection-info-bar.component.html","./src/app/pages/collections-page/collection-new/collection-new.component.ts","./src/app/pages/collections-page/collection-new/collection-new.component.html","./src/app/pages/collections-page/collection-proposals/collection-proposals.component.ts","./src/app/pages/collections-page/collection-proposals/collection-proposals.component.html","./src/app/pages/collections-page/collections-page-routing.module.ts","./src/app/pages/collections-page/collections-page.component.ts","./src/app/pages/collections-page/collections-page.component.html","./src/app/pages/collections-page/collections-page.module.ts","./src/app/pages/collections-page/infobar/infobar.component.ts","./src/app/pages/collections-page/infobar/infobar.component.html","./src/app/pages/collections-page/infobar/infobar.service.ts"],"sourcesContent":["import {\n    Component,\n    ContentChild,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n    AuthenticationService,\n    ConfigService,\n    MdsService,\n    Node,\n    ProposalNode,\n} from 'ngx-edu-sharing-api';\nimport {\n    ActionbarComponent,\n    CanDrop,\n    DragData,\n    DropSource,\n    FetchEvent,\n    InteractionType,\n    ListEventInterface,\n    ListItem,\n    ListItemSort,\n    ListSortConfig,\n    NodeClickEvent,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    NodesRightMode,\n    OptionItem,\n    OptionsHelperDataService,\n    Scope,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\nimport { Subject, forkJoin as observableForkJoin, forkJoin } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as EduData from '../../../core-module/core.module';\nimport {\n    CollectionReference,\n    ConfigurationHelper,\n    LoginResult,\n    NodeWrapper,\n    Permission,\n} from '../../../core-module/core.module';\nimport { Helper } from '../../../core-module/rest/helper';\nimport { MdsHelper } from '../../../core-module/rest/mds-helper';\nimport { RequestObject } from '../../../core-module/rest/request-object';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestHelper } from '../../../core-module/rest/rest-helper';\nimport { RestCollectionService } from '../../../core-module/rest/services/rest-collection.service';\nimport { RestNodeService } from '../../../core-module/rest/services/rest-node.service';\nimport { UIService } from '../../../core-module/rest/services/ui.service';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { Toast } from '../../../services/toast';\nimport { UIHelper } from '../../../core-ui-module/ui-helper';\nimport { DialogsService } from '../../../features/dialogs/dialogs.service';\nimport {\n    ManagementEvent,\n    ManagementEventType,\n} from '../../../features/management-dialogs/management-dialogs.component';\nimport { LoadingScreenService } from '../../../main/loading-screen/loading-screen.service';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\nimport { BridgeService } from '../../../services/bridge.service';\nimport { CollectionInfoBarComponent } from '../collection-info-bar/collection-info-bar.component';\nimport { InfobarService } from '../infobar/infobar.service';\n\n@Component({\n    selector: 'es-collection-content',\n    templateUrl: 'collection-content.component.html',\n    styleUrls: ['collection-content.component.scss'],\n})\nexport class CollectionContentComponent implements OnChanges, OnInit, OnDestroy {\n    private static DEFAULT_REQUEST = {\n        sortBy: [\n            RestConstants.CCM_PROP_COLLECTION_PINNED_STATUS,\n            RestConstants.CCM_PROP_COLLECTION_PINNED_ORDER,\n            RestConstants.CM_MODIFIED_DATE,\n        ],\n        sortAscending: [false, true, false],\n    };\n    referencesDisplayType = NodeEntriesDisplayType.Grid;\n    private readonly destroyed$ = new Subject<void>();\n    readonly ROUTER_PREFIX = UIConstants.ROUTER_PREFIX;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly InteractionType = InteractionType;\n    readonly Scope = Scope;\n\n    @Input() collection: Node;\n    /**\n     * you can subscribe to the clickItem event in case if you want to use emitter\n     */\n    @Input() interactionType: InteractionType = InteractionType.DefaultActionLink;\n    @Input() scope: string;\n    /**\n     * reference to the infobar component\n     * this is required if you want to interconnect it to have support for editing & managing the collection\n     * (the options service is inited in the content component)\n     */\n    @Input() getInfobar: () => CollectionInfoBarComponent;\n    @Input() isRootLevel: boolean;\n    @Input() createAllowed: () => boolean;\n    @Output() clickItem = new EventEmitter<NodeClickEvent<Node | CollectionReference>>();\n    @ContentChild('empty') emptyRef: TemplateRef<unknown>;\n    @ViewChild('actionbarReferences') actionbarReferences: ActionbarComponent;\n    @ViewChild('listReferences') listReferences: ListEventInterface<CollectionReference>;\n\n    private mainNavUpdateTrigger = new Subject<void>();\n    sortCollectionColumns: ListItemSort[] = [\n        new ListItemSort('NODE', RestConstants.CM_PROP_TITLE),\n        new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n        new ListItemSort('NODE', RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION, 'ascending'),\n    ];\n    createSubCollectionOptionItem = new OptionItem('OPTIONS.NEW_COLLECTION', 'layers', () =>\n        this.onCreateCollection(),\n    );\n    sortReferences: ListSortConfig = {\n        active: null,\n        direction: 'asc',\n        columns: [\n            // new ListItemSort('NODE', RestConstants.LOM_PROP_TITLE),\n            new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n            new ListItemSort('NODE', RestConstants.CM_PROP_C_CREATED),\n            new ListItemSort(\n                'NODE',\n                RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION,\n                'ascending',\n            ),\n        ],\n    };\n    sortCollections: ListSortConfig = {\n        active: null,\n        direction: 'asc',\n        columns: [\n            new ListItemSort('NODE', RestConstants.CM_PROP_TITLE),\n            new ListItemSort('NODE', RestConstants.CM_PROP_C_CREATED),\n            new ListItemSort('NODE', RestConstants.CM_MODIFIED_DATE),\n            new ListItemSort(\n                'NODE',\n                RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION,\n                'ascending',\n            ),\n        ],\n    };\n    addMaterialSearchOptionItem = new OptionItem('OPTIONS.SEARCH_OBJECT', 'redo', () => {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            params.addToCollection = this.collection.ref.id;\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'search'], {\n                queryParams: params,\n            });\n        });\n    });\n    addMaterialBinaryOptionItem = new OptionItem('OPTIONS.ADD_OBJECT', 'cloud_upload', () => {\n        this.mainNavService.getMainNav().topBar.createMenu.openUploadSelect();\n    });\n    dataSourceCollections = new NodeDataSource<Node>();\n    dataSourceReferences = new NodeDataSource<CollectionReference>();\n    collectionsColumns: ListItem[] = [];\n    referencesColumns: ListItem[] = [];\n    private loadingTask = this.loadingScreen.addLoadingTask({ until: this.destroyed$ });\n\n    private contentNode: Node;\n    permissions: Permission[];\n    login: LoginResult;\n\n    constructor(\n        private authenticationService: AuthenticationService,\n        private bridge: BridgeService,\n        private collectionService: RestCollectionService,\n        private configurationService: ConfigService,\n        private dialogs: DialogsService,\n        private infobar: InfobarService,\n        private loadingScreen: LoadingScreenService,\n        private mainNavService: MainNavService,\n        private mdsService: MdsService,\n        private nodeHelper: NodeHelperService,\n        private nodeService: RestNodeService,\n        private optionsService: OptionsHelperDataService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private toast: Toast,\n        private translation: TranslateService,\n        private uiService: UIService,\n    ) {\n        this.sortCollectionColumns[this.sortCollectionColumns.length - 1].mode = 'ascending';\n        // this.collectionSortEmitter.subscribe((sort: SortEvent) => this.setCollectionSort(sort));\n        // this.collectionCustomSortEmitter.subscribe((state: boolean) => state ? this.toggleCollectionsOrder() : this.changeCollectionsOrder());\n        // this.referenceSortEmitter.subscribe((sort: SortEvent) => this.setReferenceSort(sort));\n        // this.referenceCustomSortEmitter.subscribe((state: boolean) => state ? this.toggleReferencesOrder() : this.changeReferencesOrder());\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'title'));\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'info'));\n        this.collectionsColumns.push(new ListItem('COLLECTION', 'scope'));\n\n        this.mainNavService.getDialogs().onEvent.subscribe((event: ManagementEvent) => {\n            if (event.event === ManagementEventType.AddCollectionNodes) {\n                if (event.data.collection.ref.id === this.collection.ref.id) {\n                    this.listReferences.addVirtualNodes(event.data.references);\n                }\n            }\n        });\n        this.authenticationService\n            .observeLoginInfo()\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe((login) => {\n                this.login = login;\n                this.addMaterialBinaryOptionItem.isEnabled = login.toolPermissions.includes(\n                    RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_FILES,\n                );\n                this.createSubCollectionOptionItem.isEnabled = login.toolPermissions.includes(\n                    RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS,\n                );\n            });\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed$.next();\n        this.destroyed$.complete();\n    }\n\n    async ngOnInit() {\n        const mdsSets = await ConfigurationHelper.getAvailableMds(\n            RestConstants.HOME_REPOSITORY,\n            this.mdsService,\n            this.configurationService,\n        );\n        const set = await this.mdsService\n            .getMetadataSet({ metadataSet: mdsSets[0].id })\n            .toPromise();\n        this.referencesColumns = MdsHelper.getColumns(\n            this.translation,\n            set,\n            'collectionReferences',\n        );\n\n        this.optionsService.clearComponents(this.actionbarReferences);\n        this.registerMainNav();\n        this.mainNavUpdateTrigger.next();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.collection.currentValue) {\n            this.dataSourceCollections.reset();\n            this.dataSourceReferences.reset();\n\n            this.createSubCollectionOptionItem.name =\n                'OPTIONS.' + (this.isRootLevel ? 'NEW_COLLECTION' : 'NEW_SUB_COLLECTION');\n            if (this.isRootLevel) {\n                // display root collections with tabs\n\n                // Use hardcoded sorting for root collection.\n                this.sortCollections.active = RestConstants.CM_MODIFIED_DATE;\n                this.sortCollections.direction = 'desc';\n                // To respect sort configuration of the mds, we would need to wait for it here.\n                //\n                // const sort = metadataSet.sorts.find(sort => sort.id === 'collections');\n                // this.sortCollections.active = sort?.default?.sortBy ?? RestConstants.CM_MODIFIED_DATE;\n                // this.sortCollections.direction = sort?.default?.sortAscending ? 'asc' : 'desc';\n                this.refreshContent();\n            } else {\n                // load metadata of collection\n                this.dataSourceCollections.isLoading = true;\n                this.dataSourceReferences.isLoading = true;\n                // set the collection and load content data by refresh\n                const orderCollections =\n                    this.collection.properties[\n                        RestConstants.CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE\n                    ];\n                this.sortCollections.active =\n                    orderCollections?.[0] || RestConstants.CM_MODIFIED_DATE;\n\n                this.sortCollections.direction =\n                    orderCollections?.[0] === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION\n                        ? 'asc'\n                        : orderCollections?.[1] === 'true'\n                        ? 'asc'\n                        : 'desc';\n\n                const refMode = this.collection.collection.orderMode;\n                const refAscending = this.collection.collection.orderAscending;\n                // cast old order mode to new parameter\n                this.sortReferences.active = ((refMode ===\n                RestConstants.COLLECTION_ORDER_MODE_CUSTOM\n                    ? RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION\n                    : refMode) || RestConstants.CM_MODIFIED_DATE) as any;\n                this.sortReferences.direction =\n                    this.sortReferences.active === RestConstants.COLLECTION_ORDER_MODE_CUSTOM\n                        ? 'asc'\n                        : refAscending\n                        ? 'asc'\n                        : 'desc';\n                this.mainNavUpdateTrigger.next();\n                this.dataSourceCollections.isLoading = false;\n                this.setOptionsCollection();\n                this.refreshContent();\n                if (\n                    this.collection.access.indexOf(RestConstants.ACCESS_CHANGE_PERMISSIONS) !== -1\n                ) {\n                    this.nodeService\n                        .getNodePermissions(this.collection.ref.id)\n                        .subscribe((permissions) => {\n                            this.permissions =\n                                permissions.permissions.localPermissions.permissions.concat(\n                                    permissions.permissions.inheritedPermissions,\n                                );\n                        });\n                }\n            }\n        }\n    }\n\n    isUserAllowedToEdit(collection: Node) {\n        return RestHelper.isUserAllowedToEdit(collection);\n    }\n\n    isAllowedToEditCollection() {\n        if (this.isRootLevel) {\n            return !this.login?.isGuest; //this.tabSelected === RestConstants.COLLECTIONSCOPE_MY\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n    onCreateCollection() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'new',\n                    this.collection.ref.id,\n                ],\n                { queryParams: params },\n            );\n        });\n    }\n    canDropOnCollectionBreadcrumbs = (dropData: DragData<Node | 'HOME'>): CanDrop => {\n        const nodes = dropData.draggedNodes;\n        const target = dropData.target;\n        if (target === 'HOME') {\n            const accept =\n                dropData.action === 'move' &&\n                nodes[0].aspects.indexOf(RestConstants.CCM_ASPECT_COLLECTION) !== -1 &&\n                this.nodeHelper.getNodesRight(nodes, RestConstants.ACCESS_WRITE);\n            return {\n                accept,\n                denyExplicit: !accept,\n            };\n        }\n        if (\n            nodes[0].ref.id === (target as Node).ref.id ||\n            (target as Node).ref.id === this.collection.ref.id ||\n            (nodes[0].collection && dropData.action === 'copy')\n        ) {\n            return {\n                accept: false,\n            };\n        }\n        // do not allow to move anything else than editorial collections into editorial collections (if the source is a collection)\n        if (nodes[0].collection?.hasOwnProperty('childCollectionsCount')) {\n            if (\n                (nodes[0].collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL &&\n                    (target as Node).collection.type !== RestConstants.COLLECTIONTYPE_EDITORIAL) ||\n                (nodes[0].collection.type !== RestConstants.COLLECTIONTYPE_EDITORIAL &&\n                    (target as Node).collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL)\n            ) {\n                return {\n                    accept: false,\n                };\n            }\n        }\n        if (\n            (dropData.action === 'copy' &&\n                !this.nodeHelper.getNodesRight(\n                    nodes,\n                    RestConstants.ACCESS_CC_PUBLISH,\n                    NodesRightMode.Effective,\n                )) ||\n            (dropData.action === 'move' &&\n                !this.nodeHelper.getNodesRight(\n                    nodes,\n                    RestConstants.ACCESS_WRITE,\n                    NodesRightMode.Local,\n                ))\n        ) {\n            return {\n                accept: false,\n            };\n        }\n\n        return {\n            accept: this.nodeHelper.getNodesRight(\n                [target],\n                RestConstants.ACCESS_WRITE,\n                NodesRightMode.Local,\n            ),\n        };\n    };\n\n    canDropOnCollection = (dropData: DragData<Node>): CanDrop => {\n        return this.canDropOnCollectionBreadcrumbs(dropData);\n    };\n\n    canDropOnRef = (dragData: DragData<CollectionReference>): CanDrop => {\n        // do not allow to drop here\n        return {\n            accept: false,\n        };\n    };\n\n    dropOnRef = (target: Node, source: DropSource<CollectionReference>) => {\n        return;\n    };\n    dropOnCollection = (target: Node | 'HOME', source: DropSource<Node>) => {\n        if (source.element[0] === target) {\n            return;\n        }\n        this.toast.showProgressSpinner();\n        if (source.element[0].mediatype === 'collection') {\n            if (source.mode === 'copy') {\n                this.toast.error(null, 'INVALID_OPERATION');\n                this.toast.closeProgressSpinner();\n                return;\n            }\n            this.nodeService\n                .moveNode(\n                    (target as Node)?.ref?.id || RestConstants.COLLECTIONHOME,\n                    source.element[0].ref.id,\n                )\n                .subscribe(\n                    () => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                    (error) => {\n                        this.handleError(error);\n                        this.toast.closeProgressSpinner();\n                    },\n                );\n        } else {\n            if (source.mode === 'copy') {\n                UIHelper.addToCollection(\n                    this.nodeHelper,\n                    this.collectionService,\n                    this.router,\n                    this.bridge,\n                    target as Node,\n                    source.element,\n                    false,\n                    (nodes) => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                );\n            } else if (source.mode === 'move') {\n                forkJoin(\n                    source.element.map((toMove) =>\n                        this.nodeService.moveNode(\n                            (target as Node)?.ref?.id || RestConstants.COLLECTIONHOME,\n                            toMove.ref.id,\n                        ),\n                    ),\n                ).subscribe(\n                    () => {\n                        this.toast.closeProgressSpinner();\n                        this.refreshContent();\n                    },\n                    (error) => {\n                        this.handleError(error);\n                        this.toast.closeProgressSpinner();\n                    },\n                );\n            } else {\n                this.toast.error(null, 'INVALID_OPERATION');\n            }\n        }\n    };\n    private handleError(error: any) {\n        if (error.status === RestConstants.DUPLICATE_NODE_RESPONSE) {\n            this.toast.error(null, 'COLLECTIONS.ERROR_NODE_EXISTS');\n        } else {\n            this.toast.error(error);\n        }\n    }\n\n    async onContentClick(event: NodeClickEvent<CollectionReference | ProposalNode>): Promise<void> {\n        this.contentNode = event.element;\n        if (event.element.type === RestConstants.CCM_TYPE_COLLECTION_PROPOSAL) {\n            this.clickElementEvent(event);\n        } else if ((event.element as CollectionReference).originalId == null) {\n            const dialogRef = await this.dialogs.openGenericDialog({\n                title: 'COLLECTIONS.ORIGINAL_MISSING',\n                message: 'COLLECTIONS.ORIGINAL_MISSING_INFO',\n                buttons: [\n                    ...(this.isAllowedToDeleteNodes([event.element])\n                        ? [{ label: 'OPTIONS.REMOVE_REF', config: { color: 'standard' as const } }]\n                        : []),\n                    { label: 'COLLECTIONS.OPEN_MISSING', config: { color: 'primary' } },\n                ],\n            });\n            dialogRef.afterClosed().subscribe((response) => {\n                if (response === 'OPTIONS.REMOVE_REF') {\n                    this.deleteFromCollection();\n                } else if (response === 'COLLECTIONS.OPEN_MISSING') {\n                    this.clickElementEvent(event);\n                }\n            });\n        } else {\n            this.clickElementEvent(event);\n        }\n    }\n\n    private clickElementEvent(event: NodeClickEvent<CollectionReference | ProposalNode>) {\n        if (this.interactionType === InteractionType.DefaultActionLink) {\n            this.nodeService\n                .getNodeMetadata(event.element.ref.id)\n                .subscribe((data: NodeWrapper) => {\n                    this.contentNode = data.node;\n                    this.router.navigate([\n                        UIConstants.ROUTER_PREFIX + 'render',\n                        event.element.ref.id,\n                    ]);\n                });\n        } else {\n            this.clickItem.emit(event);\n        }\n    }\n\n    private isAllowedToDeleteNodes(nodes: Node[]) {\n        return (\n            this.isAllowedToDeleteCollection() ||\n            this.nodeHelper.getNodesRight(nodes, RestConstants.ACCESS_DELETE)\n        );\n    }\n    isAllowedToDeleteCollection(): boolean {\n        if (this.isRootLevel) {\n            return false;\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_DELETE);\n    }\n\n    private deleteFromCollection(callback: Function = null) {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .removeFromCollection(this.contentNode.ref.id, this.collection.ref.id)\n            .subscribe(\n                () => {\n                    if (!('proposal' in this.collection)) {\n                        this.toast.toast('COLLECTIONS.REMOVED_FROM_COLLECTION');\n                    }\n                    this.toast.closeProgressSpinner();\n                    this.refreshContent();\n                    if (callback) {\n                        callback();\n                    }\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    private registerMainNav(): void {\n        this.mainNavService.setMainNavConfig({\n            title: 'COLLECTIONS.TITLE',\n            currentScope: 'collections',\n            onCreate: (nodes) => this.addNodesToCollection(nodes),\n        });\n        this.mainNavService.onConnectorCreated\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe((node) => this.addNodesToCollection([node]));\n        this.mainNavUpdateTrigger.pipe(takeUntil(this.destroyed$)).subscribe(async () => {\n            this.mainNavService.patchMainNavConfig({\n                create: {\n                    allowed: this.createAllowed(),\n                    allowBinary: !this.isRootLevel && (await this.isAllowedToEditCollection()),\n                    parent: this.collection ?? null,\n                },\n            });\n        });\n    }\n\n    private refreshContent() {\n        this.dataSourceCollections.reset();\n        this.dataSourceReferences.reset();\n        this.listReferences?.getSelection().clear();\n        this.dataSourceCollections.isLoading = true;\n        this.dataSourceReferences.isLoading = true;\n\n        // set correct scope\n        const request: RequestObject = Helper.deepCopy(CollectionContentComponent.DEFAULT_REQUEST);\n        if (this.sortCollections?.active) {\n            request.sortBy = [this.sortCollections.active];\n\n            request.sortAscending = [this.sortCollections.direction === 'asc'];\n        } else {\n            console.warn('Sort for collections is not defined in the mds!');\n        }\n        // when loading child collections, we load all of them\n        if (!this.isRootLevel) {\n            request.count = RestConstants.COUNT_UNLIMITED;\n        } else {\n            // on root level, obey pinned order if collections are pinned\n            request.sortBy = [\n                RestConstants.CCM_PROP_COLLECTION_PINNED_STATUS,\n                RestConstants.CCM_PROP_COLLECTION_PINNED_ORDER,\n                ...request.sortBy,\n            ];\n            request.sortAscending = [false, true, ...request.sortAscending];\n        }\n        this.collectionService\n            .getCollectionSubcollections(\n                this.collection.ref.id,\n                this.scope,\n                [],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe(\n                (collection) => {\n                    // transfere sub collections and content\n                    this.dataSourceCollections.setData(\n                        collection.collections,\n                        collection.pagination,\n                    );\n                    this.dataSourceCollections.isLoading = false;\n                    if (this.isRootLevel) {\n                        this.finishCollectionLoading();\n                        return;\n                    }\n                    const requestRefs = this.getReferencesRequest();\n                    requestRefs.count = null;\n                    this.collectionService\n                        .getCollectionReferences(\n                            this.collection.ref.id,\n                            [RestConstants.ALL],\n                            requestRefs,\n                            this.collection.ref.repo,\n                        )\n                        .subscribe((refs) => {\n                            this.dataSourceReferences.setData(refs.references, refs.pagination);\n                            this.dataSourceReferences.isLoading = false;\n                            this.finishCollectionLoading();\n                        });\n                },\n                (error: any) => {\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    isMobile() {\n        return this.uiService.isMobile();\n    }\n    async setReferenceSort(sort: ListSortConfig) {\n        const diff = Helper.getKeysWithDifferentValues(this.sortReferences, sort);\n        this.sortReferences = sort;\n        // auto activate the custom sorting when the users switch to \"custom order\"\n        if (diff.includes('active')) {\n            this.sortReferences.customSortingInProgress =\n                this.sortReferences.active === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION;\n        }\n        this.toggleReferencesOrder();\n        if (this.sortReferences.customSortingInProgress) {\n            await this.loadMoreReferences({\n                reset: true,\n                amount: RestConstants.COUNT_UNLIMITED,\n                offset: 0,\n            });\n        }\n        if (diff.includes('customSortingInProgress') && sort.customSortingInProgress) {\n            return;\n        }\n\n        try {\n            await this.nodeService\n                .editNodeProperty(\n                    this.collection.ref.id,\n                    RestConstants.CCM_PROP_COLLECTION_ORDER_MODE,\n                    [sort.active, (sort.direction === 'asc') + ''],\n                )\n                .toPromise();\n            if (sort.active !== RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n                this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_TYPE', {\n                    type: this.translation.instant('NODE.' + sort.active),\n                });\n            }\n        } catch (e) {\n            this.toast.error(e);\n        }\n        this.refreshContent();\n    }\n\n    private getReferencesRequest(): RequestObject {\n        return {\n            sortBy: [this.sortReferences.active],\n            sortAscending: [this.sortReferences.direction === 'asc'],\n        };\n    }\n\n    async loadMoreReferences(event: FetchEvent) {\n        if (!(await this.dataSourceReferences.hasMore()) || this.dataSourceReferences.isLoading) {\n            return;\n        }\n        const request = this.getReferencesRequest();\n        request.offset = event.offset ?? (await this.dataSourceReferences.getData()).length;\n        if (event.amount != null) {\n            request.count = event.amount;\n        }\n        if (event.reset) {\n            this.dataSourceReferences.reset();\n        }\n        this.dataSourceReferences.isLoading = true;\n        this.collectionService\n            .getCollectionReferences(\n                this.collection.ref.id,\n                [RestConstants.ALL],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe((refs) => {\n                this.dataSourceReferences.appendData(refs.references);\n                this.dataSourceReferences.isLoading = false;\n            });\n    }\n\n    async loadMoreCollections() {\n        if (!(await this.dataSourceCollections.hasMore()) || this.dataSourceCollections.isLoading) {\n            return;\n        }\n        const request: any = Helper.deepCopy(CollectionContentComponent.DEFAULT_REQUEST);\n        request.offset = (await this.dataSourceCollections.getData()).length;\n        this.dataSourceCollections.isLoading = true;\n        this.collectionService\n            .getCollectionSubcollections(\n                this.collection.ref.id,\n                this.scope,\n                [],\n                request,\n                this.collection.ref.repo,\n            )\n            .subscribe((refs) => {\n                this.dataSourceCollections.appendData(refs.collections);\n                this.dataSourceCollections.isLoading = false;\n            });\n    }\n\n    private finishCollectionLoading(callback?: () => void) {\n        this.mainNavService.getMainNav()?.refreshBanner();\n\n        // Cannot trivially reference the add button for the tutorial with\n        // current implementation of generic options.\n        //\n        // TODO: Decide whether to keep the tutorial as it was and implement a\n        // way to reference the option button if necessary.\n\n        // if (\n        //     this.getCollectionId() == RestConstants.ROOT &&\n        //     this.isAllowedToEditCollection()\n        // ) {\n        //     setTimeout(() => {\n        //         this.tutorialElement = this.listCollections.addElementRef;\n        //     });\n        // }\n        if (callback) {\n            callback();\n        }\n        setTimeout(() => {\n            this.setOptionsCollection();\n            this.listReferences?.initOptionsGenerator({\n                actionbar: this.actionbarReferences,\n                parent: this.collection,\n            });\n            if (!this.loadingTask.isDone) {\n                this.loadingTask.done();\n            }\n        });\n    }\n\n    deleteReference(content: EduData.CollectionReference | EduData.Node) {\n        this.contentNode = content;\n        this.deleteFromCollection();\n    }\n\n    async setCollectionSort(sort: ListSortConfig) {\n        this.sortCollections = sort;\n        try {\n            await this.nodeService\n                .editNodeProperty(\n                    this.collection.ref.id,\n                    RestConstants.CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE,\n                    [this.sortCollections.active, (this.sortCollections.direction === 'asc') + ''],\n                )\n                .toPromise();\n        } catch (e) {\n            this.toast.error(e);\n        }\n        this.refreshContent();\n        if (sort.active !== RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n            this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_TYPE', {\n                type: this.translation.instant('NODE.' + sort.active),\n            });\n        }\n        if (this.sortCollections.active === RestConstants.CCM_PROP_COLLECTION_ORDERED_POSITION) {\n            void this.toggleCollectionsOrder();\n        } else {\n            this.infobar.close();\n        }\n    }\n\n    private setOptionsCollection() {\n        this.optionsService.setData({\n            scope: Scope.CollectionsCollection,\n            activeObjects: [this.collection],\n        });\n        this.optionsService.initComponents(this.getInfobar()?.actionbar, this.listReferences);\n        this.optionsService.refreshComponents();\n    }\n\n    async toggleCollectionsOrder() {\n        if (this.sortCollections.customSortingInProgress) {\n            const response = await this.infobar.open({\n                title: 'COLLECTIONS.ORDER_COLLECTIONS',\n                message: 'COLLECTIONS.ORDER_COLLECTIONS_INFO',\n                buttons: [{ label: 'SAVE', config: { color: 'primary' } }],\n            });\n            console.log('response', response);\n            if (response === 'SAVE') {\n                return this.changeCollectionsOrder();\n            } else {\n                this.sortCollections.customSortingInProgress = false;\n            }\n        } else {\n            this.infobar.close();\n        }\n        this.refreshContent();\n    }\n\n    async toggleReferencesOrder() {\n        if (this.sortReferences.customSortingInProgress) {\n            const response = await this.infobar.open({\n                title: 'COLLECTIONS.ORDER_ELEMENTS',\n                message: 'COLLECTIONS.ORDER_ELEMENTS_INFO',\n                buttons: [{ label: 'SAVE', config: { color: 'primary' } }],\n            });\n            this.sortReferences.customSortingInProgress = false;\n            if (response === 'SAVE') {\n                void this.changeReferencesOrder();\n                this.listReferences.getSelection().clear();\n            } else {\n                this.refreshContent();\n            }\n        } else {\n            this.infobar.close();\n        }\n    }\n\n    addNodesToCollection(nodes: Node[], allowDuplicate: boolean | 'ignore' = false) {\n        this.toast.showProgressSpinner();\n        UIHelper.addToCollection(\n            this.nodeHelper,\n            this.collectionService,\n            this.router,\n            this.bridge,\n            this.collection,\n            nodes,\n            false,\n            () => {\n                this.refreshContent();\n                this.toast.closeProgressSpinner();\n            },\n            allowDuplicate,\n        );\n    }\n\n    private async changeReferencesOrder() {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .setOrder(\n                this.collection.ref.id,\n                RestHelper.getNodeIds(await this.dataSourceReferences.getData()),\n            )\n            .subscribe(\n                () => {\n                    this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_CUSTOM');\n                    this.toast.closeProgressSpinner();\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    private async changeCollectionsOrder() {\n        this.toast.showProgressSpinner();\n        this.collectionService\n            .setOrder(\n                this.collection.ref.id,\n                RestHelper.getNodeIds(await this.dataSourceCollections.getData()),\n            )\n            .subscribe(\n                () => {\n                    this.sortCollections.customSortingInProgress = false;\n                    this.toast.toast('COLLECTIONS.TOAST.SORT_SAVED_CUSTOM');\n                    this.toast.closeProgressSpinner();\n                },\n                (error: any) => {\n                    this.toast.closeProgressSpinner();\n                    this.toast.error(error);\n                },\n            );\n    }\n\n    canDelete(node: EduData.CollectionReference) {\n        return RestHelper.hasAccessPermission(node, 'Delete');\n    }\n\n    isDeleted(node: CollectionReference) {\n        return (\n            node.aspects.includes(RestConstants.CCM_ASPECT_IO_REFERENCE) &&\n            !node.aspects.includes(RestConstants.CCM_ASPECT_REMOTEREPOSITORY) &&\n            !node.originalId\n        );\n    }\n}\n","<div role=\"main\" esSkipTarget=\"MAIN_CONTENT\" class=\"collections-master-div\">\n  <section class=\"collections-cards-div\">\n    <div\n      class=\"collections-wrapper\"\n      [class.wrapper-empty]=\"dataSourceCollections.isEmpty()\"\n      [class.wrapper-edit]=\"isUserAllowedToEdit(collection)\"\n    >\n      <es-node-entries-wrapper\n        [dataSource]=\"dataSourceCollections\"\n        [elementInteractionType]=\"interactionType\"\n        [columns]=\"collectionsColumns\"\n        (clickItem)=\"clickItem.emit($event)\"\n        (fetchData)=\"loadMoreCollections()\"\n        [displayType]=\"NodeEntriesDisplayType.SmallGrid\"\n        [globalOptions]=\"createAllowed() ? [createSubCollectionOptionItem] : []\"\n        [dragDrop]=\"{\n          dragAllowed: isAllowedToEditCollection(),\n          dropAllowed: canDropOnCollection,\n          dropped: dropOnCollection\n        }\"\n        [sort]=\"{\n          active: sortCollections.active,\n          direction: sortCollections.direction,\n          customSortingInProgress: sortCollections.customSortingInProgress,\n          columns: sortCollections.columns,\n          allowed:\n            !isMobile() &&\n            dataSourceCollections.getData()?.length > 1 &&\n            isUserAllowedToEdit(collection) &&\n            !sortReferences?.customSortingInProgress\n        }\"\n        (sortChange)=\"setCollectionSort($event)\"\n      >\n        <ng-template #title>\n          <div class=\"heading-group\">\n            <h2\n              class=\"mat-heading-3\"\n              *ngIf=\"isAllowedToEditCollection() || !dataSourceCollections.isEmpty()\"\n            >\n              <ng-container *ngIf=\"isRootLevel\">{{\n                'COLLECTIONS.TAB.' + scope + '_LONG' | translate\n              }}</ng-container>\n              <ng-container *ngIf=\"!isRootLevel\">{{\n                'COLLECTION.INFO_REFERENCES_MULTI' | translate\n              }}</ng-container>\n            </h2>\n          </div>\n        </ng-template>\n        <ng-template #empty>\n          <div\n            *ngIf=\"!createAllowed()\"\n            class=\"collection-nocontent-container collection-nocontent-big\"\n          >\n            <ng-container *ngTemplateOutlet=\"emptyRef\"></ng-container>\n          </div>\n        </ng-template>\n      </es-node-entries-wrapper>\n      <div\n        *ngIf=\"\n          !isRootLevel &&\n          dataSourceCollections.isEmpty() &&\n          !dataSourceCollections.isLoading &&\n          isUserAllowedToEdit(collection)\n        \"\n      >\n        <div class=\"collection-nocontent-big\">\n          {{ 'COLLECTIONS.NO_SUBCOLLECTIONS' | translate }}\n        </div>\n        <div class=\"section-headline collection-nocontent-container\">\n          <div class=\"collection-nocontent-small\">\n            {{ 'COLLECTIONS.NO_SUBCOLLECTIONS_HINT' | translate }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n  <ng-container *ngIf=\"!isRootLevel\">\n    <es-collection-proposals\n      [collection]=\"collection\"\n      [canEdit]=\"isAllowedToEditCollection()\"\n      (onContentClick)=\"onContentClick($any($event))\"\n    ></es-collection-proposals>\n    <section class=\"collections-cards-div\" *ngIf=\"!isRootLevel\">\n      <es-actionbar\n        #actionbarReferences\n        class=\"actionbarMaterials\"\n        [numberOfAlwaysVisibleOptions]=\"1\"\n      ></es-actionbar>\n      <div\n        class=\"references-wrapper\"\n        [class.wrapper-table]=\"referencesDisplayType === NodeEntriesDisplayType.Table\"\n        [class.wrapper-empty]=\"dataSourceReferences.isEmpty()\"\n        [class.wrapper-edit]=\"isUserAllowedToEdit(collection)\"\n      >\n        <es-node-entries-wrapper\n          #listReferences\n          [elementInteractionType]=\"InteractionType.Emitter\"\n          [dataSource]=\"dataSourceReferences\"\n          [scope]=\"Scope.CollectionsReferences\"\n          [primaryInstance]=\"true\"\n          [columns]=\"referencesColumns\"\n          [(displayType)]=\"referencesDisplayType\"\n          [dragDrop]=\"{\n            dragAllowed: isAllowedToEditCollection(),\n            dropAllowed: canDropOnRef,\n            dropped: dropOnRef\n          }\"\n          [sort]=\"{\n            active: sortReferences.active,\n            direction: sortReferences.direction,\n            customSortingInProgress: sortReferences.customSortingInProgress,\n            columns: sortReferences.columns,\n            allowed:\n              !isMobile() &&\n              dataSourceReferences.getData()?.length > 1 &&\n              isUserAllowedToEdit(collection) &&\n              !sortCollections?.customSortingInProgress\n          }\"\n          (clickItem)=\"onContentClick($event)\"\n          (sortChange)=\"setReferenceSort($event)\"\n          [globalOptions]=\"\n            isUserAllowedToEdit(collection)\n              ? [addMaterialSearchOptionItem, addMaterialBinaryOptionItem]\n              : []\n          \"\n          (fetchData)=\"loadMoreReferences($event)\"\n        >\n          <ng-template #title>\n            <div class=\"content-header heading-group\">\n              <h2 class=\"mat-heading-3\">\n                {{ 'collections_content' | translate }}\n              </h2>\n            </div>\n          </ng-template>\n          <ng-template #overlay let-element=\"element\">\n            <div class=\"node-deleted\" *ngIf=\"isDeleted(element)\">\n              <div>\n                <i esIcon=\"delete\"></i>\n                <div class=\"headline\">{{ 'ORIGINAL_DELETED' | translate }}</div>\n                <div class=\"subline\">{{ 'ORIGINAL_DELETED_INFO' | translate }}</div>\n                <button\n                  mat-button\n                  color=\"primary\"\n                  (click)=\"\n                    deleteReference(element); $event.stopPropagation(); $event.preventDefault()\n                  \"\n                  *ngIf=\"canDelete(element)\"\n                >\n                  {{ 'ORIGINAL_DELETE' | translate }}\n                </button>\n              </div>\n            </div>\n          </ng-template>\n        </es-node-entries-wrapper>\n        <div\n          *ngIf=\"!dataSourceReferences.isLoading && dataSourceReferences.isEmpty()\"\n          class=\"section-headline collection-nocontent-container\"\n        >\n          <div class=\"collection-nocontent-big\">\n            {{ 'collections_noContentAvailable' | translate }}\n          </div>\n          <div class=\"collection-nocontent-small\" *ngIf=\"isUserAllowedToEdit(collection)\">\n            {{ 'collections_howToAddContent' | translate }}\n          </div>\n        </div>\n      </div>\n    </section>\n  </ng-container>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport { Node, NodeService, NodeStats } from 'ngx-edu-sharing-api';\nimport { RestHelper } from '../../../core-module/rest/rest-helper';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { Permission } from '../../../core-module/rest/data-object';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { ActionbarComponent, ColorHelper, PreferredColor } from 'ngx-edu-sharing-ui';\nimport { MdsViewerComponent } from '../../../features/mds/mds-viewer/mds-viewer.component';\n\n@Component({\n    selector: 'es-collection-info-bar',\n    templateUrl: 'collection-info-bar.component.html',\n    styleUrls: ['collection-info-bar.component.scss'],\n})\nexport class CollectionInfoBarComponent implements OnChanges {\n    @ViewChild('actionbar') actionbar: ActionbarComponent;\n    @ViewChild('mds') mds: MdsViewerComponent;\n    @Input() collection: Node;\n    @Input() permissions: Permission[];\n    @Output() edit = new EventEmitter<void>();\n    stats: NodeStats;\n\n    constructor(private nodeHelper: NodeHelperService, private nodeService: NodeService) {}\n\n    async ngOnChanges(changes: SimpleChanges) {\n        if (changes.collection?.currentValue) {\n            if (this.collection.access.includes(RestConstants.ACCESS_CHANGE_PERMISSIONS)) {\n                this.stats = await this.nodeService.getStats(this.collection.ref.id).toPromise();\n            }\n        }\n    }\n\n    isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.collection?.collection?.color) ===\n            PreferredColor.White\n        );\n    }\n\n    hasNonIconPreview(): boolean {\n        const preview = this.collection?.preview;\n        return preview && !preview.isIcon;\n    }\n\n    isAllowedToEditCollection() {\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n\n    getScopeInfo() {\n        return this.nodeHelper.getCollectionScopeInfo(this.collection);\n    }\n}\n","<div\n  role=\"complementary\"\n  [attr.aria-label]=\"'COLLECTIONS.DETAILS' | translate\"\n  class=\"collections-header\"\n  [class.dark-color]=\"isBrightColor()\"\n  [style.background-color]=\"collection?.collection?.color\"\n>\n  <div\n    class=\"card-collection-image-container\"\n    [class.card-collection-icon-container]=\"!hasNonIconPreview()\"\n    style=\"width: 100%\"\n  >\n    <div\n      *ngIf=\"!hasNonIconPreview()\"\n      style=\"width: 250px; height: 200px; margin-left: auto; margin-right: auto\"\n    >\n      <div class=\"card-image-icon-container\">\n        <div\n          class=\"card-image-icon-circle\"\n          [style.cursor]=\"isAllowedToEditCollection() ? 'pointer' : 'auto'\"\n          (click)=\"edit.emit()\"\n        >\n          <i esIcon=\"layers\"></i>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"hasNonIconPreview()\" class=\"card-image-icon-container\">\n      <img\n        role=\"presentation\"\n        class=\"blurred-image\"\n        [src]=\"collection | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true } | async\"\n      />\n      <img\n        *ngIf=\"collection?.preview?.url\"\n        [src]=\"collection | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true } | async\"\n        class=\"collection-header-image\"\n        role=\"presentation\"\n      />\n    </div>\n    <!-- Making the image area clickable poses a violation of accessibility rules. Merge\n    christopher/fix/image-click-areas to remove. -->\n    <div\n      *ngIf=\"isAllowedToEditCollection()\"\n      (click)=\"edit.emit()\"\n      role=\"presentation\"\n      class=\"big-edit-button\"\n    ></div>\n  </div>\n  <div\n    class=\"collections-header-textarea\"\n    [class.collections-header-textarea-bright]=\"isBrightColor()\"\n  >\n    <div class=\"collection-option\">\n      <es-actionbar\n        #actionbar\n        [numberOfAlwaysVisibleOptions]=\"1\"\n        [numberOfAlwaysVisibleOptionsMobile]=\"1\"\n        appearance=\"round\"\n        [style]=\"'flat'\"\n        [dropdownPosition]=\"'right'\"\n      ></es-actionbar>\n    </div>\n    <h1\n      esTitle\n      class=\"collection-new-preview-headline collections-header-texttop\"\n      style=\"overflow: hidden\"\n    >\n      {{ collection?.title }}\n    </h1>\n\n    <div\n      *ngIf=\"collection?.collection?.childCollectionsCount\"\n      class=\"collection-new-preview-subline collections-header-texttop\"\n    >\n      {{ collection.collection.childCollectionsCount }}\n      {{ 'COLLECTION.INFO_REFERENCES_MULTI' | translate }}\n    </div>\n    <div\n      *ngIf=\"collection?.collection?.childReferencesCount\"\n      class=\"collection-new-preview-subline collections-header-texttop\"\n    >\n      {{ collection.collection.childReferencesCount }}\n      {{ 'COLLECTION.INFO_CHILDS_MULTI' | translate }}\n    </div>\n\n    <div class=\"collection-new-preview-infoline\">\n      <i\n        esIcon=\"person\"\n        class=\"icon-bottom\"\n        [altText]=\"('COLLECTIONS.CREATOR' | translate) + ': '\"\n      ></i>\n      &nbsp;\n      <span *ngIf=\"!collection?.collection?.authorFreetext\">{{\n        collection.owner | authorityName\n      }}</span>\n      <span *ngIf=\"collection?.collection?.authorFreetext\">{{\n        collection.collection.authorFreetext\n      }}</span>\n    </div>\n\n    <div class=\"collection-new-preview-infoline\">\n      <i\n        [esIcon]=\"getScopeInfo().icon\"\n        class=\"icon-bottom\"\n        [altText]=\"('COLLECTIONS.SHARING_STATE' | translate) + ': '\"\n      ></i>\n      &nbsp;{{ 'COLLECTION.SCOPE.' + getScopeInfo().scopeName | translate }}\n    </div>\n    <div class=\"collection-permissions collection-label\"></div>\n    <div class=\"collections-metadata\">\n      <es-mds-viewer\n        #mds\n        *ngIf=\"collection?.properties\"\n        groupId=\"collection_sidebar\"\n        [data]=\"collection.properties\"\n        [headingLevel]=\"2\"\n      ></es-mds-viewer>\n    </div>\n\n    <ng-container *ngIf=\"collection?.access?.indexOf('ChangePermissions') !== -1 && permissions\">\n      <h2 class=\"collection-permissions collection-label\">\n        {{ 'COLLECTIONS.PERMISSIONS' | translate }}\n      </h2>\n      <div class=\"collection-permissions collection-content\">\n        <div *ngFor=\"let permission of permissions\">\n          <ng-container *ngIf=\"permission.authority.authorityType !== 'EVERYONE'\">\n            <es-user-avatar [user]=\"permission\" size=\"xsmall\"></es-user-avatar>\n            <span>{{\n              (permission.authority.authorityType === 'GROUP' ? permission.group : permission.user)\n                | authorityName\n            }}</span>\n          </ng-container>\n        </div>\n      </div>\n      <ng-container *ngIf=\"stats\">\n        <h2 class=\"collection-permissions collection-label\">\n          {{ 'COLLECTIONS.STATS.TOTAL' | translate }}\n        </h2>\n        <div class=\"collection-stats collection-content\">\n          {{ stats.total['VIEW_COLLECTION'] }}\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n","import {\n    ApplicationRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    ViewChild,\n} from '@angular/core';\n\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport {\n    ColorHelper,\n    DefaultGroups,\n    InteractionType,\n    ListItem,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    NodeEntriesWrapperComponent,\n    OptionItem,\n    PreferredColor,\n    TranslationsService,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\n\nimport * as EduData from '../../../core-module/core.module';\nimport {\n    ConfigurationHelper,\n    ConfigurationService,\n    DialogButton,\n    EventListener,\n    FrameEventsService,\n    IamGroups,\n    IamUser,\n    LocalPermissions,\n    Node,\n    NodeRef,\n    Permission,\n    RestCollectionService,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestMdsService,\n    RestMediacenterService,\n    RestNodeService,\n    TemporaryStorageService,\n    UIService,\n    User,\n} from '../../../core-module/core.module';\nimport { Toast } from '../../../services/toast';\nimport { ConfigService, Group } from 'ngx-edu-sharing-api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { UIHelper } from '../../../core-ui-module/ui-helper';\nimport { AuthorityNamePipe } from '../../../shared/pipes/authority-name.pipe';\nimport { BridgeService } from '../../../services/bridge.service';\nimport { NodeHelperService } from '../../../services/node-helper.service';\nimport { Observable, Subject } from 'rxjs';\nimport { PlatformLocation } from '@angular/common';\nimport { LoadingScreenService } from '../../../main/loading-screen/loading-screen.service';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\nimport { MdsEditorWrapperComponent } from '../../../features/mds/mds-editor/mds-editor-wrapper/mds-editor-wrapper.component';\nimport { Values } from '../../../features/mds/types/types';\nimport { DialogsService } from '../../../features/dialogs/dialogs.service';\nimport { ShareDialogResult } from '../../../features/dialogs/dialog-modules/share-dialog/share-dialog-data';\n\ntype Step = 'NEW' | 'GENERAL' | 'METADATA' | 'PERMISSIONS' | 'SETTINGS' | 'EDITORIAL_GROUPS';\n\n// component class\n@Component({\n    selector: 'es-collection-new',\n    templateUrl: 'collection-new.component.html',\n    styleUrls: ['collection-new.component.scss'],\n})\nexport class CollectionNewComponent implements EventListener, OnInit, OnDestroy {\n    @ViewChild('mds') mds: MdsEditorWrapperComponent;\n    @ViewChild('organizations') organizationsRef: NodeEntriesWrapperComponent<Group>;\n    readonly InteractionType = InteractionType;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    public hasCustomScope: boolean;\n    public COLORS: string[];\n    public DEFAULT_COLORS: string[] = [\n        '#975B5D',\n        '#692426',\n        '#E6B247',\n        '#A89B39',\n        '#699761',\n        '#32662A',\n        '#60998F',\n        '#29685C',\n        '#759CB7',\n        '#537997',\n        '#976097',\n        '#692869',\n    ];\n    public isLoading = true;\n    currentCollection: EduData.Node;\n    public newCollectionType: string;\n    public properties: Values = {};\n    user: User;\n    public mainnav = true;\n    permissions: LocalPermissions = null;\n    public canInvite: boolean;\n    public shareToAll: boolean;\n    public createEditorial = false;\n    public createCurriculum = false;\n    public createMediacenter = false;\n    public mediacenter: any;\n    public parentId: any;\n    public editId: any;\n    public editorialGroups = new NodeDataSource<Group>();\n    public editorialPublic = true;\n    public editorialColumns: ListItem[] = [\n        new ListItem('GROUP', RestConstants.AUTHORITY_DISPLAYNAME),\n    ];\n    imageData: string | SafeUrl = null;\n    private imageFile: File = null;\n    readonly STEP_NEW = 'NEW';\n    readonly STEP_GENERAL = 'GENERAL';\n    readonly STEP_METADATA = 'METADATA';\n    readonly STEP_PERMISSIONS = 'PERMISSIONS';\n    private STEP_SETTINGS = 'SETTINGS';\n    readonly STEP_EDITORIAL_GROUPS = 'EDITORIAL_GROUPS';\n    STEP_ICONS: { [step in Step]?: string } = {\n        GENERAL: 'edit',\n        METADATA: 'info_outline',\n        PERMISSIONS: 'group_add',\n        SETTINGS: 'settings',\n        EDITORIAL_GROUPS: 'star',\n    };\n    public newCollectionStep: Step = this.STEP_NEW;\n    availableSteps: Step[];\n    private parentCollection: EduData.Node;\n    private originalPermissions: LocalPermissions;\n    private permissionsInfo: ShareDialogResult;\n    private destroyed = new Subject<void>();\n    private loadingTask = this.loadingScreen.addLoadingTask({ until: this.destroyed });\n\n    @ViewChild('file') imageFileRef: ElementRef;\n    @ViewChild('authorFreetextInput') authorFreetextInput: ElementRef<HTMLInputElement>;\n    buttons: DialogButton[];\n    authorFreetext = false;\n    authorFreetextAllowed = false;\n    mdsSet: string;\n    imageOptions: OptionItem[];\n    imageWindow: Window;\n    editorialGroupsSelected: Group[] = [];\n\n    @HostListener('document:keydown', ['$event'])\n    handleKeyboardEvent(event: KeyboardEvent) {\n        if (event.code == 'Escape') {\n            event.preventDefault();\n            event.stopPropagation();\n            this.goBack();\n            return;\n        }\n    }\n    setCollection(collection: EduData.Node) {\n        return new Observable<void>((observer) => {\n            const id = collection.ref.id;\n            this.nodeService.getNodePermissions(id).subscribe((perm: EduData.NodePermissions) => {\n                this.mdsSet = collection.metadataset;\n                this.canInvite =\n                    this.canInvite &&\n                    RestHelper.hasAccessPermission(\n                        collection,\n                        RestConstants.ACCESS_CHANGE_PERMISSIONS,\n                    );\n                this.editorialPublic = perm.permissions.localPermissions?.permissions?.some(\n                    (p: Permission) =>\n                        p.authority?.authorityName === RestConstants.AUTHORITY_EVERYONE,\n                );\n                this.editId = id;\n                this.currentCollection = collection;\n                // cleanup irrelevant data\n                this.currentCollection.rating = null;\n                this.authorFreetext = this.currentCollection.collection.authorFreetext != null;\n                this.originalPermissions = perm.permissions.localPermissions;\n                this.properties = collection.properties;\n                this.newCollectionType = this.getTypeForCollection(this.currentCollection);\n                this.hasCustomScope = false;\n                this.newCollectionStep = this.STEP_GENERAL;\n                if (\n                    this.currentCollection.collection.scope ===\n                    RestConstants.COLLECTIONSCOPE_CUSTOM_PUBLIC\n                ) {\n                    this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                }\n                observer.next();\n                observer.complete();\n            });\n        });\n    }\n\n    onEvent(event: string, data: Node): void {\n        if (event === FrameEventsService.EVENT_APPLY_NODE) {\n            const imageData = data.preview?.data;\n            if (imageData) {\n                this.imageData = this.sanitizer.bypassSecurityTrustUrl(imageData);\n                this.updateImageOptions();\n                fetch(imageData)\n                    .then((res) => res.blob())\n                    .then((blob) => {\n                        this.imageFile = blob as File;\n                    });\n                this.ref.tick();\n            } else {\n                console.info(data);\n                this.toast.error(null, 'COLLECTIONS.TOAST.ERROR_IMAGE_APPLY');\n            }\n            this.imageWindow?.close();\n        }\n    }\n\n    constructor(\n        private collectionService: RestCollectionService,\n        private nodeService: RestNodeService,\n        private connector: RestConnectorService,\n        private nodeHelper: NodeHelperService,\n        private uiService: UIService,\n        private iamService: RestIamService,\n        private mediacenterService: RestMediacenterService,\n        private route: ActivatedRoute,\n        private mdsService: RestMdsService,\n        private eventService: FrameEventsService,\n        private router: Router,\n        private platformLocation: PlatformLocation,\n        private toast: Toast,\n        private bridge: BridgeService,\n        private temporaryStorage: TemporaryStorageService,\n        private zone: NgZone,\n        private sanitizer: DomSanitizer,\n        private configLegacy: ConfigurationService,\n        private configService: ConfigService,\n        private ref: ApplicationRef,\n        private translations: TranslationsService,\n        private translationService: TranslateService,\n        private loadingScreen: LoadingScreenService,\n        private mainNav: MainNavService,\n        private dialogs: DialogsService,\n    ) {\n        this.eventService.addListener(this, this.destroyed);\n        this.translations.waitForInit().subscribe(() => {\n            this.connector.isLoggedIn().subscribe((data) => {\n                this.mdsService.getSets().subscribe((mdsSets) => {\n                    const sets = ConfigurationHelper.filterValidMds(\n                        RestConstants.HOME_REPOSITORY,\n                        mdsSets.metadatasets,\n                        this.configService,\n                    );\n                    this.mdsSet = sets[0]?.id;\n\n                    this.COLORS = this.configLegacy.instant(\n                        'collections.colors',\n                        this.DEFAULT_COLORS,\n                    );\n                    if (data.statusCode != RestConstants.STATUS_CODE_OK) {\n                        this.toast.error(\n                            { message: 'loginData.statusCode was not ok', data },\n                            'TOOLPERMISSION_ERROR',\n                        );\n                        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n                            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                                queryParams: params,\n                            });\n                        });\n                        return;\n                    }\n                    this.canInvite = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_INVITE,\n                    );\n                    this.shareToAll = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES,\n                    );\n                    this.createEditorial = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    );\n                    this.createCurriculum = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_CURRICULUM,\n                    );\n                    this.mediacenterService.getMediacenters().subscribe((mediacenters) => {\n                        this.createMediacenter =\n                            mediacenters.filter((m) => m.administrationAccess).length === 1 &&\n                            this.connector.hasToolPermissionInstant(\n                                RestConstants.TOOLPERMISSION_INVITE,\n                            );\n                        if (this.createMediacenter) this.mediacenter = mediacenters[0];\n                    });\n                    this.authorFreetextAllowed = this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_CHANGE_OWNER,\n                    );\n\n                    this.iamService\n                        .getCurrentUserAsync()\n                        .then((user: IamUser) => (this.user = user.person));\n                    this.route.queryParams.subscribe((queryParams) => {\n                        this.mainnav = queryParams.mainnav !== 'false';\n                        this.route.params.subscribe((params) => {\n                            // get mode from route and validate input data\n                            let mode = params['mode'];\n                            let id = params['id'];\n                            if (queryParams.collection) {\n                                this.setParent(id, null);\n                                this.setCollection(JSON.parse(queryParams.collection)).subscribe(\n                                    () => {\n                                        this.updateAvailableSteps();\n                                        this.isLoading = false;\n                                        if (!this.loadingTask.isDone) {\n                                            this.loadingTask.done();\n                                        }\n                                    },\n                                );\n                            } else if (mode == 'edit') {\n                                this.collectionService.getCollection(id).subscribe((data) => {\n                                    this.nodeService\n                                        .getNodeMetadata(id, [RestConstants.ALL])\n                                        .subscribe((node: EduData.NodeWrapper) => {\n                                            this.setCollection(node.node).subscribe(() => {\n                                                this.updateAvailableSteps();\n                                                this.updateImageOptions();\n                                                this.isLoading = false;\n                                                if (!this.loadingTask.isDone) {\n                                                    this.loadingTask.done();\n                                                }\n                                            });\n                                        });\n                                });\n                            } else {\n                                if (id == RestConstants.ROOT) {\n                                    this.setParent(id, null);\n                                    return;\n                                }\n                                this.collectionService.getCollection(id).subscribe(\n                                    (data: EduData.CollectionWrapper) => {\n                                        this.setParent(id, data.collection);\n                                    },\n                                    (error: any) => {\n                                        this.setParent(id, null);\n                                    },\n                                );\n                            }\n                        });\n                    });\n                    if (\n                        this.connector.hasToolPermissionInstant(\n                            RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH,\n                        ) ||\n                        this.connector.hasToolPermissionInstant(\n                            RestConstants.TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE,\n                        )\n                    ) {\n                        this.editorialGroups.isLoading = true;\n                        this.iamService\n                            .searchGroups('*', true, RestConstants.GROUP_TYPE_EDITORIAL, '', {\n                                count: RestConstants.COUNT_UNLIMITED,\n                                sortBy: [RestConstants.CM_PROP_AUTHORITY_DISPLAYNAME],\n                                sortAscending: [true],\n                            })\n                            .subscribe((data: IamGroups) => {\n                                this.editorialGroups.setData(\n                                    data.groups as Group[],\n                                    data.pagination,\n                                );\n                                this.editorialGroups.isLoading = false;\n                            });\n                    }\n                });\n            });\n        });\n    }\n\n    ngOnInit(): void {\n        this.mainNav.setMainNavConfig({\n            title: 'COLLECTIONS.TITLE',\n            currentScope: 'collections',\n            additionalScope: 'edit',\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n\n    getShareStatus() {\n        if (this.permissions || this.originalPermissions) {\n            let perms = this.permissions || this.originalPermissions;\n            let type = RestConstants.COLLECTIONSCOPE_MY;\n            if (perms && perms.permissions) {\n                for (let perm of perms.permissions) {\n                    if (perm.authority.authorityName != this.user.authorityName) {\n                        type = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                    }\n                    if (perm.authority.authorityName == RestConstants.AUTHORITY_EVERYONE) {\n                        type = RestConstants.COLLECTIONSCOPE_ALL;\n                        break;\n                    }\n                }\n            }\n            return type;\n        } else {\n            return RestConstants.COLLECTIONSCOPE_MY;\n        }\n    }\n    private saveCollection() {\n        this.collectionService.updateCollection(this.currentCollection).subscribe(\n            () => {\n                this.navigateToCollectionId(this.currentCollection.ref.id);\n            },\n            (error: any) => {\n                this.nodeHelper.handleNodeError(this.currentCollection.title, error);\n                //this.toast.error(error)\n            },\n        );\n    }\n    private setPermissions(permissions: ShareDialogResult) {\n        if (permissions) {\n            this.permissionsInfo = permissions;\n            this.permissions = permissions.permissions;\n            this.permissions.inherited = false;\n            if (this.permissions.permissions && this.permissions.permissions.length) {\n                this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n                for (let permission of this.permissions.permissions) {\n                    if (!permission.hasOwnProperty('editable')) {\n                        permission.editable = true;\n                    }\n                }\n            }\n        }\n    }\n    async editPermissions(): Promise<void> {\n        if (this.permissions == null && !this.editId) {\n            this.permissions = new LocalPermissions();\n        }\n        let nodes: Node[] | string[];\n        if (this.editId) {\n            nodes = [this.editId];\n        } else {\n            const permissionsDummy = new EduData.Node();\n            permissionsDummy.title = this.currentCollection.title;\n            permissionsDummy.iconURL = this.connector.getThemeMimeIconSvg('collection.svg');\n            permissionsDummy.ref = {} as NodeRef;\n            permissionsDummy.aspects = [RestConstants.CCM_ASPECT_COLLECTION];\n            permissionsDummy.properties = {};\n            permissionsDummy.isDirectory = true;\n            nodes = [permissionsDummy];\n        }\n        const dialogRef = await this.dialogs.openShareDialog({\n            nodes,\n            sendMessages: true,\n            sendToApi: false,\n            currentPermissions: this.permissions,\n        });\n        dialogRef.afterClosed().subscribe((result) => this.setPermissions(result));\n    }\n    isNewCollection(): boolean {\n        return this.editId == null;\n    }\n\n    isEditCollection(): boolean {\n        return !this.isNewCollection();\n    }\n\n    newCollectionCancel(): void {\n        let id = this.parentId;\n        if (id == null) id = this.editId;\n        this.navigateToCollectionId(id);\n    }\n\n    setColor(color: string): void {\n        this.currentCollection.collection.color = color;\n    }\n\n    setColorByDirection(event: Event): void {\n        const rowLength = 6;\n        let index = this.COLORS.indexOf(this.currentCollection.collection.color);\n        switch ((event as KeyboardEvent).key) {\n            case 'ArrowUp':\n                index -= rowLength;\n                break;\n            case 'ArrowDown':\n                index += rowLength;\n                break;\n            case 'ArrowLeft':\n                index -= 1;\n                break;\n            case 'ArrowRight':\n                index += 1;\n                break;\n        }\n        if (index >= 0 && index < this.COLORS.length) {\n            this.setColor(this.COLORS[index]);\n            event.preventDefault();\n        }\n    }\n\n    imageDataChanged(event: any): void {\n        // get files and check if available\n        let files = event.target.files;\n        if (typeof files == 'undefined') {\n            return;\n        }\n        if (files.length <= 0) {\n            return;\n        }\n\n        // get first file\n        let file: File = files[0];\n\n        // check if file type is correct\n        let validType = false;\n        if (file.type.startsWith('image')) validType = true;\n        //if (file.type==\"image/jpeg\") validType = true;\n        //if (file.type==\"image/gif\") validType = true;\n        if (!validType) {\n            return;\n        }\n\n        // remember file for upload\n        this.imageFile = file;\n        this.imageData = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file));\n        this.updateImageOptions();\n    }\n    handleError(error: any) {\n        if (error.status == RestConstants.DUPLICATE_NODE_RESPONSE) {\n            this.toast.error(null, 'COLLECTIONS.TOAST.DUPLICATE_NAME');\n            return;\n        }\n        if (RestHelper.errorMessageContains(error, 'Invalid property value')) {\n            this.toast.error(null, 'COLLECTIONS.TOAST.INVALID_NAME');\n            return;\n        }\n        this.toast.error(error);\n    }\n    save(): void {\n        // input data optimize\n        if (!this.currentCollection.collection.description)\n            this.currentCollection.collection.description = '';\n        this.currentCollection.title = this.currentCollection.title.trim();\n        this.currentCollection.collection.description =\n            this.currentCollection.collection.description.trim();\n        if (\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            this.currentCollection.collection.type = this.newCollectionType;\n        } else {\n            this.currentCollection.collection.type = RestConstants.COLLECTIONTYPE_DEFAULT;\n        }\n        if (this.isEditCollection()) {\n            /*\n             *  EDIT\n             */\n\n            this.isLoading = true;\n            this.collectionService.updateCollection(this.currentCollection).subscribe(\n                () => {\n                    this.save2(this.currentCollection);\n                },\n                (error) => {\n                    this.isLoading = false;\n                    this.handleError(error);\n                },\n            );\n        } else {\n            /*\n             *  CREATE\n             */\n            this.isLoading = true;\n            this.collectionService\n                .createCollection(this.currentCollection, this.parentId)\n                .subscribe(\n                    (collection: EduData.CollectionWrapper) => {\n                        this.save2(collection.collection);\n                    },\n                    (error: any) => {\n                        this.isLoading = false;\n                        this.handleError(error);\n                    },\n                );\n        }\n    }\n    private saveImage(collection: EduData.Node): void {\n        if (this.imageData != null) {\n            this.collectionService\n                .uploadCollectionImage(collection.ref.id, this.imageFile, 'image/png')\n                .subscribe(\n                    () => {\n                        this.navigateToCollectionId(collection.ref.id);\n                    },\n                    (error) => {\n                        this.toast.error(null, 'COLLECTIONS.TOAST.ERROR_IMAGE_APPLY');\n                        this.navigateToCollectionId(collection.ref.id);\n                    },\n                );\n        } else if (collection.preview == null) {\n            this.collectionService.deleteCollectionImage(collection.ref.id).subscribe(() => {\n                this.navigateToCollectionId(collection.ref.id);\n            });\n        } else {\n            this.navigateToCollectionId(collection.ref.id);\n        }\n    }\n    setCollectionType(type: string) {\n        this.newCollectionType = type;\n        if (type === RestConstants.COLLECTIONSCOPE_MY) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_MY;\n        }\n        if (type === RestConstants.COLLECTIONSCOPE_ALL) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_ALL;\n        }\n        if (\n            type === RestConstants.COLLECTIONSCOPE_CUSTOM ||\n            type === RestConstants.COLLECTIONTYPE_EDITORIAL\n        ) {\n            this.currentCollection.collection.scope = RestConstants.COLLECTIONSCOPE_CUSTOM;\n        }\n        if (type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER) {\n            this.switchToAuthorFreetext();\n        }\n        this.updateAvailableSteps();\n        this.goToNextStep();\n    }\n    public getAvailableSteps(): Step[] {\n        let steps: Step[] = [];\n        steps.push(this.STEP_GENERAL);\n        if (\n            this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType == RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            steps.push(this.STEP_METADATA);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONSCOPE_CUSTOM && this.canInvite) {\n            steps.push(this.STEP_PERMISSIONS);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL) {\n            //steps.push(this.STEP_SETTINGS);\n        }\n        if (this.newCollectionType == RestConstants.COLLECTIONTYPE_EDITORIAL && this.canInvite) {\n            steps.push(this.STEP_EDITORIAL_GROUPS);\n        }\n        return steps;\n    }\n    public isLastStep() {\n        let pos = this.currentStepPosition();\n        return pos >= this.availableSteps.length - 1;\n    }\n    public async goToNextStep() {\n        if (this.newCollectionStep == this.STEP_GENERAL) {\n            if (!this.currentCollection.title) {\n                this.toast.error(null, 'COLLECTIONS.ENTER_NAME');\n                return;\n            }\n        }\n        if (this.newCollectionStep == this.STEP_METADATA) {\n            const props = await this.mds.getValues();\n            if (props == null) {\n                return;\n            }\n            this.properties = props;\n        }\n        if (this.isLastStep()) {\n            this.save();\n        } else {\n            const pos = this.currentStepPosition();\n            this.newCollectionStep = this.availableSteps[pos + 1];\n            // support for legacy mds\n            setTimeout(() => {\n                this.mds?.loadMds(true);\n            });\n            if (this.newCollectionStep == this.STEP_EDITORIAL_GROUPS) {\n                setTimeout(() => {\n                    this.editorialGroupsSelected = this.getEditoralGroups(\n                        this.originalPermissions.permissions,\n                    );\n                    this.organizationsRef.getSelection().select(...this.editorialGroupsSelected);\n                    this.organizationsRef\n                        .getSelection()\n                        .changed.subscribe(\n                            (change) => (this.editorialGroupsSelected = change.source.selected),\n                        );\n                });\n            }\n        }\n        this.updateButtons();\n    }\n    setCollectionGeneral() {}\n    currentStepPosition() {\n        return this.availableSteps.indexOf(this.newCollectionStep);\n    }\n    async goBack() {\n        if (this.newCollectionStep == this.STEP_METADATA) {\n            const props = await this.mds.getValues();\n            if (props != null) {\n                this.properties = props;\n            }\n        }\n        let pos = this.currentStepPosition();\n        if (pos == -1) {\n            this.navigateToCollectionId(this.parentId);\n        } else if (pos == 0) {\n            if (this.editId) {\n                this.navigateToCollectionId(this.editId);\n            } else if (\n                this.parentCollection &&\n                this.parentCollection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL\n            ) {\n                this.navigateToCollectionId(this.parentId);\n            } else {\n                this.newCollectionStep = this.STEP_NEW;\n            }\n        } else {\n            this.newCollectionStep = this.availableSteps[pos - 1];\n            // support for legacy mds\n            setTimeout(() => {\n                this.mds?.loadMds(true);\n            });\n        }\n        this.updateButtons();\n    }\n    navigateToCollectionId(id: string): void {\n        this.isLoading = false;\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            if (id !== RestConstants.ROOT) {\n                params.id = id;\n            }\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                queryParams: params,\n            });\n        });\n    }\n    private save2(collection: EduData.Node) {\n        if (\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            this.nodeService\n                .AddNodeAspects(collection.ref.id, [\n                    RestConstants.CCM_ASPECT_LOMREPLICATION,\n                    RestConstants.CCM_ASPECT_CCLOM_GENERAL,\n                ])\n                .subscribe(() => {\n                    this.nodeService\n                        .editNodeMetadata(collection.ref.id, this.properties)\n                        .subscribe(() => {\n                            this.save3(collection);\n                        });\n                });\n        } else {\n            this.save3(collection);\n        }\n    }\n    public isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.currentCollection.collection.color) ===\n            PreferredColor.White\n        );\n    }\n    private save3(collection: EduData.Node) {\n        if (this.newCollectionType == RestConstants.GROUP_TYPE_EDITORIAL) {\n            // user has access to editorial group but can't invite (strange setting but may happens)\n            if (!this.canInvite) {\n                this.save4(collection);\n                return;\n            }\n            this.permissions = this.getEditorialGroupPermissions();\n        }\n        if (\n            (this.newCollectionType == RestConstants.COLLECTIONSCOPE_CUSTOM ||\n                this.newCollectionType == RestConstants.GROUP_TYPE_EDITORIAL) &&\n            this.permissions &&\n            this.permissions.permissions\n        ) {\n            if (this.originalPermissions && this.originalPermissions.inherited) {\n            }\n            let permissions = RestHelper.copyAndCleanPermissions(\n                this.permissions.permissions,\n                this.originalPermissions ? this.originalPermissions.inherited : false,\n            );\n            this.nodeService\n                .setNodePermissions(\n                    collection.ref.id,\n                    permissions,\n                    this.permissionsInfo ? this.permissionsInfo.notify : false,\n                    this.permissionsInfo ? this.permissionsInfo.notifyMessage : null,\n                )\n                .subscribe(\n                    () => {\n                        this.save4(collection);\n                    },\n                    (error) => {\n                        this.toast.error(error);\n                        this.isLoading = false;\n                    },\n                );\n        } else {\n            this.save4(collection);\n        }\n    }\n\n    private getTypeForCollection(collection: EduData.Node) {\n        if (\n            collection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL ||\n            collection.collection.type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n        ) {\n            return collection.collection.type;\n        }\n        if (collection.collection.scope === RestConstants.COLLECTIONSCOPE_MY && !this.canInvite) {\n            return RestConstants.COLLECTIONSCOPE_MY;\n        }\n        if (\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_MY ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_ORGA ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_ALL ||\n            collection.collection.scope === RestConstants.COLLECTIONSCOPE_CUSTOM_PUBLIC\n        ) {\n            return RestConstants.COLLECTIONSCOPE_CUSTOM;\n        }\n        return collection.collection.scope;\n    }\n\n    private updateAvailableSteps() {\n        this.availableSteps = this.getAvailableSteps();\n        this.updateButtons();\n    }\n\n    private getEditorialGroupPermissions() {\n        const permissions = new LocalPermissions();\n        permissions.permissions = [];\n        if (this.editorialPublic) {\n            const pub = RestHelper.getAllAuthoritiesPermission();\n            pub.permissions = [RestConstants.PERMISSION_CONSUMER];\n            permissions.permissions.push(pub);\n        }\n        for (const group of this.editorialGroupsSelected) {\n            const perm = new Permission();\n            perm.authority = {\n                authorityName: group.authorityName,\n                authorityType: group.authorityType,\n            };\n            perm.permissions = [RestConstants.PERMISSION_COORDINATOR];\n            permissions.permissions.push(perm);\n        }\n        return permissions;\n    }\n\n    private getEditoralGroups(permissions: Permission[]) {\n        let list: Group[] = [];\n        for (let perm of permissions) {\n            for (let group of this.editorialGroups.getData()) {\n                if (group.authorityName == perm.authority.authorityName) {\n                    list.push(group);\n                }\n            }\n        }\n        return list;\n    }\n\n    private setParent(id: string, parent: EduData.Node) {\n        this.parentId = id;\n        this.parentCollection = parent;\n        this.currentCollection = new EduData.Node();\n        this.currentCollection.title = '';\n        this.currentCollection.collection = {\n            description: '',\n            color: this.COLORS[0],\n        } as any;\n        if (\n            this.parentCollection &&\n            this.parentCollection.collection.type === RestConstants.COLLECTIONTYPE_EDITORIAL\n        ) {\n            if (!this.createEditorial || !this.shareToAll) {\n                this.toast.error(\n                    this.createEditorial\n                        ? RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES\n                        : RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    'TOOLPERMISSION_ERROR',\n                );\n                window.history.back();\n                this.isLoading = false;\n                return;\n            }\n            this.setCollectionType(RestConstants.COLLECTIONTYPE_EDITORIAL);\n        }\n        this.updateAvailableSteps();\n        this.updateImageOptions();\n        this.isLoading = false;\n        if (!this.loadingTask.isDone) {\n            this.loadingTask.done();\n        }\n    }\n\n    private save4(collection: EduData.Node) {\n        // check if there are any nodes that should be added to this collection\n        const add: { nodes: EduData.Node[]; callback: EventEmitter<any> } =\n            this.temporaryStorage.pop(TemporaryStorageService.COLLECTION_ADD_NODES);\n        if (!add) {\n            this.saveImage(collection);\n            return;\n        }\n        UIHelper.addToCollection(\n            this.nodeHelper,\n            this.collectionService,\n            this.router,\n            this.bridge,\n            collection,\n            add.nodes,\n            false,\n            (references) => {\n                this.saveImage(collection);\n                add.callback?.emit({ collection, references });\n                return;\n            },\n        );\n    }\n\n    deleteImage() {\n        this.imageData = null;\n        this.imageFile = null;\n        this.imageFileRef.nativeElement.value = null;\n        this.currentCollection.preview = null;\n        this.updateImageOptions();\n    }\n\n    private updateButtons() {\n        /**\n         *  <a class=\"waves-effect btn\" tabindex=\"0\" (keyup.enter)=\"setCollectionGeneral()\" (click)=\"setCollectionGeneral()\">\n         <span>{{(isLastStep() ? 'SAVE' : 'NEXT') | translate }}</span>\n         </a>\n         <a class=\"waves-effect waves-light btn-flat\" tabindex=\"0\" (keyup.enter)=\"goBack()\" (click)=\"goBack()\">{{ 'BACK' | translate }}</a>\n\n         */\n        this.buttons = [\n            new DialogButton('BACK', { color: 'standard' }, () => this.goBack()),\n            new DialogButton(this.isLastStep() ? 'SAVE' : 'NEXT', { color: 'primary' }, () =>\n                this.goToNextStep(),\n            ),\n        ];\n    }\n\n    switchToAuthorFreetext() {\n        this.authorFreetextAllowed = this.connector.hasToolPermissionInstant(\n            RestConstants.TOOLPERMISSION_COLLECTION_CHANGE_OWNER,\n        );\n        this.authorFreetext = true;\n        this.currentCollection.collection.authorFreetext = new AuthorityNamePipe(\n            this.translationService,\n        ).transform(\n            this.newCollectionType === RestConstants.COLLECTIONTYPE_MEDIA_CENTER ||\n                this.currentCollection.collection.type === RestConstants.COLLECTIONTYPE_MEDIA_CENTER\n                ? this.mediacenter\n                : this.user,\n            null,\n        );\n        setTimeout(() => {\n            this.authorFreetextInput.nativeElement.focus();\n        });\n    }\n\n    cancelAuthorFreetext() {\n        this.authorFreetext = false;\n        this.currentCollection.collection.authorFreetext = null;\n    }\n\n    updateImageOptions() {\n        this.imageOptions = [\n            new OptionItem('COLLECTIONS.NEW.IMAGE.SEARCH', 'search', () => {\n                this.imageWindow = UIHelper.openSearchWithReurl(\n                    this.platformLocation,\n                    this.router,\n                    'WINDOW',\n                    { queryParams: { reurlCreate: false, reurlTypes: ['image'] } },\n                ) as Window;\n                /*this.route\n                r.navigate([], {\n                        relativeTo: this.route,\n                        queryParams: {\n                            collection: JSON.stringify(this.currentCollection)\n                        }\n                    }).then(() => {\n                    });*/\n            }),\n            new OptionItem('COLLECTIONS.NEW.IMAGE.UPLOAD', 'file_upload', () =>\n                this.imageFileRef.nativeElement.click(),\n            ),\n        ];\n        this.imageOptions[0].group = DefaultGroups.Edit;\n        this.imageOptions[1].group = DefaultGroups.Edit;\n        if (\n            this.imageData ||\n            (this.currentCollection.preview && !this.currentCollection.preview.isIcon)\n        ) {\n            this.imageOptions.push(\n                new OptionItem('COLLECTIONS.NEW.IMAGE.DELETE', 'delete', () => this.deleteImage()),\n            );\n            this.imageOptions[2].group = DefaultGroups.Delete;\n        }\n    }\n}\n","<div\n  role=\"main\"\n  esSkipTarget=\"MAIN_CONTENT\"\n  class=\"collections-master-div\"\n  [class.collections-master-div-mainnav]=\"mainnav\"\n>\n  <es-global-progress *ngIf=\"isLoading\"></es-global-progress>\n\n  <div *ngIf=\"!isLoading\" class=\"createContainer\">\n    <div class=\"createProgress\" *ngIf=\"newCollectionStep !== STEP_NEW\">\n      <div\n        *ngFor=\"let step of availableSteps; let i = index\"\n        (click)=\"i < currentStepPosition() ? (newCollectionStep = step) : null\"\n        [class.current]=\"step === newCollectionStep\"\n        [class.finished]=\"i < currentStepPosition()\"\n      >\n        <div class=\"circle\"></div>\n        <i [esIcon]=\"STEP_ICONS[step]\"></i>\n        <div class=\"label\">{{ 'COLLECTIONS.STEP.' + step | translate }}</div>\n        <div class=\"connection\"></div>\n      </div>\n      <div class=\"finish\">\n        <div class=\"circle\"></div>\n        <div class=\"label\">{{ 'COLLECTIONS.STEP.DONE' | translate }}</div>\n      </div>\n    </div>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_NEW\"\n      class=\"collection-new-container\"\n      width=\"normal\"\n      height=\"auto\"\n      modal=\"auto\"\n      title=\"{{ 'COLLECTIONS.CREATE_TYPE' | translate }}\"\n      (onCancel)=\"newCollectionCancel()\"\n    >\n      <div class=\"createCollection collectionShadow\">\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          (click)=\"setCollectionType('MY')\"\n          data-test=\"create-private-collection-button\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"lock\" style=\"color: #995b5b\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.PRIVATE' | translate }}</div>\n            <div class=\"description\">\n              {{ 'COLLECTIONS.CREATE.PRIVATE_DESCRIPTION' | translate }}\n            </div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"canInvite\"\n          (click)=\"setCollectionType('CUSTOM')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"group\" style=\"color: #4f7899\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.SHARED' | translate }}</div>\n            <div class=\"description\">{{ 'COLLECTIONS.CREATE.SHARED_DESCRIPTION' | translate }}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"shareToAll && canInvite\"\n          (click)=\"setCollectionType('EDU_ALL')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"public\" style=\"color: #5c998f\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.PUBLIC' | translate }}</div>\n            <div class=\"description\">{{ 'COLLECTIONS.CREATE.PUBLIC_DESCRIPTION' | translate }}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n        <div class=\"group\" *ngIf=\"createEditorial && shareToAll\">\n          <button\n            mat-button\n            class=\"collection-item clickable\"\n            *ngIf=\"createEditorial\"\n            (click)=\"setCollectionType('EDITORIAL')\"\n          >\n            <div class=\"iconLeft\"><i esIcon=\"star\" style=\"color: #e9b42a\"></i></div>\n            <div class=\"content\">\n              <div class=\"title\">{{ 'COLLECTIONS.CREATE.EDITORIAL' | translate }}</div>\n              <div class=\"description\">\n                {{ 'COLLECTIONS.CREATE.EDITORIAL_DESCRIPTION' | translate }}\n              </div>\n            </div>\n            <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n          </button>\n          <!--\n        <div class=\"collection-item clickable\" *ngIf=\"createCurriculum\" (click)=\"setCollectionType('CURRICULUM')\">\n          <div class=\"iconLeft\"><i esIcon=\"school\" style=\"color:#995C99;\">school</i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{'COLLECTIONS.CREATE.CURRICULUM' | translate}}</div>\n            <div class=\"description\">{{'COLLECTIONS.CREATE.CURRICULUM_DESCRIPTION' | translate}}</div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </div>\n        --></div>\n        <button\n          mat-button\n          class=\"collection-item clickable\"\n          *ngIf=\"createMediacenter\"\n          (click)=\"setCollectionType('MEDIA_CENTER')\"\n        >\n          <div class=\"iconLeft\"><i esIcon=\"business\" style=\"color: #4e4b99\"></i></div>\n          <div class=\"content\">\n            <div class=\"title\">{{ 'COLLECTIONS.CREATE.MEDIA_CENTER' | translate }}</div>\n            <div class=\"description\">\n              {{ 'COLLECTIONS.CREATE.MEDIA_CENTER_DESCRIPTION' | translate }}\n            </div>\n          </div>\n          <i esIcon=\"keyboard_arrow_right\" class=\"next\"></i>\n        </button>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_GENERAL\"\n      [buttons]=\"buttons\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      title=\"{{ 'collectionNew_preview' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      modal=\"auto\"\n      width=\"xsmall\"\n      height=\"auto\"\n    >\n      <div class=\"collection-general\">\n        <div class=\"collectionImage\">\n          <div class=\"image-upload-field\">\n            <input\n              #file\n              type=\"file\"\n              accept=\"image/*\"\n              name=\"userFile\"\n              (change)=\"imageDataChanged($event)\"\n              class=\"image-upload-field-input\"\n            />\n          </div>\n          <div class=\"button-icon\">\n            <es-actionbar\n              [options]=\"imageOptions\"\n              appearance=\"round\"\n              [numberOfAlwaysVisibleOptions]=\"0\"\n              [numberOfAlwaysVisibleOptionsMobile]=\"0\"\n            ></es-actionbar>\n          </div>\n\n          <!-- Making the image area clickable poses a violation of accessibility rules. Merge\n              christopher/fix/image-click-areas to remove. -->\n          <div\n            *ngIf=\"!imageData && !(currentCollection.preview && !currentCollection.preview.isIcon)\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n            class=\"card-collection-icon-container\"\n          >\n            <div class=\"card-image-distance\"></div>\n            <div\n              class=\"card-image-icon-container\"\n              [style.background-color]=\"currentCollection.collection.color\"\n            >\n              <i esIcon=\"layers\"></i>\n            </div>\n          </div>\n\n          <div\n            *ngIf=\"!imageData && currentCollection.preview && !currentCollection.preview.isIcon\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n            class=\"card-collection-icon-container\"\n          >\n            <img\n              class=\"blurred-image\"\n              [src]=\"\n                currentCollection\n                  | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true }\n                  | async\n              \"\n            />\n            <img\n              [src]=\"\n                currentCollection\n                  | esNodeImage : { maxWidth: 300, maxHeight: 300, crop: true }\n                  | async\n              \"\n              class=\"card-image-preview\"\n            />\n          </div>\n\n          <div\n            *ngIf=\"imageData\"\n            class=\"card-collection-image-container\"\n            (keyup.enter)=\"file.click()\"\n            (click)=\"file.click()\"\n          >\n            <div class=\"card-image-container\">\n              <img [src]=\"imageData\" class=\"blurred-image\" />\n              <img [src]=\"imageData\" class=\"card-image-preview\" />\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"collection-new-preview-infoarea\"\n          [style.background-color]=\"currentCollection.collection.color\"\n          [class.dark-color]=\"isBrightColor()\"\n        >\n          <div class=\"collection-new-bg\"></div>\n          <div class=\"dialog-basic-area dialog-input-area\">\n            <mat-form-field\n              [class.mat-form-field-bright]=\"!isBrightColor()\"\n              [class.mat-form-field-dark]=\"isBrightColor()\"\n            >\n              <mat-label>{{ 'collectionNew_placeholderTitle' | translate }}</mat-label>\n              <!-- Autofocus and autocomplete don't work well together here, because the\n                    autocomplete list will open before the card animation finishes. -->\n              <input\n                matInput\n                class=\"title\"\n                [(ngModel)]=\"currentCollection.title\"\n                autofocus\n                autocomplete=\"off\"\n                data-test=\"new-collection-name-input\"\n              />\n            </mat-form-field>\n            <mat-form-field\n              [class.mat-form-field-bright]=\"!isBrightColor()\"\n              [class.mat-form-field-dark]=\"isBrightColor()\"\n            >\n              <mat-label>{{ 'collectionNew_placeholderDescription' | translate }}</mat-label>\n              <textarea matInput [(ngModel)]=\"currentCollection.collection.description\"></textarea>\n            </mat-form-field>\n          </div>\n          <div class=\"collection-new-owner\">\n            <ng-container *ngIf=\"!authorFreetext\">\n              <i esIcon=\"person\"></i>\n              <span>{{ user | authorityName }}</span>\n              <button\n                *ngIf=\"authorFreetextAllowed\"\n                mat-icon-button\n                [attr.aria-label]=\"\n                  'EDIT' | translate : { thing: ('COLLECTIONS.NEW.AUTHOR_FREETEXT' | translate) }\n                \"\n                (click)=\"switchToAuthorFreetext()\"\n              >\n                <i esIcon=\"edit\"></i>\n              </button>\n            </ng-container>\n            <ng-container *ngIf=\"authorFreetext\">\n              <i esIcon=\"person\"></i>\n              <mat-form-field\n                class=\"mat-form-field-no-padding\"\n                [class.mat-form-field-bright]=\"!isBrightColor()\"\n              >\n                <mat-label id=\"collection-new-author-freetext-label\">\n                  {{ 'COLLECTIONS.NEW.AUTHOR_FREETEXT' | translate }}\n                </mat-label>\n                <input\n                  #authorFreetextInput\n                  matInput\n                  [disabled]=\"!authorFreetextAllowed\"\n                  [(ngModel)]=\"currentCollection.collection.authorFreetext\"\n                />\n              </mat-form-field>\n              <button\n                mat-icon-button\n                [attr.aria-label]=\"'CANCEL' | translate\"\n                aria-describedby=\"collection-new-author-freetext-label\"\n                (click)=\"cancelAuthorFreetext()\"\n              >\n                <i esIcon=\"close\"></i>\n              </button>\n            </ng-container>\n          </div>\n\n          <div class=\"dialog-basic-area dialog-color-group\">\n            <div id=\"collection-new-color-picker-label\" class=\"collection-new-preview-infoline\">\n              {{ 'collectionNew_setColor' | translate }}\n            </div>\n            <ul\n              class=\"color-group\"\n              aria-labelledby=\"collection-new-color-picker-label\"\n              tabindex=\"0\"\n              role=\"listbox\"\n              aria-orientation=\"horizontal\"\n              cdkMonitorElementFocus\n              (keydown.arrowright)=\"setColorByDirection($event)\"\n              (keydown.arrowup)=\"setColorByDirection($event)\"\n              (keydown.arrowleft)=\"setColorByDirection($event)\"\n              (keydown.arrowdown)=\"setColorByDirection($event)\"\n              [attr.aria-activedescendant]=\"\n                COLORS.indexOf(currentCollection.collection.color) !== -1\n                  ? 'collection-new-color-picker-option-' +\n                    COLORS.indexOf(currentCollection.collection.color)\n                  : null\n              \"\n            >\n              <li\n                id=\"collection-new-color-picker-option-{{ index }}\"\n                *ngFor=\"let color of COLORS; let index = index\"\n                role=\"option\"\n                class=\"color-option\"\n                [ngClass]=\"{ 'color-selected': currentCollection.collection.color === color }\"\n                [attr.aria-selected]=\"currentCollection.collection.color === color\"\n                [style.background-color]=\"color\"\n                (click)=\"setColor(color)\"\n              >\n                <span class=\"cdk-visually-hidden\">\n                  {{ 'collectionNew_colorIndex' | translate : { index: index + 1 } }}\n                </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_METADATA\"\n      title=\"{{ 'COLLECTIONS.STEP.METADATA' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      modal=\"auto\"\n      width=\"large\"\n      height=\"xlarge\"\n      [buttons]=\"buttons\"\n      class=\"collection-metadata\"\n    >\n      <div class=\"card-content\">\n        <es-mds-editor-wrapper\n          #mds\n          [groupId]=\"'collection_' + newCollectionType.toLowerCase()\"\n          [setId]=\"mdsSet\"\n          [editorMode]=\"'form'\"\n          [embedded]=\"true\"\n          [currentValues]=\"properties\"\n        ></es-mds-editor-wrapper>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_EDITORIAL_GROUPS\"\n      title=\"{{ 'COLLECTIONS.STEP.EDITORIAL_GROUPS' | translate }}\"\n      [subtitle]=\"currentCollection.title\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      modal=\"auto\"\n      width=\"large\"\n      height=\"xxlarge\"\n      [buttons]=\"buttons\"\n      class=\"collection-metadata\"\n    >\n      <div class=\"editorial-group\">\n        <div class=\"editorial-list\">\n          <div class=\"noPermission\" *ngIf=\"!shareToAll\">\n            <h4>{{ 'TOOLPERMISSION_ERROR_HEADER' | translate }}</h4>\n            <h5>{{ 'TOOLPERMISSION.TOOLPERMISSION_INVITE_ALLAUTHORITIES' | translate }}</h5>\n          </div>\n          <es-node-entries-wrapper\n            #organizations\n            [dataSource]=\"editorialGroups\"\n            [displayType]=\"NodeEntriesDisplayType.Table\"\n            [columns]=\"editorialColumns\"\n            [sort]=\"{\n              active: null,\n              direction: 'asc',\n              columns: [],\n              allowed: false\n            }\"\n            [elementInteractionType]=\"InteractionType.Emitter\"\n            (clickItem)=\"organizations.getSelection().toggle($event.element)\"\n          >\n            <ng-template #empty>\n              <div class=\"noGroups\">{{ 'COLLECTIONS.NO_EDITORIAL_GROUPS' | translate }}</div>\n            </ng-template>\n          </es-node-entries-wrapper>\n        </div>\n        <div class=\"editorial-public\">\n          <mat-slide-toggle [(ngModel)]=\"editorialPublic\" color=\"primary\">\n            <es-multi-line-label>\n              <ng-container slot=\"label\">\n                {{ 'COLLECTIONS.EDITORIAL_PUBLIC' | translate }}\n              </ng-container>\n              <ng-container slot=\"description\">\n                {{ 'COLLECTIONS.EDITORIAL_PUBLIC_INFO' | translate }}\n              </ng-container>\n            </es-multi-line-label>\n          </mat-slide-toggle>\n        </div>\n      </div>\n    </es-card>\n    <es-card\n      *ngIf=\"newCollectionStep === STEP_PERMISSIONS\"\n      title=\"{{ 'COLLECTIONS.EDIT_PERMISSIONS' | translate }}\"\n      modal=\"auto\"\n      [isCancelable]=\"true\"\n      (onCancel)=\"newCollectionCancel()\"\n      [buttons]=\"buttons\"\n      width=\"normal\"\n      height=\"large\"\n      [subtitle]=\"currentCollection.title\"\n      class=\"collection-permission-container\"\n    >\n      <div class=\"card-content\">\n        <div class=\"title\">{{ 'COLLECTIONS.EDIT_PERMISSIONS_SUBTEXT' | translate }}</div>\n        <div class=\"description\">{{ 'COLLECTIONS.EDIT_PERMISSIONS_DESCRIPTION' | translate }}</div>\n        <div class=\"dialog-basic-area permissionsBtn\">\n          <button mat-raised-button (click)=\"editPermissions()\">\n            <i esIcon=\"person_add\"></i>{{ 'COLLECTIONS.EXTENDED_PERMISSIONS_BUTTON' | translate }}\n          </button>\n        </div>\n        <div class=\"status\">\n          {{ 'COLLECTIONS.PERMISSIONS_STATUS_' + getShareStatus() | translate }}\n        </div>\n      </div>\n    </es-card>\n  </div>\n</div>\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport { Node, ProposalNode } from 'ngx-edu-sharing-api';\nimport {\n    ActionbarComponent,\n    InteractionType,\n    ListEventInterface,\n    ListItem,\n    NodeDataSource,\n    NodeEntriesDisplayType,\n    OptionsHelperDataService,\n    OptionsHelperService,\n    Scope,\n} from 'ngx-edu-sharing-ui';\nimport { RestConstants } from '../../../core-module/rest/rest-constants';\nimport { RestCollectionService } from '../../../core-module/rest/services/rest-collection.service';\nimport {\n    ManagementEvent,\n    ManagementEventType,\n} from '../../../features/management-dialogs/management-dialogs.component';\nimport { MainNavService } from '../../../main/navigation/main-nav.service';\n\n@Component({\n    selector: 'es-collection-proposals',\n    templateUrl: 'collection-proposals.component.html',\n    styleUrls: ['collection-proposals.component.scss'],\n    providers: [OptionsHelperDataService],\n})\nexport class CollectionProposalsComponent implements OnChanges {\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly InteractionType = InteractionType;\n    readonly Scope = Scope;\n    proposalColumns = [\n        new ListItem('NODE', RestConstants.CM_PROP_TITLE),\n        new ListItem('NODE_PROPOSAL', RestConstants.CM_CREATOR, { showLabel: false }),\n        new ListItem('NODE_PROPOSAL', RestConstants.CM_PROP_C_CREATED, { showLabel: false }),\n    ];\n    @ViewChild('listProposals') listProposals: ListEventInterface<ProposalNode>;\n    @ViewChild(ActionbarComponent) actionbar: ActionbarComponent;\n    dataSourceCollectionProposals = new NodeDataSource<ProposalNode>();\n\n    @Input() collection: Node;\n    @Input() canEdit: boolean;\n\n    @Output() onContentClick = new EventEmitter<ProposalNode>();\n\n    constructor(\n        private collectionService: RestCollectionService,\n        private mainNavService: MainNavService,\n        private optionsHelperService: OptionsHelperService,\n    ) {\n        this.mainNavService.getDialogs().onEvent.subscribe((event: ManagementEvent) => {\n            if (event.event === ManagementEventType.AddCollectionNodes) {\n                this.refreshProposals();\n            }\n        });\n    }\n    private refreshProposals() {\n        this.dataSourceCollectionProposals.reset();\n        this.dataSourceCollectionProposals.isLoading = true;\n        if (this.canEdit) {\n            this.collectionService\n                .getCollectionProposals(this.collection.ref.id)\n                .subscribe((proposals) => {\n                    proposals.nodes = proposals.nodes.map((p) => {\n                        p.proposalCollection = this.collection;\n                        return p;\n                    });\n                    this.dataSourceCollectionProposals.setData(\n                        proposals.nodes,\n                        proposals.pagination,\n                    );\n                    this.dataSourceCollectionProposals.isLoading = false;\n                    setTimeout(() => {\n                        this.listProposals?.initOptionsGenerator({\n                            actionbar: this.actionbar,\n                        });\n                    });\n                });\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.collection?.currentValue !== null && changes.canEdit?.currentValue !== null) {\n            this.refreshProposals();\n        }\n    }\n}\n","<section *ngIf=\"!dataSourceCollectionProposals?.isEmpty()\" class=\"collections-cards-div\">\n  <div class=\"content-header heading-group\">\n    <h2 class=\"mat-heading-3\">\n      {{ 'COLLECTIONS.PROPOSALS.TITLE' | translate }}\n    </h2>\n    <es-actionbar></es-actionbar>\n  </div>\n\n  <es-node-entries-wrapper\n    [elementInteractionType]=\"InteractionType.DefaultActionLink\"\n    #listProposals\n    [dataSource]=\"dataSourceCollectionProposals\"\n    [scope]=\"Scope.CollectionsProposals\"\n    [displayType]=\"NodeEntriesDisplayType.Grid\"\n    [columns]=\"proposalColumns\"\n    [globalOptions]=\"\"\n    (clickItem)=\"onContentClick.emit($event.element)\"\n    class=\"no-padding\"\n  ></es-node-entries-wrapper>\n</section>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CollectionNewComponent } from './collection-new/collection-new.component';\nimport { CollectionsPageComponent } from './collections-page.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: CollectionsPageComponent,\n    },\n    {\n        path: 'collection/:mode/:id',\n        component: CollectionNewComponent,\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class CollectionsPageRoutingModule {}\n","import {\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    OnDestroy,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport {\n    ColorHelper,\n    LocalEventsService,\n    NodeEntriesDisplayType,\n    OptionsHelperDataService,\n    PreferredColor,\n    Scope,\n    SortEvent,\n    TranslationsService,\n    UIConstants,\n} from 'ngx-edu-sharing-ui';\nimport { Subject, combineLatest } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport * as EduData from '../../core-module/core.module';\nimport {\n    ConfigurationService,\n    DialogButton,\n    Mediacenter,\n    Node,\n    NodeRef,\n    RestCollectionService,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestMediacenterService,\n    RestNetworkService,\n    RestNodeService,\n    TemporaryStorageService,\n    UIService,\n} from '../../core-module/core.module';\nimport { Helper } from '../../core-module/rest/helper';\nimport { UIHelper } from '../../core-ui-module/ui-helper';\nimport { NodeHelperService } from '../../services/node-helper.service';\nimport { Toast } from '../../services/toast';\nimport { BreadcrumbsService } from '../../shared/components/breadcrumbs/breadcrumbs.service';\nimport { CollectionContentComponent } from './collection-content/collection-content.component';\nimport { CollectionInfoBarComponent } from './collection-info-bar/collection-info-bar.component';\n\n// component class\n@Component({\n    selector: 'es-collections-page',\n    templateUrl: 'collections-page.component.html',\n    styleUrls: ['collections-page.component.scss'],\n    // provide a new instance so to not get conflicts with other service instances\n    providers: [OptionsHelperDataService],\n})\nexport class CollectionsPageComponent implements OnDestroy {\n    static INDEX_MAPPING = [\n        RestConstants.COLLECTIONSCOPE_MY,\n        RestConstants.COLLECTIONSCOPE_ORGA,\n        RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL,\n        RestConstants.COLLECTIONSCOPE_TYPE_MEDIA_CENTER,\n        RestConstants.COLLECTIONSCOPE_ALL,\n    ];\n    readonly SCOPES = Scope;\n    readonly NodeEntriesDisplayType = NodeEntriesDisplayType;\n    readonly ROUTER_PREFIX = UIConstants.ROUTER_PREFIX;\n    readonly getInfobar = () => this.infobar;\n\n    @ViewChild('infobar') infobar: CollectionInfoBarComponent;\n    @ViewChild('collectionContentComponent') collectionContentRef: CollectionContentComponent;\n    @ContentChild('collectionContentTemplate') collectionContentTemplateRef: TemplateRef<any>;\n\n    dialogTitle: string;\n    dialogCancelable = false;\n    dialogMessage: string;\n    dialogButtons: DialogButton[];\n    tabSelected: string = RestConstants.COLLECTIONSCOPE_MY;\n    isLoading = true;\n    isReady = false;\n    collection: Node;\n    collectionSortEmitter = new EventEmitter<SortEvent>();\n    collectionCustomSortEmitter = new EventEmitter<boolean>();\n    referenceSortEmitter = new EventEmitter<SortEvent>();\n    referenceCustomSortEmitter = new EventEmitter<boolean>();\n    mainnav = true;\n    isGuest = true;\n    addToOther: EduData.Node[];\n    addPinning: string;\n    tutorialElement: ElementRef;\n\n    // FIXME: `collectionShare` is expected to be of type `Node[]` by `workspace-management` but is\n    // of type `Node` here.\n    private adminMediacenters: Mediacenter[];\n    isRootLevel: boolean;\n    set collectionShare(collectionShare: Node[]) {\n        this._collectionShare = collectionShare as any as Node;\n        this.refreshAll();\n    }\n\n    get collectionShare() {\n        return this._collectionShare as any as Node[];\n    }\n\n    set tabSelectedIndex(pos: number) {\n        if (this.isGuest) {\n            pos += 2; // skip first 2 tabs\n        }\n        if (!this.hasEditorial && pos > 1) {\n            pos++; // skip editorial\n        }\n        if (!this.hasMediacenter && pos > 2) {\n            pos++; // skip mediacenter\n        }\n        this.selectTab(CollectionsPageComponent.INDEX_MAPPING[pos]);\n    }\n\n    get tabSelectedIndex() {\n        let pos = CollectionsPageComponent.INDEX_MAPPING.indexOf(this.tabSelected);\n        if (this.isGuest) {\n            pos -= 2;\n        }\n        if (!this.hasEditorial && pos > 1) {\n            pos--;\n        }\n        if (!this.hasMediacenter && pos > 2) {\n            pos--;\n        }\n        return pos;\n    }\n    private contentDetailObject: any = null;\n    // real parentCollectionId is only available, if user was browsing\n    private parentCollectionId: EduData.Reference = new EduData.Reference(\n        RestConstants.HOME_REPOSITORY,\n        RestConstants.ROOT,\n    );\n    private person: EduData.User;\n    hasEditorial = false;\n    hasMediacenter = false;\n    reurl: any;\n    private _collectionShare: Node;\n    private params: Params;\n    private destroyed = new Subject<void>();\n\n    // inject services\n    constructor(\n        private breadcrumbsService: BreadcrumbsService,\n        private collectionService: RestCollectionService,\n        private config: ConfigurationService,\n        private connector: RestConnectorService,\n        private iamService: RestIamService,\n        private localEvents: LocalEventsService,\n        private mediacenterService: RestMediacenterService,\n        private nodeHelper: NodeHelperService,\n        private nodeService: RestNodeService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private tempStorage: TemporaryStorageService,\n        private optionsService: OptionsHelperDataService,\n        private networkService: RestNetworkService,\n        private temporaryStorageService: TemporaryStorageService,\n        private toast: Toast,\n        private translations: TranslationsService,\n        private uiService: UIService,\n    ) {\n        this.translations.waitForInit().subscribe(() => {\n            combineLatest([\n                this.connector.isLoggedIn(),\n                // FIXME: The sub components should be obserable-aware!\n                this.networkService.getRepositories(),\n            ]).subscribe(\n                ([data]) => {\n                    if (data.isValidLogin && data.currentScope == null) {\n                        this.isGuest = data.isGuest;\n                        this.mediacenterService.getMediacenters().subscribe((mediacenters) => {\n                            this.adminMediacenters = mediacenters.filter(\n                                (m) => m.administrationAccess,\n                            );\n                        });\n                        this.collectionService\n                            .getCollectionSubcollections(\n                                RestConstants.ROOT,\n                                RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL,\n                            )\n                            .subscribe((data) => {\n                                this.hasEditorial = data.collections.length > 0;\n                            });\n                        this.collectionService\n                            .getCollectionSubcollections(\n                                RestConstants.ROOT,\n                                RestConstants.COLLECTIONSCOPE_TYPE_MEDIA_CENTER,\n                            )\n                            .subscribe((data) => {\n                                this.hasMediacenter = data.collections.length > 0;\n                            });\n                        this.initialize();\n                    } else {\n                        RestHelper.goToLogin(this.router, this.config);\n                    }\n                },\n                () => RestHelper.goToLogin(this.router, this.config),\n            );\n        });\n        // Navigate to parent collection when the current collection is deleted.\n        this.localEvents.nodesDeleted\n            .pipe(\n                takeUntil(this.destroyed),\n                filter((nodes) => nodes.some((node) => node.ref.id === this.collection.ref.id)),\n            )\n            .subscribe(() => this.navigate(this.parentCollectionId.id));\n    }\n\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n        this.tempStorage.set(\n            TemporaryStorageService.NODE_RENDER_PARAMETER_DATA_SOURCE,\n            this.collectionContentRef?.dataSourceReferences,\n        );\n    }\n\n    isMobile() {\n        return this.uiService.isMobile();\n    }\n\n    isMobileWidth() {\n        return window.innerWidth < UIConstants.MOBILE_WIDTH;\n    }\n\n    navigate(id = '', addToOther = '', feedback = false) {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            params.scope = this.tabSelected;\n            if (id && id !== '-root-') {\n                params.id = id;\n            }\n            if (feedback) {\n                params.feedback = feedback;\n            }\n            if (addToOther) {\n                params.addToOther = addToOther;\n            }\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'collections'], {\n                queryParams: params,\n            });\n        });\n    }\n\n    closeAddToOther() {\n        this.navigate(this.collection.ref.id);\n    }\n\n    selectTab(tab: string) {\n        if (this.tabSelected !== tab || this.getCollectionId() !== RestConstants.ROOT) {\n            this.tabSelected = tab;\n            this.parentCollectionId = new EduData.Reference(\n                RestConstants.HOME_REPOSITORY,\n                RestConstants.ROOT,\n            );\n            this.contentDetailObject = null;\n            this.navigate();\n        }\n    }\n\n    isRootLevelCollection(): boolean {\n        return this.isRootLevel;\n    }\n\n    isAllowedToEditCollection(): boolean {\n        if (this.isRootLevelCollection()) {\n            return !this.isGuest; //this.tabSelected === RestConstants.COLLECTIONSCOPE_MY\n        }\n        return RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_WRITE);\n    }\n\n    feedbackAllowed(): boolean {\n        return (\n            !this.isGuest &&\n            RestHelper.hasAccessPermission(this.collection, RestConstants.PERMISSION_FEEDBACK)\n        );\n    }\n\n    isUserAllowedToEdit(collection: Node): boolean {\n        return RestHelper.isUserAllowedToEdit(collection, this.person);\n    }\n\n    pinCollection() {\n        this.addPinning = this.collection.ref.id;\n    }\n\n    getPrivacyScope(collection: EduData.Collection): string {\n        return collection.scope;\n        //  return RestHelper.getPrivacyScope(collection);\n    }\n\n    navigateToSearch() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate([UIConstants.ROUTER_PREFIX + 'search'], {\n                queryParams: params,\n            });\n        });\n    }\n\n    isBrightColor() {\n        return (\n            ColorHelper.getPreferredColor(this.collection?.collection?.color) ===\n            PreferredColor.White\n        );\n    }\n\n    getScopeInfo() {\n        return this.nodeHelper.getCollectionScopeInfo(this.collection);\n    }\n\n    collectionEdit(): void {\n        if (this.isAllowedToEditCollection()) {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'edit',\n                    this.collection.ref.id,\n                ],\n                { queryParams: { mainnav: this.mainnav } },\n            );\n            return;\n        }\n    }\n\n    getScope() {\n        return this.tabSelected ? this.tabSelected : RestConstants.COLLECTIONSCOPE_ALL;\n    }\n\n    onCreateCollection() {\n        UIHelper.getCommonParameters(this.route).subscribe((params) => {\n            this.router.navigate(\n                [\n                    UIConstants.ROUTER_PREFIX + 'collections/collection',\n                    'new',\n                    this.collection.ref.id,\n                ],\n                { queryParams: params },\n            );\n        });\n    }\n\n    onCollectionsClick(collection: Node): void {\n        // remember actual collection as breadcrumb\n        if (!this.isRootLevelCollection()) {\n            this.parentCollectionId = this.collection.ref;\n        }\n\n        // set thru router so that browser back button can work\n        this.navigate(collection.ref.id);\n    }\n\n    refreshAll() {\n        this.displayCollectionById(this.collection.ref.id);\n    }\n\n    async displayCollectionById(id: string) {\n        if (!!id) {\n            try {\n                this.collection = (\n                    await this.collectionService.getCollection(id).toPromise()\n                ).collection;\n            } catch (e) {\n                if (e.status === RestConstants.HTTP_FORBIDDEN) {\n                    const login = await this.connector.isLoggedIn().toPromise();\n                    if (login.statusCode === RestConstants.STATUS_CODE_OK) {\n                        this.toast.error(e);\n                    } else {\n                        RestHelper.goToLogin(this.router, this.config, null);\n                    }\n                }\n            }\n        } else {\n            this.setCollectionId(RestConstants.ROOT);\n        }\n        this.isLoading = false;\n        this.renderBreadcrumbs();\n        this.isRootLevel = !id;\n    }\n\n    closeDialog() {\n        this.dialogTitle = null;\n    }\n\n    showTabs() {\n        return this.isRootLevelCollection() && (!this.isGuest || this.hasEditorial);\n    }\n\n    hasNonIconPreview(): boolean {\n        const preview = this.collection?.preview;\n        return preview && !preview.isIcon;\n    }\n\n    private renderBreadcrumbs() {\n        this.breadcrumbsService.setNodePath([]);\n        if (this.collection.ref.id === RestConstants.ROOT) {\n            return;\n        }\n        this.nodeService\n            .getNodeParents(this.collection.ref.id, false)\n            .subscribe((data: EduData.NodeList) => {\n                const path = data.nodes.reverse();\n                if (path.length > 1) {\n                    this.parentCollectionId = new EduData.Reference(\n                        path[path.length - 2].ref.repo,\n                        path[path.length - 2].ref.id,\n                    );\n                }\n                this.breadcrumbsService.setNodePath(path);\n            });\n    }\n\n    private initialize() {\n        // load user profile\n        this.iamService.getCurrentUserAsync().then(\n            (iamUser) => {\n                // WIN\n\n                this.person = iamUser.person;\n\n                // set app to ready state\n                this.isReady = true;\n                // subscribe to parameters of url\n                this.route.queryParams.subscribe(async (params) => {\n                    const diffs = Helper.getDifferentKeys(this.params, params);\n                    if (Object.keys(diffs).length === 1 && diffs.viewType) {\n                        this.params = params;\n                        return;\n                    }\n                    this.params = params;\n                    if (params.scope) {\n                        this.tabSelected = params.scope;\n                    } else {\n                        this.tabSelected = this.isGuest\n                            ? RestConstants.COLLECTIONSCOPE_ALL\n                            : RestConstants.COLLECTIONSCOPE_MY;\n                    }\n                    this.reurl = params.reurl;\n\n                    if (params.mainnav) {\n                        this.mainnav = params.mainnav !== 'false';\n                    }\n\n                    // get id from route and validate input data\n                    const id = params.id;\n                    if (params.addToOther) {\n                        this.nodeService\n                            .getNodeMetadata(params.addToOther)\n                            .subscribe((data: EduData.NodeWrapper) => {\n                                this.addToOther = [data.node];\n                            });\n                    }\n                    await this.displayCollectionById(id);\n\n                    /*if (params.nodeId) {\n                        let node = params.nodeId.split('/');\n                        node = node[node.length - 1];\n                        this.collectionService\n                            .addNodeToCollection(id, node, null)\n                            .subscribe(\n                                () => this.navigate(id),\n                                (error: any) => {\n                                    this.handleError(error);\n                                    this.navigate(id);\n                                    //this.displayCollectionById(id)\n                                },\n                            );\n                    } else {*/\n                    // }\n                });\n            },\n            (error) => {\n                // FAIL\n                this.toast.error(error);\n                this.isReady = true;\n            },\n        );\n    }\n\n    private setCollectionId(id: string) {\n        this.collection = new Node();\n        this.collection.ref = { id } as NodeRef;\n        this.collection.aspects = [RestConstants.CCM_ASPECT_COLLECTION];\n    }\n\n    private getCollectionId() {\n        const c = this.collection;\n        return c != null && c.ref != null ? c.ref.id : null;\n    }\n\n    createAllowed = () => {\n        if (this.isGuest) {\n            return false;\n        }\n        if (this.isRootLevelCollection()) {\n            let allowed = this.connector.hasToolPermissionInstant(\n                RestConstants.TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS,\n            );\n            if (this.tabSelected === RestConstants.COLLECTIONSCOPE_MY) {\n                return allowed;\n            }\n            // for anything else, the user must be able to invite everyone\n            allowed =\n                allowed &&\n                this.connector.hasToolPermissionInstant(\n                    RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES,\n                );\n            if (this.tabSelected === RestConstants.COLLECTIONSCOPE_ORGA) {\n                allowed = false;\n            } else if (this.tabSelected === RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL) {\n                allowed = allowed && this.adminMediacenters?.length === 1;\n            } else if (this.tabSelected === RestConstants.COLLECTIONSCOPE_TYPE_EDITORIAL) {\n                allowed =\n                    allowed &&\n                    this.connector.hasToolPermissionInstant(\n                        RestConstants.TOOLPERMISSION_COLLECTION_EDITORIAL,\n                    );\n            }\n            return allowed;\n        } else {\n            return this.isAllowedToEditCollection();\n        }\n    };\n}\n\nexport interface SortInfo {\n    name: 'cm:name' | 'cm:modified' | 'ccm:collection_ordered_position';\n    ascending: boolean;\n    userModifyActive?: boolean;\n}\n","<es-tutorial\n  [element]=\"tutorialElement\"\n  [heading]=\"'COLLECTIONS.TUTORIAL_HEADING'\"\n  [description]=\"'COLLECTIONS.TUTORIAL_DESCRIPTION'\"\n  [showSkip]=\"false\"\n></es-tutorial>\n<mat-tab-group\n  role=\"navigation\"\n  [attr.aria-label]=\"'NAV.COLLECTIONS' | translate\"\n  mat-stretch-tabs\n  [color]=\"$any('dark')\"\n  [(selectedIndex)]=\"tabSelectedIndex\"\n  *ngIf=\"showTabs()\"\n>\n  <mat-tab *ngIf=\"!isGuest\" labelClass=\"mat-tab-my\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"person\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.MY' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"!isGuest\" labelClass=\"mat-tab-groups\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"group\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.EDU_GROUPS' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"hasEditorial\" labelClass=\"mat-tab-editorial\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"star\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.TYPE_EDITORIAL' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab *ngIf=\"hasMediacenter\" labelClass=\"mat-tab-media-center\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"business\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.TYPE_MEDIA_CENTER' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n  <mat-tab labelClass=\"mat-tab-edu-all\">\n    <ng-template mat-tab-label>\n      <i esIcon=\"language\" class=\"tab-icon\"></i>\n      <span class=\"tab-label\">{{ 'COLLECTIONS.TAB.EDU_ALL' | translate }}</span>\n    </ng-template>\n  </mat-tab>\n</mat-tab-group>\n<div class=\"collections-header-group\">\n  <es-actionbar\n    *ngIf=\"collectionContentTemplateRef && !isRootLevelCollection()\"\n    #actionbarCollection\n    [numberOfAlwaysVisibleOptions]=\"1\"\n    [numberOfAlwaysVisibleOptionsMobile]=\"1\"\n    appearance=\"round\"\n    [style]=\"'flat'\"\n    [dropdownPosition]=\"'right'\"\n  ></es-actionbar>\n  <!-- collection header -->\n  <ng-container\n    [ngTemplateOutlet]=\"collectionContentTemplateRef ?? collectionContentTemplateRefDefault\"\n    [ngTemplateOutletContext]=\"{\n      $implicit: null,\n      collection: collection,\n      permissions: collectionContentRef?.permissions ?? null,\n      isLoading: isLoading,\n      tabSelected: tabSelected\n    }\"\n  ></ng-container>\n  <ng-template #collectionContentTemplateRefDefault> </ng-template>\n</div>\n\n<div cdkDropList [cdkDropListSortingDisabled]=\"true\">\n  <div\n    [class.collectionsContainerTabs]=\"showTabs()\"\n    [class.collectionsContainerNoSidebar]=\"isRootLevelCollection() || isLoading\"\n    class=\"collectionsContainer\"\n  >\n    <es-collection-info-bar\n      #infobar\n      *ngIf=\"!isLoading && !isRootLevelCollection() && collection\"\n      [collection]=\"collection\"\n      [permissions]=\"collectionContentRef?.permissions ?? null\"\n      (edit)=\"collectionEdit()\"\n    ></es-collection-info-bar>\n    <!-- <div *ngIf=\"isLoading\" class=\"collection-loading\"><es-spinner-small></es-spinner-small></div> -->\n    <div class=\"collections-right\">\n      <section\n        *ngIf=\"isLoading || !isReady\"\n        class=\"collections-loading-div\"\n        style=\"padding-top: 24px; text-align: center\"\n      >\n        <es-spinner></es-spinner>\n      </section>\n      <h1 *ngIf=\"isRootLevelCollection()\" esTitle class=\"cdk-visually-hidden\">\n        {{ 'COLLECTIONS.TITLE' | translate }}\n      </h1>\n      <a\n        *ngIf=\"!isLoading && isGuest\"\n        mat-button\n        color=\"primary\"\n        class=\"switchToSearch\"\n        title=\"{{ 'COLLECTIONS.TO_SEARCH' | translate }}\"\n        tabindex=\"0\"\n        (click)=\"navigateToSearch()\"\n        [routerLink]=\"['/' + ROUTER_PREFIX + 'search']\"\n      >\n        {{ 'COLLECTIONS.TO_SEARCH' | translate }}\n        <i esIcon=\"arrow_forward\"></i>\n      </a>\n      <ng-container *ngIf=\"collection\">\n        <div\n          role=\"navigation\"\n          [attr.aria-label]=\"'NAV.COLLECTIONS' | translate\"\n          class=\"breadcrumb-space\"\n          *ngIf=\"!isRootLevelCollection() && !isLoading\"\n        >\n          <es-breadcrumbs\n            class=\"collections-breadcrumb\"\n            [home]=\"'COLLECTIONS.TAB.' + tabSelected\"\n            [homeRouterLink]=\"{ routerLink: ['.'], queryParams: { scope: tabSelected } }\"\n            [invisibleDescription]=\"true\"\n            [canDropNodes]=\"collectionContentComponent.canDropOnCollectionBreadcrumbs\"\n            (onDrop)=\"collectionContentComponent.dropOnCollection($event.target, $event.source)\"\n          ></es-breadcrumbs>\n        </div>\n        <es-collection-content\n          #collectionContentComponent\n          [collection]=\"collection\"\n          [getInfobar]=\"getInfobar\"\n          [scope]=\"getScope()\"\n          [isRootLevel]=\"isRootLevelCollection()\"\n          [createAllowed]=\"createAllowed\"\n          [class.collections-master-div-notabs]=\"!showTabs()\"\n        >\n          <ng-template #empty>\n            <ng-container *ngIf=\"isRootLevelCollection()\">\n              <ng-container *ngIf=\"tabSelected === 'EDU_GROUPS'\">\n                {{ 'COLLECTIONS.EMPTY.SHARED' | translate }}\n              </ng-container>\n              <ng-container *ngIf=\"tabSelected === 'EDU_ALL'\">\n                {{ 'COLLECTIONS.EMPTY.PUBLIC' | translate }}\n              </ng-container>\n            </ng-container>\n            <ng-container *ngIf=\"!isRootLevelCollection()\">\n              {{ 'COLLECTIONS.EMPTY.SUBCOLLECTIONS' | translate }}\n            </ng-container>\n          </ng-template>\n        </es-collection-content>\n      </ng-container>\n    </div>\n  </div>\n  <es-footer [scope]=\"'collections'\"></es-footer>\n</div>\n<ng-template\n  #sortTool\n  let-columns=\"columns\"\n  let-sortInfo=\"sortInfo\"\n  let-callback=\"callback\"\n  let-toggleCallback=\"toggleCallback\"\n>\n  <mat-slide-toggle\n    *ngIf=\"sortInfo.name === 'ccm:collection_ordered_position'\"\n    [(ngModel)]=\"sortInfo.customActive\"\n    (ngModelChange)=\"toggleCallback.emit($event)\"\n  >\n    {{ 'COLLECTIONS.SORT_SLIDER' | translate }}\n  </mat-slide-toggle>\n  <button\n    *ngIf=\"sortDropdown.menu\"\n    [matMenuTriggerFor]=\"sortDropdown.menu\"\n    mat-button\n    color=\"primary\"\n  >\n    {{ 'NODE.' + sortInfo.name | translate }}\n    <i\n      *ngIf=\"sortInfo.name !== 'ccm:collection_ordered_position'\"\n      [esIcon]=\"'arrow_' + (sortInfo.ascending ? 'upward' : 'downward')\"\n    ></i>\n  </button>\n  <es-sort-dropdown\n    #sortDropdown\n    [columns]=\"columns\"\n    [sortBy]=\"sortInfo.name\"\n    [sortAscending]=\"sortInfo.ascending\"\n    (onSort)=\"callback.emit($event)\"\n  ></es-sort-dropdown>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { MdsModule } from '../../features/mds/mds.module';\nimport { SharedModule } from '../../shared/shared.module';\nimport { CollectionContentComponent } from './collection-content/collection-content.component';\nimport { CollectionInfoBarComponent } from './collection-info-bar/collection-info-bar.component';\nimport { CollectionNewComponent } from './collection-new/collection-new.component';\nimport { CollectionsPageRoutingModule } from './collections-page-routing.module';\nimport { CollectionsPageComponent } from './collections-page.component';\nimport { InfobarComponent } from './infobar/infobar.component';\nimport { CollectionProposalsComponent } from './collection-proposals/collection-proposals.component';\n\n@NgModule({\n    declarations: [\n        CollectionContentComponent,\n        CollectionInfoBarComponent,\n        CollectionNewComponent,\n        CollectionProposalsComponent,\n        CollectionsPageComponent,\n        InfobarComponent,\n    ],\n    imports: [SharedModule, MdsModule, CollectionsPageRoutingModule],\n    exports: [CollectionInfoBarComponent, CollectionContentComponent],\n})\nexport class CollectionsPageModule {}\n","import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { trigger } from '@angular/animations';\nimport { DialogButton } from '../../../core-module/core.module';\nimport { UIAnimation } from 'ngx-edu-sharing-ui';\n\n@Component({\n    selector: 'es-infobar',\n    templateUrl: 'infobar.component.html',\n    styleUrls: ['infobar.component.scss'],\n    animations: [\n        trigger('infobarBottom', UIAnimation.infobarBottom(UIAnimation.ANIMATION_TIME_SLOW)),\n    ],\n})\n/**\n * A Infobar (usually at the bottom) which features action buttons\n * As soon as the title is set, the infobar will be added to the dom and animated\n * Don't add it with *ngIf, otherwise it can't animate properly\n * Just add it to the component without constraints and set or remove the title value\n */\nexport class InfobarComponent {\n    /**\n     * Wether or not this bar can be closed using an \"x\" icon\n     * @type {boolean}\n     */\n    @Input() isCancelable = false;\n    /**\n     * Position, currently only 'bottom' is supported and default value\n     */\n    @Input() position = 'bottom';\n    /**\n     * The title, will be translated automatically\n     */\n    @Input() title: string;\n    /**\n     * The message, will be translated automatically\n     */\n    @Input() message: string;\n    /**\n     * Additional dynamic content for your language string, use an object, e.g.\n     * Language String: Hello {{ name }}\n     * And use messageParameters={name:'World'}\n     */\n    @Input() messageParameters: any;\n    /**\n     * Will be emitted when the users cancels the dialog\n     * @type {EventEmitter}\n     */\n    @Output() onCancel = new EventEmitter();\n    /** A list of buttons, see @DialogButton\n     * Also use the DialogButton.getYesNo() and others if applicable!\n     */\n    public _buttons: DialogButton[];\n    @Input() set buttons(buttons: DialogButton[]) {\n        if (!buttons) {\n            this._buttons = null;\n            return;\n        }\n        this._buttons = buttons.reverse();\n        setTimeout(() => {\n            if (this.buttonElements) this.buttonElements.nativeElement.focus();\n        }, 10);\n    }\n\n    @ViewChild('buttonElements') buttonElements: ElementRef;\n\n    public click(btn: DialogButton) {\n        btn.callback();\n    }\n    public cancel() {\n        this.onCancel.emit();\n    }\n}\n","<div class=\"infobar infobar-{{ position }}\" *ngIf=\"title\" [@infobarBottom]=\"title\">\n  <div class=\"infobar-message\">\n    <div class=\"title\">{{ title | translate }}</div>\n    <div class=\"message\">{{ message | translate : messageParameters }}</div>\n  </div>\n  <div class=\"infobar-buttons\" *ngIf=\"_buttons\">\n    <div *ngFor=\"let button of _buttons; let i = index\" #buttonElements>\n      <button\n        mat-raised-button\n        [color]=\"$any('white')\"\n        *ngIf=\"button.color === 'primary'\"\n        (click)=\"click(button)\"\n      >\n        {{ button.label | translate }}\n      </button>\n      <button\n        mat-button\n        [color]=\"$any('white')\"\n        *ngIf=\"button.color === 'standard'\"\n        (click)=\"click(button)\"\n      >\n        {{ button.label | translate }}\n      </button>\n    </div>\n  </div>\n  <div *ngIf=\"isCancelable\" class=\"infobar-cancel clickable\" (click)=\"cancel()\">\n    <i class=\"material-icons\">close</i>\n  </div>\n</div>\n","import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { Injectable } from '@angular/core';\nimport { DialogButton } from '../../../util/dialog-button';\nimport { GenericDialogButton } from '../../../features/dialogs/dialog-modules/generic-dialog/generic-dialog-data';\nimport { InfobarComponent } from './infobar.component';\n\n@Injectable({ providedIn: 'root' })\nexport class InfobarService {\n    overlayRef: OverlayRef | null;\n\n    constructor(private overlay: Overlay) {}\n\n    /**\n     * Shows an info bar with the given configuration.\n     *\n     * If there are any info bars visible, they are replaced by this one.\n     */\n    open<R extends string>({\n        title,\n        message,\n        buttons,\n    }: {\n        title: string;\n        message: string;\n        buttons: GenericDialogButton<R>[];\n    }): Promise<R | null> {\n        return new Promise((resolve) => {\n            if (this.overlayRef) {\n                this.overlayRef.dispose();\n            }\n            this.overlayRef = this.overlay.create();\n            const portal = new ComponentPortal(InfobarComponent);\n            const componentRef = this.overlayRef.attach(portal);\n            componentRef.instance.title = title;\n            componentRef.instance.message = message;\n            componentRef.instance.buttons = buttons.map(\n                (button) =>\n                    new DialogButton(button.label, button.config, () => {\n                        resolve(button.label);\n                        this.overlayRef.dispose();\n                    }),\n            );\n            componentRef.instance.isCancelable = true;\n            componentRef.instance.onCancel.subscribe(() => this.overlayRef.dispose());\n            componentRef.onDestroy(() => {\n                this.overlayRef = null;\n                resolve(null);\n            });\n        });\n    }\n\n    /**\n     * Closes the currently visible info bar, if any.\n     */\n    close(): void {\n        this.overlayRef?.dispose();\n    }\n}\n"],"names":["EventEmitter","InteractionType","ListItem","ListItemSort","NodeDataSource","NodeEntriesDisplayType","NodesRightMode","OptionItem","Scope","UIConstants","Subject","forkJoin","takeUntil","ConfigurationHelper","Helper","MdsHelper","RestConstants","RestHelper","UIHelper","ManagementEventType","i0","elementContainerStart","text","elementContainerEnd","advance","textInterpolate","pipeBind1","ctx_r7","scope","elementStart","template","CollectionContentComponent_ng_template_4_h2_1_ng_container_1_Template","CollectionContentComponent_ng_template_4_h2_1_ng_container_2_Template","elementEnd","property","ctx_r6","isRootLevel","CollectionContentComponent_ng_template_4_h2_1_Template","ctx_r1","isAllowedToEditCollection","dataSourceCollections","isEmpty","elementContainer","CollectionContentComponent_ng_template_6_div_0_ng_container_1_Template","ctx_r9","emptyRef","CollectionContentComponent_ng_template_6_div_0_Template","ctx_r3","createAllowed","textInterpolate1","listener","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_button_9_Template_button_click_0_listener","$event","restoreView","_r24","element_r19","nextContext","element","ctx_r22","deleteReference","stopPropagation","resetView","preventDefault","element","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_button_9_Template","ctx_r20","canDelete","CollectionContentComponent_ng_container_9_section_2_ng_template_8_div_0_Template","ctx_r17","isDeleted","CollectionContentComponent_ng_container_9_section_2_div_10_div_4_Template","ctx_r18","isUserAllowedToEdit","collection","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_displayTypeChange_4_listener","_r28","ctx_r27","referencesDisplayType","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_clickItem_4_listener","ctx_r29","onContentClick","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_sortChange_4_listener","ctx_r30","setReferenceSort","CollectionContentComponent_ng_container_9_section_2_Template_es_node_entries_wrapper_fetchData_4_listener","ctx_r31","loadMoreReferences","CollectionContentComponent_ng_container_9_section_2_ng_template_6_Template","templateRefExtractor","CollectionContentComponent_ng_container_9_section_2_ng_template_8_Template","CollectionContentComponent_ng_container_9_section_2_div_10_Template","classProp","ctx_r11","Table","dataSourceReferences","Emitter","CollectionsReferences","referencesColumns","pureFunction3","_c3","canDropOnRef","dropOnRef","pureFunction5","_c4","sortReferences","active","direction","customSortingInProgress","columns","isMobile","tmp_11_0","getData","length","sortCollections","pureFunction2","_c5","addMaterialSearchOptionItem","addMaterialBinaryOptionItem","pureFunction0","_c6","isLoading","CollectionContentComponent_ng_container_9_Template_es_collection_proposals_onContentClick_1_listener","_r33","ctx_r32","CollectionContentComponent_ng_container_9_section_2_Template","ctx_r5","CollectionContentComponent","_","DEFAULT_REQUEST","sortBy","CCM_PROP_COLLECTION_PINNED_STATUS","CCM_PROP_COLLECTION_PINNED_ORDER","CM_MODIFIED_DATE","sortAscending","constructor","authenticationService","bridge","collectionService","configurationService","dialogs","infobar","loadingScreen","mainNavService","mdsService","nodeHelper","nodeService","optionsService","route","router","toast","translation","uiService","Grid","destroyed$","ROUTER_PREFIX","interactionType","DefaultActionLink","clickItem","mainNavUpdateTrigger","sortCollectionColumns","CM_PROP_TITLE","CCM_PROP_COLLECTION_ORDERED_POSITION","createSubCollectionOptionItem","onCreateCollection","CM_PROP_C_CREATED","getCommonParameters","subscribe","params","addToCollection","ref","id","navigate","queryParams","getMainNav","topBar","createMenu","openUploadSelect","collectionsColumns","loadingTask","addLoadingTask","until","canDropOnCollectionBreadcrumbs","dropData","nodes","draggedNodes","target","accept","action","aspects","indexOf","CCM_ASPECT_COLLECTION","getNodesRight","ACCESS_WRITE","denyExplicit","hasOwnProperty","type","COLLECTIONTYPE_EDITORIAL","ACCESS_CC_PUBLISH","Effective","Local","canDropOnCollection","dragData","source","dropOnCollection","showProgressSpinner","mediatype","mode","error","closeProgressSpinner","moveNode","COLLECTIONHOME","refreshContent","handleError","map","toMove","push","getDialogs","onEvent","event","AddCollectionNodes","data","listReferences","addVirtualNodes","references","observeLoginInfo","pipe","login","isEnabled","toolPermissions","includes","TOOLPERMISSION_CREATE_ELEMENTS_FILES","TOOLPERMISSION_CREATE_ELEMENTS_COLLECTIONS","ngOnDestroy","next","complete","ngOnInit","_this","_asyncToGenerator","mdsSets","getAvailableMds","HOME_REPOSITORY","set","getMetadataSet","metadataSet","toPromise","getColumns","clearComponents","actionbarReferences","registerMainNav","ngOnChanges","changes","currentValue","reset","name","orderCollections","properties","CCM_PROP_COLLECTION_SUBCOLLECTION_ORDER_MODE","refMode","orderMode","refAscending","orderAscending","COLLECTION_ORDER_MODE_CUSTOM","setOptionsCollection","access","ACCESS_CHANGE_PERMISSIONS","getNodePermissions","permissions","localPermissions","concat","inheritedPermissions","isGuest","hasAccessPermission","PERMISSION_WRITE","status","DUPLICATE_NODE_RESPONSE","_this2","contentNode","CCM_TYPE_COLLECTION_PROPOSAL","clickElementEvent","originalId","dialogRef","openGenericDialog","title","message","buttons","isAllowedToDeleteNodes","label","config","color","afterClosed","response","deleteFromCollection","getNodeMetadata","node","emit","isAllowedToDeleteCollection","ACCESS_DELETE","PERMISSION_DELETE","callback","removeFromCollection","_this3","setMainNavConfig","currentScope","onCreate","addNodesToCollection","onConnectorCreated","patchMainNavConfig","create","allowed","allowBinary","parent","getSelection","clear","request","deepCopy","console","warn","count","COUNT_UNLIMITED","getCollectionSubcollections","repo","setData","collections","pagination","finishCollectionLoading","requestRefs","getReferencesRequest","getCollectionReferences","ALL","refs","sort","_this4","diff","getKeysWithDifferentValues","toggleReferencesOrder","amount","offset","editNodeProperty","CCM_PROP_COLLECTION_ORDER_MODE","instant","e","_this5","hasMore","appendData","loadMoreCollections","_this6","refreshBanner","setTimeout","initOptionsGenerator","actionbar","isDone","done","content","setCollectionSort","_this7","toggleCollectionsOrder","close","CollectionsCollection","activeObjects","initComponents","getInfobar","refreshComponents","_this8","open","log","changeCollectionsOrder","_this9","changeReferencesOrder","allowDuplicate","_this10","setOrder","getNodeIds","_this11","CCM_ASPECT_IO_REFERENCE","CCM_ASPECT_REMOTEREPOSITORY","_2","directiveInject","i1","AuthenticationService","i2","BridgeService","i3","RestCollectionService","ConfigService","i4","DialogsService","i5","InfobarService","i6","LoadingScreenService","i7","MainNavService","MdsService","i8","NodeHelperService","i9","RestNodeService","i10","OptionsHelperDataService","i11","ActivatedRoute","Router","i12","Toast","i13","TranslateService","i14","UIService","_3","selectors","contentQueries","CollectionContentComponent_ContentQueries","rf","ctx","dirIndex","CollectionContentComponent_Template_es_node_entries_wrapper_clickItem_3_listener","CollectionContentComponent_Template_es_node_entries_wrapper_fetchData_3_listener","CollectionContentComponent_Template_es_node_entries_wrapper_sortChange_3_listener","CollectionContentComponent_ng_template_4_Template","CollectionContentComponent_ng_template_6_Template","CollectionContentComponent_div_8_Template","CollectionContentComponent_ng_container_9_Template","SmallGrid","pureFunction1","_c7","tmp_8_0","ColorHelper","PreferredColor","CollectionInfoBarComponent_div_3_Template_div_click_2_listener","_r11","ctx_r10","edit","styleProp","ctx_r0","pipeBind2","ctx_r12","_c2","sanitizeUrl","CollectionInfoBarComponent_div_4_img_4_Template","preview","url","CollectionInfoBarComponent_div_5_Template_div_click_0_listener","_r14","ctx_r13","textInterpolate2","ctx_r4","childCollectionsCount","childReferencesCount","owner","authorFreetext","ctx_r8","permission_r18","authority","authorityType","group","user","CollectionInfoBarComponent_ng_container_28_div_5_ng_container_1_Template","stats","total","CollectionInfoBarComponent_ng_container_28_div_5_Template","CollectionInfoBarComponent_ng_container_28_ng_container_6_Template","CollectionInfoBarComponent","getStats","isBrightColor","getPreferredColor","White","hasNonIconPreview","isIcon","getScopeInfo","getCollectionScopeInfo","NodeService","viewQuery","CollectionInfoBarComponent_Query","CollectionInfoBarComponent_div_3_Template","CollectionInfoBarComponent_div_4_Template","CollectionInfoBarComponent_div_5_Template","CollectionInfoBarComponent_div_12_Template","CollectionInfoBarComponent_div_13_Template","CollectionInfoBarComponent_span_18_Template","CollectionInfoBarComponent_span_19_Template","CollectionInfoBarComponent_es_mds_viewer_27_Template","CollectionInfoBarComponent_ng_container_28_Template","attribute","styleMap","icon","scopeName","DefaultGroups","EduData","DialogButton","FrameEventsService","LocalPermissions","Permission","TemporaryStorageService","AuthorityNamePipe","Observable","CollectionNewComponent_div_2_div_1_div_1_Template_div_click_0_listener","restoredCtx","_r12","i_r10","index","step_r9","$implicit","currentStepPosition","newCollectionStep","STEP_ICONS","CollectionNewComponent_div_2_div_1_div_1_Template","ctx_r2","availableSteps","CollectionNewComponent_div_2_es_card_2_button_14_Template_button_click_0_listener","_r18","setCollectionType","CollectionNewComponent_div_2_es_card_2_button_15_Template_button_click_0_listener","_r20","ctx_r19","CollectionNewComponent_div_2_es_card_2_div_16_button_1_Template_button_click_0_listener","_r23","CollectionNewComponent_div_2_es_card_2_div_16_button_1_Template","ctx_r15","createEditorial","CollectionNewComponent_div_2_es_card_2_button_17_Template_button_click_0_listener","_r25","ctx_r24","CollectionNewComponent_div_2_es_card_2_Template_es_card_onCancel_0_listener","_r27","ctx_r26","newCollectionCancel","CollectionNewComponent_div_2_es_card_2_Template_button_click_3_listener","ctx_r28","CollectionNewComponent_div_2_es_card_2_button_14_Template","CollectionNewComponent_div_2_es_card_2_button_15_Template","CollectionNewComponent_div_2_es_card_2_div_16_Template","CollectionNewComponent_div_2_es_card_2_button_17_Template","propertyInterpolate","canInvite","shareToAll","createMediacenter","CollectionNewComponent_div_2_es_card_3_div_9_Template_div_keyup_enter_0_listener","_r37","_r29","reference","click","CollectionNewComponent_div_2_es_card_3_div_9_Template_div_click_0_listener","currentCollection","CollectionNewComponent_div_2_es_card_3_div_10_Template_div_keyup_enter_0_listener","_r40","CollectionNewComponent_div_2_es_card_3_div_10_Template_div_click_0_listener","CollectionNewComponent_div_2_es_card_3_div_11_Template_div_keyup_enter_0_listener","_r43","CollectionNewComponent_div_2_es_card_3_div_11_Template_div_click_0_listener","imageData","CollectionNewComponent_div_2_es_card_3_ng_container_26_button_5_Template_button_click_0_listener","_r47","ctx_r46","switchToAuthorFreetext","CollectionNewComponent_div_2_es_card_3_ng_container_26_button_5_Template","ctx_r33","authorFreetextAllowed","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template_input_ngModelChange_6_listener","_r50","ctx_r49","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template_button_click_8_listener","ctx_r51","cancelAuthorFreetext","ctx_r34","CollectionNewComponent_div_2_es_card_3_li_33_Template_li_click_0_listener","_r55","color_r52","ctx_r54","setColor","propertyInterpolate1","index_r53","ctx_r35","CollectionNewComponent_div_2_es_card_3_Template_es_card_onCancel_0_listener","_r57","ctx_r56","CollectionNewComponent_div_2_es_card_3_Template_input_change_5_listener","ctx_r58","imageDataChanged","CollectionNewComponent_div_2_es_card_3_div_9_Template","CollectionNewComponent_div_2_es_card_3_div_10_Template","CollectionNewComponent_div_2_es_card_3_div_11_Template","CollectionNewComponent_div_2_es_card_3_Template_input_ngModelChange_19_listener","ctx_r59","CollectionNewComponent_div_2_es_card_3_Template_textarea_ngModelChange_24_listener","ctx_r60","description","CollectionNewComponent_div_2_es_card_3_ng_container_26_Template","CollectionNewComponent_div_2_es_card_3_ng_container_27_Template","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowright_32_listener","ctx_r61","setColorByDirection","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowup_32_listener","ctx_r62","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowleft_32_listener","ctx_r63","CollectionNewComponent_div_2_es_card_3_Template_ul_keydown_arrowdown_32_listener","ctx_r64","CollectionNewComponent_div_2_es_card_3_li_33_Template","imageOptions","COLORS","CollectionNewComponent_div_2_es_card_4_Template_es_card_onCancel_0_listener","_r67","ctx_r66","newCollectionType","toLowerCase","mdsSet","CollectionNewComponent_div_2_es_card_5_Template_es_card_onCancel_0_listener","_r73","ctx_r72","CollectionNewComponent_div_2_es_card_5_div_4_Template","CollectionNewComponent_div_2_es_card_5_Template_es_node_entries_wrapper_clickItem_5_listener","_r69","toggle","CollectionNewComponent_div_2_es_card_5_ng_template_7_Template","CollectionNewComponent_div_2_es_card_5_Template_mat_slide_toggle_ngModelChange_10_listener","ctx_r75","editorialPublic","editorialGroups","editorialColumns","_c9","_c8","CollectionNewComponent_div_2_es_card_6_Template_es_card_onCancel_0_listener","_r77","ctx_r76","CollectionNewComponent_div_2_es_card_6_Template_button_click_10_listener","ctx_r78","editPermissions","getShareStatus","CollectionNewComponent_div_2_div_1_Template","CollectionNewComponent_div_2_es_card_2_Template","CollectionNewComponent_div_2_es_card_3_Template","CollectionNewComponent_div_2_es_card_4_Template","CollectionNewComponent_div_2_es_card_5_Template","CollectionNewComponent_div_2_es_card_6_Template","STEP_NEW","STEP_GENERAL","STEP_METADATA","STEP_EDITORIAL_GROUPS","STEP_PERMISSIONS","CollectionNewComponent","handleKeyboardEvent","code","goBack","setCollection","observer","perm","metadataset","some","p","authorityName","AUTHORITY_EVERYONE","editId","rating","originalPermissions","getTypeForCollection","hasCustomScope","COLLECTIONSCOPE_CUSTOM_PUBLIC","COLLECTIONSCOPE_CUSTOM","EVENT_APPLY_NODE","sanitizer","bypassSecurityTrustUrl","updateImageOptions","fetch","then","res","blob","imageFile","tick","info","imageWindow","connector","iamService","mediacenterService","eventService","platformLocation","temporaryStorage","zone","configLegacy","configService","translations","translationService","mainNav","DEFAULT_COLORS","mainnav","createCurriculum","AUTHORITY_DISPLAYNAME","STEP_SETTINGS","GENERAL","METADATA","PERMISSIONS","SETTINGS","EDITORIAL_GROUPS","destroyed","editorialGroupsSelected","addListener","waitForInit","isLoggedIn","getSets","sets","filterValidMds","metadatasets","statusCode","STATUS_CODE_OK","hasToolPermissionInstant","TOOLPERMISSION_INVITE","TOOLPERMISSION_INVITE_ALLAUTHORITIES","TOOLPERMISSION_COLLECTION_EDITORIAL","TOOLPERMISSION_COLLECTION_CURRICULUM","getMediacenters","mediacenters","filter","m","administrationAccess","mediacenter","TOOLPERMISSION_COLLECTION_CHANGE_OWNER","getCurrentUserAsync","person","setParent","JSON","parse","updateAvailableSteps","getCollection","ROOT","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH","TOOLPERMISSION_GLOBAL_AUTHORITY_SEARCH_SHARE","searchGroups","GROUP_TYPE_EDITORIAL","CM_PROP_AUTHORITY_DISPLAYNAME","groups","additionalScope","perms","COLLECTIONSCOPE_MY","COLLECTIONSCOPE_ALL","saveCollection","updateCollection","navigateToCollectionId","handleNodeError","setPermissions","permissionsInfo","inherited","permission","editable","permissionsDummy","Node","iconURL","getThemeMimeIconSvg","isDirectory","openShareDialog","sendMessages","sendToApi","currentPermissions","result","isNewCollection","isEditCollection","parentId","rowLength","key","files","file","validType","startsWith","URL","createObjectURL","errorMessageContains","save","trim","COLLECTIONTYPE_MEDIA_CENTER","COLLECTIONTYPE_DEFAULT","save2","createCollection","saveImage","uploadCollectionImage","deleteCollectionImage","goToNextStep","getAvailableSteps","steps","isLastStep","pos","props","mds","getValues","loadMds","getEditoralGroups","organizationsRef","select","changed","change","selected","updateButtons","setCollectionGeneral","parentCollection","AddNodeAspects","CCM_ASPECT_LOMREPLICATION","CCM_ASPECT_CCLOM_GENERAL","editNodeMetadata","save3","save4","getEditorialGroupPermissions","copyAndCleanPermissions","setNodePermissions","notify","notifyMessage","COLLECTIONSCOPE_ORGA","pub","getAllAuthoritiesPermission","PERMISSION_CONSUMER","PERMISSION_COORDINATOR","list","window","history","back","add","pop","COLLECTION_ADD_NODES","deleteImage","imageFileRef","nativeElement","value","transform","authorFreetextInput","focus","openSearchWithReurl","reurlCreate","reurlTypes","Edit","Delete","RestConnectorService","RestIamService","RestMediacenterService","RestMdsService","PlatformLocation","NgZone","DomSanitizer","ConfigurationService","ApplicationRef","TranslationsService","CollectionNewComponent_Query","resolveDocument","CollectionNewComponent_es_global_progress_1_Template","CollectionNewComponent_div_2_Template","ActionbarComponent","CollectionProposalsComponent_section_0_Template_es_node_entries_wrapper_clickItem_6_listener","_r3","dataSourceCollectionProposals","CollectionsProposals","proposalColumns","CollectionProposalsComponent","optionsHelperService","CM_CREATOR","showLabel","refreshProposals","canEdit","getCollectionProposals","proposals","proposalCollection","listProposals","OptionsHelperService","CollectionProposalsComponent_Query","NgOnChangesFeature","decls","vars","consts","template","CollectionProposalsComponent_Template","CollectionProposalsComponent_section_0_Template","RouterModule","CollectionsPageComponent","routes","path","component","CollectionsPageRoutingModule","forChild","imports","exports","combineLatest","CollectionsPageComponent_mat_tab_group_1_mat_tab_2_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_3_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_4_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_5_ng_template_1_Template","CollectionsPageComponent_mat_tab_group_1_Template_mat_tab_group_selectedIndexChange_0_listener","_r21","tabSelectedIndex","CollectionsPageComponent_mat_tab_group_1_mat_tab_2_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_3_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_4_Template","CollectionsPageComponent_mat_tab_group_1_mat_tab_5_Template","CollectionsPageComponent_mat_tab_group_1_ng_template_7_Template","hasEditorial","hasMediacenter","CollectionsPageComponent_es_collection_info_bar_9_Template_es_collection_info_bar_edit_0_listener","collectionEdit","tmp_1_0","collectionContentRef","undefined","CollectionsPageComponent_a_13_Template_a_click_0_listener","navigateToSearch","CollectionsPageComponent_ng_container_14_div_1_Template_es_breadcrumbs_onDrop_2_listener","tabSelected","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_ng_container_1_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_ng_container_2_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_0_Template","CollectionsPageComponent_ng_container_14_ng_template_4_ng_container_1_Template","isRootLevelCollection","CollectionsPageComponent_ng_container_14_div_1_Template","CollectionsPageComponent_ng_container_14_ng_template_4_Template","showTabs","getScope","CollectionsPageComponent_ng_template_16_mat_slide_toggle_0_Template_mat_slide_toggle_ngModelChange_0_listener","sortInfo_r39","sortInfo","customActive","toggleCallback_r41","toggleCallback","ascending","CollectionsPageComponent_ng_template_16_button_1_i_3_Template","_r44","menu","CollectionsPageComponent_ng_template_16_mat_slide_toggle_0_Template","CollectionsPageComponent_ng_template_16_button_1_Template","CollectionsPageComponent_ng_template_16_Template_es_sort_dropdown_onSort_2_listener","callback_r40","columns_r38","INDEX_MAPPING","COLLECTIONSCOPE_TYPE_EDITORIAL","COLLECTIONSCOPE_TYPE_MEDIA_CENTER","collectionShare","_collectionShare","refreshAll","selectTab","breadcrumbsService","localEvents","tempStorage","networkService","temporaryStorageService","SCOPES","dialogCancelable","isReady","collectionSortEmitter","collectionCustomSortEmitter","referenceSortEmitter","referenceCustomSortEmitter","contentDetailObject","parentCollectionId","Reference","adminMediacenters","getRepositories","isValidLogin","initialize","goToLogin","nodesDeleted","NODE_RENDER_PARAMETER_DATA_SOURCE","isMobileWidth","innerWidth","MOBILE_WIDTH","addToOther","feedback","closeAddToOther","tab","getCollectionId","feedbackAllowed","PERMISSION_FEEDBACK","pinCollection","addPinning","getPrivacyScope","onCollectionsClick","displayCollectionById","HTTP_FORBIDDEN","setCollectionId","renderBreadcrumbs","closeDialog","dialogTitle","setNodePath","getNodeParents","reverse","iamUser","_ref","diffs","getDifferentKeys","Object","keys","viewType","reurl","_x","apply","arguments","c","BreadcrumbsService","LocalEventsService","RestNetworkService","CollectionsPageComponent_ContentQueries","CollectionsPageComponent_Template","CollectionsPageComponent_mat_tab_group_1_Template","CollectionsPageComponent_es_actionbar_3_Template","CollectionsPageComponent_ng_template_5_Template","CollectionsPageComponent_es_collection_info_bar_9_Template","CollectionsPageComponent_section_11_Template","CollectionsPageComponent_h1_12_Template","CollectionsPageComponent_a_13_Template","CollectionsPageComponent_ng_container_14_Template","CollectionsPageComponent_ng_template_16_Template","tutorialElement","collectionContentTemplateRef","tmp_6_0","_r2","pureFunction4","tmp_7_0","MdsModule","SharedModule","InfobarComponent","CollectionsPageModule","declarations","trigger","UIAnimation","InfobarComponent_div_0_div_8_div_1_button_2_Template_button_click_0_listener","button_r4","InfobarComponent_div_0_div_8_div_1_button_3_Template_button_click_0_listener","_r15","InfobarComponent_div_0_div_8_div_1_button_2_Template","InfobarComponent_div_0_div_8_div_1_button_3_Template","InfobarComponent_div_0_div_8_div_1_Template","_buttons","InfobarComponent_div_0_div_9_Template_div_click_0_listener","cancel","InfobarComponent_div_0_div_8_Template","InfobarComponent_div_0_div_9_Template","classMapInterpolate1","position","messageParameters","isCancelable","onCancel","buttonElements","btn","InfobarComponent_Query","InfobarComponent_div_0_Template","infobarBottom","ANIMATION_TIME_SLOW","ComponentPortal","overlay","Promise","resolve","overlayRef","dispose","portal","componentRef","attach","instance","button","onDestroy","inject","Overlay","factory","fac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}