{"version":3,"file":"default-src_app_features_dialogs_dialog-modules_license-dialog_license-dialog_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQuB;AAKS;AACK;AAYQ;AAGmB;AACqC;AACM;AACK;;;;;;;;;;;;;;;;;;;;;;;;IC9BhHS,6DAAA,2BAIG;IADDA,yDAAA,2BAAAG,oGAAAC,MAAA;MAAAJ,4DAAA,CAAAM,IAAA;MAAA,MAAAC,OAAA,GAAAP,4DAAA;MAAA,OAAAA,0DAAA,CAAAO,OAAA,CAAAG,OAAA,GAAAN,MAAA;IAAA,EAAqB;IACpBJ,qDAAA,GAA8C;;IAAAA,2DAAA,EAChD;;;;IAFCA,yDAAA,YAAAc,MAAA,CAAAJ,OAAA,CAAqB;IACpBV,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;;;;;IAW3CA,6DAAA,UAAsC;IAGhCA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,wDAAA,eAA4E;;IAC9EA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IACgCA,qDAAA,IAE/D;;IAAAA,2DAAA,EAAI;;;;IAVFA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,yCACF;IAEQA,wDAAA,GAA8D;IAA9DA,oEAAA,cAAAA,0DAAA,0CAAAA,6DAAA,CAA8D;IAKrEA,wDAAA,GAA6C;IAA7CA,yDAAA,SAAAA,0DAAA,QAAAwB,OAAA,CAAAC,oBAAA,WAAAzB,4DAAA,CAA6C;IAAiBA,wDAAA,GAE/D;IAF+DA,gEAAA,CAAAA,0DAAA,mCAE/D;;;;;IAGNA,6DAAA,UAAqC;IAG/BA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IACuDA,qDAAA,IAEtF;;IAAAA,2DAAA,EAAI;;;;IAVFA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,yCACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,8CACF;IAIyBA,wDAAA,GAA4C;IAA5CA,yDAAA,SAAAA,0DAAA,QAAA2B,OAAA,CAAAF,oBAAA,UAAAzB,4DAAA,CAA4C;IAAiBA,wDAAA,GAEtF;IAFsFA,gEAAA,CAAAA,0DAAA,mCAEtF;;;;;IAQNA,6DAAA,UAAuC;IAGjCA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IAK9BA,qDAAA,IAA0C;;IAAAA,2DAAA,EAC5C;;;;IAbGA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,gDACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,+CACF;IAMAA,wDAAA,GAA8C;IAA9CA,yDAAA,SAAAA,0DAAA,QAAA4B,OAAA,CAAAH,oBAAA,YAAAzB,4DAAA,CAA8C;IAE7CA,wDAAA,GAA0C;IAA1CA,gEAAA,CAAAA,0DAAA,mCAA0C;;;;;IAIjDA,6DAAA,UAA0C;IAGpCA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IAK9BA,qDAAA,IAA0C;;IAAAA,2DAAA,EAC5C;;;;IAbGA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,mDACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,kDACF;IAMAA,wDAAA,GAAiD;IAAjDA,yDAAA,SAAAA,0DAAA,QAAA6B,OAAA,CAAAJ,oBAAA,eAAAzB,4DAAA,CAAiD;IAEhDA,wDAAA,GAA0C;IAA1CA,gEAAA,CAAAA,0DAAA,mCAA0C;;;;;;IApFvDA,6DAAA,0BAKC;IAHCA,yDAAA,2BAAA8B,kGAAA1B,MAAA;MAAAJ,4DAAA,CAAA+B,IAAA;MAAA,MAAAC,OAAA,GAAAhC,4DAAA;MAAA,OAAAA,0DAAA,CAAAgC,OAAA,CAAAC,IAAA,GAAA7B,MAAA;IAAA,EAAkB;IAIlBJ,6DAAA,eAAU;IACAA,qDAAA,GAAuC;;IAAAA,2DAAA,EAAS;IACxDA,6DAAA,cAAoB;IAClBA,yDAAA,IAAAmC,8DAAA,mBAgBM;IACNnC,yDAAA,IAAAoC,8DAAA,mBAgBM;IACRpC,2DAAA,EAAM;IAERA,6DAAA,eAAU;IACAA,qDAAA,IAAwC;;IAAAA,2DAAA,EAAS;IACzDA,6DAAA,eAAqB;IACnBA,yDAAA,KAAAqC,+DAAA,mBAmBM;IACNrC,yDAAA,KAAAsC,+DAAA,mBAmBM;IACRtC,2DAAA,EAAM;;;;IAtFRA,yDAAA,YAAAuC,MAAA,CAAAN,IAAA,CAAkB;IAKRjC,wDAAA,GAAuC;IAAvCA,gEAAA,CAAAA,0DAAA,8BAAuC;IAEvCA,wDAAA,GAA8B;IAA9BA,yDAAA,SAAAuC,MAAA,CAAAC,gBAAA,SAA8B;IAiB9BxC,wDAAA,GAA6B;IAA7BA,yDAAA,SAAAuC,MAAA,CAAAC,gBAAA,QAA6B;IAoB7BxC,wDAAA,GAAwC;IAAxCA,gEAAA,CAAAA,0DAAA,gCAAwC;IAExCA,wDAAA,GAA+B;IAA/BA,yDAAA,SAAAuC,MAAA,CAAAC,gBAAA,UAA+B;IAoB/BxC,wDAAA,GAAkC;IAAlCA,yDAAA,SAAAuC,MAAA,CAAAC,gBAAA,aAAkC;;;;;IA2BxCxC,6DAAA,qBAAuE;IAAAA,qDAAA,GAErE;;IAAAA,2DAAA,EAAa;;;;IAFsCA,yDAAA,UAAAyC,WAAA,CAAiB;IAACzC,wDAAA,GAErE;IAFqEA,gEAAA,CAAAA,0DAAA,2BAAAyC,WAAA,EAErE;;;;;IAiBAzC,6DAAA,2BAAkE;IAAAA,qDAAA,GAEhE;;IAAAA,2DAAA,EAAmB;;;IAF6CA,wDAAA,GAEhE;IAFgEA,gEAAA,CAAAA,0DAAA,yCAEhE;;;;;IACFA,6DAAA,2BAAkE;IAAAA,qDAAA,GAEhE;;IAAAA,2DAAA,EAAmB;;;IAF6CA,wDAAA,GAEhE;IAFgEA,gEAAA,CAAAA,0DAAA,aAEhE;;;;;;IAVNA,6DAAA,UAA0E;IACpEA,qDAAA,GAA8C;;IAAAA,2DAAA,EAAK;IACvDA,6DAAA,SAAI;IAAAA,qDAAA,GAAmD;;IAAAA,2DAAA,EAAK;IAC5DA,6DAAA,0BAAuC;IAAtBA,yDAAA,2BAAA0C,kGAAAtC,MAAA;MAAAJ,4DAAA,CAAA2C,IAAA;MAAA,MAAAC,OAAA,GAAA5C,4DAAA;MAAA,OAAAA,0DAAA,CAAA4C,OAAA,CAAAC,OAAA,GAAAzC,MAAA;IAAA,EAAqB;IACpCJ,6DAAA,2BAA2B;IAAAA,qDAAA,GAAuB;;IAAAA,2DAAA,EAAmB;IACrEA,yDAAA,KAAA8C,4EAAA,+BAEqB;IACrB9C,yDAAA,KAAA+C,4EAAA,+BAEqB;IACvB/C,2DAAA,EAAkB;;;;IAVdA,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;IAC9CA,wDAAA,GAAmD;IAAnDA,gEAAA,CAAAA,0DAAA,0CAAmD;IACtCA,wDAAA,GAAqB;IAArBA,yDAAA,YAAAgD,OAAA,CAAAH,OAAA,CAAqB;IACT7C,wDAAA,GAAuB;IAAvBA,gEAAA,CAAAA,0DAAA,gBAAuB;IAC/BA,wDAAA,GAAkC;IAAlCA,yDAAA,SAAAgD,OAAA,CAAAR,gBAAA,aAAkC;IAGlCxC,wDAAA,GAAkC;IAAlCA,yDAAA,SAAAgD,OAAA,CAAAR,gBAAA,aAAkC;;;;;;IAKzDxC,6DAAA,UAA0C;IACpCA,qDAAA,GAAmD;;IAAAA,2DAAA,EAAK;IAC5DA,6DAAA,SAAI;IAAAA,qDAAA,GAAwD;;IAAAA,2DAAA,EAAK;IACjEA,6DAAA,0BAA4C;IAA3BA,yDAAA,2BAAAiD,kGAAA7C,MAAA;MAAAJ,4DAAA,CAAAkD,IAAA;MAAA,MAAAC,OAAA,GAAAnD,4DAAA;MAAA,OAAAA,0DAAA,CAAAmD,OAAA,CAAAC,YAAA,GAAAhD,MAAA;IAAA,EAA0B;IACzCJ,6DAAA,2BAA2B;IAAAA,qDAAA,GAAuB;;IAAAA,2DAAA,EAAmB;IACrEA,6DAAA,4BAA6B;IAAAA,qDAAA,IAAsB;;IAAAA,2DAAA,EAAmB;;;;IAJpEA,wDAAA,GAAmD;IAAnDA,gEAAA,CAAAA,0DAAA,0CAAmD;IACnDA,wDAAA,GAAwD;IAAxDA,gEAAA,CAAAA,0DAAA,+CAAwD;IAC3CA,wDAAA,GAA0B;IAA1BA,yDAAA,YAAAqD,OAAA,CAAAD,YAAA,CAA0B;IACdpD,wDAAA,GAAuB;IAAvBA,gEAAA,CAAAA,0DAAA,eAAuB;IACrBA,wDAAA,GAAsB;IAAtBA,gEAAA,CAAAA,0DAAA,eAAsB;;;;;IA3BzDA,6DAAA,cAAgD;;IAMzCA,qDAAA,GAA8C;;IAAAA,2DAAA,EAChD;IAEHA,yDAAA,IAAAsD,wDAAA,mBAYM;IACNtD,yDAAA,IAAAuD,wDAAA,mBAOM;IACRvD,2DAAA,EAAM;;;;IA1BAA,wDAAA,GAAoD;IAApDA,yDAAA,SAAAA,0DAAA,OAAAwD,OAAA,CAAA/B,oBAAA,kBAAAzB,4DAAA,CAAoD;IAEnDA,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;IAG7CA,wDAAA,GAAkE;IAAlEA,yDAAA,SAAAwD,OAAA,CAAAhB,gBAAA,gBAAAgB,OAAA,CAAAhB,gBAAA,aAAkE;IAalExC,wDAAA,GAAkC;IAAlCA,yDAAA,SAAAwD,OAAA,CAAAhB,gBAAA,aAAkC;;;;;IAcxCxC,6DAAA,UAAgD;IAG1CA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,wDAAA,eAAmF;;IACrFA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;;;IALlBA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,gDACF;IAEQA,wDAAA,GAAqE;IAArEA,oEAAA,cAAAA,0DAAA,iDAAAA,6DAAA,CAAqE;;;;;IAKnFA,6DAAA,UAAmD;IAG7CA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;;;IALlBA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,mDACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,wDACF;;;;;;IAzBRA,6DAAA,0BAIC;IAHCA,yDAAA,2BAAAyD,wGAAArD,MAAA;MAAAJ,4DAAA,CAAA0D,IAAA;MAAA,MAAAC,OAAA,GAAA3D,4DAAA;MAAA,OAAAA,0DAAA,CAAA2D,OAAA,CAAA1B,IAAA,GAAA7B,MAAA;IAAA,EAAkB;IAIlBJ,yDAAA,IAAA4D,oEAAA,iBAWM;IACN5D,yDAAA,IAAA6D,oEAAA,iBAWM;IACR7D,2DAAA,EAAkB;;;;IA5BhBA,yDAAA,YAAA8D,OAAA,CAAA7B,IAAA,CAAkB;IAIZjC,wDAAA,GAAwC;IAAxCA,yDAAA,SAAA8D,OAAA,CAAAtB,gBAAA,mBAAwC;IAYxCxC,wDAAA,GAA2C;IAA3CA,yDAAA,SAAA8D,OAAA,CAAAtB,gBAAA,sBAA2C;;;;;IAcjDxC,6DAAA,UAAsC;IAGhCA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,wDAAA,eAAwE;;IAC1EA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IACwDA,qDAAA,IAEvF;;IAAAA,2DAAA,EAAI;;;;IAVFA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,yCACF;IAEQA,wDAAA,GAA0D;IAA1DA,yDAAA,cAAAA,0DAAA,0CAAAA,6DAAA,CAA0D;IAKzCA,wDAAA,GAA6C;IAA7CA,yDAAA,SAAAA,0DAAA,QAAA+D,OAAA,CAAAtC,oBAAA,WAAAzB,4DAAA,CAA6C;IAAiBA,wDAAA,GAEvF;IAFuFA,gEAAA,CAAAA,0DAAA,mCAEvF;;;;;IAGNA,6DAAA,UAAqC;IAG/BA,sEAAA,OAA2B;IACzBA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACfA,sEAAA,OAAiC;IAC/BA,qDAAA,GACF;;IAAAA,oEAAA,EAAe;IACjBA,2DAAA,EAAsB;IAExBA,6DAAA,cAAmC;;IACuDA,qDAAA,IAEtF;;IAAAA,2DAAA,EAAI;;;;IAVFA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,yCACF;IAEEA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,8CACF;IAIyBA,wDAAA,GAA4C;IAA5CA,yDAAA,SAAAA,0DAAA,QAAAgE,OAAA,CAAAvC,oBAAA,UAAAzB,4DAAA,CAA4C;IAAiBA,wDAAA,GAEtF;IAFsFA,gEAAA,CAAAA,0DAAA,mCAEtF;;;;;;IAhCRA,6DAAA,0BAA8E;IAA7DA,yDAAA,2BAAAiE,yGAAA7D,MAAA;MAAAJ,4DAAA,CAAAkE,IAAA;MAAA,MAAAC,OAAA,GAAAnE,4DAAA;MAAA,OAAAA,0DAAA,CAAAmE,OAAA,CAAAlC,IAAA,GAAA7B,MAAA;IAAA,EAAkB;IACjCJ,yDAAA,IAAAoE,qEAAA,mBAgBM;IACNpE,yDAAA,IAAAqE,qEAAA,mBAgBM;IACRrE,2DAAA,EAAkB;;;;IAnCDA,yDAAA,YAAAsE,OAAA,CAAArC,IAAA,CAAkB;IAC3BjC,wDAAA,GAA8B;IAA9BA,yDAAA,SAAAsE,OAAA,CAAA9B,gBAAA,SAA8B;IAiB9BxC,wDAAA,GAA6B;IAA7BA,yDAAA,SAAAsE,OAAA,CAAA9B,gBAAA,QAA6B;;;;;;IAoCrCxC,6DAAA,cAAqD;IAEtCA,qDAAA,GAAyC;;IAAAA,2DAAA,EAAY;IAChEA,6DAAA,mBAOC;IAHCA,yDAAA,2BAAAuE,sFAAAnE,MAAA;MAAAJ,4DAAA,CAAAwE,IAAA;MAAA,MAAAC,OAAA,GAAAzE,4DAAA;MAAA,OAAAA,0DAAA,CAAAyE,OAAA,CAAAC,iBAAA,GAAAtE,MAAA;IAAA,EAA+B;IAGhCJ,2DAAA,EAAW;;;;IARDA,wDAAA,GAAyC;IAAzCA,gEAAA,CAAAA,0DAAA,gCAAyC;IAKlDA,wDAAA,GAA+B;IAA/BA,yDAAA,YAAA2E,OAAA,CAAAD,iBAAA,CAA+B;;;;;;IAnIvC1E,6DAAA,cAA0C;IAE3BA,qDAAA,GAA0C;;IAAAA,2DAAA,EAAY;IACjEA,6DAAA,yBAA2E;IAA1BA,yDAAA,2BAAA4E,iFAAAxE,MAAA;MAAAJ,4DAAA,CAAA6E,IAAA;MAAA,MAAAC,OAAA,GAAA9E,4DAAA;MAAA,OAAAA,0DAAA,CAAA8E,OAAA,CAAAC,WAAA,GAAA3E,MAAA;IAAA,EAAyB;IACxEJ,yDAAA,IAAAgF,yDAAA,yBAEe;IACjBhF,2DAAA,EAAa;IAEfA,yDAAA,IAAAiF,kDAAA,kBA8BM;IACNjF,yDAAA,IAAAkF,8DAAA,8BA6BkB;IAClBlF,yDAAA,KAAAmF,+DAAA,8BAmCkB;IAmBlBnF,yDAAA,KAAAoF,mDAAA,kBAYM;IACRpF,2DAAA,EAAM;;;;IAvISA,wDAAA,GAA0C;IAA1CA,gEAAA,CAAAA,0DAAA,iCAA0C;IACJA,wDAAA,GAAyB;IAAzBA,yDAAA,YAAAqF,MAAA,CAAAN,WAAA,CAAyB;IACxC/E,wDAAA,GAAmB;IAAnBA,yDAAA,YAAAqF,MAAA,CAAAC,gBAAA,CAAmB;IAKjDtF,wDAAA,GAA6B;IAA7BA,yDAAA,SAAAqF,MAAA,CAAAN,WAAA,aAA6B;IAiChC/E,wDAAA,GAAiC;IAAjCA,yDAAA,SAAAqF,MAAA,CAAAN,WAAA,iBAAiC;IA4BC/E,wDAAA,GAA4B;IAA5BA,yDAAA,SAAAqF,MAAA,CAAAN,WAAA,YAA4B;IAsD3D/E,wDAAA,GAA8B;IAA9BA,yDAAA,SAAAqF,MAAA,CAAAN,WAAA,cAA8B;;;;;;IAkBtC/E,6DAAA,4BAMC;IAHCA,yDAAA,iCAAAuF,4GAAAnF,MAAA;MAAAJ,4DAAA,CAAAwF,IAAA;MAAA,MAAAC,OAAA,GAAAzF,4DAAA;MAAA,OAAAA,0DAAA,CAAAyF,OAAA,CAAAC,aAAA,GAAAtF,MAAA;IAAA,EAAiC,+BAAAuF,0GAAAvF,MAAA;MAAAJ,4DAAA,CAAAwF,IAAA;MAAA,MAAAI,OAAA,GAAA5F,4DAAA;MAAA,OAAAA,0DAAA,CAAA4F,OAAA,CAAAC,WAAA,GAAAzF,MAAA;IAAA,kCAAA0F,2GAAA1F,MAAA;MAAAJ,4DAAA,CAAAwF,IAAA;MAAA,MAAAO,OAAA,GAAA/F,4DAAA;MAAA,OAAAA,0DAAA,CAAA+F,OAAA,CAAAC,YAAA,GAAA5F,MAAA;IAAA;IAGlCJ,2DAAA,EAAoB;;;;IAHnBA,yDAAA,kBAAAiG,MAAA,CAAAP,aAAA,CAAiC,gBAAAO,MAAA,CAAAJ,WAAA,kBAAAI,MAAA,CAAAD,YAAA;;;;;IAKjChG,6DAAA,SAA6B;IAAAA,qDAAA,GAA6C;;IAAAA,2DAAA,EAAK;;;IAAlDA,wDAAA,GAA6C;IAA7CA,gEAAA,CAAAA,0DAAA,oCAA6C;;;;;IAC1EA,wDAAA,cAAwF;;;;IAA/BA,oEAAA,QAAAkG,MAAA,CAAAC,cAAA,IAAAnG,4DAAA,CAA4B;;;;;IAO7EA,6DAAA,qBAA2E;IAAAA,qDAAA,GAEzE;IAAAA,2DAAA,EAAa;;;;IAFkCA,oEAAA,UAAAoG,WAAA,CAAAC,GAAA,CAAyB;IAACrG,wDAAA,GAEzE;IAFyEA,gEAAA,CAAAoG,WAAA,CAAAE,IAAA,CAEzE;;;;;;IAPRtG,6DAAA,cAAsD;IAEvCA,qDAAA,GAA4C;;IAAAA,2DAAA,EAAY;IACnEA,6DAAA,qBAAuD;IAAxBA,yDAAA,2BAAAuG,uFAAAnG,MAAA;MAAAJ,4DAAA,CAAAwG,IAAA;MAAA,MAAAC,OAAA,GAAAzG,4DAAA;MAAA,OAAAA,0DAAA,CAAAyG,OAAA,CAAAC,SAAA,GAAAtG,MAAA;IAAA,EAAuB;IACpDJ,6DAAA,qBAAqB;IAAAA,qDAAA,GAA8C;;IAAAA,2DAAA,EAAa;IAChFA,yDAAA,IAAA2G,+DAAA,yBAEe;IACjB3G,2DAAA,EAAa;;;;IANFA,wDAAA,GAA4C;IAA5CA,gEAAA,CAAAA,0DAAA,mCAA4C;IACxBA,wDAAA,GAAuB;IAAvBA,yDAAA,YAAA4G,OAAA,CAAAF,SAAA,CAAuB;IAC/B1G,wDAAA,GAA8C;IAA9CA,gEAAA,CAAAA,0DAAA,qCAA8C;IACnCA,wDAAA,GAAe;IAAfA,yDAAA,YAAA4G,OAAA,CAAAC,YAAA,CAAe;;;;;;IANvD7G,6DAAA,cAAsE;IACpEA,yDAAA,IAAA8G,kDAAA,mBAUM;IACN9G,6DAAA,cAA4B;IAEbA,qDAAA,GAA6C;;IAAAA,2DAAA,EAAY;IACpEA,6DAAA,qBAAiD;IAAxBA,yDAAA,2BAAA+G,iFAAA3G,MAAA;MAAAJ,4DAAA,CAAAgH,IAAA;MAAA,MAAAC,OAAA,GAAAjH,4DAAA;MAAA,OAAAA,0DAAA,CAAAiH,OAAA,CAAAC,SAAA,GAAA9G,MAAA;IAAA,EAAuB;IAC9CJ,6DAAA,qBAAwB;IAAAA,qDAAA,UAAG;IAAAA,2DAAA,EAAa;IACxCA,6DAAA,sBAAwB;IAAAA,qDAAA,WAAG;IAAAA,2DAAA,EAAa;IACxCA,6DAAA,sBAAwB;IAAAA,qDAAA,WAAG;IAAAA,2DAAA,EAAa;;;;IAjBxCA,wDAAA,GAAwB;IAAxBA,yDAAA,SAAAmH,MAAA,CAAAD,SAAA,UAAwB;IAaflH,wDAAA,GAA6C;IAA7CA,gEAAA,CAAAA,0DAAA,oCAA6C;IAC/BA,wDAAA,GAAuB;IAAvBA,yDAAA,YAAAmH,MAAA,CAAAD,SAAA,CAAuB;;;;;IAWlDlH,6DAAA,eAAyC;IAAAA,qDAAA,GAAyC;;IAAAA,2DAAA,EAAO;;;IAAhDA,wDAAA,GAAyC;IAAzCA,gEAAA,CAAAA,0DAAA,gCAAyC;;;;;IAClFA,6DAAA,eAA6C;IAAAA,qDAAA,GAE3C;;IAAAA,2DAAA,EAAO;;;IAFoCA,wDAAA,GAE3C;IAF2CA,gEAAA,CAAAA,0DAAA,oCAE3C;;;;;IAJJA,6DAAA,cAAgE;IAC9DA,yDAAA,IAAAoH,oDAAA,mBAAyF;IACzFpH,yDAAA,IAAAqH,oDAAA,mBAES;IACXrH,2DAAA,EAAM;;;;IAJeA,wDAAA,GAAoB;IAApBA,yDAAA,SAAAsH,MAAA,CAAAC,YAAA,GAAoB;IACjBvH,wDAAA,GAAqB;IAArBA,yDAAA,UAAAsH,MAAA,CAAAC,YAAA,GAAqB;;;;;IAM7CvH,6DAAA,cAAuE;IACrEA,qDAAA,GACF;IAAAA,2DAAA,EAAM;;;;IADJA,wDAAA,GACF;IADEA,iEAAA,MAAAwH,MAAA,CAAA9C,iBAAA,MACF;;;;;IACA1E,wDAAA,cAGO;;;;;IADLA,oEAAA,cAAAA,0DAAA,gCAAAyH,OAAA,CAAA1C,WAAA,GAAA/E,6DAAA,CAAkE;;;;;IAEpEA,6DAAA,UAAyC;IACvCA,wDAAA,cAAgF;;IAClFA,2DAAA,EAAM;;;;IADCA,wDAAA,GAAoE;IAApEA,oEAAA,cAAAA,0DAAA,gCAAA0H,OAAA,CAAAC,aAAA,GAAA3H,6DAAA,CAAoE;;;;;IAGzEA,6DAAA,UAAqB;IACnBA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;;;;IADJA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,yCAAA4H,OAAA,CAAA/E,OAAA,OACF;;;;;IACA7C,6DAAA,UAA0B;IACxBA,qDAAA,GACF;;IAAAA,2DAAA,EAAM;;;;IADJA,wDAAA,GACF;IADEA,iEAAA,MAAAA,0DAAA,8CAAA6H,OAAA,CAAAzE,YAAA,OACF;;;;;;;;;;IACApD,6DAAA,UAAgC;IAC9BA,qDAAA,GAEF;;;;IAAAA,2DAAA,EAAM;;;;IAFJA,wDAAA,GAEF;IAFEA,iEAAA,MAAAA,0DAAA,mCAAAA,8DAAA,IAAAiI,GAAA,EAAAC,OAAA,CAAAxB,SAAA,SAAA1G,0DAAA,OAAAA,0DAAA,0BAAAkI,OAAA,CAAAxB,SAAA,GAAAwB,OAAA,CAAAxB,SAAA,4BAEF;;;;;IAVF1G,6DAAA,UAAqC;IACnCA,yDAAA,IAAAmI,mDAAA,iBAEM;IACNnI,yDAAA,IAAAoI,mDAAA,iBAEM;IACNpI,yDAAA,IAAAqI,mDAAA,kBAGM;IACRrI,2DAAA,EAAM;;;;IAVEA,wDAAA,GAAa;IAAbA,yDAAA,SAAAsI,OAAA,CAAAzF,OAAA,CAAa;IAGb7C,wDAAA,GAAkB;IAAlBA,yDAAA,SAAAsI,OAAA,CAAAlF,YAAA,CAAkB;IAGlBpD,wDAAA,GAAwB;IAAxBA,yDAAA,SAAAsI,OAAA,CAAApB,SAAA,UAAwB;;;;;IAKhClH,6DAAA,cAAkF;;IAC5BA,qDAAA,GAElD;;IAAAA,2DAAA,EAAI;;;;IAFHA,wDAAA,GAAgC;IAAhCA,yDAAA,SAAAA,0DAAA,OAAAuI,OAAA,CAAAC,aAAA,KAAAxI,4DAAA,CAAgC;IAAiBA,wDAAA,GAElD;IAFkDA,gEAAA,CAAAA,0DAAA,iCAElD;;;ADlRR,MAAMyI,iBAAiB,GAAG,CACtB,MAAM,EACN,MAAM,EACN,OAAO,EACP,WAAW,EACX,4BAA4B,EAC5B,WAAW,EACX,QAAQ,CACX;AAED,MAAMC,aAAa,GAAG,CAClB,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,CACP;AAQK,MAAOC,6BAA6B;EActC,IAAI5D,WAAWA,CAACA,WAAmB;IAC/B,IAAI,CAACA,WAAW,CAAC6D,UAAU,CAAC,OAAO,CAAC,EAAE;MAClC;MACA,IAAI,CAAClC,SAAS,GAAG,EAAE;MACnB,IAAI,CAACQ,SAAS,GAAG,EAAE;MACnB,IAAI,CAACrE,OAAO,GAAG,EAAE;MACjB,IAAI,CAACO,YAAY,GAAG,EAAE;MACtB,IAAI,CAAC2B,WAAW,CAAC6D,UAAU,CAAC,IAAI,CAAC,EAAE;QAC/B,IAAI,CAAC5C,YAAY,GAAG,EAAE;QACtB,IAAI,CAACH,WAAW,GAAG,EAAE;QACrB,IAAI,CAACH,aAAa,GAAG,EAAE;OAC1B,MAAM,IAAIX,WAAW,IAAI,MAAM,EAAE;QAC9B;QACA,IAAI,CAACmC,SAAS,GAAG,KAAK;;KAE7B,MAAM;MACH;MACA,IAAI,CAAC,IAAI,CAACA,SAAS,EAAE,IAAI,CAACA,SAAS,GAAG,KAAK;;IAE/C,IAAI,CAAC2B,YAAY,GAAG9D,WAAW;IAC/B,IAAI,CAAC+D,aAAa,EAAE;EACxB;EACA,IAAI/D,WAAWA,CAAA;IACX,OAAO,IAAI,CAAC8D,YAAY;EAC5B;EACA,IAAI5G,IAAIA,CAACA,IAAY;IACjB,IAAIA,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,KAAK,EAAE;MACjC,IAAI,CAAC8G,OAAO,GAAG9G,IAAI;MACnBA,IAAI,GAAG,MAAM;;IAEjB,IAAIA,IAAI,IAAI,OAAO,EAAE;MACjB,IAAI,CAACmB,YAAY,GAAG,EAAE;MACtB,IAAI,CAACP,OAAO,GAAG,EAAE;;IAErB,IAAIZ,IAAI,IAAI,UAAU,EAAE;MACpBA,IAAI,GAAG,OAAO;MACd,IAAI,CAACY,OAAO,GAAG,IAAI;;IAEvB,IAAIZ,IAAI,CAAC2G,UAAU,CAAC,WAAW,CAAC,EAAE;MAC9B,IAAI,CAACjB,aAAa,GAAG1F,IAAI;MACzBA,IAAI,GAAG,WAAW;;IAEtB,IAAI,CAAC8C,WAAW,GAAG9C,IAAI;EAC3B;EACA,IAAIA,IAAIA,CAAA;IACJ,OAAO,IAAI,CAAC+G,kBAAkB,EAAE;EACpC;EACA,IAAIC,cAAcA,CAAA;IACd,OAAO,IAAI,CAACpC,YAAY;EAC5B;EACA,IAAInG,OAAOA,CAACA,OAAgB;IACxB,IAAI,CAACwI,QAAQ,GAAGxI,OAAO;IACvB,IAAI,CAACyI,YAAY,GAAG,KAAK;IACzB,IAAIzI,OAAO,EAAE;MACT,IAAI,IAAI,CAAC6G,YAAY,EAAE,EAAE;QACrB;OACH,MAAM;QACH,IAAI,CAACtF,IAAI,GAAG,MAAM;;;EAG9B;EACA,IAAIvB,OAAOA,CAAA;IACP,OAAO,IAAI,CAACwI,QAAQ;EACxB;EAgCAE,YACYC,SAA+B,EAC/BC,SAA2B,EAC3BC,MAA4B,EAC5BC,UAA6B,EAC7BC,wBAAkD,EAClDC,MAAsB,EACtBC,KAAY,EACZC,OAAwB;IAPxB,KAAAP,SAAS,GAATA,SAAS;IACT,KAAAC,SAAS,GAATA,SAAS;IACT,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,wBAAwB,GAAxBA,wBAAwB;IACxB,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,OAAO,GAAPA,OAAO;IA/GnB;;;;IAIU,KAAAC,IAAI,GAAG,IAAItK,wDAAY,EAAuB;IAC9C,KAAAuK,SAAS,GAAG,IAAIvK,wDAAY,EAAW;IACvC,KAAAwK,OAAO,GAAG,IAAIxK,wDAAY,EAAW;IAoE/C,KAAAsD,OAAO,GAAG,EAAE;IACZ,KAAAO,YAAY,GAAG,EAAE;IACjB,KAAAsC,aAAa,GAAG,EAAE;IAClB,KAAAG,WAAW,GAAG,EAAE;IAChB,KAAAqB,SAAS,GAAG,KAAK;IACjB,KAAAR,SAAS,GAAG,EAAE;IACd,KAAAV,YAAY,GAAG,EAAE;IACjB,KAAA2B,aAAa,GAAG,gBAAgB;IAChC,KAAAjD,iBAAiB,GAAG,EAAE;IAEtB,KAAAsF,YAAY,GAAG,IAAI;IACnB,KAAAnD,YAAY,GAAyC,EAAE;IAE/C,KAAAgC,YAAY,GAAG,EAAE;IAEjB,KAAAE,OAAO,GAAG,MAAM;IAChB,KAAAkB,OAAO,GAAG,MAAM;IAChB,KAAAd,YAAY,GAAG,KAAK,CAAC,CAAC;IACtB,KAAAe,OAAO,GAAG,IAAI;IACd,KAAAC,oBAAoB,GAAG,KAAK;IAC5B,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,oBAAoB,GAAG,KAAK;IAC5B,KAAAC,WAAW,GAAG,IAAI;IAClB,KAAApB,QAAQ,GAAG,IAAI;IAIf,KAAAqB,YAAY,GAAG,IAAI,CAAC,CAAC;EAW1B;;EAEHC,QAAQA,CAAA;IACJ,IAAI,CAACC,yBAAyB,CAAC/B,aAAa,CAAC;IAC7C,KAAK,IAAI,CAACgB,MAAM,CAACgB,mBAAmB,EAAE;IACtC,QAAQ,IAAI,CAACC,IAAI,CAACC,IAAI;MAClB,KAAK,OAAO;QACR,IAAI,CAACC,SAAS,CAAC,IAAI,CAACF,IAAI,CAACG,KAAK,CAAC;QAC/B;MACJ,KAAK,YAAY;QACb,IAAI,CAACC,cAAc,CAAC,IAAI,CAACJ,IAAI,CAACK,UAAU,CAAC;QACzC;;EAEZ;EAEQlC,aAAaA,CAAA;IACjB,IAAI,CAACiB,OAAO,CAACkB,IAAI,CAAC,IAAI,CAAChJ,IAAI,KAAK,OAAO,CAAC;EAC5C;EAEQ4I,SAASA,CAACK,OAAe;IAAA,IAAAC,KAAA;IAC7B,IAAI,CAACrB,SAAS,CAACmB,IAAI,CAAC,IAAI,CAAC;IACzB,IAAI,CAACG,SAAS,CAACF,OAAO,CAAC,CAACG,SAAS;MAAA,IAAAC,IAAA,GAAAC,wLAAA,CAC7B,WAAOT,KAAK,EAAI;QACZ,IAAI;UACA,MAAMK,KAAI,CAAC1B,wBAAwB,CAAC+B,aAAa,CAACV,KAAK,CAAC;SAC3D,CAAC,OAAOW,CAAC,EAAE;UACR,IAAIA,CAAC,YAAY5L,oGAAoB,IAAI4L,CAAC,CAACC,OAAO,EAAE;YAChDP,KAAI,CAACxB,KAAK,CAACgC,KAAK,CAAC,IAAI,EAAEF,CAAC,CAACC,OAAO,CAAC;WACpC,MAAM;YACHP,KAAI,CAACxB,KAAK,CAACgC,KAAK,CAACF,CAAC,CAAC;;UAEvBN,KAAI,CAACtB,IAAI,CAACoB,IAAI,CAAC,IAAI,CAAC;UACpB;;QAEJE,KAAI,CAACS,UAAU,EAAE;QACjBT,KAAI,CAACU,iBAAiB,EAAE;QACxBV,KAAI,CAACW,WAAW,EAAE;QAClBX,KAAI,CAACY,mBAAmB,EAAE;QAC1BZ,KAAI,CAACrB,SAAS,CAACmB,IAAI,CAAC,KAAK,CAAC;QAC1BE,KAAI,CAACrC,aAAa,EAAE;QACpBqC,KAAI,CAACa,YAAY,GAAG,IAAI;QACxB,IAAIC,CAAC,GAAG,CAAC;QACT,KAAK,MAAMC,IAAI,IAAIpB,KAAK,EAAE;UACtBmB,CAAC,EAAE;UACHd,KAAI,CAACvB,OAAO,CACPuC,kBAAkB,CAACD,IAAI,CAACE,GAAG,CAACC,EAAE,CAAC,CAC/BhB,SAAS,CAAEiB,WAA4B,IAAI;YACxCnB,KAAI,CAACmB,WAAW,GAAGA,WAAW,CAACA,WAAW,CAACC,gBAAgB;YAC3DpB,KAAI,CAACqB,eAAe,CAACP,CAAC,IAAId,KAAI,CAACsB,QAAQ,EAAE,EAAEC,MAAM,CAAC;UACtD,CAAC,CAAC;;MAEd,CAAC;MAAA,iBAAAC,EAAA;QAAA,OAAArB,IAAA,CAAAsB,KAAA,OAAAC,SAAA;MAAA;IAAA,KACAlB,KAAK,IAAI;MACN,IAAI,CAAChC,KAAK,CAACgC,KAAK,CAACA,KAAK,CAAC;MACvB,IAAI,CAAC9B,IAAI,CAACoB,IAAI,CAAC,IAAI,CAAC;IACxB,CAAC,CACJ;EACL;EAEQF,cAAcA,CAACC,UAAe;IAClC,IAAI,CAACY,UAAU,EAAE;IACjB,IAAI,CAACkB,WAAW,GAAG9B,UAAU;IAC7B,IAAI,CAACc,WAAW,EAAE;IAClB,IAAI,CAACC,mBAAmB,EAAE;IAC1B,IAAI,CAACtC,wBAAwB,CAAC+B,aAAa,CACvC,CACI;MACIR;KACI,CACX,EACD;MAAE+B,OAAO,EAAE;IAAK,CAAE,CACrB;IACD,IAAI,CAACjD,SAAS,CAACmB,IAAI,CAAC,KAAK,CAAC;IAC1B,IAAI,CAACnC,aAAa,EAAE;EACxB;EAEAtG,gBAAgBA,CAACwK,OAAe;IAC5B,OAAO,IAAI,CAACC,eAAe,IAAI,IAAI,IAAI,IAAI,CAACA,eAAe,CAACC,OAAO,CAACF,OAAO,CAAC,IAAI,CAAC,CAAC;EACtF;EAEAzF,YAAYA,CAAA;IACR,OACI,IAAI,CAACyB,kBAAkB,EAAE,IAAI,MAAM,IACnC,IAAI,CAACA,kBAAkB,EAAE,IAAI,KAAK,IAClC,IAAI,CAACA,kBAAkB,EAAE,IAAI,OAAO,IACpC,IAAI,CAACA,kBAAkB,EAAE,IAAI,UAAU;EAE/C;EAEQoC,SAASA,CAACN,KAAa;IAC3B,OAAOtL,+CAAQ,CACXsL,KAAK,CAACrL,GAAG,CAAE0N,CAAC,IACR,IAAI,CAACvD,OAAO,CACPwD,eAAe,CAACD,CAAC,CAACf,GAAG,CAACC,EAAE,EAAE,CAAC3M,mEAAa,CAAC2N,GAAG,CAAC,CAAC,CAC9CC,IAAI,CAAC7N,oDAAG,CAAE8N,EAAE,IAAKA,EAAE,CAACrB,IAAI,CAAC,CAAC,CAClC,CACJ;EACL;EAEQN,UAAUA,CAAA;IACd,IAAI,CAACrC,MAAM,CAACiE,GAAG,CAAC,iBAAiB,CAAC,CAACnC,SAAS,CAAEV,IAAc,IAAI;MAC5D,IAAI,CAACA,IAAI,EAAE;QACP,IAAI,CAACrF,gBAAgB,GAAGmD,iBAAiB;QACzC,IAAI,CAACwE,eAAe,GAAG,IAAI;OAC9B,MAAM;QACH,IAAI,CAAC3H,gBAAgB,GAAG,EAAE;QAC1B,IAAI,CAAC2H,eAAe,GAAGtC,IAAI;QAC3B,IAAI,CAAC,IAAI,CAACX,YAAY,EAAE;UACpB,IAAI,CAACtJ,OAAO,GAAG,KAAK;;QAExB,KAAK,MAAM+M,KAAK,IAAI9C,IAAI,EAAE;UACtB,IAAI8C,KAAK,CAAC7E,UAAU,CAAC,OAAO,CAAC,EAAE;YAC3B,IAAI,IAAI,CAACtD,gBAAgB,CAAC4H,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAC5C,IAAI,CAAC5H,gBAAgB,CAACoI,IAAI,CAAC,OAAO,CAAC;WAC1C,MAAM,IAAID,KAAK,IAAI,MAAM,IAAIA,KAAK,IAAI,KAAK,EAAE;YAC1C,IAAI,IAAI,CAACnI,gBAAgB,CAAC4H,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAC3C,IAAI,CAAC5H,gBAAgB,CAACoI,IAAI,CAAC,MAAM,CAAC;WACzC,MAAM,IAAID,KAAK,CAAC7E,UAAU,CAAC,WAAW,CAAC,EAAE;YACtC,IAAI,CAACtD,gBAAgB,CAACoI,IAAI,CAAC,WAAW,CAAC;YACvC,IAAI/C,IAAI,CAACuC,OAAO,CAAC,IAAI,CAACvF,aAAa,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAACA,aAAa,GAAG8F,KAAK;WACzE,MAAM,IAAIhF,iBAAiB,CAACyE,OAAO,CAACO,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE;YAC/C,IAAI,CAACnI,gBAAgB,CAACoI,IAAI,CAACD,KAAK,CAAC;;;;MAI7C,KAAK,MAAMT,OAAO,IAAI,IAAI,CAACzD,MAAM,CAACoE,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,EAAE;QAC7D,IAAI,CAACrI,gBAAgB,CAACsI,MAAM,CACxBZ,OAAO,CAACa,QAAQ,IAAI,CAAC,GACfb,OAAO,CAACa,QAAQ,GAChB,IAAI,CAACvI,gBAAgB,CAACoH,MAAM,GAAGM,OAAO,CAACa,QAAQ,EACrD,CAAC,EACDb,OAAO,CAACX,EAAE,CACb;;IAET,CAAC,CAAC;EACN;EAEMyB,WAAWA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAxC,wLAAA;MACb,IAAIwC,MAAI,CAAC9L,IAAI,KAAK,QAAQ,IAAI,CAAC8L,MAAI,CAACrJ,iBAAiB,CAACsJ,IAAI,EAAE,EAAE;QAC1DD,MAAI,CAACpE,KAAK,CAACgC,KAAK,CAAC,IAAI,EAAE,8BAA8B,CAAC;QACtD;;MAEJ,IAAIoC,MAAI,CAACjB,WAAW,EAAE;QAClB;QACA;QACA;QACA;QACA;QACA;QACAiB,MAAI,CAAClE,IAAI,CAACoB,IAAI,OAAO8C,MAAI,CAACE,aAAa,CAACF,MAAI,CAACjB,WAAW,CAAC,CAAC;QAC1D;;MAEJ,IAAI,CAACiB,MAAI,CAAC/E,kBAAkB,EAAE,IAAI+E,MAAI,CAAC3D,OAAO,EAAE;QAC5C;QACA;MAAA;MAEJ,IAAI8D,IAAI,GAAW,EAAE;MAErBA,IAAI,SAASH,MAAI,CAACE,aAAa,CAACC,IAAI,CAAC;MACrCH,MAAI,CAACjE,SAAS,CAACmB,IAAI,CAAC,IAAI,CAAC;MACzB,MAAMkD,YAAY,GAAW,EAAE;MAC/B,KAAK,MAAMjC,IAAI,IAAI6B,MAAI,CAACtB,QAAQ,EAAE,EAAE;QAChCP,IAAI,CAAClB,UAAU,GAAGkD,IAAI;QACtBH,MAAI,CAACnE,OAAO,CACPwE,0BAA0B,CAAClC,IAAI,CAACE,GAAG,CAACC,EAAE,EAAE3M,mEAAa,CAAC2O,sBAAsB,EAAEH,IAAI,CAAC,CACnF7C,SAAS,CACLiD,MAAM,IAAI;UACPH,YAAY,CAACT,IAAI,CAACY,MAAM,CAACpC,IAAI,CAAC;UAC9B6B,MAAI,CAACQ,eAAe,CAACrC,IAAI,CAAC;UAC1B,IAAIiC,YAAY,CAACzB,MAAM,KAAKqB,MAAI,CAACtB,QAAQ,EAAE,CAACC,MAAM,EAAE;YAChDqB,MAAI,CAACpE,KAAK,CAACA,KAAK,CAAC,iCAAiC,CAAC;YACnDoE,MAAI,CAACjE,SAAS,CAACmB,IAAI,CAAC,KAAK,CAAC;YAC1B8C,MAAI,CAAClE,IAAI,CAACoB,IAAI,CAACkD,YAAY,CAAC;;QAEpC,CAAC,EACAxC,KAAU,IAAI;UACXoC,MAAI,CAACjE,SAAS,CAACmB,IAAI,CAAC,KAAK,CAAC;UAC1B8C,MAAI,CAACpE,KAAK,CAACgC,KAAK,CAACA,KAAK,CAAC;QAC3B,CAAC,CACJ;;IACR;EACL;EAEQc,QAAQA,CAAA;IACZ,OAAO,IAAI,CAAChD,wBAAwB,CAAC+E,MAAM,CAACC,KAAK;EACrD;EAEQC,cAAcA,CAClBR,IAAY,EACZS,oBAAA,GAA4B,EAAE,EAC9BC,eAAe,GAAGD,oBAAoB,EACtCE,OAAO,GAAG,KAAK;IAEf,IAAI,IAAI,CAAC/B,WAAW,EAAE;MAClB,OAAO,IAAI,CAACA,WAAW,CAACoB,IAAI,CAAC,GAAG,IAAI,CAACpB,WAAW,CAACoB,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGU,eAAe;;IAE/E,IAAI,IAAI,CAACnC,QAAQ,EAAE,EAAE;MACjB,OAAO,IAAI,CAACjD,UAAU,CAACkF,cAAc,CACjC,IAAI,CAACjC,QAAQ,EAAE,EACfyB,IAAI,EACJS,oBAAoB,EACpBC,eAAe,EACfC,OAAO,CACV;KACJ,MAAM;MACH,OAAOD,eAAe;;EAE9B;EAEQ9C,WAAWA,CAAA;IACf,IAAIkB,OAAO,GAAG,IAAI,CAAC0B,cAAc,CAAChP,mEAAa,CAACoP,gBAAgB,EAAE,OAAO,EAAE,MAAM,CAAC;IAClF,IAAI,CAAC9B,OAAO,EAAEA,OAAO,GAAG,MAAM;IAC9B,IAAI,CAAC/K,IAAI,GAAG+K,OAAO;IACnB,IAAIA,OAAO,CAACpE,UAAU,CAAC,OAAO,CAAC,EAAE;MAC7B,IAAI,CAAC3G,IAAI,GAAG,OAAO;MACnB,IAAI+K,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAACrK,OAAO,GAAG,IAAI;MACpD,IAAImK,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAACrK,OAAO,GAAG,IAAI;MACpD,IAAImK,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC9J,YAAY,GAAG,IAAI;MAEzD,IAAI,CAACsC,aAAa,GAAG,IAAI,CAACgJ,cAAc,CAAChP,mEAAa,CAACqP,8BAA8B,CAAC;MACtF,IAAI,CAAClJ,WAAW,GAAG,IAAI,CAAC6I,cAAc,CAAChP,mEAAa,CAACsP,2BAA2B,CAAC;MACjF,IAAI,CAAChJ,YAAY,GAAG,IAAI,CAAC0I,cAAc,CAAChP,mEAAa,CAACuP,4BAA4B,CAAC;MACnF,IAAI,CAAC/H,SAAS,GAAG,IAAI,CAACwH,cAAc,CAChChP,mEAAa,CAACwP,2BAA2B,EACzC,IAAI,CAAChI,SAAS,CACjB;MACD,IAAI,CAACR,SAAS,GAAG,IAAI,CAACgI,cAAc,CAAChP,mEAAa,CAACyP,0BAA0B,CAAC;;IAElF,IAAInC,OAAO,IAAI,MAAM,EAAE;MACnB,IAAI,CAAC/K,IAAI,GAAG,MAAM;;IAEtB,IAAI+K,OAAO,IAAI,KAAK,EAAE;MAClB,IAAI,CAAC/K,IAAI,GAAG,KAAK;;IAErB,IAAI+K,OAAO,CAACpE,UAAU,CAAC,WAAW,CAAC,EAAE;MACjC,IAAI,CAAC3G,IAAI,GAAG,WAAW;MACvB,IAAI,CAAC0F,aAAa,GAAGqF,OAAO;;IAEhC,IAAIA,OAAO,IAAI,WAAW,EAAE;MACxB,IAAI,CAAC/K,IAAI,GAAG+K,OAAO;;IAEvB,IAAIA,OAAO,CAACpE,UAAU,CAAC,KAAK,CAAC,EAAE;MAC3B,IAAI,CAAC3G,IAAI,GAAG,KAAK;MACjB,IAAI+K,OAAO,CAACE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAACjD,OAAO,GAAG,MAAM;MACxD,IAAI+C,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAACjD,OAAO,GAAG,IAAI;MACpD,IAAI,CAACK,WAAW,GAAG0C,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAElD,IAAIF,OAAO,IAAI,QAAQ,EAAE,IAAI,CAAC/K,IAAI,GAAG+K,OAAO;IAE5C,IAAI,CAACtI,iBAAiB,GAAG,IAAI,CAACgK,cAAc,CAAChP,mEAAa,CAAC0P,2BAA2B,CAAC;IACvF,MAAMC,YAAY,GAAG,IAAI,CAACX,cAAc,CACpChP,mEAAa,CAAC4P,yBAAyB,EACvC,OAAO,EACP,MAAM,CACT;IACD,IAAI,CAACpF,OAAO,GAAGmF,YAAY,IAAI,MAAM,IAAIA,YAAY,IAAI,IAAI;IAC7DzP,+DAAQ,CAAC2P,6BAA6B,CAAC,gBAAgB,CAAC;IACxD3P,+DAAQ,CAAC2P,6BAA6B,CAAC,eAAe,CAAC;IACvD,IAAI,CAACpF,oBAAoB,GAAGkF,YAAY,IAAI,OAAO;EACvD;EAEArG,kBAAkBA,CAAA;IACd,IAAI1C,IAAI,GAAG,IAAI,CAACvB,WAAW;IAC3B,IAAI,IAAI,CAACA,WAAW,IAAI,MAAM,EAAE,OAAO,EAAE;IACzC,IAAI,IAAI,CAACA,WAAW,IAAI,OAAO,EAAE;MAC7B,IAAI,IAAI,CAAC3B,YAAY,EAAEkD,IAAI,IAAI,GAAG,GAAG,IAAI,CAAClD,YAAY;MACtD,IAAI,IAAI,CAACP,OAAO,EAAEyD,IAAI,IAAI,GAAG,GAAG,IAAI,CAACzD,OAAO;MAC5C,OAAOyD,IAAI;;IAEf,IAAI,IAAI,CAACvB,WAAW,IAAI,MAAM,EAAE;MAC5B,OAAO,IAAI,CAACgE,OAAO;;IAEvB,IAAI,IAAI,CAAChE,WAAW,IAAI,WAAW,EAAE;MACjC,OAAO,IAAI,CAAC4C,aAAa;;IAE7B,IAAI,IAAI,CAAC5C,WAAW,IAAI,KAAK,EAAE;MAC3BuB,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC2D,OAAO;MAC1B,IAAI,CAAC,IAAI,CAACK,WAAW,EAAEhE,IAAI,IAAI,KAAK;;IAGxC,OAAOA,IAAI;EACf;EAEAkJ,cAAcA,CAAA;IACV,OAAO,IAAI,CAAChG,UAAU,CAACiG,sBAAsB,CAAC,IAAI,CAACzG,kBAAkB,EAAE,CAAC;EAC5E;EAEAR,aAAaA,CAAA;IACT,OAAO,IAAI,CAACgB,UAAU,CAACkG,qBAAqB,CACxC,IAAI,CAAC1G,kBAAkB,EAAE,EACzB,IAAI,CAAC9B,SAAS,EACd,IAAI,CAACR,SAAS,CACjB;EACL;EAEAjF,oBAAoBA,CAACQ,IAAY;IAC7B,OAAO,IAAI,CAACuH,UAAU,CAACkG,qBAAqB,CAACzN,IAAI,EAAE,IAAI,CAACiF,SAAS,EAAE,IAAI,CAACR,SAAS,CAAC;EACtF;EAEAP,cAAcA,CAAA;IACV,OAAO,IAAI,CAACqD,UAAU,CAACmG,sBAAsB,CAAC,IAAI,CAAC3G,kBAAkB,EAAE,CAAC;EAC5E;EAEQuF,eAAeA,CAACrC,IAAU;IAC9B,IAAI,IAAI,CAAC7B,oBAAoB,EAAE;MAC3B;;IAEJ,IAAIuF,GAAG,GAAG,IAAI;IACd,IAAIC,KAAK,GAAG,CAAC;IACb,KAAK,MAAMC,IAAI,IAAI,IAAI,CAACxD,WAAW,CAACA,WAAW,EAAE;MAC7C,IAAIwD,IAAI,CAACC,SAAS,CAACC,aAAa,IAAItQ,mEAAa,CAACuQ,kBAAkB,EAAE;QAClEL,GAAG,GAAG,KAAK;QACX,IACIE,IAAI,CAACxD,WAAW,CAACY,OAAO,CAACxN,mEAAa,CAACwQ,iBAAiB,CAAC,IAAI,CAAC,CAAC,IAC/D,IAAI,CAAC9F,OAAO,EACd;UACE0F,IAAI,CAACxD,WAAW,CAACoB,IAAI,CAAChO,mEAAa,CAACwQ,iBAAiB,CAAC;;QAE1D,IAAIJ,IAAI,CAACxD,WAAW,CAACY,OAAO,CAACxN,mEAAa,CAACyQ,eAAe,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC/F,OAAO,EAAE;UAC/E0F,IAAI,CAACxD,WAAW,CAACoB,IAAI,CAAChO,mEAAa,CAACyQ,eAAe,CAAC;;QAExD;;;;;;;QAOA;;MAEJN,KAAK,EAAE;;IAEX;IACA,IAAI,CAACD,GAAG,IAAI,CAAC,IAAI,CAACxF,OAAO,EAAE;MACvB,IAAI,CAACkC,WAAW,CAACA,WAAW,CAACsB,MAAM,CAACiC,KAAK,EAAE,CAAC,CAAC;;IAEjD;IACA,IAAID,GAAG,IAAI,IAAI,CAACxF,OAAO,EAAE;MACrB,MAAM0F,IAAI,GAAGnQ,gEAAU,CAACyQ,2BAA2B,EAAE;MACrDN,IAAI,CAACxD,WAAW,GAAG,CAAC5M,mEAAa,CAACwQ,iBAAiB,EAAExQ,mEAAa,CAACyQ,eAAe,CAAC;MACnF,IAAI,CAAC7D,WAAW,CAACA,WAAW,CAACoB,IAAI,CAACoC,IAAI,CAAC;;IAE3C,MAAMxD,WAAW,GAAG3M,gEAAU,CAAC0Q,uBAAuB,CAClD,IAAI,CAAC/D,WAAW,CAACA,WAAW,EAC5B,IAAI,CAACA,WAAW,CAACgE,SAAS,CAC7B;IACD,IAAI,CAAC1G,OAAO,CAAC2G,kBAAkB,CAACrE,IAAI,CAACE,GAAG,CAACC,EAAE,EAAEC,WAAW,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,CAAC,CAACjB,SAAS,CACjF,MAAK,CAAE,CAAC,EACPM,KAAU,IAAK,IAAI,CAAChC,KAAK,CAACgC,KAAK,CAACA,KAAK,CAAC,CAC1C;EACL;EAEQa,eAAeA,CAACgE,IAAa;IACjC,IAAI,CAACpG,OAAO,GAAG,KAAK;IACpB,IAAI,IAAI,EACJ,KAAK,MAAM0F,IAAI,IAAI,IAAI,CAACxD,WAAW,CAACA,WAAW,EAAE;MAC7C,IACIwD,IAAI,CAACC,SAAS,CAACU,aAAa,IAAI/Q,mEAAa,CAACgR,uBAAuB,IACrEZ,IAAI,CAACxD,WAAW,CAACY,OAAO,CAACxN,mEAAa,CAACwQ,iBAAiB,CAAC,IAAI,CAAC,CAAC,EACjE;QACE,IAAI,IAAI,CAAClE,YAAY,IAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAI,MAAM,EACxD,IAAI,CAACA,YAAY,GAAG,OAAO,CAAC,KAC3B,IAAI,CAACA,YAAY,GAAG,MAAM;QAC/B,IAAIwE,IAAI,EAAE,IAAI,CAACG,kBAAkB,EAAE;QACnC;;;IAGZ,IAAI,IAAI,CAAC3E,YAAY,IAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAI,OAAO,EAAE,IAAI,CAACA,YAAY,GAAG,OAAO,CAAC,KACtF,IAAI,CAACA,YAAY,GAAG,OAAO;IAChC,IAAIwE,IAAI,EAAE,IAAI,CAACG,kBAAkB,EAAE;EACvC;EAEQA,kBAAkBA,CAAA;IACtB,IAAI,IAAI,CAAC3E,YAAY,IAAI,MAAM,EAAE,IAAI,CAAC5B,OAAO,GAAG,IAAI;IACpD,IAAI,IAAI,CAAC4B,YAAY,IAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAI,OAAO,EAAE,IAAI,CAAC5B,OAAO,GAAG,KAAK;IAEnF,IAAI,IAAI,CAAC4B,YAAY,IAAI,OAAO,EAAE;MAC9B,IAAI,CAAC3B,oBAAoB,GAAG,IAAI;;EAExC;EAEQwB,iBAAiBA,CAAA;IACrB,IAAI,CAACxC,SAAS,CACTuH,iBAAiB,CAAClR,mEAAa,CAACmR,oCAAoC,CAAC,CACrExF,SAAS,CAAEV,IAAa,IAAI;MACzB,IAAI,CAAC,IAAI,CAAC8B,QAAQ,EAAE,EAAE;QAClB;;MAEJ,IAAI,CAAC9B,IAAI,EAAE;QACP,IAAI,CAACJ,YAAY,GAAG,KAAK;QACzB;;MAEJ,KAAK,MAAM2B,IAAI,IAAI,IAAI,CAACO,QAAQ,EAAE,EAAE;QAChC,IAAIP,IAAI,CAAC4E,MAAM,CAAC5D,OAAO,CAACxN,mEAAa,CAACqR,yBAAyB,CAAC,IAAI,CAAC,CAAC,EAAE;UACpE,IAAI,CAACxG,YAAY,GAAG,KAAK;UACzB;;;IAGZ,CAAC,CAAC;EACV;EAEM0D,aAAaA,CAACC,IAAI,GAAG,IAAI,CAACpB,WAAW;IAAA,IAAAkE,MAAA;IAAA,OAAAzF,wLAAA;MACvC2C,IAAI,CAACxO,mEAAa,CAACoP,gBAAgB,CAAC,GAAG,CAACkC,MAAI,CAAChI,kBAAkB,EAAE,CAAC;MAClE,IAAI,CAACgI,MAAI,CAAC7G,oBAAoB,EAC1B+D,IAAI,CAACxO,mEAAa,CAAC4P,yBAAyB,CAAC,GAAG,CAAC0B,MAAI,CAAC9G,OAAO,CAAC;MAClE,IAAI8G,MAAI,CAACC,uBAAuB,EAAE,EAAE;QAChC/C,IAAI,CAACxO,mEAAa,CAACqP,8BAA8B,CAAC,GAAG,EAAE;QACvDb,IAAI,CAACxO,mEAAa,CAACsP,2BAA2B,CAAC,GAAG,EAAE;QACpDd,IAAI,CAACxO,mEAAa,CAACuP,4BAA4B,CAAC,GAAG,EAAE;QACrDf,IAAI,CAACxO,mEAAa,CAACwP,2BAA2B,CAAC,GAAG,EAAE;QACpDhB,IAAI,CAACxO,mEAAa,CAACyP,0BAA0B,CAAC,GAAG,EAAE;QACnD,IAAI6B,MAAI,CAACtL,aAAa,EAAE;UACpBwI,IAAI,CAACxO,mEAAa,CAACqP,8BAA8B,CAAC,GAAG,CAACiC,MAAI,CAACtL,aAAa,CAAC;;QAE7E,IAAIsL,MAAI,CAACnL,WAAW,EAAE;UAClBqI,IAAI,CAACxO,mEAAa,CAACsP,2BAA2B,CAAC,GAAG,CAACgC,MAAI,CAACnL,WAAW,CAAC;;QAExE,IAAImL,MAAI,CAAChL,YAAY,EAAE;UACnBkI,IAAI,CAACxO,mEAAa,CAACuP,4BAA4B,CAAC,GAAG,CAAC+B,MAAI,CAAChL,YAAY,CAAC;;QAE1E,IAAIgL,MAAI,CAAC9J,SAAS,EAAE;UAChBgH,IAAI,CAACxO,mEAAa,CAACwP,2BAA2B,CAAC,GAAG,CAAC8B,MAAI,CAAC9J,SAAS,CAAC;UAClE;UACA,IAAI8J,MAAI,CAAC9J,SAAS,KAAK,KAAK,EAAE;YAC1B8J,MAAI,CAACtK,SAAS,GAAG,EAAE;;;QAG3B,IAAIsK,MAAI,CAACtK,SAAS,EAAE;UAChBwH,IAAI,CAACxO,mEAAa,CAACyP,0BAA0B,CAAC,GAAG,CAAC6B,MAAI,CAACtK,SAAS,CAAC;;;MAGzEwH,IAAI,GAAG8C,MAAI,CAACE,MAAM,SACNF,MAAI,CAACE,MAAM,CAACC,SAAS,CACvBjD,IAAI,EACJ8C,MAAI,CAACvE,QAAQ,EAAE,EAAEC,MAAM,KAAK,CAAC,GAAGsE,MAAI,CAACvE,QAAQ,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAC5D,GACDyB,IAAI;MAEV,IAAI8C,MAAI,CAAC/O,IAAI,IAAI,QAAQ,EAAE;QACvBiM,IAAI,CAACxO,mEAAa,CAAC0P,2BAA2B,CAAC,GAAG,CAAC4B,MAAI,CAACtM,iBAAiB,CAAC;;MAE9E,OAAOwJ,IAAI;IAAC;EAChB;EAEA+C,uBAAuBA,CAAA;IACnB,OAAO,IAAI,CAACjI,kBAAkB,EAAE,IAAI,IAAI,CAACA,kBAAkB,EAAE,CAACJ,UAAU,CAAC,OAAO,CAAC;EACrF;EAEA;;;;EAIQ6B,yBAAyBA,CAAC2G,SAAmB;IACjD;IACA;IACA;IACA;IACA,IAAI,CAACvK,YAAY,GAAG,EAAE;IACtBuK,SAAS,CAACC,OAAO,CAAEC,OAAO,IAAI;MAC1B,IAAI,CAACzK,YAAY,CAAC6G,IAAI,CAAC;QACnBrH,GAAG,EAAEiL,OAAO;QACZhL,IAAI,EAAE,IAAI,CAACgD,SAAS,CAACqE,OAAO,CAAC,eAAe,GAAG2D,OAAO;OACzD,CAAC;IACN,CAAC,CAAC;IACF,IAAI,CAACzK,YAAY,CAAC0K,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAI,CAACC,aAAa,CAAC;MAAEF,CAAC,EAAEA,CAAC,CAAClL,IAAI;MAAEmL,CAAC,EAAEA,CAAC,CAACnL;IAAI,CAAE,CAAC,CAAC;EAClF;EAEA;;;;;;;;;;;EAWQoL,aAAaA,CAAC;IAAEF,CAAC;IAAEC;EAAC,CAA4B;IACpD,IAAID,CAAC,CAACG,WAAW,EAAE,GAAGF,CAAC,CAACE,WAAW,EAAE,EAAE,OAAO,CAAC,CAAC;IAChD,IAAIH,CAAC,CAACG,WAAW,EAAE,GAAGF,CAAC,CAACE,WAAW,EAAE,EAAE,OAAO,CAAC;IAC/C,OAAO,CAAC;EACZ;EAEAC,oBAAoBA,CAAA;IAChB,OACI,IAAI,CAACnF,QAAQ,EAAE,IAAI,IAAI,KACtB,IAAI,CAACjD,UAAU,CAACqI,sBAAsB,CACnC,IAAI,CAACpF,QAAQ,EAAE,EACf/M,mEAAa,CAACoS,oCAAoC,CACrD,IACG,IAAI,CAACtI,UAAU,CAACqI,sBAAsB,CAClC,IAAI,CAACpF,QAAQ,EAAE,EACf/M,mEAAa,CAACqS,wBAAwB,CACzC,CAAC;EAEd;EAEAC,sBAAsBA,CAAA;IAClB,IACI,IAAI,CAACxI,UAAU,CAACqI,sBAAsB,CAClC,IAAI,CAACpF,QAAQ,EAAE,EACf/M,mEAAa,CAACoS,oCAAoC,CACrD,EACH;MACE,IAAI,CAACrF,QAAQ,EAAE,CAAC4E,OAAO,CAClBlE,CAAC,IAAMA,CAAC,CAACnC,UAAU,CAACtL,mEAAa,CAACoS,oCAAoC,CAAC,GAAG,IAAK,CACnF;;IAEL,IACI,IAAI,CAACtI,UAAU,CAACqI,sBAAsB,CAClC,IAAI,CAACpF,QAAQ,EAAE,EACf/M,mEAAa,CAACqS,wBAAwB,CACzC,EACH;MACE,IAAI,CAACtF,QAAQ,EAAE,CAAC4E,OAAO,CAClBlE,CAAC,IAAMA,CAAC,CAACnC,UAAU,CAACtL,mEAAa,CAACqS,wBAAwB,CAAC,GAAG,IAAK,CACvE;;EAET;EAEQhG,mBAAmBA,CAAA;IACvB,IAAI,CAAC/B,YAAY,GACb,CAAC,IAAI,CAACiD,eAAe,IAAI,IAAI,CAACA,eAAe,CAACgF,MAAM,CAAExG,CAAC,IAAKA,CAAC,KAAK,MAAM,CAAC,CAACiB,MAAM,GAAG,CAAC;IACxF,IAAI,CAAChM,OAAO,GAAG,IAAI,CAACsJ,YAAY,KAAK,IAAI,CAACzC,YAAY,EAAE,IAAI,IAAI,CAACxC,WAAW,IAAI,MAAM,CAAC;EAC3F;EAAC,QAAAmN,CAAA;qBAnoBQvJ,6BAA6B,EAAA3I,gEAAA,CAAAoS,0EAAA,GAAApS,gEAAA,CAAAsS,kEAAA,GAAAtS,gEAAA,CAAAoS,0EAAA,GAAApS,gEAAA,CAAAyS,4EAAA,GAAAzS,gEAAA,CAAA2S,0GAAA,GAAA3S,gEAAA,CAAAoS,oEAAA,GAAApS,gEAAA,CAAA6S,kDAAA,GAAA7S,gEAAA,CAAAoS,qEAAA;EAAA;EAAA,QAAAY,EAAA;UAA7BrK,6BAA6B;IAAAsK,SAAA;IAAAC,SAAA,WAAAC,oCAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;iFAF3B,CAACtT,0GAAwB,EAAEC,+GAAmB,CAAC;IAAAuT,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,uCAAAN,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QC9I9DpT,yDAAA,IAAA2T,yDAAA,8BAKC;QACD3T,yDAAA,IAAA4T,wDAAA,+BA0FkB;QAClB5T,yDAAA,IAAA6T,4CAAA,kBAyIM;QACN7T,wDAAA,wCAG+B;QAC/BA,yDAAA,IAAA8T,0DAAA,+BAMqB;QACrB9T,6DAAA,aAA4B;QAC1BA,yDAAA,IAAA+T,2CAAA,gBAA+E;QAC/E/T,yDAAA,IAAAgU,4CAAA,iBAAwF;QACxFhU,yDAAA,IAAAiU,4CAAA,kBAsBM;QACNjU,6DAAA,eAAyB;QACnBA,qDAAA,IAAsB;QAAAA,2DAAA,EAAK;QAC/BA,yDAAA,KAAAkU,6CAAA,kBAKM;QACRlU,2DAAA,EAAM;QACNA,6DAAA,eAAuC;QACrCA,yDAAA,KAAAmU,6CAAA,kBAEM;QACNnU,yDAAA,KAAAoU,6CAAA,kBAGO;QACPpU,yDAAA,KAAAqU,6CAAA,iBAEM;QACNrU,yDAAA,KAAAsU,6CAAA,iBAWM;QACNtU,yDAAA,KAAAuU,6CAAA,kBAIM;QACRvU,2DAAA,EAAM;;;QAnTLA,yDAAA,SAAAqT,GAAA,CAAArJ,YAAA,CAAkB;QAQlBhK,wDAAA,GAAa;QAAbA,yDAAA,SAAAqT,GAAA,CAAA3S,OAAA,CAAa;QAuFUV,wDAAA,GAAc;QAAdA,yDAAA,UAAAqT,GAAA,CAAA3S,OAAA,CAAc;QA4ItCV,wDAAA,GAAsC;QAAtCA,yDAAA,2BAAAqT,GAAA,CAAAvG,WAAA,CAAsC;QAIrC9M,wDAAA,GAA+B;QAA/BA,yDAAA,SAAAqT,GAAA,CAAApC,uBAAA,GAA+B;QAM3BjR,wDAAA,GAAsB;QAAtBA,yDAAA,SAAAqT,GAAA,CAAApR,IAAA,aAAsB;QACrBjC,wDAAA,GAAsB;QAAtBA,yDAAA,SAAAqT,GAAA,CAAApR,IAAA,aAAsB;QACUjC,wDAAA,GAA8B;QAA9BA,yDAAA,SAAAqT,GAAA,CAAApR,IAAA,CAAA2G,UAAA,UAA8B;QAwB9D5I,wDAAA,GAAsB;QAAtBA,gEAAA,CAAAqT,GAAA,CAAA7D,cAAA,GAAsB;QACFxP,wDAAA,GAAsC;QAAtCA,yDAAA,SAAAqT,GAAA,CAAArK,kBAAA,eAAsC;QAQvBhJ,wDAAA,GAA8B;QAA9BA,yDAAA,SAAAqT,GAAA,CAAAtO,WAAA,cAA8B;QAIlE/E,wDAAA,GAA6D;QAA7DA,yDAAA,SAAAqT,GAAA,CAAAtO,WAAA,iBAAAsO,GAAA,CAAAtO,WAAA,iBAA6D;QAG1D/E,wDAAA,GAAiC;QAAjCA,yDAAA,SAAAqT,GAAA,CAAAtO,WAAA,iBAAiC;QAGjC/E,wDAAA,GAA6B;QAA7BA,yDAAA,SAAAqT,GAAA,CAAAtO,WAAA,aAA6B;QAY7B/E,wDAAA,GAAuD;QAAvDA,yDAAA,SAAAqT,GAAA,CAAAtO,WAAA,gBAAAsO,GAAA,CAAAtO,WAAA,YAAuD;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjTpC;AACU;AACkC;AAED;AAEW;;;;;AAQ7E,MAAO6P,sBAAsB;EAS/BxL,YACqCuB,IAAuB,EAChDkK,SAAgE,EAChEC,WAA+B;IAFN,KAAAnK,IAAI,GAAJA,IAAI;IAC7B,KAAAkK,SAAS,GAATA,SAAS;IACT,KAAAC,WAAW,GAAXA,WAAW;IATd,KAAA/K,OAAO,GAAG,IAAI0K,iDAAe,CAAC,IAAI,CAAC;IAE3B,KAAAM,UAAU,GAAG,IAAIL,kEAAY,CAAC,MAAM,EAAE;MAAEM,KAAK,EAAE;IAAS,CAAE,EAAE,MACzE,IAAI,CAACC,OAAO,CAACnH,WAAW,EAAE,CAC7B;EAME;EAEHtD,QAAQA,CAAA;IACJ,IAAI,CAAC0K,WAAW,EAAE;IAClB,IAAI,CAACC,qBAAqB,EAAE;EAChC;EAEQD,WAAWA,CAAA;IACf,IAAI,CAACL,SAAS,CAACO,WAAW,CAAC;MACvBC,OAAO,EAAE,CACL,IAAIX,kEAAY,CAAC,QAAQ,EAAE;QAAEM,KAAK,EAAE;MAAU,CAAE,EAAE,MAAM,IAAI,CAACH,SAAS,CAACS,KAAK,CAAC,IAAI,CAAC,CAAC,EACnF,IAAI,CAACP,UAAU;KAEtB,CAAC;EACN;EAEQI,qBAAqBA,CAAA;IACzBX,+CAAkB,CAAC,CAAC,IAAI,CAACzK,OAAO,EAAE,IAAI,CAAC8K,SAAS,CAACW,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,CAACnK,SAAS,CAClF,CAAC,CAACtB,OAAO,EAAED,SAAS,CAAC,KAAI;MACrB,IAAI,CAACiL,UAAU,CAACU,QAAQ,GAAG3L,SAAS,IAAI,CAACC,OAAO;IACpD,CAAC,CACJ;EACL;EAEA2L,MAAMA,CAACpH,MAA2B;IAC9B,IAAI,CAACuG,SAAS,CAACS,KAAK,CAAChH,MAAM,CAAC;IAC5B,IAAI,IAAI,CAAC3D,IAAI,CAACC,IAAI,KAAK,OAAO,IAAI+K,KAAK,CAACC,OAAO,CAACtH,MAAM,CAAC,EAAE;MACrD,IAAI,CAACwG,WAAW,CAACe,YAAY,CAAC5K,IAAI,CAACqD,MAAgB,CAAC;;EAE5D;EAEAwH,YAAYA,CAAChM,SAAkB;IAC3B,KAAKiM,OAAO,CAACC,OAAO,EAAE,CAACC,IAAI,CAAC,MAAK;MAC7B,IAAI,CAACpB,SAAS,CAACqB,UAAU,CAAC;QAAEpM;MAAS,CAAE,CAAC;IAC5C,CAAC,CAAC;EACN;EAAC,QAAAoI,CAAA;qBAhDQ0C,sBAAsB,EAAA5U,+DAAA,CAUnB2U,6EAAgB,GAAA3U,+DAAA,CAAAoS,uEAAA,GAAApS,+DAAA,CAAAsS,kEAAA;EAAA;EAAA,QAAAU,EAAA;UAVnB4B,sBAAsB;IAAA3B,SAAA;IAAAC,SAAA,WAAAmD,6BAAAjD,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;kEACpBzK,4FAA6B;;;;;;;;;;;;QChB5C3I,4DAAA,mCAKC;QAHCA,wDAAA,kBAAAsW,0EAAAlW,MAAA;UAAA,OAAQiT,GAAA,CAAAqC,MAAA,CAAAtV,MAAA,CAAc;QAAA,EAAC,uBAAAmW,+EAAAnW,MAAA;UAAA,OACViT,GAAA,CAAAyC,YAAA,CAAA1V,MAAA,CAAoB;QAAA,EADV,qBAAAoW,6EAAApW,MAAA;UAAA,OAEZiT,GAAA,CAAAtJ,OAAA,CAAA0M,IAAA,CAAArW,MAAA,CAAoB;QAAA,EAFR;QAGxBJ,0DAAA,EAA4B;;;QAJ3BA,wDAAA,SAAAqT,GAAA,CAAA1I,IAAA,CAAa;;;;;;;;;;;;;;;;;;;;;;;;;;ACAiD;AACI;AACe;AAC/B;;AAElB;AAO5B,MAAOiM,mBAAmB;EAAA,QAAA1E,CAAA;qBAAnB0E,mBAAmB;EAAA;EAAA,QAAA5D,EAAA;UAAnB4D;EAAmB;EAAA,QAAAC,EAAA;cAHlBH,+DAAY,EAAEC,sDAAS;EAAA;;;sHAGxBC,mBAAmB;IAAAE,YAAA,GAJblC,6EAAsB,EAAEjM,4FAA6B;IAAAoO,OAAA,GAC1DL,+DAAY,EAAEC,sDAAS;IAAAK,OAAA,GACvBrO,4FAA6B;EAAA;AAAA","sources":["./src/app/features/dialogs/dialog-modules/license-dialog/license-dialog-content.component.ts","./src/app/features/dialogs/dialog-modules/license-dialog/license-dialog-content.component.html","./src/app/features/dialogs/dialog-modules/license-dialog/license-dialog.component.ts","./src/app/features/dialogs/dialog-modules/license-dialog/license-dialog.component.html","./src/app/features/dialogs/dialog-modules/license-dialog/license-dialog.module.ts"],"sourcesContent":["import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnInit,\n    Output,\n    ViewChild,\n} from '@angular/core';\nimport { LicenseDialogData, LicenseDialogResult } from './license-dialog-data';\n\nimport { TranslateService } from '@ngx-translate/core';\nimport { Values } from 'dist/edu-sharing-api/lib/api/models';\nimport { forkJoin } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport {\n    ConfigurationService,\n    DialogButton,\n    LocalPermissionsResult,\n    Node,\n    NodePermissions,\n    RestConnectorService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestNodeService,\n} from '../../../../core-module/core.module';\nimport { NodeHelperService } from '../../../../services/node-helper.service';\nimport { Toast } from '../../../../services/toast';\nimport { UIHelper } from '../../../../core-ui-module/ui-helper';\nimport { UserPresentableError } from '../../../../features/mds/mds-editor/mds-editor-common.service';\nimport { MdsEditorInstanceService } from '../../../../features/mds/mds-editor/mds-editor-instance.service';\nimport { ViewInstanceService } from '../../../../features/mds/mds-editor/mds-editor-view/view-instance.service';\nimport { MdsEditorWidgetAuthorComponent } from '../../../../features/mds/mds-editor/widgets/mds-editor-widget-author/mds-editor-widget-author.component';\n\nconst ALL_LICENSE_TYPES = [\n    'NONE',\n    'CC_0',\n    'CC_BY',\n    'SCHULFUNK',\n    'UNTERRICHTS_UND_LEHRMEDIEN',\n    'COPYRIGHT',\n    'CUSTOM',\n];\n\nconst ALL_COUNTRIES = [\n    'AE',\n    'AL',\n    'AR',\n    'AT',\n    'AU',\n    'BA',\n    'BG',\n    'BH',\n    'BO',\n    'BR',\n    'BY',\n    'CA',\n    'CH',\n    'CL',\n    'CN',\n    'CO',\n    'CR',\n    'CY',\n    'CZ',\n    'DE',\n    'DK',\n    'DO',\n    'DZ',\n    'EC',\n    'EE',\n    'EG',\n    'ES',\n    'FI',\n    'FR',\n    'GB',\n    'GR',\n    'GT',\n    'HK',\n    'HN',\n    'HR',\n    'HU',\n    'ID',\n    'IE',\n    'IL',\n    'IN',\n    'IQ',\n    'IS',\n    'IT',\n    'JO',\n    'JP',\n    'KR',\n    'KW',\n    'LB',\n    'LT',\n    'LU',\n    'LV',\n    'LY',\n    'MA',\n    'ME',\n    'MK',\n    'MT',\n    'MX',\n    'MY',\n    'NI',\n    'NL',\n    'NO',\n    'NZ',\n    'OM',\n    'PA',\n    'PE',\n    'PH',\n    'PL',\n    'PR',\n    'PT',\n    'PY',\n    'QA',\n    'RO',\n    'RS',\n    'RU',\n    'SA',\n    'SD',\n    'SE',\n    'SG',\n    'SI',\n    'SK',\n    'SY',\n    'TH',\n    'TN',\n    'TR',\n    'TW',\n    'UA',\n    'US',\n    'UY',\n    'VE',\n    'VN',\n    'YE',\n    'ZA',\n];\n\n@Component({\n    selector: 'es-license-dialog-content',\n    templateUrl: './license-dialog-content.component.html',\n    styleUrls: ['./license-dialog-content.component.scss'],\n    providers: [MdsEditorInstanceService, ViewInstanceService],\n})\nexport class LicenseDialogContentComponent implements OnInit {\n    @ViewChild('selectLicense') selectLicense: ElementRef;\n    @ViewChild('author') author: MdsEditorWidgetAuthorComponent;\n\n    @Input() data: LicenseDialogData;\n\n    /**\n     * Emits the updated node or properties (depending on the provided `data`) when saved and null\n     * when canceled.\n     */\n    @Output() done = new EventEmitter<LicenseDialogResult>();\n    @Output() isLoading = new EventEmitter<boolean>();\n    @Output() canSave = new EventEmitter<boolean>();\n\n    set primaryType(primaryType: string) {\n        if (!primaryType.startsWith('CC_BY')) {\n            // make sure to unset cc-values if they're inapplicable\n            this.ccCountry = '';\n            this.ccVersion = '';\n            this.ccShare = '';\n            this.ccCommercial = '';\n            if (!primaryType.startsWith('CC')) {\n                this.ccProfileUrl = '';\n                this.ccSourceUrl = '';\n                this.ccTitleOfWork = '';\n            } else if (primaryType == 'CC_0') {\n                // CC0 is only available in version 1.0\n                this.ccVersion = '1.0';\n            }\n        } else {\n            // if no version is selected select 4.0 by default\n            if (!this.ccVersion) this.ccVersion = '4.0';\n        }\n        this._primaryType = primaryType;\n        this.updateCanSave();\n    }\n    get primaryType() {\n        return this._primaryType;\n    }\n    set type(type: string) {\n        if (type == 'CC_0' || type == 'PDM') {\n            this.cc0Type = type;\n            type = 'CC_0';\n        }\n        if (type == 'CC_BY') {\n            this.ccCommercial = '';\n            this.ccShare = '';\n        }\n        if (type == 'CC_BY_SA') {\n            type = 'CC_BY';\n            this.ccShare = 'SA';\n        }\n        if (type.startsWith('COPYRIGHT')) {\n            this.copyrightType = type;\n            type = 'COPYRIGHT';\n        }\n        this.primaryType = type;\n    }\n    get type() {\n        return this.getLicenseProperty();\n    }\n    get getccCountries() {\n        return this._ccCountries;\n    }\n    set oerMode(oerMode: boolean) {\n        this._oerMode = oerMode;\n        this.showCcAuthor = false;\n        if (oerMode) {\n            if (this.isOerLicense()) {\n                return;\n            } else {\n                this.type = 'NONE';\n            }\n        }\n    }\n    get oerMode() {\n        return this._oerMode;\n    }\n\n    _properties: any;\n    ccShare = '';\n    ccCommercial = '';\n    ccTitleOfWork = '';\n    ccSourceUrl = '';\n    ccVersion = '4.0';\n    ccCountry = '';\n    ccProfileUrl = '';\n    copyrightType = 'COPYRIGHT_FREE';\n    rightsDescription = '';\n\n    oerAvailable = true;\n    _ccCountries: Array<{ key: string; name: string }> = [];\n    licenseMainTypes: string[];\n    private _primaryType = '';\n    private buttons: DialogButton[];\n    private cc0Type = 'CC_0';\n    private eduType = 'P_NR';\n    private showCcAuthor = false; // FIXME: not used.\n    private contact = true;\n    private contactIndeterminate = false;\n    private release = false;\n    private releaseIndeterminate = false;\n    private eduDownload = true;\n    private _oerMode = true;\n    private permissions: LocalPermissionsResult;\n    private allowedLicenses: string[];\n    private releaseMulti: string;\n    private allowRelease = true; // FIXME: not used.\n\n    constructor(\n        private connector: RestConnectorService,\n        private translate: TranslateService,\n        private config: ConfigurationService,\n        private nodeHelper: NodeHelperService,\n        private mdsEditorInstanceService: MdsEditorInstanceService,\n        private iamApi: RestIamService,\n        private toast: Toast,\n        private nodeApi: RestNodeService,\n    ) {}\n\n    ngOnInit(): void {\n        this.translateLicenseCountries(ALL_COUNTRIES);\n        void this.iamApi.getCurrentUserAsync();\n        switch (this.data.kind) {\n            case 'nodes':\n                this.initNodes(this.data.nodes);\n                break;\n            case 'properties':\n                this.initProperties(this.data.properties);\n                break;\n        }\n    }\n\n    private updateCanSave() {\n        this.canSave.emit(this.type !== 'MULTI');\n    }\n\n    private initNodes(nodesIn: Node[]) {\n        this.isLoading.emit(true);\n        this.loadNodes(nodesIn).subscribe(\n            async (nodes) => {\n                try {\n                    await this.mdsEditorInstanceService.initWithNodes(nodes);\n                } catch (e) {\n                    if (e instanceof UserPresentableError || e.message) {\n                        this.toast.error(null, e.message);\n                    } else {\n                        this.toast.error(e);\n                    }\n                    this.done.emit(null);\n                    return;\n                }\n                this.loadConfig();\n                this.checkAllowRelease();\n                this.readLicense();\n                this.setDefaultModeState();\n                this.isLoading.emit(false);\n                this.updateCanSave();\n                this.releaseMulti = null;\n                let i = 0;\n                for (const node of nodes) {\n                    i++;\n                    this.nodeApi\n                        .getNodePermissions(node.ref.id)\n                        .subscribe((permissions: NodePermissions) => {\n                            this.permissions = permissions.permissions.localPermissions;\n                            this.readPermissions(i == this.getNodes()?.length);\n                        });\n                }\n            },\n            (error) => {\n                this.toast.error(error);\n                this.done.emit(null);\n            },\n        );\n    }\n\n    private initProperties(properties: any) {\n        this.loadConfig();\n        this._properties = properties;\n        this.readLicense();\n        this.setDefaultModeState();\n        this.mdsEditorInstanceService.initWithNodes(\n            [\n                {\n                    properties,\n                } as any,\n            ],\n            { refetch: false },\n        );\n        this.isLoading.emit(false);\n        this.updateCanSave();\n    }\n\n    isAllowedLicense(license: string) {\n        return this.allowedLicenses == null || this.allowedLicenses.indexOf(license) != -1;\n    }\n\n    isOerLicense() {\n        return (\n            this.getLicenseProperty() == 'CC_0' ||\n            this.getLicenseProperty() == 'PDM' ||\n            this.getLicenseProperty() == 'CC_BY' ||\n            this.getLicenseProperty() == 'CC_BY_SA'\n        );\n    }\n\n    private loadNodes(nodes: Node[]) {\n        return forkJoin(\n            nodes.map((n) =>\n                this.nodeApi\n                    .getNodeMetadata(n.ref.id, [RestConstants.ALL])\n                    .pipe(map((n2) => n2.node)),\n            ),\n        );\n    }\n\n    private loadConfig() {\n        this.config.get('allowedLicenses').subscribe((data: string[]) => {\n            if (!data) {\n                this.licenseMainTypes = ALL_LICENSE_TYPES;\n                this.allowedLicenses = null;\n            } else {\n                this.licenseMainTypes = [];\n                this.allowedLicenses = data;\n                if (!this.oerAvailable) {\n                    this.oerMode = false;\n                }\n                for (const entry of data) {\n                    if (entry.startsWith('CC_BY')) {\n                        if (this.licenseMainTypes.indexOf('CC_BY') == -1)\n                            this.licenseMainTypes.push('CC_BY');\n                    } else if (entry == 'CC_0' || entry == 'PDM') {\n                        if (this.licenseMainTypes.indexOf('CC_0') == -1)\n                            this.licenseMainTypes.push('CC_0');\n                    } else if (entry.startsWith('COPYRIGHT')) {\n                        this.licenseMainTypes.push('COPYRIGHT');\n                        if (data.indexOf(this.copyrightType) == -1) this.copyrightType = entry;\n                    } else if (ALL_LICENSE_TYPES.indexOf(entry) != -1) {\n                        this.licenseMainTypes.push(entry);\n                    }\n                }\n            }\n            for (const license of this.config.instant('customLicenses', [])) {\n                this.licenseMainTypes.splice(\n                    license.position >= 0\n                        ? license.position\n                        : this.licenseMainTypes.length - license.position,\n                    0,\n                    license.id,\n                );\n            }\n        });\n    }\n\n    async saveLicense() {\n        if (this.type === 'CUSTOM' && !this.rightsDescription.trim()) {\n            this.toast.error(null, 'LICENSE.DESCRIPTION_REQUIRED');\n            return;\n        }\n        if (this._properties) {\n            // this._properties is set through getProperties, which is currently only used here and\n            // in EmbedComponent, which controls saving the changes on its own, so just return here\n            // fixme: if possible and worth it: unify (probably by letting license-dialog handle the\n            //  saving, so all we do here is emit;\n            //  on the other hand: having the dialog emit \"done\" only when everything went through\n            //  without error, as it currently is, is also nice)\n            this.done.emit(await this.getProperties(this._properties));\n            return;\n        }\n        if (!this.getLicenseProperty() && this.release) {\n            // this.toast.error(null,'WORKSPACE.LICENSE.RELEASE_WITHOUT_LICENSE');\n            // return;\n        }\n        let prop: Values = {};\n\n        prop = await this.getProperties(prop);\n        this.isLoading.emit(true);\n        const updatedNodes: Node[] = [];\n        for (const node of this.getNodes()) {\n            node.properties = prop;\n            this.nodeApi\n                .editNodeMetadataNewVersion(node.ref.id, RestConstants.COMMENT_LICENSE_UPDATE, prop)\n                .subscribe(\n                    (result) => {\n                        updatedNodes.push(result.node);\n                        this.savePermissions(node);\n                        if (updatedNodes.length === this.getNodes().length) {\n                            this.toast.toast('WORKSPACE.TOAST.LICENSE_UPDATED');\n                            this.isLoading.emit(false);\n                            this.done.emit(updatedNodes);\n                        }\n                    },\n                    (error: any) => {\n                        this.isLoading.emit(false);\n                        this.toast.error(error);\n                    },\n                );\n        }\n    }\n\n    private getNodes() {\n        return this.mdsEditorInstanceService.nodes$.value;\n    }\n\n    private getValueForAll(\n        prop: string,\n        fallbackNotIdentical: any = '',\n        fallbackIsEmpty = fallbackNotIdentical,\n        asArray = false,\n    ) {\n        if (this._properties) {\n            return this._properties[prop] ? this._properties[prop][0] : fallbackIsEmpty;\n        }\n        if (this.getNodes()) {\n            return this.nodeHelper.getValueForAll(\n                this.getNodes(),\n                prop,\n                fallbackNotIdentical,\n                fallbackIsEmpty,\n                asArray,\n            );\n        } else {\n            return fallbackIsEmpty;\n        }\n    }\n\n    private readLicense() {\n        let license = this.getValueForAll(RestConstants.CCM_PROP_LICENSE, 'MULTI', 'NONE');\n        if (!license) license = 'NONE';\n        this.type = license;\n        if (license.startsWith('CC_BY')) {\n            this.type = 'CC_BY';\n            if (license.indexOf('SA') != -1) this.ccShare = 'SA';\n            if (license.indexOf('ND') != -1) this.ccShare = 'ND';\n            if (license.indexOf('NC') != -1) this.ccCommercial = 'NC';\n\n            this.ccTitleOfWork = this.getValueForAll(RestConstants.CCM_PROP_LICENSE_TITLE_OF_WORK);\n            this.ccSourceUrl = this.getValueForAll(RestConstants.CCM_PROP_LICENSE_SOURCE_URL);\n            this.ccProfileUrl = this.getValueForAll(RestConstants.CCM_PROP_LICENSE_PROFILE_URL);\n            this.ccVersion = this.getValueForAll(\n                RestConstants.CCM_PROP_LICENSE_CC_VERSION,\n                this.ccVersion,\n            );\n            this.ccCountry = this.getValueForAll(RestConstants.CCM_PROP_LICENSE_CC_LOCALE);\n        }\n        if (license == 'CC_0') {\n            this.type = 'CC_0';\n        }\n        if (license == 'PDM') {\n            this.type = 'PDM';\n        }\n        if (license.startsWith('COPYRIGHT')) {\n            this.type = 'COPYRIGHT';\n            this.copyrightType = license;\n        }\n        if (license == 'SCHULFUNK') {\n            this.type = license;\n        }\n        if (license.startsWith('EDU')) {\n            this.type = 'EDU';\n            if (license.indexOf('P_NR') != -1) this.eduType = 'P_NR';\n            if (license.indexOf('NC') != -1) this.eduType = 'NC';\n            this.eduDownload = license.indexOf('ND') == -1;\n        }\n        if (license == 'CUSTOM') this.type = license;\n\n        this.rightsDescription = this.getValueForAll(RestConstants.LOM_PROP_RIGHTS_DESCRIPTION);\n        const contactState = this.getValueForAll(\n            RestConstants.CCM_PROP_QUESTIONSALLOWED,\n            'multi',\n            'true',\n        );\n        this.contact = contactState == 'true' || contactState == true;\n        UIHelper.invalidateMaterializeTextarea('authorFreetext');\n        UIHelper.invalidateMaterializeTextarea('licenseRights');\n        this.contactIndeterminate = contactState == 'multi';\n    }\n\n    getLicenseProperty() {\n        let name = this.primaryType;\n        if (this.primaryType == 'NONE') return '';\n        if (this.primaryType == 'CC_BY') {\n            if (this.ccCommercial) name += '_' + this.ccCommercial;\n            if (this.ccShare) name += '_' + this.ccShare;\n            return name;\n        }\n        if (this.primaryType == 'CC_0') {\n            return this.cc0Type;\n        }\n        if (this.primaryType == 'COPYRIGHT') {\n            return this.copyrightType;\n        }\n        if (this.primaryType == 'EDU') {\n            name += '_' + this.eduType;\n            if (!this.eduDownload) name += '_ND';\n        }\n\n        return name;\n    }\n\n    getLicenseName() {\n        return this.nodeHelper.getLicenseNameByString(this.getLicenseProperty());\n    }\n\n    getLicenseUrl() {\n        return this.nodeHelper.getLicenseUrlByString(\n            this.getLicenseProperty(),\n            this.ccVersion,\n            this.ccCountry,\n        );\n    }\n\n    getLicenseUrlVersion(type: string) {\n        return this.nodeHelper.getLicenseUrlByString(type, this.ccVersion, this.ccCountry);\n    }\n\n    getLicenseIcon() {\n        return this.nodeHelper.getLicenseIconByString(this.getLicenseProperty());\n    }\n\n    private savePermissions(node: Node) {\n        if (this.releaseIndeterminate) {\n            return;\n        }\n        let add = true;\n        let index = 0;\n        for (const perm of this.permissions.permissions) {\n            if (perm.authority.authorityName == RestConstants.AUTHORITY_EVERYONE) {\n                add = false;\n                if (\n                    perm.permissions.indexOf(RestConstants.ACCESS_CC_PUBLISH) == -1 &&\n                    this.release\n                ) {\n                    perm.permissions.push(RestConstants.ACCESS_CC_PUBLISH);\n                }\n                if (perm.permissions.indexOf(RestConstants.ACCESS_CONSUMER) == -1 && this.release) {\n                    perm.permissions.push(RestConstants.ACCESS_CONSUMER);\n                }\n                /*if(perm.permissions.indexOf(RestConstants.ACCESS_CC_PUBLISH)!=-1 && !this.release){\n              perm.permissions.splice(perm.permissions.indexOf(RestConstants.ACCESS_CC_PUBLISH),1);\n            }\n            if(perm.permissions.indexOf(RestConstants.ACCESS_CONSUMER)!=-1 && !this.release){\n              perm.permissions.splice(perm.permissions.indexOf(RestConstants.ACCESS_CONSUMER),1);\n            }\n            */\n                break;\n            }\n            index++;\n        }\n        // remove all_authorities\n        if (!add && !this.release) {\n            this.permissions.permissions.splice(index, 1);\n        }\n        // add all_authorities\n        if (add && this.release) {\n            const perm = RestHelper.getAllAuthoritiesPermission();\n            perm.permissions = [RestConstants.ACCESS_CC_PUBLISH, RestConstants.ACCESS_CONSUMER];\n            this.permissions.permissions.push(perm);\n        }\n        const permissions = RestHelper.copyAndCleanPermissions(\n            this.permissions.permissions,\n            this.permissions.inherited,\n        );\n        this.nodeApi.setNodePermissions(node.ref.id, permissions, false, '', false).subscribe(\n            () => {},\n            (error: any) => this.toast.error(error),\n        );\n    }\n\n    private readPermissions(last: boolean) {\n        this.release = false;\n        if (this)\n            for (const perm of this.permissions.permissions) {\n                if (\n                    perm.authority.authorityType == RestConstants.AUTHORITY_TYPE_EVERYONE &&\n                    perm.permissions.indexOf(RestConstants.ACCESS_CC_PUBLISH) != -1\n                ) {\n                    if (this.releaseMulti != null && this.releaseMulti != 'true')\n                        this.releaseMulti = 'multi';\n                    else this.releaseMulti = 'true';\n                    if (last) this.setPermissionState();\n                    return;\n                }\n            }\n        if (this.releaseMulti != null && this.releaseMulti != 'false') this.releaseMulti = 'multi';\n        else this.releaseMulti = 'false';\n        if (last) this.setPermissionState();\n    }\n\n    private setPermissionState() {\n        if (this.releaseMulti == 'true') this.release = true;\n        if (this.releaseMulti == null || this.releaseMulti == 'false') this.release = false;\n\n        if (this.releaseMulti == 'multi') {\n            this.releaseIndeterminate = true;\n        }\n    }\n\n    private checkAllowRelease() {\n        this.connector\n            .hasToolPermission(RestConstants.TOOLPERMISSION_INVITE_ALLAUTHORITIES)\n            .subscribe((data: boolean) => {\n                if (!this.getNodes()) {\n                    return;\n                }\n                if (!data) {\n                    this.allowRelease = false;\n                    return;\n                }\n                for (const node of this.getNodes()) {\n                    if (node.access.indexOf(RestConstants.ACCESS_CHANGE_PERMISSIONS) == -1) {\n                        this.allowRelease = false;\n                        return;\n                    }\n                }\n            });\n    }\n\n    async getProperties(prop = this._properties) {\n        prop[RestConstants.CCM_PROP_LICENSE] = [this.getLicenseProperty()];\n        if (!this.contactIndeterminate)\n            prop[RestConstants.CCM_PROP_QUESTIONSALLOWED] = [this.contact];\n        if (this.isCCAttributableLicense()) {\n            prop[RestConstants.CCM_PROP_LICENSE_TITLE_OF_WORK] = [];\n            prop[RestConstants.CCM_PROP_LICENSE_SOURCE_URL] = [];\n            prop[RestConstants.CCM_PROP_LICENSE_PROFILE_URL] = [];\n            prop[RestConstants.CCM_PROP_LICENSE_CC_VERSION] = [];\n            prop[RestConstants.CCM_PROP_LICENSE_CC_LOCALE] = [];\n            if (this.ccTitleOfWork) {\n                prop[RestConstants.CCM_PROP_LICENSE_TITLE_OF_WORK] = [this.ccTitleOfWork];\n            }\n            if (this.ccSourceUrl) {\n                prop[RestConstants.CCM_PROP_LICENSE_SOURCE_URL] = [this.ccSourceUrl];\n            }\n            if (this.ccProfileUrl) {\n                prop[RestConstants.CCM_PROP_LICENSE_PROFILE_URL] = [this.ccProfileUrl];\n            }\n            if (this.ccVersion) {\n                prop[RestConstants.CCM_PROP_LICENSE_CC_VERSION] = [this.ccVersion];\n                // make sure v4.0 has no locale\n                if (this.ccVersion === '4.0') {\n                    this.ccCountry = '';\n                }\n            }\n            if (this.ccCountry) {\n                prop[RestConstants.CCM_PROP_LICENSE_CC_LOCALE] = [this.ccCountry];\n            }\n        }\n        prop = this.author\n            ? await this.author.getValues(\n                  prop,\n                  this.getNodes()?.length === 1 ? this.getNodes()[0] : null,\n              )\n            : prop;\n\n        if (this.type == 'CUSTOM') {\n            prop[RestConstants.LOM_PROP_RIGHTS_DESCRIPTION] = [this.rightsDescription];\n        }\n        return prop;\n    }\n\n    isCCAttributableLicense() {\n        return this.getLicenseProperty() && this.getLicenseProperty().startsWith('CC_BY');\n    }\n\n    /**\n     * Get all the key from countries and return the array with key and name (Translated)\n     * @param {string[]} countries array with all Countries Key\n     */\n    private translateLicenseCountries(countries: string[]) {\n        // fixme: many possible combinations of countries and versions do not actually exist\n        //        we could use a dict here to collect the versions available per country and then\n        //        only show the available versions and vice versa only the available countries\n        //        per version\n        this._ccCountries = [];\n        countries.forEach((country) => {\n            this._ccCountries.push({\n                key: country,\n                name: this.translate.instant('COUNTRY_CODE.' + country),\n            });\n        });\n        this._ccCountries.sort((a, b) => this.sortCountries({ a: a.name, b: b.name }));\n    }\n\n    /**\n     * Function wich compare 2 string and return one of those numbers -1,0,1\n     *\n     *   -1 if a<b\n     *    1 if a>b\n     *    0 if a=b\n     *\n     * @param {string} a first string\n     * @param {string} b second string\n     * @returns {number}   -1 | 0 | 1\n     */\n    private sortCountries({ a, b }: { a: string; b: string }): number {\n        if (a.toLowerCase() < b.toLowerCase()) return -1;\n        if (a.toLowerCase() > b.toLowerCase()) return 1;\n        return 0;\n    }\n\n    hasMixedAuthorValues() {\n        return (\n            this.getNodes() != null &&\n            (this.nodeHelper.hasMixedPropertyValues(\n                this.getNodes(),\n                RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR,\n            ) ||\n                this.nodeHelper.hasMixedPropertyValues(\n                    this.getNodes(),\n                    RestConstants.CCM_PROP_AUTHOR_FREETEXT,\n                ))\n        );\n    }\n\n    resetMixedAuthorValues() {\n        if (\n            this.nodeHelper.hasMixedPropertyValues(\n                this.getNodes(),\n                RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR,\n            )\n        ) {\n            this.getNodes().forEach(\n                (n) => (n.properties[RestConstants.CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR] = null),\n            );\n        }\n        if (\n            this.nodeHelper.hasMixedPropertyValues(\n                this.getNodes(),\n                RestConstants.CCM_PROP_AUTHOR_FREETEXT,\n            )\n        ) {\n            this.getNodes().forEach(\n                (n) => (n.properties[RestConstants.CCM_PROP_AUTHOR_FREETEXT] = null),\n            );\n        }\n    }\n\n    private setDefaultModeState() {\n        this.oerAvailable =\n            !this.allowedLicenses || this.allowedLicenses.filter((e) => e !== 'NONE').length > 0;\n        this.oerMode = this.oerAvailable && (this.isOerLicense() || this.primaryType == 'NONE');\n    }\n}\n","<!-- TODO: remove remaining h4 and h5 headings (misused as labels) -->\n\n<mat-slide-toggle\n  class=\"oerSelect switch toggle-reverse\"\n  *ngIf=\"oerAvailable\"\n  [(ngModel)]=\"oerMode\"\n  >{{ 'WORKSPACE.LICENSE.ONLY_OER' | translate }}</mat-slide-toggle\n>\n<mat-radio-group\n  class=\"oerLicenses\"\n  [(ngModel)]=\"type\"\n  name=\"oerLicenses mat-group-gap\"\n  *ngIf=\"oerMode\"\n>\n  <fieldset>\n    <legend>{{ 'LICENSE.GROUPS.CC_0' | translate }}</legend>\n    <div class=\"oerCC0\">\n      <div *ngIf=\"isAllowedLicense('CC_0')\">\n        <mat-radio-button value=\"CC_0\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.LICENSE.CC0.CC0' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              <span innerHTML=\"{{ 'WORKSPACE.LICENSE.CC0.CC0_INFO' | translate }}\"></span>\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n        <div class=\"more-information-link\">\n          <a [href]=\"getLicenseUrlVersion('CC_0') | async\" target=\"_blank\">{{\n            'WORKSPACE.LICENSE.MORE' | translate\n          }}</a>\n        </div>\n      </div>\n      <div *ngIf=\"isAllowedLicense('PDM')\">\n        <mat-radio-button value=\"PDM\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.LICENSE.CC0.PDM' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.LICENSE.CC0.PDM_INFO' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n        <div class=\"more-information-link\">\n          <a class=\"focus-underline\" [href]=\"getLicenseUrlVersion('PDM') | async\" target=\"_blank\">{{\n            'WORKSPACE.LICENSE.MORE' | translate\n          }}</a>\n        </div>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>{{ 'LICENSE.GROUPS.CC_BY' | translate }}</legend>\n    <div class=\"oerCCBY\">\n      <div *ngIf=\"isAllowedLicense('CC_BY')\">\n        <mat-radio-button value=\"CC_BY\" id=\"CC_BY\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.LICENSE.CC.CC_BY_RADIO' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.LICENSE.CC.CC_BY_INFO' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n        <div class=\"more-information-link\">\n          <a\n            class=\"focus-underline\"\n            [href]=\"getLicenseUrlVersion('CC_BY') | async\"\n            target=\"_blank\"\n            >{{ 'WORKSPACE.LICENSE.MORE' | translate }}</a\n          >\n        </div>\n      </div>\n      <div *ngIf=\"isAllowedLicense('CC_BY_SA')\">\n        <mat-radio-button value=\"CC_BY_SA\" id=\"CC_BY_SA\">\n          <es-multi-line-label>\n            <ng-container slot=\"label\">\n              {{ 'WORKSPACE.LICENSE.CC.CC_BY_SA_RADIO' | translate }}\n            </ng-container>\n            <ng-container slot=\"description\">\n              {{ 'WORKSPACE.LICENSE.CC.CC_BY_SA_INFO' | translate }}\n            </ng-container>\n          </es-multi-line-label>\n        </mat-radio-button>\n        <div class=\"more-information-link\">\n          <a\n            class=\"focus-underline\"\n            [href]=\"getLicenseUrlVersion('CC_BY_SA') | async\"\n            target=\"_blank\"\n            >{{ 'WORKSPACE.LICENSE.MORE' | translate }}</a\n          >\n        </div>\n      </div>\n    </div>\n  </fieldset>\n</mat-radio-group>\n<div class=\"allLicenses\" *ngIf=\"!oerMode\">\n  <mat-form-field class=\"licenseType\">\n    <mat-label>{{ 'WORKSPACE.LICENSE.TYPE' | translate }}</mat-label>\n    <mat-select #selectLicense id=\"type\" type=\"text\" [(ngModel)]=\"primaryType\">\n      <mat-option *ngFor=\"let license of licenseMainTypes\" [value]=\"license\">{{\n        'LICENSE.GROUPS.' + license | translate\n      }}</mat-option>\n    </mat-select>\n  </mat-form-field>\n  <div *ngIf=\"primaryType === 'CC_BY'\" class=\"cc\">\n    <h5 class=\"ccAbout\">\n      <a\n        class=\"focus-underline\"\n        [href]=\"getLicenseUrlVersion('CC_BY_ABOUT') | async\"\n        target=\"_blank\"\n        >{{ 'WORKSPACE.LICENSE.CC.ABOUT' | translate }}</a\n      >\n    </h5>\n    <div *ngIf=\"isAllowedLicense('CC_BY_SA') || isAllowedLicense('CC_BY_ND')\">\n      <h4>{{ 'WORKSPACE.LICENSE.CC.SHARE' | translate }}</h4>\n      <h5>{{ 'WORKSPACE.LICENSE.CC.SHARE_INFO' | translate }}</h5>\n      <mat-radio-group [(ngModel)]=\"ccShare\">\n        <mat-radio-button value=\"\">{{ 'YES' | translate }}</mat-radio-button>\n        <mat-radio-button *ngIf=\"isAllowedLicense('CC_BY_SA')\" value=\"SA\">{{\n          'WORKSPACE.LICENSE.CC.YES_ALIKE' | translate\n        }}</mat-radio-button>\n        <mat-radio-button *ngIf=\"isAllowedLicense('CC_BY_ND')\" value=\"ND\">{{\n          'NO' | translate\n        }}</mat-radio-button>\n      </mat-radio-group>\n    </div>\n    <div *ngIf=\"isAllowedLicense('CC_BY_NC')\">\n      <h4>{{ 'WORKSPACE.LICENSE.CC.COMMERCIAL' | translate }}</h4>\n      <h5>{{ 'WORKSPACE.LICENSE.CC.COMMERCIAL_INFO' | translate }}</h5>\n      <mat-radio-group [(ngModel)]=\"ccCommercial\">\n        <mat-radio-button value=\"\">{{ 'YES' | translate }}</mat-radio-button>\n        <mat-radio-button value=\"NC\">{{ 'NO' | translate }}</mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </div>\n  <mat-radio-group\n    [(ngModel)]=\"type\"\n    *ngIf=\"primaryType === 'COPYRIGHT'\"\n    class=\"copyright mat-group-gap\"\n  >\n    <div *ngIf=\"isAllowedLicense('COPYRIGHT_FREE')\">\n      <mat-radio-button value=\"COPYRIGHT_FREE\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.LICENSE.COPYRIGHT.FREE' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            <span innerHTML=\"{{ 'WORKSPACE.LICENSE.COPYRIGHT.FREE_INFO' | translate }}\"></span>\n          </ng-container>\n        </es-multi-line-label>\n      </mat-radio-button>\n    </div>\n    <div *ngIf=\"isAllowedLicense('COPYRIGHT_LICENSE')\">\n      <mat-radio-button value=\"COPYRIGHT_LICENSE\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.LICENSE.COPYRIGHT.LICENSE' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            {{ 'WORKSPACE.LICENSE.COPYRIGHT.LICENSE_INFO' | translate }}\n          </ng-container>\n        </es-multi-line-label>\n      </mat-radio-button>\n    </div>\n  </mat-radio-group>\n  <mat-radio-group [(ngModel)]=\"type\" *ngIf=\"primaryType === 'CC_0'\" class=\"cc\">\n    <div *ngIf=\"isAllowedLicense('CC_0')\">\n      <mat-radio-button value=\"CC_0\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.LICENSE.CC0.CC0' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            <span [innerHTML]=\"'WORKSPACE.LICENSE.CC0.CC0_INFO' | translate\"></span>\n          </ng-container>\n        </es-multi-line-label>\n      </mat-radio-button>\n      <div class=\"more-information-link\">\n        <a class=\"focus-underline\" [href]=\"getLicenseUrlVersion('CC_0') | async\" target=\"_blank\">{{\n          'WORKSPACE.LICENSE.MORE' | translate\n        }}</a>\n      </div>\n    </div>\n    <div *ngIf=\"isAllowedLicense('PDM')\">\n      <mat-radio-button value=\"PDM\">\n        <es-multi-line-label>\n          <ng-container slot=\"label\">\n            {{ 'WORKSPACE.LICENSE.CC0.PDM' | translate }}\n          </ng-container>\n          <ng-container slot=\"description\">\n            {{ 'WORKSPACE.LICENSE.CC0.PDM_INFO' | translate }}\n          </ng-container>\n        </es-multi-line-label>\n      </mat-radio-button>\n      <div class=\"more-information-link\">\n        <a class=\"focus-underline\" [href]=\"getLicenseUrlVersion('PDM') | async\" target=\"_blank\">{{\n          'WORKSPACE.LICENSE.MORE' | translate\n        }}</a>\n      </div>\n    </div>\n  </mat-radio-group>\n  <!--<div *ngIf=\"primaryType=='EDU'\" class=\"edu\">\n                  <div class=\"radio\">\n                    <input type=\"radio\" [(ngModel)]=\"eduType\" value=\"P_NR\" id=\"P_NR\">\n                    <label for=\"P_NR\">\n                      <h4>{{'WORKSPACE.LICENSE.EDU.P_NR' | translate}}</h4>\n                      <h5>{{'WORKSPACE.LICENSE.EDU.P_NR_INFO' | translate}}</h5>\n                    </label>\n                  </div>\n                  <div class=\"radio\">\n                    <input type=\"radio\" [(ngModel)]=\"eduType\" value=\"NC\" id=\"NC\">\n                    <label for=\"NC\">\n                      <h4>{{'WORKSPACE.LICENSE.EDU.NC' | translate}}</h4>\n                      <h5>{{'WORKSPACE.LICENSE.EDU.NC_INFO' | translate}}</h5>\n                    </label>\n                  </div>\n                  <input type=\"checkbox\" class=\"filled-in\" [(ngModel)]=\"eduDownload\" id=\"DOWNLOAD\"><label for=\"DOWNLOAD\">{{'WORKSPACE.LICENSE.EDU.DOWNLOAD' | translate}}</label>\n\n                </div>-->\n  <div *ngIf=\"primaryType === 'CUSTOM'\" class=\"custom\">\n    <mat-form-field>\n      <mat-label>{{ 'LICENSE.GROUPS.CUSTOM' | translate }}</mat-label>\n      <textarea\n        matInput\n        cdkTextareaAutosize\n        required\n        [(ngModel)]=\"rightsDescription\"\n        cdkAutosizeMinRows=\"2\"\n        cdkAutosizeMaxRows=\"5\"\n      ></textarea>\n    </mat-form-field>\n  </div>\n</div>\n<es-mds-editor-widget-author\n  #author\n  [showContributorDialog]=\"!_properties\"\n></es-mds-editor-widget-author>\n<es-license-source\n  class=\"cc-additional\"\n  *ngIf=\"isCCAttributableLicense()\"\n  [(ccTitleOfWork)]=\"ccTitleOfWork\"\n  [(ccSourceUrl)]=\"ccSourceUrl\"\n  [(ccProfileUrl)]=\"ccProfileUrl\"\n></es-license-source>\n<div class=\"currentLicense\">\n  <h4 *ngIf=\"type !== 'MULTI'\">{{ 'WORKSPACE.LICENSE.CURRENT' | translate }}</h4>\n  <img *ngIf=\"type !== 'MULTI'\" class=\"currentLicenseIcon\" src=\"{{ getLicenseIcon() }}\" />\n  <div class=\"license-additional-data\" *ngIf=\"type.startsWith('CC_BY')\">\n    <div *ngIf=\"ccVersion != '4.0'\" class=\"licenseLocale\">\n      <mat-form-field>\n        <mat-label>{{ 'WORKSPACE.LICENSE.LOCALE' | translate }}</mat-label>\n        <mat-select id=\"localeCountry\" [(ngModel)]=\"ccCountry\">\n          <mat-option value=\"\">{{ 'COUNTRY_CODE.INTERNATIONAL' | translate }}</mat-option>\n          <mat-option *ngFor=\"let country of _ccCountries\" value=\"{{ country.key }}\">{{\n            country.name\n          }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n    <div class=\"licenseVersion\">\n      <mat-form-field>\n        <mat-label>{{ 'WORKSPACE.LICENSE.VERSION' | translate }}</mat-label>\n        <mat-select id=\"version\" [(ngModel)]=\"ccVersion\">\n          <mat-option value=\"2.0\">2.0</mat-option>\n          <mat-option value=\"3.0\">3.0</mat-option>\n          <mat-option value=\"4.0\">4.0</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n  </div>\n  <div class=\"licenseName\">\n    <h4>{{ getLicenseName() }}</h4>\n    <div class=\"oerStatus\" *ngIf=\"getLicenseProperty() !== 'MULTI'\">\n      <span class=\"oer\" *ngIf=\"isOerLicense()\">{{ 'WORKSPACE.LICENSE.OER' | translate }}</span>\n      <span class=\"notOer\" *ngIf=\"!isOerLicense()\">{{\n        'WORKSPACE.LICENSE.NOT_OER' | translate\n      }}</span>\n    </div>\n  </div>\n  <div class=\"currentLicenseDescription\">\n    <div class=\"customLicenseDescription\" *ngIf=\"primaryType === 'CUSTOM'\">\n      {{ rightsDescription }}\n    </div>\n    <div\n      *ngIf=\"primaryType !== 'CUSTOM' && primaryType !== 'COPYRIGHT'\"\n      innerHTML=\"{{ 'LICENSE.DESCRIPTION.' + primaryType | translate }}\"\n    ></div>\n    <div *ngIf=\"primaryType === 'COPYRIGHT'\">\n      <div innerHTML=\"{{ 'LICENSE.DESCRIPTION.' + copyrightType | translate }}\"></div>\n    </div>\n    <div *ngIf=\"primaryType === 'CC_BY'\">\n      <div *ngIf=\"ccShare\">\n        {{ 'LICENSE.DESCRIPTION.CC_SHARE_' + ccShare | translate }}\n      </div>\n      <div *ngIf=\"ccCommercial\">\n        {{ 'LICENSE.DESCRIPTION.CC_COMMERCIAL_' + ccCommercial | translate }}\n      </div>\n      <div *ngIf=\"ccVersion != '4.0'\">\n        {{ 'WORKSPACE.LICENSE.LOCALE' | translate : { locale: ccCountry } }}\n        {{ 'COUNTRY_CODE.' + (ccCountry ? ccCountry : 'INTERNATIONAL') | uppercase | translate }}.\n      </div>\n    </div>\n    <div *ngIf=\"primaryType === 'CC_BY' || primaryType === 'CC_0'\" class=\"licenseUrl\">\n      <a [href]=\"getLicenseUrl() | async\" target=\"_blank\">{{\n        'WORKSPACE.LICENSE.MORE' | translate\n      }}</a>\n    </div>\n  </div>\n</div>\n","import { Component, Inject, OnInit, ViewChild } from '@angular/core';\nimport * as rxjs from 'rxjs';\nimport { BehaviorSubject } from 'rxjs';\nimport { DialogButton, Node } from '../../../../core-module/core.module';\nimport { LocalEventsService } from 'ngx-edu-sharing-ui';\nimport { CARD_DIALOG_DATA } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport { LicenseDialogContentComponent } from './license-dialog-content.component';\nimport { LicenseDialogData, LicenseDialogResult } from './license-dialog-data';\n\n@Component({\n    selector: 'es-license-dialog',\n    templateUrl: './license-dialog.component.html',\n    styleUrls: ['./license-dialog.component.scss'],\n})\nexport class LicenseDialogComponent implements OnInit {\n    @ViewChild(LicenseDialogContentComponent) content: LicenseDialogContentComponent;\n\n    readonly canSave = new BehaviorSubject(true);\n\n    private readonly saveButton = new DialogButton('SAVE', { color: 'primary' }, () =>\n        this.content.saveLicense(),\n    );\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: LicenseDialogData,\n        private dialogRef: CardDialogRef<LicenseDialogData, LicenseDialogResult>,\n        private localEvents: LocalEventsService,\n    ) {}\n\n    ngOnInit(): void {\n        this.initButtons();\n        this.registerUpdateButtons();\n    }\n\n    private initButtons() {\n        this.dialogRef.patchConfig({\n            buttons: [\n                new DialogButton('CANCEL', { color: 'standard' }, () => this.dialogRef.close(null)),\n                this.saveButton,\n            ],\n        });\n    }\n\n    private registerUpdateButtons() {\n        rxjs.combineLatest([this.canSave, this.dialogRef.observeState('isLoading')]).subscribe(\n            ([canSave, isLoading]) => {\n                this.saveButton.disabled = isLoading || !canSave;\n            },\n        );\n    }\n\n    onDone(result: LicenseDialogResult) {\n        this.dialogRef.close(result);\n        if (this.data.kind === 'nodes' && Array.isArray(result)) {\n            this.localEvents.nodesChanged.emit(result as Node[]);\n        }\n    }\n\n    setIsLoading(isLoading: boolean) {\n        void Promise.resolve().then(() => {\n            this.dialogRef.patchState({ isLoading });\n        });\n    }\n}\n","<es-license-dialog-content\n  [data]=\"data\"\n  (done)=\"onDone($event)\"\n  (isLoading)=\"setIsLoading($event)\"\n  (canSave)=\"canSave.next($event)\"\n></es-license-dialog-content>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { LicenseDialogComponent } from './license-dialog.component';\nimport { LicenseDialogContentComponent } from './license-dialog-content.component';\nimport { MdsModule } from '../../../mds/mds.module';\n\nexport { LicenseDialogComponent };\n\n@NgModule({\n    declarations: [LicenseDialogComponent, LicenseDialogContentComponent],\n    imports: [SharedModule, MdsModule],\n    exports: [LicenseDialogContentComponent],\n})\nexport class LicenseDialogModule {}\n"],"names":["EventEmitter","forkJoin","map","RestConstants","RestHelper","UIHelper","UserPresentableError","MdsEditorInstanceService","ViewInstanceService","i0","ɵɵelementStart","ɵɵlistener","LicenseDialogContentComponent_mat_slide_toggle_0_Template_mat_slide_toggle_ngModelChange_0_listener","$event","ɵɵrestoreView","_r15","ctx_r14","ɵɵnextContext","ɵɵresetView","oerMode","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ctx_r0","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵelementContainerStart","ɵɵelementContainerEnd","ɵɵelement","ɵɵtextInterpolate1","ɵɵpropertyInterpolate","ɵɵsanitizeHtml","ctx_r16","getLicenseUrlVersion","ɵɵsanitizeUrl","ctx_r17","ctx_r18","ctx_r19","LicenseDialogContentComponent_mat_radio_group_1_Template_mat_radio_group_ngModelChange_0_listener","_r21","ctx_r20","type","ɵɵtemplate","LicenseDialogContentComponent_mat_radio_group_1_div_6_Template","LicenseDialogContentComponent_mat_radio_group_1_div_7_Template","LicenseDialogContentComponent_mat_radio_group_1_div_13_Template","LicenseDialogContentComponent_mat_radio_group_1_div_14_Template","ctx_r1","isAllowedLicense","license_r28","LicenseDialogContentComponent_div_2_div_8_div_6_Template_mat_radio_group_ngModelChange_7_listener","_r34","ctx_r33","ccShare","LicenseDialogContentComponent_div_2_div_8_div_6_mat_radio_button_11_Template","LicenseDialogContentComponent_div_2_div_8_div_6_mat_radio_button_12_Template","ctx_r29","LicenseDialogContentComponent_div_2_div_8_div_7_Template_mat_radio_group_ngModelChange_7_listener","_r36","ctx_r35","ccCommercial","ctx_r30","LicenseDialogContentComponent_div_2_div_8_div_6_Template","LicenseDialogContentComponent_div_2_div_8_div_7_Template","ctx_r24","LicenseDialogContentComponent_div_2_mat_radio_group_9_Template_mat_radio_group_ngModelChange_0_listener","_r40","ctx_r39","LicenseDialogContentComponent_div_2_mat_radio_group_9_div_1_Template","LicenseDialogContentComponent_div_2_mat_radio_group_9_div_2_Template","ctx_r25","ctx_r41","ctx_r42","LicenseDialogContentComponent_div_2_mat_radio_group_10_Template_mat_radio_group_ngModelChange_0_listener","_r44","ctx_r43","LicenseDialogContentComponent_div_2_mat_radio_group_10_div_1_Template","LicenseDialogContentComponent_div_2_mat_radio_group_10_div_2_Template","ctx_r26","LicenseDialogContentComponent_div_2_div_11_Template_textarea_ngModelChange_5_listener","_r46","ctx_r45","rightsDescription","ctx_r27","LicenseDialogContentComponent_div_2_Template_mat_select_ngModelChange_5_listener","_r48","ctx_r47","primaryType","LicenseDialogContentComponent_div_2_mat_option_7_Template","LicenseDialogContentComponent_div_2_div_8_Template","LicenseDialogContentComponent_div_2_mat_radio_group_9_Template","LicenseDialogContentComponent_div_2_mat_radio_group_10_Template","LicenseDialogContentComponent_div_2_div_11_Template","ctx_r2","licenseMainTypes","LicenseDialogContentComponent_es_license_source_5_Template_es_license_source_ccTitleOfWorkChange_0_listener","_r50","ctx_r49","ccTitleOfWork","LicenseDialogContentComponent_es_license_source_5_Template_es_license_source_ccSourceUrlChange_0_listener","ctx_r51","ccSourceUrl","LicenseDialogContentComponent_es_license_source_5_Template_es_license_source_ccProfileUrlChange_0_listener","ctx_r52","ccProfileUrl","ctx_r4","ctx_r6","getLicenseIcon","country_r55","key","name","LicenseDialogContentComponent_div_9_div_1_Template_mat_select_ngModelChange_5_listener","_r57","ctx_r56","ccCountry","LicenseDialogContentComponent_div_9_div_1_mat_option_9_Template","ctx_r53","_ccCountries","LicenseDialogContentComponent_div_9_div_1_Template","LicenseDialogContentComponent_div_9_Template_mat_select_ngModelChange_7_listener","_r59","ctx_r58","ccVersion","ctx_r7","LicenseDialogContentComponent_div_13_span_1_Template","LicenseDialogContentComponent_div_13_span_2_Template","ctx_r8","isOerLicense","ctx_r9","ctx_r10","ctx_r11","copyrightType","ctx_r62","ctx_r63","ɵɵtextInterpolate2","ɵɵpipeBind2","ɵɵpureFunction1","_c2","ctx_r64","LicenseDialogContentComponent_div_18_div_1_Template","LicenseDialogContentComponent_div_18_div_2_Template","LicenseDialogContentComponent_div_18_div_3_Template","ctx_r12","ctx_r13","getLicenseUrl","ALL_LICENSE_TYPES","ALL_COUNTRIES","LicenseDialogContentComponent","startsWith","_primaryType","updateCanSave","cc0Type","getLicenseProperty","getccCountries","_oerMode","showCcAuthor","constructor","connector","translate","config","nodeHelper","mdsEditorInstanceService","iamApi","toast","nodeApi","done","isLoading","canSave","oerAvailable","eduType","contact","contactIndeterminate","release","releaseIndeterminate","eduDownload","allowRelease","ngOnInit","translateLicenseCountries","getCurrentUserAsync","data","kind","initNodes","nodes","initProperties","properties","emit","nodesIn","_this","loadNodes","subscribe","_ref","_asyncToGenerator","initWithNodes","e","message","error","loadConfig","checkAllowRelease","readLicense","setDefaultModeState","releaseMulti","i","node","getNodePermissions","ref","id","permissions","localPermissions","readPermissions","getNodes","length","_x","apply","arguments","_properties","refetch","license","allowedLicenses","indexOf","n","getNodeMetadata","ALL","pipe","n2","get","entry","push","instant","splice","position","saveLicense","_this2","trim","getProperties","prop","updatedNodes","editNodeMetadataNewVersion","COMMENT_LICENSE_UPDATE","result","savePermissions","nodes$","value","getValueForAll","fallbackNotIdentical","fallbackIsEmpty","asArray","CCM_PROP_LICENSE","CCM_PROP_LICENSE_TITLE_OF_WORK","CCM_PROP_LICENSE_SOURCE_URL","CCM_PROP_LICENSE_PROFILE_URL","CCM_PROP_LICENSE_CC_VERSION","CCM_PROP_LICENSE_CC_LOCALE","LOM_PROP_RIGHTS_DESCRIPTION","contactState","CCM_PROP_QUESTIONSALLOWED","invalidateMaterializeTextarea","getLicenseName","getLicenseNameByString","getLicenseUrlByString","getLicenseIconByString","add","index","perm","authority","authorityName","AUTHORITY_EVERYONE","ACCESS_CC_PUBLISH","ACCESS_CONSUMER","getAllAuthoritiesPermission","copyAndCleanPermissions","inherited","setNodePermissions","last","authorityType","AUTHORITY_TYPE_EVERYONE","setPermissionState","hasToolPermission","TOOLPERMISSION_INVITE_ALLAUTHORITIES","access","ACCESS_CHANGE_PERMISSIONS","_this3","isCCAttributableLicense","author","getValues","countries","forEach","country","sort","a","b","sortCountries","toLowerCase","hasMixedAuthorValues","hasMixedPropertyValues","CCM_PROP_LIFECYCLECONTRIBUTER_AUTHOR","CCM_PROP_AUTHOR_FREETEXT","resetMixedAuthorValues","filter","_","ɵɵdirectiveInject","i1","RestConnectorService","i2","TranslateService","ConfigurationService","i3","NodeHelperService","i4","RestIamService","i5","Toast","RestNodeService","_2","selectors","viewQuery","LicenseDialogContentComponent_Query","rf","ctx","decls","vars","consts","template","LicenseDialogContentComponent_Template","LicenseDialogContentComponent_mat_slide_toggle_0_Template","LicenseDialogContentComponent_mat_radio_group_1_Template","LicenseDialogContentComponent_div_2_Template","LicenseDialogContentComponent_es_license_source_5_Template","LicenseDialogContentComponent_h4_7_Template","LicenseDialogContentComponent_img_8_Template","LicenseDialogContentComponent_div_9_Template","LicenseDialogContentComponent_div_13_Template","LicenseDialogContentComponent_div_15_Template","LicenseDialogContentComponent_div_16_Template","LicenseDialogContentComponent_div_17_Template","LicenseDialogContentComponent_div_18_Template","LicenseDialogContentComponent_div_19_Template","rxjs","BehaviorSubject","DialogButton","CARD_DIALOG_DATA","LicenseDialogComponent","dialogRef","localEvents","saveButton","color","content","initButtons","registerUpdateButtons","patchConfig","buttons","close","combineLatest","observeState","disabled","onDone","Array","isArray","nodesChanged","setIsLoading","Promise","resolve","then","patchState","CardDialogRef","LocalEventsService","LicenseDialogComponent_Query","LicenseDialogComponent_Template_es_license_dialog_content_done_0_listener","LicenseDialogComponent_Template_es_license_dialog_content_isLoading_0_listener","LicenseDialogComponent_Template_es_license_dialog_content_canSave_0_listener","next","SharedModule","MdsModule","LicenseDialogModule","_3","declarations","imports","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}