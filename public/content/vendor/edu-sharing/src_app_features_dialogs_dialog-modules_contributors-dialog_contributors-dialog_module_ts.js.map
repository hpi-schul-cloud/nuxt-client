{"version":3,"file":"src_app_features_dialogs_dialog-modules_contributors-dialog_contributors-dialog_module_ts.js","mappings":"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","sources":["./src/app/features/dialogs/dialog-modules/contributors-dialog/contributors-dialog.component.ts","./src/app/features/dialogs/dialog-modules/contributors-dialog/contributors-dialog.component.html","./src/app/features/dialogs/dialog-modules/contributors-dialog/contributors-dialog.module.ts"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport {\n    DialogButton,\n    Node,\n    RestConstants,\n    RestNodeService,\n} from '../../../../core-module/core.module';\nimport { LocalEventsService, VCard } from 'ngx-edu-sharing-ui';\nimport { Toast } from '../../../../services/toast';\nimport { CARD_DIALOG_DATA, CardDialogConfig, Closable } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport { DialogsService } from '../../dialogs.service';\nimport {\n    ContributorEditDialogData,\n    ContributorEditDialogResult,\n    EditMode,\n} from '../contributor-edit-dialog/contributor-edit-dialog-data';\nimport { YES_OR_NO } from '../generic-dialog/generic-dialog-data';\nimport { ContributorsDialogData, ContributorsDialogResult } from './contributors-dialog-data';\nimport { CardDialogUtilsService } from '../../card-dialog/card-dialog-utils.service';\n\n@Component({\n    selector: 'es-contributors-dialog',\n    templateUrl: './contributors-dialog.component.html',\n    styleUrls: ['./contributors-dialog.component.scss'],\n})\nexport class ContributorsDialogComponent implements OnInit {\n    readonly rolesLifecycle = RestConstants.CONTRIBUTOR_ROLES_LIFECYCLE;\n    readonly rolesMetadata = RestConstants.CONTRIBUTOR_ROLES_METADATA;\n    contributorLifecycle: { [role: string]: VCard[] } = {};\n    contributorMetadata: { [role: string]: VCard[] } = {};\n\n    node: Node;\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: ContributorsDialogData,\n        private dialogRef: CardDialogRef<ContributorsDialogData, ContributorsDialogResult>,\n        private cardDialogUtils: CardDialogUtilsService,\n        private dialogs: DialogsService,\n        private localEvents: LocalEventsService,\n        private nodeService: RestNodeService,\n        private toast: Toast,\n    ) {}\n\n    ngOnInit(): void {\n        this.initButtons();\n        void this.initData();\n    }\n\n    private initButtons() {\n        this.dialogRef.patchConfig({\n            buttons: [\n                new DialogButton('CANCEL', { color: 'standard' }, () => this.dialogRef.close(null)),\n                new DialogButton('APPLY', { color: 'primary' }, () => this.saveContributor()),\n            ],\n        });\n    }\n\n    private async initData() {\n        if (typeof this.data.node === 'string') {\n            this.dialogRef.patchState({ isLoading: true });\n            this.node = await this.nodeService\n                .getNodeMetadata(this.data.node, [RestConstants.ALL])\n                .pipe(map(({ node }) => node))\n                .toPromise();\n        } else {\n            this.node = this.data.node;\n        }\n        this.dialogRef.patchConfig(\n            (await this.cardDialogUtils.configForNode(this.node)) as Partial<\n                CardDialogConfig<ContributorsDialogData>\n            >,\n        );\n        for (let role of this.rolesLifecycle) {\n            this.contributorLifecycle[role] = [];\n            let list = this.node.properties[RestConstants.CONTRIBUTOR_LIFECYCLE_PREFIX + role];\n            if (!list) {\n                continue;\n            }\n            for (let vCard of list) {\n                if (vCard && new VCard(vCard).isValid()) {\n                    this.contributorLifecycle[role].push(new VCard(vCard));\n                }\n            }\n        }\n        for (let role of this.rolesMetadata) {\n            this.contributorMetadata[role] = [];\n            let list = this.node.properties[RestConstants.CONTRIBUTOR_METADATA_PREFIX + role];\n            if (!list) {\n                continue;\n            }\n            for (let vCard of list) {\n                if (vCard && new VCard(vCard).isValid()) {\n                    this.contributorMetadata[role].push(new VCard(vCard));\n                }\n            }\n        }\n        this.dialogRef.patchState({ isLoading: false });\n    }\n\n    async remove(data: any[], pos: number) {\n        const confirmDialogRef = await this.dialogs.openGenericDialog({\n            title: 'WORKSPACE.CONTRIBUTOR.DELETE_TITLE',\n            message: 'WORKSPACE.CONTRIBUTOR.DELETE_MESSAGE',\n            messageParameters: { name: data[pos].getDisplayName() },\n            buttons: YES_OR_NO,\n        });\n        confirmDialogRef.afterClosed().subscribe((response) => {\n            if (response === 'YES') {\n                data.splice(pos, 1);\n                this.dialogRef.patchConfig({ closable: Closable.Confirm });\n            }\n        });\n    }\n\n    addVCard(mode: EditMode) {\n        void this.openEditDialog({ editMode: mode });\n    }\n\n    async editVCard(mode: EditMode, vcard: VCard, role: string, position: number) {\n        void this.openEditDialog({\n            vCard: vcard.copy(),\n            editMode: mode,\n            position,\n            role,\n        });\n    }\n\n    private async openEditDialog(data: ContributorEditDialogData) {\n        const dialogRef = await this.dialogs.openContributorEditDialog(data);\n        dialogRef.afterClosed().subscribe((result) => {\n            if (result) {\n                this.saveEdits(data, result);\n            }\n        });\n    }\n\n    private saveEdits(\n        originalData: ContributorEditDialogData,\n        result: ContributorEditDialogResult,\n    ) {\n        this.dialogRef.patchConfig({ closable: Closable.Confirm });\n        let array =\n            originalData.editMode == 'lifecycle'\n                ? this.contributorLifecycle\n                : this.contributorMetadata;\n        if (originalData.role) {\n            array[originalData.role].splice(originalData.position, 1);\n            if (originalData.role === result.role) {\n                array[originalData.role].splice(originalData.position, 0, result.vCard);\n            } else {\n                array[result.role].push(result.vCard);\n            }\n        } else {\n            array[result.role].push(result.vCard);\n        }\n    }\n\n    private saveContributor() {\n        this.dialogRef.patchState({ isLoading: true });\n        let properties: any = {};\n        for (let role of this.rolesLifecycle) {\n            let prop = [];\n            for (let vcard of this.contributorLifecycle[role]) {\n                prop.push(vcard.toVCardString());\n            }\n            properties['ccm:lifecyclecontributer_' + role] = prop;\n        }\n        for (let role of this.rolesMetadata) {\n            let prop = [];\n            for (let vcard of this.contributorMetadata[role]) {\n                prop.push(vcard.toVCardString());\n            }\n            properties['ccm:metadatacontributer_' + role] = prop;\n        }\n        this.nodeService\n            .editNodeMetadataNewVersion(\n                this.node.ref.id,\n                RestConstants.COMMENT_CONTRIBUTOR_UPDATE,\n                properties,\n            )\n            .subscribe(\n                ({ node }) => {\n                    this.dialogRef.close(node);\n                    this.toast.toast('WORKSPACE.TOAST.CONTRIBUTOR_UPDATED');\n                    this.localEvents.nodesChanged.emit([node]);\n                },\n                (error: any) => {\n                    this.toast.error(error);\n                    this.dialogRef.patchState({ isLoading: false });\n                },\n            );\n    }\n}\n","<div class=\"contributor-lifecycle\">\n  <h4 class=\"mat-heading-4 lifecycleHeading\">\n    {{ 'WORKSPACE.CONTRIBUTOR.LIFECYCLECONTRIBUTOR' | translate }}\n  </h4>\n  <div *ngFor=\"let role of rolesLifecycle\">\n    <div *ngIf=\"contributorLifecycle[role] && contributorLifecycle[role].length\" class=\"group\">\n      <div class=\"role\">{{ 'WORKSPACE.CONTRIBUTOR.TYPE.' + role.toUpperCase() | translate }}</div>\n      <mat-chip-grid>\n        <mat-chip\n          *ngFor=\"let vCard of contributorLifecycle[role]; let i = index\"\n          class=\"badge clickable\"\n        >\n          <span (click)=\"editVCard('lifecycle', vCard, role, i)\">{{ vCard.getDisplayName() }}</span>\n          <mat-icon matChipRemove (click)=\"remove(contributorLifecycle[role], i)\">cancel</mat-icon>\n        </mat-chip>\n      </mat-chip-grid>\n    </div>\n  </div>\n  <button mat-raised-button class=\"btnAdd\" (click)=\"addVCard('lifecycle')\">\n    <i esIcon=\"add\"></i> {{ 'ADD' | translate }}\n  </button>\n</div>\n<div class=\"contributor-metadata\">\n  <h4 class=\"mat-heading-4 metadataHeading\">\n    {{ 'WORKSPACE.CONTRIBUTOR.METADATACONTRIBUTOR' | translate }}\n  </h4>\n  <div *ngFor=\"let role of rolesMetadata\">\n    <div *ngIf=\"contributorMetadata[role] && contributorMetadata[role].length\" class=\"group\">\n      <div class=\"role\">{{ 'WORKSPACE.CONTRIBUTOR.TYPE.' + role.toUpperCase() | translate }}</div>\n      <mat-chip-grid>\n        <mat-chip\n          *ngFor=\"let vCard of contributorMetadata[role]; let i = index\"\n          class=\"badge clickable\"\n        >\n          <span (click)=\"editVCard('metadata', vCard, role, i)\">{{ vCard.getDisplayName() }}</span>\n          <mat-icon matChipRemove (click)=\"remove(contributorMetadata[role], i)\">cancel</mat-icon>\n        </mat-chip>\n      </mat-chip-grid>\n    </div>\n  </div>\n  <button mat-raised-button class=\"btnAdd\" (click)=\"addVCard('metadata')\">\n    <i esIcon=\"add\"></i> {{ 'ADD' | translate }}\n  </button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { ContributorsDialogComponent } from './contributors-dialog.component';\n\nexport { ContributorsDialogComponent };\n\n@NgModule({\n    declarations: [ContributorsDialogComponent],\n    imports: [SharedModule],\n})\nexport class ContributorDialogModule {}\n"],"names":["map","DialogButton","RestConstants","VCard","CARD_DIALOG_DATA","Closable","YES_OR_NO","i0","ɵɵelementStart","ɵɵlistener","ContributorsDialogComponent_div_4_div_1_mat_chip_5_Template_span_click_1_listener","restoredCtx","ɵɵrestoreView","_r8","vCard_r5","$implicit","i_r6","index","role_r2","ɵɵnextContext","ctx_r7","ɵɵresetView","editVCard","ɵɵtext","ɵɵelementEnd","ContributorsDialogComponent_div_4_div_1_mat_chip_5_Template_mat_icon_click_3_listener","ctx_r10","remove","contributorLifecycle","ɵɵadvance","ɵɵtextInterpolate","getDisplayName","ɵɵtemplate","ContributorsDialogComponent_div_4_div_1_mat_chip_5_Template","ɵɵpipeBind1","toUpperCase","ɵɵproperty","ctx_r3","ContributorsDialogComponent_div_4_div_1_Template","ctx_r0","length","ContributorsDialogComponent_div_13_div_1_mat_chip_5_Template_span_click_1_listener","_r19","vCard_r16","i_r17","role_r13","ctx_r18","ContributorsDialogComponent_div_13_div_1_mat_chip_5_Template_mat_icon_click_3_listener","ctx_r21","contributorMetadata","ContributorsDialogComponent_div_13_div_1_mat_chip_5_Template","ctx_r14","ContributorsDialogComponent_div_13_div_1_Template","ctx_r1","ContributorsDialogComponent","constructor","data","dialogRef","cardDialogUtils","dialogs","localEvents","nodeService","toast","rolesLifecycle","CONTRIBUTOR_ROLES_LIFECYCLE","rolesMetadata","CONTRIBUTOR_ROLES_METADATA","ngOnInit","initButtons","initData","patchConfig","buttons","color","close","saveContributor","_this","_asyncToGenerator","node","patchState","isLoading","getNodeMetadata","ALL","pipe","toPromise","configForNode","role","list","properties","CONTRIBUTOR_LIFECYCLE_PREFIX","vCard","isValid","push","CONTRIBUTOR_METADATA_PREFIX","pos","_this2","confirmDialogRef","openGenericDialog","title","message","messageParameters","name","afterClosed","subscribe","response","splice","closable","Confirm","addVCard","mode","openEditDialog","editMode","vcard","position","_this3","copy","_this4","openContributorEditDialog","result","saveEdits","originalData","array","prop","toVCardString","editNodeMetadataNewVersion","ref","id","COMMENT_CONTRIBUTOR_UPDATE","nodesChanged","emit","error","_","ɵɵdirectiveInject","i1","CardDialogRef","i2","CardDialogUtilsService","i3","DialogsService","i4","LocalEventsService","i5","RestNodeService","i6","Toast","_2","selectors","decls","vars","consts","template","ContributorsDialogComponent_Template","rf","ctx","ContributorsDialogComponent_div_4_Template","ContributorsDialogComponent_Template_button_click_5_listener","ɵɵelement","ContributorsDialogComponent_div_13_Template","ContributorsDialogComponent_Template_button_click_14_listener","ɵɵtextInterpolate1","SharedModule","ContributorDialogModule","_3","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}