"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[4202],{84202:(X,g,a)=>{a.r(g),a.d(g,{XmlAppPropertiesDialogComponent:()=>O,XmlAppPropertiesDialogModule:()=>L});var _=a(50555),s=a(81771),c=a(53461),t=a(65879),h=a(91486),x=a(1189),u=a(96814),f=a(52081),d=a(56223),m=a(64170),C=a(24516),P=a(56263),M=a(71365);function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"textarea",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const p=t.oxw().$implicit,l=t.oxw();return t.KtG(l.data.properties[p]=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onChange())}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("ngModel",o.data.properties[e])}}function T(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",6),t.NdJ("ngModelChange",function(i){t.CHM(e);const p=t.oxw().$implicit,l=t.oxw();return t.KtG(l.data.properties[p]=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onChange())}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("ngModel",o.data.properties[e])}}function N(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"i",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,p=t.oxw();return t.KtG(p.removeAppProperty(i))}),t._uU(1,"delete"),t.qZA()}}const A=function(){return{fallback:""}};function v(n,r){if(1&n&&(t.TgZ(0,"mat-hint"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,"ADMIN.APPLICATIONS."+o.data.appName+"."+e,t.DdM(4,A)))}}function y(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),t._uU(3),t.qZA(),t.YNc(4,I,1,1,"textarea",9),t.YNc(5,T,1,1,"input",10),t.YNc(6,N,2,0,"i",11),t.YNc(7,v,3,5,"mat-hint",5),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw();t.xp6(3),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",o.isMultilineProperty(e)),t.xp6(1),t.Q6J("ngIf",!o.isMultilineProperty(e)),t.xp6(1),t.Q6J("ngIf",!1),t.xp6(1),t.Q6J("ngIf",o.data.appName)}}function D(n,r){if(1&n&&(t.TgZ(0,"mat-hint"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,"ADMIN.APPLICATIONS."+e.data.appName+"."+e.xmlAppAdditionalPropertyName,t.DdM(4,A)))}}const Z=["custom_html_headers","public_key"];let O=(()=>{class n{constructor(e,o,i,p){this.data=e,this.dialogRef=o,this.admin=i,this.toast=p,this.propertyKeys=Object.keys(this.data.properties)}ngOnInit(){this.dialogRef.patchConfig({buttons:[new s.Qd("CANCEL",{color:"standard"},()=>{this.dialogRef.close(null)}),new s.Qd("APPLY",{color:"primary"},()=>{this.saveApp()})]})}isMultilineProperty(e){return!!Z.includes(e)||this.data.properties[e].includes("\n")}removeAppProperty(e){const o=this.propertyKeys[e];this.propertyKeys.splice(e,1),delete this.data.properties[o]}onChange(){this.dialogRef.patchConfig({closable:c.IA.Standard})}saveApp(){this.dialogRef.patchState({isLoading:!0}),this.xmlAppAdditionalPropertyName&&this.xmlAppAdditionalPropertyName.trim()&&(this.data.properties[this.xmlAppAdditionalPropertyName.trim()]=this.xmlAppAdditionalPropertyValue),this.admin.updateApplicationXML(this.data.appXml,this.data.properties).subscribe(()=>{this.toast.toast("ADMIN.APPLICATIONS.APP_SAVED",{xml:this.data.appXml}),this.dialogRef.patchState({isLoading:!1}),this.dialogRef.close(!0)},e=>{this.dialogRef.patchState({isLoading:!1}),this.toast.error(e)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(c.W9),t.Y36(h.Y),t.Y36(s.F_),t.Y36(x.F))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-xml-app-properties-dialog"]],decls:19,vars:16,consts:[[1,"warning"],["class","appEditor",4,"ngFor","ngForOf"],[1,"add-property"],[1,"property","mat-heading-4","mat-heading-underline"],["matInput","","type","text","id","additionalProperty",3,"ngModel","ngModelChange"],[4,"ngIf"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"appEditor"],[1,"mat-input-group"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","class","materialize-textarea",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["class","material-icons clickable",3,"click",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5",1,"materialize-textarea",3,"ngModel","ngModelChange"],[1,"material-icons","clickable",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,y,8,5,"div",1),t.TgZ(4,"div",2)(5,"h4",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"input",4),t.NdJ("ngModelChange",function(l){return i.xmlAppAdditionalPropertyName=l})("ngModelChange",function(){return i.onChange()}),t.qZA(),t.YNc(13,D,3,5,"mat-hint",5),t.qZA(),t.TgZ(14,"mat-form-field")(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"input",6),t.NdJ("ngModelChange",function(l){return i.xmlAppAdditionalPropertyValue=l})("ngModelChange",function(){return i.onChange()}),t.qZA()()()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"ADMIN.APPLICATIONS.APP_XML_WARNING")),t.xp6(2),t.Q6J("ngForOf",i.propertyKeys),t.xp6(3),t.hij(" ",t.lcZ(7,10,"ADMIN.APPLICATIONS.ADD_PROPERTY")," "),t.xp6(4),t.Oqu(t.lcZ(11,12,"ADMIN.APPLICATIONS.PROPERTY_NAME_PLACEHOLDER")),t.xp6(2),t.Q6J("ngModel",i.xmlAppAdditionalPropertyName),t.xp6(1),t.Q6J("ngIf",i.data.appName),t.xp6(3),t.Oqu(t.lcZ(17,14,"ADMIN.APPLICATIONS.PROPERTY_VALUE_PLACEHOLDER")),t.xp6(2),t.Q6J("ngModel",i.xmlAppAdditionalPropertyValue))},dependencies:[u.sg,u.O5,f.ar,d.Fj,d.JJ,d.On,m.KE,m.hX,m.bx,C.Nt,P.IC,M.X$],styles:[".warning[_ngcontent-%COMP%]{padding:10px 0}.mat-input-group[_ngcontent-%COMP%]{width:100%;margin:15px 0}.add-property[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}return n})(),L=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[_.m]})}return n})()}}]);