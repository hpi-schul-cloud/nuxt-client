{"version":3,"file":"src_app_features_dialogs_dialog-modules_create-variant-dialog_create-variant-dialog_module_ts.js","mappings":"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","sources":["./src/app/features/dialogs/dialog-modules/create-variant-dialog/create-variant-dialog-data.ts","./src/app/features/dialogs/dialog-modules/create-variant-dialog/create-variant-dialog.component.ts","./src/app/features/dialogs/dialog-modules/create-variant-dialog/create-variant-dialog.component.html","./src/app/features/dialogs/dialog-modules/create-variant-dialog/create-variant-dialog.module.ts"],"sourcesContent":["import { Node } from 'ngx-edu-sharing-api';\n\nexport class CreateVariantDialogData {\n    node: Node;\n}\n\nexport type CreateVariantDialogResult = null;\n","import { Component, Inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { OPEN_URL_MODE } from 'ngx-edu-sharing-ui';\nimport {\n    Connector,\n    DialogButton,\n    FrameEventsService,\n    Node,\n    RestConnectorService,\n    RestConnectorsService,\n    RestConstants,\n    RestHelper,\n    RestIamService,\n    RestNodeService,\n} from '../../../../core-module/core.module';\nimport { NodeHelperService } from '../../../../services/node-helper.service';\nimport { Toast } from '../../../../services/toast';\nimport { UIHelper } from '../../../../core-ui-module/ui-helper';\nimport { DialogsService } from '../../dialogs.service';\nimport { BreadcrumbsService } from '../../../../shared/components/breadcrumbs/breadcrumbs.service';\nimport { CARD_DIALOG_DATA } from '../../card-dialog/card-dialog-config';\nimport { CardDialogRef } from '../../card-dialog/card-dialog-ref';\nimport { CreateVariantDialogData, CreateVariantDialogResult } from './create-variant-dialog-data';\nimport { Observable } from 'rxjs';\n\n@Component({\n    selector: 'es-create-variant-dialog',\n    templateUrl: './create-variant-dialog.component.html',\n    styleUrls: ['./create-variant-dialog.component.scss'],\n})\nexport class CreateVariantDialogComponent {\n    variantName: string;\n    licenseWarning: string;\n\n    private _openViaConnector: Connector;\n\n    constructor(\n        @Inject(CARD_DIALOG_DATA) public data: CreateVariantDialogData,\n        private dialogRef: CardDialogRef<CreateVariantDialogData, CreateVariantDialogResult>,\n        private breadcrumbsService: BreadcrumbsService,\n        private connector: RestConnectorService,\n        private connectors: RestConnectorsService,\n        private dialogs: DialogsService,\n        private events: FrameEventsService,\n        private iam: RestIamService,\n        private nodeApi: RestNodeService,\n        private nodeHelper: NodeHelperService,\n        private router: Router,\n        private toast: Toast,\n        private translate: TranslateService,\n    ) {\n        this._initNode();\n        this._updateBreadcrumbs(RestConstants.INBOX);\n        this._updateButtons();\n    }\n\n    private _initNode() {\n        const node = this.data.node;\n        this.variantName = this.translate.instant('NODE_VARIANT.DEFAULT_NAME', {\n            name: this.data.node.name,\n        });\n        this._openViaConnector = this.connectors.connectorSupportsEdit(node);\n        let license = node.properties[RestConstants.CCM_PROP_LICENSE]\n            ? node.properties[RestConstants.CCM_PROP_LICENSE][0]\n            : '';\n        if (license.startsWith('CC_BY') && license.indexOf('ND') != -1) {\n            this.licenseWarning = 'ND';\n        } else if (license.startsWith('COPYRIGHT')) {\n            this.licenseWarning = 'COPYRIGHT';\n        } else if (!license) {\n            this.licenseWarning = 'NO_LICENSE';\n        }\n    }\n\n    private _cancel() {\n        this.dialogRef.close(null);\n    }\n\n    private _done() {\n        this.dialogRef.close(null);\n    }\n\n    private _create() {\n        if (!this.breadcrumbsService.breadcrumbs$.value?.length) {\n            return;\n        }\n        let win: any = null;\n        if (this._openViaConnector) {\n            win = UIHelper.getNewWindow(this.connector);\n        }\n        this.dialogRef.patchState({ isLoading: true });\n        this.nodeApi\n            .forkNode(\n                this.breadcrumbsService.breadcrumbs$.value[\n                    this.breadcrumbsService.breadcrumbs$.value.length - 1\n                ].ref.id,\n                this.data.node.ref.id,\n            )\n            .subscribe(\n                (created) => {\n                    this.nodeApi\n                        .editNodeMetadata(\n                            created.node.ref.id,\n                            RestHelper.createNameProperty(this.variantName),\n                        )\n                        .subscribe(\n                            (edited) => {\n                                this.dialogRef.patchState({ isLoading: false });\n                                if (this._openViaConnector) {\n                                    UIHelper.openConnector(\n                                        this.connectors,\n                                        this.iam,\n                                        this.events,\n                                        this.toast,\n                                        edited.node,\n                                        null,\n                                        win,\n                                    );\n                                    UIHelper.goToWorkspaceFolder(\n                                        this.nodeApi,\n                                        this.router,\n                                        this.connector.getCurrentLogin(),\n                                        this.breadcrumbsService.breadcrumbs$.value[\n                                            this.breadcrumbsService.breadcrumbs$.value.length - 1\n                                        ].ref.id,\n                                    );\n                                } else {\n                                    let additional = {\n                                        link: {\n                                            caption: 'NODE_VARIANT.CREATED_LINK',\n                                            callback: () => {\n                                                UIHelper.goToWorkspaceFolder(\n                                                    this.nodeApi,\n                                                    this.router,\n                                                    this.connector.getCurrentLogin(),\n                                                    this.breadcrumbsService.breadcrumbs$.value[\n                                                        this.breadcrumbsService.breadcrumbs$.value\n                                                            .length - 1\n                                                    ].ref.id,\n                                                );\n                                            },\n                                        },\n                                    };\n                                    this.toast.toast(\n                                        'NODE_VARIANT.CREATED',\n                                        {\n                                            folder: this.breadcrumbsService.breadcrumbs$.value[\n                                                this.breadcrumbsService.breadcrumbs$.value.length -\n                                                    1\n                                            ].name,\n                                        },\n                                        null,\n                                        null,\n                                        additional,\n                                    );\n                                }\n                                this._done();\n                            },\n                            (error) => {\n                                this.dialogRef.patchState({ isLoading: false });\n                                this.nodeHelper.handleNodeError(this.variantName, error);\n                                if (win) win.close();\n                            },\n                        );\n                },\n                (error) => {\n                    this.dialogRef.patchState({ isLoading: false });\n                    console.log(error);\n                    if (error.error?.error?.indexOf('DAORestrictedAccessException') !== -1) {\n                        this.toast.error(null, 'RESTRICTED_ACCESS_COPY_ERROR');\n                    } else {\n                        this.nodeHelper.handleNodeError(this.variantName, error);\n                    }\n                    if (win) win.close();\n                },\n            );\n    }\n\n    async chooseDirectory() {\n        const dialogRef = await this.dialogs.openFileChooserDialog({\n            title: 'NODE_VARIANT.FILE_PICKER_TITLE',\n            pickDirectory: true,\n            writeRequired: true,\n        });\n        dialogRef.afterClosed().subscribe((result) => {\n            if (result) {\n                this._setDirectory(result);\n            }\n        });\n    }\n\n    private _setDirectory(event: Node[]) {\n        this._updateBreadcrumbs(event[0].ref.id);\n    }\n\n    private _updateBreadcrumbs(id: string) {\n        this.nodeApi.getNodeParents(id, false).subscribe((parents) => {\n            this.breadcrumbsService.setNodePath(parents.nodes.reverse());\n        });\n    }\n\n    openLicense(url: string) {\n        UIHelper.openUrl(url, this.connector.getBridgeService(), OPEN_URL_MODE.BlankSystemBrowser);\n    }\n\n    getLicenseUrl(): Observable<string | null> {\n        return this.nodeHelper.getLicenseUrlByString(\n            this.data.node.properties[RestConstants.CCM_PROP_LICENSE]?.[0],\n            this.data.node.properties[RestConstants.CCM_PROP_LICENSE_CC_VERSION]?.[0],\n            this.data.node.properties[RestConstants.CCM_PROP_LICENSE_CC_LOCALE]?.[0],\n        );\n    }\n\n    private _updateButtons(): void {\n        const buttons = [\n            new DialogButton('CANCEL', { color: 'standard' }, () => this._cancel()),\n            new DialogButton(\n                'NODE_VARIANT.CREATE' + (this._openViaConnector ? '_EDIT' : ''),\n                { color: 'primary' },\n                () => this._create(),\n            ),\n        ];\n        this.dialogRef.patchConfig({ buttons });\n    }\n}\n","<mat-form-field>\n  <mat-label for=\"variantName\">{{ 'NODE_VARIANT.NEW_VARIANT' | translate }}</mat-label>\n  <input matInput type=\"text\" id=\"variantName\" [(ngModel)]=\"variantName\" />\n</mat-form-field>\n<es-info-message\n  *ngIf=\"licenseWarning\"\n  mode=\"warning\"\n  message=\"{{ 'NODE_VARIANT.WARNING.' + licenseWarning | translate }}\"\n>\n  <div>\n    <button\n      mat-button\n      color=\"primary\"\n      *ngIf=\"getLicenseUrl() | async as url\"\n      (click)=\"openLicense(url)\"\n    >\n      {{ 'NODE_VARIANT.WARNING.LINK' | translate }}\n    </button>\n  </div>\n</es-info-message>\n<div class=\"breadcrumb-style\">\n  <div class=\"group-left\">\n    <div class=\"breadcrumb-info\">{{ 'NODE_VARIANT.BREADCRUMB_INFO' | translate }}</div>\n    <es-breadcrumbs\n      short=\"always\"\n      [home]=\"'WORKSPACE.MY_FILES'\"\n      [clickable]=\"false\"\n    ></es-breadcrumbs>\n  </div>\n  <button mat-raised-button (click)=\"chooseDirectory()\">\n    {{ 'NODE_VARIANT.CHOOSE' | translate }}\n  </button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { CreateVariantDialogComponent } from './create-variant-dialog.component';\n\nexport { CreateVariantDialogComponent };\n\n@NgModule({\n    declarations: [CreateVariantDialogComponent],\n    imports: [SharedModule],\n})\nexport class CreateVariantDialogModule {}\n"],"names":["CreateVariantDialogData","OPEN_URL_MODE","DialogButton","RestConstants","RestHelper","UIHelper","CARD_DIALOG_DATA","i0","ɵɵelementStart","ɵɵlistener","CreateVariantDialogComponent_es_info_message_5_button_3_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r4","url_r2","ngIf","ctx_r3","ɵɵnextContext","ɵɵresetView","openLicense","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵtemplate","CreateVariantDialogComponent_es_info_message_5_button_3_Template","ɵɵpropertyInterpolate","ctx_r0","licenseWarning","ɵɵproperty","getLicenseUrl","CreateVariantDialogComponent","constructor","data","dialogRef","breadcrumbsService","connector","connectors","dialogs","events","iam","nodeApi","nodeHelper","router","toast","translate","_initNode","_updateBreadcrumbs","INBOX","_updateButtons","node","variantName","instant","name","_openViaConnector","connectorSupportsEdit","license","properties","CCM_PROP_LICENSE","startsWith","indexOf","_cancel","close","_done","_create","breadcrumbs$","value","length","win","getNewWindow","patchState","isLoading","forkNode","ref","id","subscribe","created","editNodeMetadata","createNameProperty","edited","openConnector","goToWorkspaceFolder","getCurrentLogin","additional","link","caption","callback","folder","error","handleNodeError","console","log","chooseDirectory","_this","_asyncToGenerator","openFileChooserDialog","title","pickDirectory","writeRequired","afterClosed","result","_setDirectory","event","getNodeParents","parents","setNodePath","nodes","reverse","url","openUrl","getBridgeService","BlankSystemBrowser","getLicenseUrlByString","CCM_PROP_LICENSE_CC_VERSION","CCM_PROP_LICENSE_CC_LOCALE","buttons","color","patchConfig","_","ɵɵdirectiveInject","i1","CardDialogRef","i2","BreadcrumbsService","i3","RestConnectorService","RestConnectorsService","i4","DialogsService","FrameEventsService","RestIamService","RestNodeService","i5","NodeHelperService","i6","Router","i7","Toast","i8","TranslateService","_2","selectors","decls","vars","consts","template","CreateVariantDialogComponent_Template","rf","ctx","CreateVariantDialogComponent_Template_input_ngModelChange_4_listener","$event","CreateVariantDialogComponent_es_info_message_5_Template","ɵɵelement","CreateVariantDialogComponent_Template_button_click_12_listener","ɵɵtextInterpolate","SharedModule","CreateVariantDialogModule","_3","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}