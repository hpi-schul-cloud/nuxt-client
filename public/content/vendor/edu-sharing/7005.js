"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[7005],{47005:(N,E,r)=>{r.r(E),r.d(E,{RegisterPageModule:()=>ct});var m=r(50555),d=r(22941),c=r(52081),l=r(81771),g=r(90721),t=r(65879),p=r(1189),f=r(96814),M=r(13838),v=r(94618),D=r(32296),h=r(19374),_=r(66848),o=r(56223),x=r(90001),O=r(19352),T=r(48098),b=r(35799),L=r(75986),C=r(64170),A=r(24516),S=r(71365);function F(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"a",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.openPrivacy())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"REGISTER.PRIVACY-LINK")))}function U(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"form",1,2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.register())}),t.TgZ(2,"div",3)(3,"mat-form-field",4)(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"mat-form-field",7)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.qZA()(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.qZA(),t.TgZ(23,"es-input-password",10),t.NdJ("keydown.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.register())})("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.password=s)})("valueChange",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onStateChanged.emit())}),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-form-field",11)(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",12),t.qZA(),t.TgZ(31,"div",13)(32,"mat-checkbox",14),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,F,3,3,"a",15),t.qZA(),t.TgZ(36,"mat-checkbox",16),t._uU(37),t.ALo(38,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.registerForm),t.xp6(5),t.Oqu(t.lcZ(6,14,"VCARD.Title")),t.xp6(5),t.Oqu(t.lcZ(11,16,"USER.firstName")),t.xp6(5),t.Oqu(t.lcZ(16,18,"USER.lastName")),t.xp6(5),t.Oqu(t.lcZ(21,20,"USER.email")),t.xp6(3),t.s9C("label",t.lcZ(24,22,"USER.password")),t.s9C("hint",t.lcZ(25,24,"REGISTER.HINT")),t.Q6J("displayStrength",!0)("required",!0)("value",e.password),t.xp6(5),t.Oqu(t.lcZ(29,26,"REGISTER.ORGANIZATION")),t.xp6(5),t.Oqu(t.lcZ(34,28,"REGISTER.ACCEPT")),t.xp6(2),t.Q6J("ngIf",e.privacyUrl),t.xp6(2),t.Oqu(t.lcZ(38,30,"REGISTER.NEWSLETTER"))}}let G=(()=>{class n{register(){this.toast.showProgressSpinner();const e=this.registerForm.getRawValue();this.info=e;const i=new c._W;i.title=e.title,this.info.vcard=i.toVCardString(),delete this.info.title,delete this.info.agree,this.info.password=this.password,this.registerService.register(this.info).subscribe(()=>{this.toast.closeProgressSpinner(),this.onRegisterDone.emit()},s=>{g.d.errorContains(s,"DuplicateAuthorityException")?(this.registerForm.setErrors({incorrect:!0}),this.toast.error(null,"REGISTER.TOAST_DUPLICATE")):this.toast.error(s),this.toast.closeProgressSpinner()})}openPrivacy(){window.open(this.privacyUrl)}canRegister(){return this.registerForm.valid&&this.password&&"weak"!==g.d.getPasswordStrengthString(this.password)}constructor(e,i,s,a,R,P,I){this.toast=e,this.platformLocation=i,this.formBuilder=s,this.router=a,this.registerService=R,this.translations=P,this.configService=I,this.onRegisterDone=new t.vpe,this.onStateChanged=new t.vpe,this.destroyed$=new x.t(1),this.news=!0,this.agree=!1,this.requiredFields=[],this.translations.waitForInit().subscribe(()=>{this.privacyUrl=this.configService.instant("privacyInformationUrl"),this.requiredFields=this.configService.instant("register.requiredFields",["firstName"]),this.registerForm=this.formBuilder.group({title:new o.p4("",this.requiredFields.includes("title")?[o.kI.required]:null),firstName:new o.p4("",this.requiredFields.includes("firstName")?[o.kI.required]:null),lastName:new o.p4("",this.requiredFields.includes("lastName")?[o.kI.required]:null),organization:new o.p4("",this.requiredFields.includes("organization")?[o.kI.required]:null),email:new o.p4("",[o.kI.required,o.kI.email]),agree:new o.p4(!1,[o.kI.requiredTrue]),allowNotifications:new o.p4(!1)}),this.registerForm.statusChanges.pipe((0,O.R)(this.destroyed$)).subscribe(()=>this.onStateChanged.emit())})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.F),t.Y36(f.lw),t.Y36(o.QS),t.Y36(d.F0),t.Y36(T.aO),t.Y36(c.fA),t.Y36(l.eB))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-register-form"]],outputs:{onRegisterDone:"onRegisterDone",onStateChanged:"onStateChanged"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["loginForm",""],[1,"name-input"],[1,"title"],["matInput","","type","text","formControlName","title"],["matInput","","type","text","formControlName","firstName"],[1,"last-name"],["matInput","","type","text","formControlName","lastName"],["matInput","","type","email","formControlName","email"],["autocomplete","new-password","inputId","password",3,"label","hint","displayStrength","required","value","keydown.enter","valueChange"],[1,"organization"],["matInput","","type","text","formControlName","organization"],[1,"accept"],["formControlName","agree"],["class","clickable imprint",3,"click",4,"ngIf"],["formControlName","allowNotifications"],[1,"clickable","imprint",3,"click"]],template:function(i,s){1&i&&t.YNc(0,U,39,32,"form",0),2&i&&t.Q6J("ngIf",s.registerForm)},dependencies:[f.O5,o._Y,o.Fj,o.JJ,o.JL,b.P,L.oG,C.KE,C.hX,A.Nt,o.sg,o.u,S.X$],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--textLight);font-size:9pt;text-transform:initial;font-weight:400}form[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{height:unset;display:inline-block;margin-bottom:15px}.accept[_ngcontent-%COMP%]{margin-top:10px}.name-input[_ngcontent-%COMP%]{display:flex;column-gap:15px}.name-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:0;flex-grow:2}.name-input[_ngcontent-%COMP%]   mat-form-field.title[_ngcontent-%COMP%]{flex-grow:1}.name-input[_ngcontent-%COMP%]   .last-name[_ngcontent-%COMP%]{margin-left:10px}mat-checkbox[_ngcontent-%COMP%]{display:flex;margin-top:12px}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{white-space:normal!important}.accept[_ngcontent-%COMP%]{margin-top:12px}.imprint[_ngcontent-%COMP%]{display:block;margin:0 35px;font-size:1rem}.organization[_ngcontent-%COMP%]{margin-top:10px}"]})}return n})();var q=r(84003),Z=r(689);function k(n,u){1&n&&t._UZ(0,"es-spinner")}function Y(n,u){1&n&&(t._UZ(0,"img",9),t.ALo(1,"esAssetsPath")),2&n&&t.Q6J("src",t.lcZ(1,1,"assets/images/register/register-confirm.svg"),t.LSH)}function J(n,u){1&n&&(t._UZ(0,"img",9),t.ALo(1,"esAssetsPath")),2&n&&t.Q6J("src",t.lcZ(1,1,"assets/images/register/register-mail.svg"),t.LSH)}function Q(n,u){1&n&&(t.TgZ(0,"i",10),t._uU(1,"edit"),t.qZA())}function K(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"form",12),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.keyInput.trim()?s.activate(s.keyInput):null)}),t.TgZ(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",13),t.NdJ("ngModelChange",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.keyInput=s)})("ngModelChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onStateChanged.emit())}),t.qZA(),t.TgZ(7,"mat-hint"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,3,"REGISTER.DONE.KEY_PL")),t.xp6(2),t.Q6J("ngModel",e.keyInput),t.xp6(2),t.Oqu(t.lcZ(9,5,"REGISTER.DONE.ACTIVATE_HINT"))}}function B(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendMail())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendMail())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"REGISTER.DONE.SEND_MAIL")))}function H(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.YNc(1,Y,2,3,"img",3),t.YNc(2,J,2,3,"img",3),t.TgZ(3,"h4"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"p",4),t._uU(7),t.ALo(8,"translate"),t.TgZ(9,"span",5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editMail())}),t._uU(10),t.YNc(11,Q,2,0,"i",6),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,K,10,7,"div",7),t.TgZ(18,"strong"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"small"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,B,3,3,"a",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","done"===e.inputState),t.xp6(1),t.Q6J("ngIf","done"!==e.inputState),t.xp6(2),t.Oqu(t.lcZ(5,12,"REGISTER.DONE.TITLE")),t.xp6(3),t.hij(" ",t.lcZ(8,14,"REGISTER.DONE.MAIL_INFO")," "),t.xp6(3),t.hij("",e.email," "),t.xp6(1),t.Q6J("ngIf",!e.keyUrl),t.xp6(1),t.hij(" ",t.lcZ(13,16,"REGISTER.DONE.MAIL_INFO2")," "),t.xp6(3),t.hij(" ",t.lcZ(16,18,("done-reset"===e.inputState?"REGISTER.REQUEST":"REGISTER.DONE")+".MAIL_NOTE")," "),t.xp6(2),t.Q6J("ngIf",!e.keyUrl),t.xp6(2),t.Oqu(t.lcZ(20,20,"REGISTER.DONE.NO_MAIL")),t.xp6(3),t.Oqu(t.lcZ(23,22,"REGISTER.DONE.NO_MAIL_INFO")),t.xp6(2),t.Q6J("ngIf",!e.keyUrl)}}let X=(()=>{class n{static#t=this.STATUS_INTERVAL=5e3;get keyUrl(){return this._keyUrl}set keyUrl(e){this._keyUrl=e,this.loading=!0,this.activate(e)}editMail(){this.onModify.emit()}sendMail(){this.loading=!0,this.changes.detectChanges(),"done"==this.inputState?this.register.resendMail(this.email).subscribe(()=>{this.toast.toast("REGISTER.TOAST"),this.loading=!1,this.changes.detectChanges()},e=>{this.loading=!1,this.changes.detectChanges()}):this.register.recoverPassword(this.email).subscribe(()=>{this.loading=!1,this.changes.detectChanges()},e=>{this.loading=!1,this.changes.detectChanges()})}constructor(e,i,s,a,R,P,I,y){this.toast=e,this.register=i,this.platformLocation=s,this.config=a,this.cordova=R,this.changes=P,this.locator=I,this.router=y,this.onModify=new t.vpe,this.onStateChanged=new t.vpe,this.loading=!1,this.email="",this.keyInput="",this._keyUrl="",this.activated=!1,setTimeout(()=>this.checkStatus(),n.STATUS_INTERVAL)}checkStatus(){if(!this.activated){if("done"!=this.inputState)return void setTimeout(()=>this.checkStatus(),n.STATUS_INTERVAL);this.register.mailExists(this.email).subscribe(e=>{e.exists?this.router.navigate([c.ru.ROUTER_PREFIX,"login"],{queryParams:{username:this.email}}):setTimeout(()=>this.checkStatus(),n.STATUS_INTERVAL)},e=>{setTimeout(()=>this.checkStatus(),n.STATUS_INTERVAL)})}}activate(e){this.loading=!0,this.changes.detectChanges(),"done"==this.inputState?this.register.activate(e).subscribe(()=>{this.activated=!0,this.cordova.isRunningCordova()?this.locator.createOAuthFromSession().subscribe(()=>{g.d.goToDefaultLocation(this.router,this.platformLocation,this.config)},i=>{this.toast.error(i)}):g.d.goToDefaultLocation(this.router,this.platformLocation,this.config)},i=>{i?.error?.error.includes("DAOInvalidKeyException")?this.toast.error(null,"REGISTER.TOAST_INVALID_KEY"):this.toast.error(i),this.loading=!1,this.changes.detectChanges()}):this.router.navigate([c.ru.ROUTER_PREFIX,"register","reset-password",this.keyInput])}static#e=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.F),t.Y36(T.aO),t.Y36(f.lw),t.Y36(l.eB),t.Y36(q.d),t.Y36(t.sBO),t.Y36(l.bp),t.Y36(d.F0))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-register-done"]],inputs:{inputState:"inputState"},outputs:{onModify:"onModify",onStateChanged:"onStateChanged"},decls:2,vars:2,consts:[[4,"ngIf"],["class","done-info",4,"ngIf"],[1,"done-info"],["alt","",3,"src",4,"ngIf"],[1,"mail-info"],[3,"click"],["class","material-icons",4,"ngIf"],["class","keyForm",4,"ngIf"],["class","send-mail","tabindex","0",3,"click","keyup.enter",4,"ngIf"],["alt","",3,"src"],[1,"material-icons"],[1,"keyForm"],[3,"ngSubmit"],["matInput","","id","key","name","key",3,"ngModel","ngModelChange"],["tabindex","0",1,"send-mail",3,"click","keyup.enter"]],template:function(i,s){1&i&&(t.YNc(0,k,1,0,"es-spinner",0),t.YNc(1,H,25,24,"div",1)),2&i&&(t.Q6J("ngIf",s.loading),t.xp6(1),t.Q6J("ngIf",!s.loading))},dependencies:[f.O5,c.ar,c.OR,o._Y,o.Fj,o.JJ,o.JL,o.On,o.F,C.KE,C.hX,C.bx,A.Nt,Z.U,S.X$],styles:[".done-info[_ngcontent-%COMP%]{text-align:center}.done-info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.done-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:20px}.done-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line}.done-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;height:auto;-webkit-user-select:none;user-select:none}.done-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14pt;margin-left:2pt;display:table-caption;margin-bottom:-3px;padding-right:23px}.done-info[_ngcontent-%COMP%]   .mail-info[_ngcontent-%COMP%]{margin-bottom:20px}.done-info[_ngcontent-%COMP%]   .mail-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;font-weight:700;white-space:nowrap}.done-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-top:20px}.done-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:100%;color:var(--textLight)}.done-info[_ngcontent-%COMP%]   .keyForm[_ngcontent-%COMP%]{display:flex;width:100%;padding:20px}.done-info[_ngcontent-%COMP%]   .keyForm[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.done-info[_ngcontent-%COMP%]   .keyForm[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.done-info[_ngcontent-%COMP%]   .send-mail[_ngcontent-%COMP%]{float:initial;margin-top:5px;margin-bottom:10px;display:block;padding:0 2rem;text-transform:uppercase;cursor:pointer}@media screen and (max-width: 700px){.done-info[_ngcontent-%COMP%]   .keyForm[_ngcontent-%COMP%]{padding:10px 0}}"]})}return n})(),j=(()=>{class n{constructor(e,i){this.toast=e,this.register=i,this.onDone=new t.vpe,this.onStateChanged=new t.vpe,this.destroyed$=new x.t(1),this.emailFormControl=new o.p4("",[o.kI.required]),this.emailFormControl.statusChanges.pipe((0,O.R)(this.destroyed$)).subscribe(()=>this.onStateChanged.emit())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}submit(){this.emailFormControl.valid&&(this.toast.showProgressSpinner(),this.register.recoverPassword(this.emailFormControl.value).subscribe(()=>{this.toast.closeProgressSpinner(),this.toast.toast("REGISTER.TOAST"),this.onDone.emit()},e=>{this.toast.closeProgressSpinner(),console.log(e),e?.error?.error?.includes("DAOInvalidKeyException")?this.toast.error(null,"REGISTER.TOAST_INVALID_MAIL"):this.toast.error(e)}))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.F),t.Y36(T.aO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-register-request"]],outputs:{onDone:"onDone",onStateChanged:"onStateChanged"},decls:16,vars:13,consts:[[1,"header"],["alt","",3,"src"],[1,"headline"],[1,"info"],[3,"ngSubmit"],["matInput","","type","email","name","email","id","email",3,"formControl"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.ALo(2,"esAssetsPath"),t.TgZ(3,"h4",2),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div")(7,"p",3),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"form",4),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(11,"mat-form-field")(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",5),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("src",t.lcZ(2,5,"assets/images/register/register-password.svg"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(5,7,"REGISTER.REQUEST.HEADLINE")),t.xp6(4),t.Oqu(t.lcZ(9,9,"REGISTER.REQUEST.INFO")),t.xp6(5),t.Oqu(t.lcZ(14,11,"REGISTER.REQUEST.EMAIL_ACCOUNT_NAME")),t.xp6(2),t.Q6J("formControl",s.emailFormControl))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.F,C.KE,C.hX,A.Nt,o.oH,Z.U,S.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{margin:20px 0 38px;text-align:center}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:51px;-webkit-user-select:none;user-select:none}.header[_ngcontent-%COMP%]   h4.headline[_ngcontent-%COMP%]{margin-top:8px;font-weight:700}p.info[_ngcontent-%COMP%]{white-space:pre-line;margin-bottom:10px}"]})}return n})(),V=(()=>{class n{buttonCheck(){return!("weak"==g.d.getPasswordStrengthString(this.new_password)||!this.new_password.trim())}newPassword(){this.toast.showProgressSpinner(),this.register.resetPassword(this.params.key,this.new_password).subscribe(()=>{this.toast.closeProgressSpinner(),this.toast.toast("REGISTER.RESET.TOAST"),this.router.navigate([c.ru.ROUTER_PREFIX,"login"])},e=>{console.log("error",e),this.toast.closeProgressSpinner(),e?.error?.error?.includes("DAOInvalidKeyException")?(this.toast.error(null,"REGISTER.TOAST_INVALID_RESET_KEY"),this.router.navigate([c.ru.ROUTER_PREFIX,"register","request"])):this.toast.error(e)})}constructor(e,i,s){this.toast=e,this.register=i,this.router=s,this.onStateChanged=new t.vpe,this.new_password=""}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.F),t.Y36(T.aO),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-register-reset-password"]],inputs:{params:"params"},outputs:{onStateChanged:"onStateChanged"},decls:11,vars:15,consts:[[1,"reset-info"],[3,"src"],["for","password_new"],["inputId","password_new",3,"hint","displayStrength","required","value","label","keydown.enter","valueChange"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.ALo(2,"esAssetsPath"),t.TgZ(3,"h5"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div"),t._UZ(7,"label",2),t.TgZ(8,"es-input-password",3),t.NdJ("keydown.enter",function(){return s.newPassword()})("valueChange",function(R){return s.new_password=R})("valueChange",function(){return s.onStateChanged.emit()}),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("src",t.lcZ(2,7,"assets/images/register/register-password.svg"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(5,9,"REGISTER.RESET.REST_INFO")),t.xp6(4),t.s9C("hint",t.lcZ(9,11,"REGISTER.HINT")),t.s9C("label",t.lcZ(10,13,"USER.password")),t.Q6J("displayStrength",!0)("required",!0)("value",s.new_password))},dependencies:[b.P,Z.U,S.X$],styles:[".reset-info[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}[_nghost-%COMP%]     mat-form-field{width:100%}img[_ngcontent-%COMP%]{width:auto;height:130px;-webkit-user-select:none;user-select:none}h5[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}div[_ngcontent-%COMP%]{position:relative}.strength[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;text-transform:uppercase;font-size:90%;margin-right:.75em}"]})}return n})();const z=["registerForm"],W=["registerDone"],$=["request"],tt=["resetPassword"];function et(n,u){1&n&&t._UZ(0,"es-global-progress")}function nt(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"es-register-done",11,12),t.NdJ("onStateChanged",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateButtons())})("onModify",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.modifyData())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("inputState",e.state)}}function st(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"es-register-request",13,14),t.NdJ("onStateChanged",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateButtons())})("onDone",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onPasswordRequested())}),t.qZA()}}function it(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"es-register-reset-password",15,16),t.NdJ("onStateChanged",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateButtons())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("params",e.params)}}function rt(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.linkRegister())}),t._uU(4),t.ALo(5,"translate"),t._UZ(6,"i",19),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"LOGIN.REGISTER_TEXT")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"LOGIN.REGISTER_LINK")," "))}function ot(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"es-card",2),t.NdJ("onCancel",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancel())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"es-register-form",5,6),t.NdJ("onStateChanged",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.updateButtons())})("onRegisterDone",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onRegisterDone())}),t.qZA(),t.YNc(9,nt,2,1,"es-register-done",7),t.YNc(10,st,2,0,"es-register-request",8),t.YNc(11,it,2,1,"es-register-reset-password",9),t.YNc(12,rt,7,6,"div",10),t.qZA()()}if(2&n){const e=t.oxw();t.s9C("title",t.lcZ(1,11,"request"===e.state||"done-reset"===e.state?"REGISTER.REQUEST.TITLE":"reset-password"===e.state?"REGISTER.RESET.TITLE":"REGISTER.TITLE")),t.s9C("subtitle",t.lcZ(2,13,"REGISTER.ORGANIZATION_TITLE")),t.Q6J("buttons",e.buttons)("isCancelable",!1),t.xp6(5),t.Oqu(t.lcZ(6,15,"REGISTER.TITLE")),t.xp6(2),t.ekj("display-none","register"!==e.state),t.xp6(2),t.Q6J("ngIf","done"===e.state||"done-reset"===e.state),t.xp6(1),t.Q6J("ngIf","request"===e.state),t.xp6(1),t.Q6J("ngIf","reset-password"===e.state),t.xp6(1),t.Q6J("ngIf","register"!==e.state&&"done"!==e.state&&"done-reset"!==e.state&&"request"!==e.state&&e.canRegister())}}let w=(()=>{class n{cancel(){l.bv.goToLogin(this.router,this.configService,null,null)}requestDone(e){this.request.submit()}linkRegister(){this.router.navigate([c.ru.ROUTER_PREFIX+"register"])}newPassword(){this.resetPassword.newPassword()}constructor(e,i,s,a,R,P,I,y,gt){this.connector=e,this.toast=i,this.platformLocation=s,this.router=a,this.translations=R,this.uiService=P,this.configService=I,this.changes=y,this.route=gt,this.isLoading=!0,this.state="register"}ngOnInit(){this.updateButtons(),this.route.params.subscribe(e=>{this.params=e,e.status&&("done"===e.status||"done-reset"===e.status||"request"===e.status||"reset-password"===e.status?(this.state=e.status,this.changes.detectChanges()):this.router.navigate([c.ru.ROUTER_PREFIX,"register"]))}),this.translations.waitForInit().subscribe(()=>{this.isLoading=!1,-1!==["request","reset-password","done-reset"].indexOf(this.params.status)?!1===this.configService.instant("register.local",!0)&&!1===this.configService.instant("register.recoverPassword",!1)&&l.bv.goToLogin(this.router,this.configService,null,null):this.configService.instant("register.local",!0)||l.bv.goToLogin(this.router,this.configService,null,null),setTimeout(()=>this.setParams()),this.connector.isLoggedIn().subscribe(e=>{"OK"===e.statusCode&&g.d.goToDefaultLocation(this.router,this.platformLocation,this.configService)})})}onRegisterDone(){const e=this.registerForm.info.email;this.state="done",this.changes.detectChanges(),this.updateButtons(),this.uiService.waitForComponent(this,"registerDone").subscribe(()=>{this.registerDone.email=e,this.changes.detectChanges(),this.updateButtons()}),this.toast.toast("REGISTER.TOAST")}setParams(){this.route.params.subscribe(e=>{this.params=e,e.email&&(this.registerDone.email=e.email),e.key&&this.registerDone&&(this.registerDone.keyUrl=e.key)})}modifyData(){this.state="done"===this.state?"register":"request",this.updateButtons()}onPasswordRequested(){const e=this.request.emailFormControl.value;this.state="done-reset",setTimeout(()=>this.registerDone.email=e)}updateButtons(){const e=this.getPrimaryButton(),i=new l.Qd("CANCEL",{color:"standard"},()=>this.cancel());return this.buttons=[i],e&&this.buttons.push(e),this.buttons}getPrimaryButton(){let e;return"register"===this.state&&(e=new l.Qd("REGISTER.BUTTON",{color:"primary"},()=>this.registerForm.register()),e.disabled=!this.registerForm||!this.registerForm.canRegister()),"request"===this.state&&(e=new l.Qd("REGISTER.REQUEST.BUTTON",{color:"primary"},()=>{this.requestDone(this.request.emailFormControl.value)}),e.disabled=!this.request||!this.request.emailFormControl.valid),"reset-password"===this.state&&(e=new l.Qd("REGISTER.RESET.BUTTON",{color:"primary"},()=>this.newPassword()),e.disabled=!this.resetPassword||!this.resetPassword.buttonCheck()),("done"===this.state||"done-reset"===this.state)&&this.registerDone&&(e=new l.Qd("done"===this.state?"REGISTER.DONE.ACTIVATE":"NEXT",{color:"primary"},()=>this.registerDone.activate(this.registerDone.keyInput)),e.disabled=!this.registerDone||!this.registerDone.keyInput.trim()),e}canRegister(){return this.configService.instant("register.local",!0)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.xD),t.Y36(p.F),t.Y36(f.lw),t.Y36(d.F0),t.Y36(c.fA),t.Y36(l.VL),t.Y36(l.eB),t.Y36(t.sBO),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["es-register-page"]],viewQuery:function(i,s){if(1&i&&(t.Gf(z,5),t.Gf(W,5),t.Gf($,5),t.Gf(tt,5)),2&i){let a;t.iGM(a=t.CRH())&&(s.registerForm=a.first),t.iGM(a=t.CRH())&&(s.registerDone=a.first),t.iGM(a=t.CRH())&&(s.request=a.first),t.iGM(a=t.CRH())&&(s.resetPassword=a.first)}},decls:2,vars:2,consts:[[4,"ngIf"],["role","main","esSkipTarget","MAIN_CONTENT","avatar","assets/images/app-icon.svg","width","normal","height","large",3,"buttons","title","subtitle","isCancelable","onCancel",4,"ngIf"],["role","main","esSkipTarget","MAIN_CONTENT","avatar","assets/images/app-icon.svg","width","normal","height","large",3,"buttons","title","subtitle","isCancelable","onCancel"],[1,"register-content","card-content-padding"],["esTitle","",1,"cdk-visually-hidden"],[3,"onStateChanged","onRegisterDone"],["registerForm",""],[3,"inputState","onStateChanged","onModify",4,"ngIf"],[3,"onStateChanged","onDone",4,"ngIf"],[3,"params","onStateChanged",4,"ngIf"],["class","register",4,"ngIf"],[3,"inputState","onStateChanged","onModify"],["registerDone",""],[3,"onStateChanged","onDone"],["request",""],[3,"params","onStateChanged"],["resetPassword",""],[1,"register"],["mat-button","","color","primary",3,"click"],["esIcon","arrow_forward"]],template:function(i,s){1&i&&(t.YNc(0,et,1,0,"es-global-progress",0),t.YNc(1,ot,13,17,"es-card",1)),2&i&&(t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading))},dependencies:[M.A,f.O5,c.ar,v.d,D.lW,h.P,_.M,G,X,j,V,S.X$],changeDetection:0})}return n})();const at=[{path:"",component:w},{path:":status",component:w},{path:":status/:key",component:w},{path:":status/:key/:email",component:w}];let lt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(at),d.Bz]})}return n})(),ct=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[m.m,lt]})}return n})()},19374:(N,E,r)=>{r.d(E,{P:()=>c});var m=r(65879),d=r(79826);let c=(()=>{class l{constructor(t,p){this.elementRef=t,this.skipNav=p}ngOnInit(){this.skipNav.register(this.target,this.elementRef.nativeElement)}ngOnDestroy(){this.skipNav.unregister(this.target)}static#t=this.\u0275fac=function(p){return new(p||l)(m.Y36(m.SBq),m.Y36(d.g))};static#e=this.\u0275dir=m.lG2({type:l,selectors:[["","esSkipTarget",""]],inputs:{target:["esSkipTarget","target"]}})}return l})()},66848:(N,E,r)=>{r.d(E,{M:()=>M});var m=r(72079),d=r(12994),c=r(77504),l=r(96124),g=r(65879),t=r(6593),p=r(52081),f=r(81771);let M=(()=>{class v{constructor(h,_,o,x){this.elementRef=h,this.documentTitle=_,this.translations=o,this.pageHeading=new m.xQ,this.titleOverride=new m.xQ,this.pageTitle=new m.xQ,this.mutationObserver=new MutationObserver(()=>this.updatePageHeading()),this.mutationObserver.observe(this.elementRef.nativeElement,{characterData:!0,subtree:!0}),(0,d.aj)([this.pageHeading,this.titleOverride]).pipe((0,l.U)(([O,T])=>T??O)).subscribe(this.pageTitle),(0,d.aj)([(0,c.D)({branding:x.get("branding"),siteTitle:x.get("siteTitle","edu-sharing")}),this.pageTitle,this.translations.waitForInit()]).subscribe(([O,T])=>this.updateTitle(O,T))}ngOnChanges(h){if(h.esTitle){const _=h.esTitle.currentValue;this.titleOverride.next(""===_?null:_??"")}}ngOnInit(){this.updatePageHeading()}ngOnDestroy(){this.mutationObserver.disconnect()}updatePageHeading(){this.pageHeading.next(this.elementRef.nativeElement.textContent)}updateTitle(h,_){this.documentTitle.setTitle(_?h.branding?_+" - "+h.siteTitle:_:h.siteTitle)}static#t=this.\u0275fac=function(_){return new(_||v)(g.Y36(g.SBq),g.Y36(t.Dx),g.Y36(p.fA),g.Y36(f.eB))};static#e=this.\u0275dir=g.lG2({type:v,selectors:[["","esTitle",""]],inputs:{esTitle:"esTitle"},features:[g.TTD]})}return v})()}}]);