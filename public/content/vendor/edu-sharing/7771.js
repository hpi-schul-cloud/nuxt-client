"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[7771],{47771:(I,c,t)=>{t.r(c),t.d(c,{SendFeedbackDialogComponent:()=>F,SendFeedbackDialogModule:()=>C});var l=t(50555),m=t(2962),h=t(15861),f=t(88419),u=t(75810),d=t(81771),r=t(96931),g=t(53461),s=t(65879),v=t(91486),y=t(22941),S=t(48098),p=t(1189),E=t(42068);let F=(()=>{class o{constructor(e,a,n,i,R,b){this.data=e,this.dialogRef=a,this.route=n,this.feedbackService=i,this.toast=R,this.mdsEditorInstance=b,this.dialogRef.patchState({isLoading:!0})}ngOnInit(){this.initButtons(),this.mdsEditorInstance.initWithoutNodes("material_feedback",void 0,d.u6.HOME_REPOSITORY,"form",{}),this.mdsEditorInstance.mdsInflated.pipe((0,f.P)(),(0,u.g)(0)).subscribe(()=>{this.dialogRef.patchState({isLoading:!1})})}initButtons(){const e=[new d.Qd("CANCEL",{color:"standard"},()=>this.dialogRef.close(null)),new d.Qd("FEEDBACK.SAVE",{color:"primary"},()=>this.addFeedback())];this.dialogRef.patchConfig({buttons:e}),this.mdsEditorInstance.observeCanSave().subscribe(a=>e[1].disabled=!a)}addFeedback(){var e=this;return(0,h.Z)(function*(){const a=yield e.mdsEditorInstance.save();e.dialogRef.patchState({isLoading:!0});try{yield e.feedbackService.addFeedback({repository:d.u6.HOME_REPOSITORY,node:e.data.node.ref.id,body:a}).toPromise()}catch(i){e.toast.error(i)}e.dialogRef.close(),(yield e.route.queryParams.toPromise()).feedbackClose&&window.close()})()}static#t=this.\u0275fac=function(a){return new(a||o)(s.Y36(g.W9),s.Y36(v.Y),s.Y36(y.gz),s.Y36(S.Xe),s.Y36(p.F),s.Y36(r.t))};static#e=this.\u0275cmp=s.Xpm({type:o,selectors:[["es-send-feedback-dialog"]],features:[s._Bn([r.t])],decls:1,vars:0,template:function(a,n){1&a&&s._UZ(0,"es-mds-editor-core")},dependencies:[E._]})}return o})(),C=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=s.oAB({type:o});static#s=this.\u0275inj=s.cJS({imports:[l.m,m.x]})}return o})()}}]);