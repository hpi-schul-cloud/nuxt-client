"use strict";(self.webpackChunkapp_as_web_component=self.webpackChunkapp_as_web_component||[]).push([[8448],{48448:(S,i,a)=>{a.r(i),a.d(i,{NodeTemplateDialogComponent:()=>P,NodeTemplateDialogModule:()=>E});var c=a(50555),p=a(2962),g=a(15861),s=a(81771),m=a(53461),e=a(65879),f=a(91486),u=a(1189),T=a(96814),r=a(56223),h=a(82599),C=a(87548),M=a(71365);const v=["mds"];function A(d,x){1&d&&(e.TgZ(0,"div",7)(1,"div",8),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&d&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"WORKSPACE.NODE_TEMPLATE.STATUS_DISABLED")," "))}const O=function(){return{}};let P=(()=>{class d{constructor(t,n,o,l){this.data=t,this.dialogRef=n,this.nodeService=o,this.toast=l,this.dialogRef.patchState({isLoading:!0})}ngOnInit(){this.dialogRef.patchConfig({buttons:[new s.Qd("CANCEL",{color:"standard"},()=>this.dialogRef.close(null)),new s.Qd("SAVE",{color:"primary"},()=>this.save())]}),this.initNode()}initNode(){var t=this;return(0,g.Z)(function*(){const n=t.data.node.ref.id,o=yield t.nodeService.getNodeTemplate(n).toPromise();t.templateNode=o.node,t.enabled=o.enabled,o.enabled||(yield t.nodeService.getNodeMetadata(n).toPromise()).node.aspects.includes(s.u6.CCM_ASPECT_METADATA_PRESETTING)||(t.enabled=!0),t.dialogRef.patchState({isLoading:!1}),setTimeout(()=>t.mdsRef.loadMds(!0))})()}save(){var t=this;return(0,g.Z)(function*(){const n=t.enabled?yield t.mdsRef.getValues():{};t.dialogRef.patchState({isLoading:!0}),t.nodeService.setNodeTemplate(t.data.node.ref.id,t.enabled,n).subscribe(()=>{t.dialogRef.close(null),t.toast.toast("WORKSPACE.TOAST.METADATA_TEMPLATE_UPDATED")},o=>{t.toast.error(o)})})()}static#e=this.\u0275fac=function(n){return new(n||d)(e.Y36(m.W9),e.Y36(f.Y),e.Y36(s.xE),e.Y36(u.F))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["es-node-template-dialog"]],viewQuery:function(n,o){if(1&n&&e.Gf(v,5),2&n){let l;e.iGM(l=e.CRH())&&(o.mdsRef=l.first)}},decls:13,vars:15,consts:[[1,"enable-toggle"],[3,"ngModel","ngModelChange"],[1,"node-status"],[1,"template-content"],[3,"groupId","embedded","editorMode","currentValues"],["mds",""],["class","template-disabled",4,"ngIf"],[1,"template-disabled"],["data-i18n","[html]content.body",1,"disabled-info"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"mat-slide-toggle",1),e.NdJ("ngModelChange",function(N){return o.enabled=N}),e.qZA(),e.TgZ(2,"div",2)(3,"strong"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",3),e._UZ(10,"es-mds-editor-wrapper",4,5),e.YNc(12,A,4,3,"div",6),e.qZA()),2&n){let l;e.xp6(1),e.Q6J("ngModel",o.enabled),e.xp6(3),e.Oqu(e.lcZ(5,10,"WORKSPACE.NODE_TEMPLATE.STATUS")),e.xp6(3),e.Oqu(e.lcZ(8,12,"WORKSPACE.NODE_TEMPLATE.STATUS_DESKRIPTION")),e.xp6(3),e.ekj("display-none",!o.enabled),e.Q6J("groupId","io_template")("embedded",!0)("editorMode","nodes")("currentValues",null!==(l=null==o.templateNode?null:o.templateNode.properties)&&void 0!==l?l:e.DdM(14,O)),e.xp6(2),e.Q6J("ngIf",!o.enabled)}},dependencies:[T.O5,r.JJ,r.On,h.Rr,C.o,M.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.template-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center}.template-disabled[_ngcontent-%COMP%]   .disabled-info[_ngcontent-%COMP%]{padding:0 10%;text-align:center;font-size:140%;color:var(--textLight)}.enable-toggle[_ngcontent-%COMP%]{margin:-25px;padding:20px 25px;background:#eee;border-bottom:1px solid #ccc;display:flex;flex-direction:row-reverse}.enable-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:right;margin-right:-8px}.enable-toggle[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.25px}.node-status[_ngcontent-%COMP%]{padding-right:80px}@media screen and (max-width: 500px){.node-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.node-status[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:400;letter-spacing:normal}}"]})}return d})(),E=(()=>{class d{static#e=this.\u0275fac=function(n){return new(n||d)};static#t=this.\u0275mod=e.oAB({type:d});static#n=this.\u0275inj=e.cJS({imports:[c.m,p.x]})}return d})()}}]);