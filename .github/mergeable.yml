version: 2
mergeable:
  - when: pull_request.*
    validate:
      - do: title
        must_include:
          regex: "(((SC|VUE|OPS)-[0-9]+|Quickfix) - .*|Bump .* from.* to .*|Hotfix ([0-9]+\\.){2}[0-9]+.*)"
          message: "The title must follow the schema: '(TICKET-ID|Quickfix) - [description]' or 'Hotfix 0.0.0'."
      - do: label
        must_exclude:
          regex: "(WIP|is blocked)"
      - do: label
        must_include:
          regex: "(run-e2e-tests)"
          message: "The e2e tests must run. Add label run-e2e-tests to trigger them."
      - do: description
        must_exclude:
          regex: "- [ ] "
          message: "Checklist before merge: are all checkboxes checked?"
  - when: schedule.repository
    validate:
      - do: stale
        days: 20
        type: pull_request
    pass:
      - do: comment
        payload:
          body: This is old. Is it still relevant?
